<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img class="yflip" src="html/1504.06288-1_1.png"/><br/>
The&#160;stable&#160;regularity&#160;lemma&#160;revisited<br/>
Maryanthe&#160;Malliaris∗<br/>
Anand&#160;Pillay†<br/>
University&#160;of&#160;Chicago<br/>
University&#160;of&#160;Notre&#160;Dame<br/>
August&#160;20,&#160;2018<br/>
Abstract<br/>
We&#160;prove&#160;a&#160;regularity&#160;lemma&#160;with&#160;respect&#160;to&#160;arbitrary&#160;Keisler&#160;mea-<br/>
sures&#160;µ&#160;on&#160;V&#160;,&#160;ν&#160;on&#160;W&#160;where&#160;the&#160;bipartite&#160;graph&#160;(V,&#160;W,&#160;R)&#160;is&#160;definable<br/>in&#160;a&#160;saturated&#160;structure&#160;¯<br/>
M&#160;and&#160;the&#160;formula&#160;R(x,&#160;y)&#160;is&#160;stable.&#160;The<br/>
proof&#160;is&#160;rather&#160;quick,&#160;making&#160;use&#160;of&#160;local&#160;stability&#160;theory.&#160;The&#160;special<br/>case&#160;where&#160;(V,&#160;W,&#160;R)&#160;is&#160;pseudofinite,&#160;µ,&#160;ν&#160;are&#160;the&#160;counting&#160;measures,<br/>and&#160;¯<br/>
M&#160;is&#160;suitably&#160;chosen&#160;(for&#160;example&#160;a&#160;nonstandard&#160;model&#160;of&#160;set<br/>
theory),&#160;yields&#160;the&#160;stable&#160;regularity&#160;theorem&#160;of&#160;<a href="1504.06288s.html#6">[3]</a>,&#160;though&#160;without<br/>explicit&#160;bounds&#160;or&#160;equitability.<br/>
1<br/>
Introduction<br/>
We&#160;refer&#160;to&#160;<a href="1504.06288s.html#6">[3]&#160;</a>for&#160;a&#160;discussion&#160;of&#160;Szemer´edi’s&#160;Regularity&#160;Lemma&#160;and&#160;various<br/>elaborations&#160;on&#160;it.&#160;Our&#160;context&#160;is&#160;a&#160;saturated&#160;model&#160;¯<br/>
M&#160;of&#160;an&#160;arbitrary<br/>
theory,&#160;and&#160;a&#160;definable&#160;(with&#160;parameters)&#160;bipartite&#160;graph&#160;(V,&#160;W,&#160;R)&#160;where<br/>
<a href="http://arxiv.org/abs/1504.06288v2">arXiv:1504.06288v2 &#160;[math.LO] &#160;12 May 2015</a><br/>
the&#160;edge&#160;relation&#160;R(x,&#160;y)&#160;is&#160;stable.&#160;Stability&#160;of&#160;R&#160;means&#160;that&#160;for&#160;some&#160;k<br/>there&#160;do&#160;not&#160;exist&#160;ai&#160;∈&#160;V&#160;,&#160;bi&#160;∈&#160;W&#160;for&#160;i&#160;≤&#160;k&#160;such&#160;that&#160;R(ai,&#160;bj)&#160;holds&#160;iff&#160;i&#160;≤&#160;j.<br/>We&#160;also&#160;have&#160;global&#160;Keisler&#160;measures&#160;µx&#160;on&#160;V&#160;and&#160;νy&#160;on&#160;W&#160;(i.e.&#160;finitely<br/>additive&#160;probability&#160;measures&#160;on&#160;the&#160;Boolean&#160;algebras&#160;of&#160;definable&#160;subsets&#160;of<br/>V,&#160;W&#160;respectively).&#160;By&#160;a&#160;∆<i>-formula&#160;</i>we&#160;mean&#160;a&#160;finite&#160;Boolean&#160;combination<br/>of&#160;things&#160;like&#160;R(x,&#160;b)&#160;and&#160;x&#160;=&#160;a,&#160;and&#160;by&#160;a&#160;∆∗(x,&#160;y)-formula&#160;we&#160;mean&#160;a&#160;finite<br/>Boolean&#160;combination&#160;of&#160;things&#160;like&#160;R(a,&#160;y)&#160;and&#160;y&#160;=&#160;b.&#160;We&#160;don’t&#160;actually<br/>
∗Partially&#160;supported&#160;by&#160;NSF&#160;grant&#160;DMS-1300634&#160;and&#160;a&#160;Sloan&#160;fellowship<br/>
†Partially&#160;supported&#160;by&#160;NSF&#160;grant&#160;DMS-1360702<br/>
1<br/>
<hr/>
<a name=2></a><img class="yflip" src="html/1504.06288-2_1.png"/><br/>
need&#160;the&#160;=&#160;formulas&#160;but&#160;it&#160;is&#160;convenient&#160;to&#160;include&#160;them.&#160;By&#160;convention&#160;the<br/>x&#160;variable&#160;is&#160;restricted&#160;to&#160;V&#160;and&#160;y&#160;variable&#160;to&#160;W&#160;so&#160;by&#160;definition&#160;a&#160;∆-formula<br/>(∆∗-formula)&#160;defines&#160;a&#160;subset&#160;of&#160;V&#160;(W&#160;).<br/>
Theorem&#160;1.1.&#160;<i>In&#160;the&#160;context&#160;above,&#160;namely&#160;a&#160;definable&#160;graph&#160;</i>(V,&#160;W,&#160;R)&#160;<i>in<br/>a&#160;saturated&#160;structure&#160;</i>¯<br/>
M&#160;<i>,&#160;where&#160;</i>R(x,&#160;y)&#160;<i>is&#160;stable,&#160;and&#160;Keisler&#160;measures&#160;</i>µ&#160;<i>on</i><br/>
V&#160;<i>,&#160;</i>ν&#160;<i>on&#160;</i>W&#160;<i>,&#160;we&#160;have&#160;the&#160;following:&#160;Given&#160;</i>ǫ&#160;&gt;&#160;0<i>,&#160;we&#160;can&#160;partition&#160;</i>V&#160;<i>into<br/>finitely&#160;many&#160;definable&#160;sets&#160;</i>V1,&#160;..,&#160;Vm&#160;<i>each&#160;defined&#160;by&#160;a&#160;</i>∆<i>-formula,&#160;and&#160;also<br/>partition&#160;</i>W&#160;<i>into&#160;finitely&#160;many&#160;</i>W1,&#160;..,&#160;Wm&#160;<i>each&#160;defined&#160;by&#160;a&#160;</i>∆∗<i>-formula,&#160;such<br/>that&#160;for&#160;each&#160;</i>Vi,&#160;Wj&#160;<i>exactly&#160;one&#160;of&#160;the&#160;following&#160;holds:<br/>(i)&#160;for&#160;all&#160;</i>a&#160;∈&#160;Vi&#160;<i>outside&#160;a&#160;set&#160;of&#160;</i>µ&#160;<i>measure&#160;</i>≤&#160;ǫµ(Vi)<i>,&#160;for&#160;all&#160;</i>b&#160;∈&#160;Wj&#160;<i>outside<br/>a&#160;set&#160;of&#160;</i>ν&#160;<i>measure&#160;</i>≤&#160;ǫν(Wj)<i>,&#160;we&#160;have&#160;</i>R(a,&#160;b)<i>,&#160;AND&#160;DUALLY&#160;for&#160;all&#160;</i>b&#160;∈&#160;Wj<br/><i>outside&#160;a&#160;set&#160;of&#160;</i>ν&#160;<i>measure&#160;</i>≤&#160;ǫν(Wj)<i>,&#160;for&#160;all&#160;</i>a&#160;∈&#160;Vi&#160;<i>outside&#160;a&#160;set&#160;of&#160;</i>µ&#160;<i>measure<br/></i>≤&#160;ǫµ(Vi)<i>,&#160;we&#160;have&#160;</i>R(a,&#160;b)&#160;<i>holds,&#160;or<br/>(ii)&#160;for&#160;all&#160;</i>a&#160;∈&#160;Vi&#160;<i>outside&#160;a&#160;set&#160;of&#160;</i>µ&#160;<i>measure&#160;</i>≤&#160;ǫµ(Vi)<i>,&#160;for&#160;all&#160;</i>b&#160;∈&#160;Wj&#160;<i>outside<br/>a&#160;subset&#160;of&#160;</i>ν&#160;<i>measure&#160;</i>≤&#160;ǫν(Wj)<i>,&#160;we&#160;have&#160;</i>¬R(a,&#160;b)<i>,&#160;AND&#160;DUALLY&#160;for&#160;all<br/></i>b&#160;∈&#160;Wj&#160;<i>outside&#160;a&#160;subset&#160;of&#160;</i>ν&#160;<i>measure&#160;</i>≤&#160;ǫν(Wj)<i>,&#160;for&#160;all&#160;</i>a&#160;∈&#160;Vi&#160;<i>outside&#160;a&#160;set<br/>of&#160;</i>µ&#160;<i>measure&#160;</i>≤&#160;ǫµ(Vi)<i>,&#160;</i>¬R(a,&#160;b)<i>.</i><br/>
Remark&#160;1.2.&#160;<i>We&#160;obtain&#160;</i>δ<i>-regularity&#160;for&#160;suitable&#160;</i>δ&#160;<i>and&#160;in&#160;a&#160;suitable&#160;sense,<br/>of&#160;each&#160;of&#160;the&#160;</i>(Vi,&#160;Wj,&#160;R|(Vi&#160;×Wj))&#160;<i>(as&#160;essentially&#160;in&#160;Claim&#160;5.17&#160;of&#160;<a href="1504.06288s.html#6">[3]</a></i><i>):&#160;Take</i><br/>
√<br/>
δ&#160;=<br/>
2ǫ<i>,&#160;and&#160;suppose&#160;we&#160;are&#160;in&#160;case&#160;(i)&#160;of&#160;the&#160;conclusion&#160;of&#160;the&#160;theorem.</i><br/>
<i>Suppose&#160;</i>A&#160;⊆&#160;Vi&#160;<i>is&#160;definable&#160;(not&#160;necessarily&#160;by&#160;a&#160;</i>∆<i>-formula),&#160;and&#160;</i>B&#160;⊆&#160;Wj&#160;<i>is<br/>definable&#160;(not&#160;necessarily&#160;by&#160;a&#160;</i>∆∗<i>-formula),&#160;with&#160;</i>µ(A)&#160;≥&#160;δµ(Vi)&#160;<i>and&#160;</i>ν(B)&#160;≥<br/>δν(Wj)<i>.&#160;Then&#160;for&#160;all&#160;</i>a&#160;∈&#160;A&#160;<i>outside&#160;a&#160;set&#160;of&#160;</i>µ<i>-measure&#160;</i>≤&#160;δµ(A)<i>,&#160;for&#160;all<br/></i>b&#160;∈&#160;B&#160;<i>outside&#160;a&#160;set&#160;of&#160;</i>ν<i>-measure&#160;</i>≤&#160;δν(B)&#160;<i>we&#160;have&#160;</i>R(a,&#160;b)<i>.</i><br/>
Remark&#160;1.3.&#160;<i>We&#160;also&#160;recover&#160;the&#160;regularity&#160;lemma&#160;for&#160;finite&#160;stable&#160;graphs&#160;in<br/>the&#160;sense&#160;of&#160;<a href="1504.06288s.html#6">[3]&#160;</a></i><i>by&#160;considering&#160;the&#160;counting&#160;measure&#160;on&#160;pseudofinite&#160;graphs.<br/>(But&#160;without&#160;explicit&#160;bounds&#160;or&#160;equitability&#160;of&#160;the&#160;partition.)</i><br/>
<i>Explanation.&#160;</i>Let&#160;(Vi,&#160;Wi,&#160;Ri)&#160;be&#160;a&#160;family&#160;of&#160;finite&#160;graphs&#160;where&#160;the&#160;relation&#160;Ri<br/>does&#160;not&#160;have&#160;the&#160;k-order&#160;property&#160;for&#160;fixed&#160;k.&#160;Take&#160;an&#160;infinite&#160;ultraproduct,<br/>to&#160;obtain&#160;a&#160;definable&#160;nonstandard&#160;finite&#160;graph&#160;(V,&#160;W,&#160;R)&#160;in&#160;a&#160;(saturated)<br/>nonstandard&#160;model&#160;of&#160;set&#160;theory&#160;¯<br/>
M&#160;.&#160;Then&#160;R(x,&#160;y)&#160;is&#160;stable.&#160;Let&#160;µ&#160;be&#160;the<br/>
counting&#160;measure&#160;on&#160;V&#160;,&#160;namely&#160;for&#160;definable&#160;(in&#160;¯<br/>
M)&#160;A&#160;⊆&#160;V&#160;,&#160;define&#160;µ(A)<br/>
to&#160;be&#160;the&#160;standard&#160;part&#160;of&#160;|A|/|V&#160;|,&#160;and&#160;likewise&#160;for&#160;ν&#160;on&#160;W&#160;.&#160;Then&#160;µ,&#160;ν<br/>are&#160;global&#160;Keisler&#160;measures&#160;and&#160;we&#160;can&#160;apply&#160;the&#160;theorem.&#160;Note&#160;that&#160;the<br/>definable&#160;sets&#160;in&#160;¯<br/>
M&#160;are&#160;the&#160;internal&#160;sets&#160;in&#160;the&#160;sense&#160;of&#160;nonstandard&#160;analysis,<br/>
2<br/>
<hr/>
<a name=3></a>so&#160;the&#160;standard&#160;compactness&#160;arguments&#160;give&#160;regularity&#160;in&#160;the&#160;finite&#160;situation<br/>with&#160;respect&#160;to&#160;arbitrary&#160;subsets&#160;(remembering&#160;the&#160;parenthesis).<br/>
Our&#160;model&#160;theory&#160;notation&#160;is&#160;standard.&#160;Stability&#160;theory&#160;is&#160;due&#160;to&#160;Shelah<br/>and&#160;the&#160;basic&#160;reference&#160;is&#160;<a href="1504.06288s.html#6">[5].&#160;</a>For&#160;the&#160;purposes&#160;of&#160;the&#160;current&#160;paper&#160;it&#160;is<br/>convenient&#160;to&#160;refer&#160;to&#160;Chapter&#160;1&#160;of&#160;<a href="1504.06288s.html#6">[4].&#160;</a>We&#160;will&#160;be&#160;in&#160;particular&#160;making&#160;use<br/>of&#160;“local&#160;stability&#160;theory”&#160;namely&#160;the&#160;theory&#160;of&#160;forking&#160;for&#160;complete&#160;∆-type<br/>p(x)&#160;where&#160;∆&#160;is&#160;a&#160;finite&#160;set&#160;of&#160;stable&#160;formulas&#160;φ(x,&#160;y),&#160;and&#160;where&#160;a&#160;complete<br/>∆-type&#160;over&#160;a&#160;model&#160;M&#160;is&#160;given&#160;(axiomatized)&#160;by&#160;a&#160;maximal&#160;consistent&#160;set&#160;of<br/>formulas&#160;of&#160;the&#160;form&#160;φ(x,&#160;b),&#160;¬φ(x,&#160;b)&#160;for&#160;φ(x,&#160;y)&#160;∈&#160;∆&#160;and&#160;b&#160;∈&#160;M.&#160;The&#160;∆-rank<br/>refers&#160;to&#160;R∆(−)&#160;as&#160;in&#160;Section&#160;1.3&#160;of&#160;<a href="1504.06288s.html#6">[4],&#160;</a>which&#160;is&#160;denoted&#160;R(−,&#160;∆,&#160;ω)&#160;in&#160;<a href="1504.06288s.html#6">[5].<br/></a>By&#160;a&#160;∆-formula&#160;we&#160;mean&#160;a&#160;finite&#160;Boolean&#160;combination&#160;of&#160;formulas&#160;φ(x,&#160;b)&#160;for<br/>φ&#160;∈&#160;∆.&#160;Recall&#160;that&#160;a&#160;formula&#160;φ(x,&#160;b)&#160;divides&#160;over&#160;A&#160;if&#160;there&#160;an&#160;A-indiscernible<br/>sequence&#160;b&#160;=&#160;b0,&#160;b1,&#160;b2...&#160;such&#160;that&#160;{φ(x,&#160;bi)&#160;:&#160;i&#160;&lt;&#160;ω}&#160;is&#160;inconsistent.&#160;As&#160;in<br/>this&#160;context&#160;we&#160;will&#160;be&#160;concerned&#160;with&#160;stable&#160;formulas,&#160;we&#160;use&#160;the&#160;expression<br/>“forking”&#160;to&#160;mean&#160;dividing.<br/>
Keisler&#160;measures&#160;are&#160;of&#160;course&#160;important&#160;in&#160;this&#160;paper.&#160;If&#160;¯<br/>
M&#160;is&#160;a&#160;saturated<br/>
model&#160;and&#160;V&#160;a&#160;sort,&#160;a&#160;Keisler&#160;measure&#160;µ&#160;on&#160;V&#160;is&#160;a&#160;finitely&#160;additive&#160;probability<br/>measure&#160;on&#160;the&#160;Boolean&#160;algebra&#160;of&#160;definable&#160;(with&#160;parameters)&#160;subsets&#160;of&#160;V&#160;.<br/>If&#160;we&#160;are&#160;only&#160;concerned&#160;with&#160;subsets&#160;definable&#160;over&#160;M&#160;we&#160;call&#160;µ&#160;a&#160;Keisler<br/>measure&#160;on&#160;V&#160;over&#160;M.&#160;If&#160;∆&#160;is&#160;a&#160;collection&#160;of&#160;L-formulas&#160;φ(x,&#160;y)&#160;(x&#160;fixed&#160;of<br/>sort&#160;V&#160;,&#160;y&#160;arbitrary),&#160;we&#160;can&#160;restrict&#160;µ&#160;to&#160;∆&#160;formulas&#160;and&#160;call&#160;it&#160;µ|∆.&#160;Likewise<br/>µ|(∆,&#160;M)&#160;is&#160;the&#160;restriction&#160;of&#160;µ&#160;to&#160;∆-formulas&#160;over&#160;M.&#160;We&#160;will&#160;use&#160;freely&#160;facts<br/>(from&#160;<a href="1504.06288s.html#6">[2])&#160;</a>such&#160;that&#160;if&#160;µ&#160;is&#160;a&#160;global&#160;Keisler&#160;measure&#160;on&#160;V&#160;say,&#160;then&#160;for&#160;any<br/>type-definable&#160;subset&#160;X&#160;of&#160;V&#160;,&#160;type-defined&#160;over&#160;a&#160;small&#160;set&#160;of&#160;parameters<br/>(equivalently&#160;any&#160;partial&#160;type&#160;Σ&#160;over&#160;a&#160;small&#160;set&#160;of&#160;parameters),&#160;µ(X)&#160;is<br/>defined&#160;and&#160;is&#160;approximated&#160;from&#160;above&#160;by&#160;the&#160;µ-&#160;measure&#160;of&#160;definable&#160;sets<br/>(formulas&#160;in&#160;Σ).<br/>
We&#160;depend&#160;somewhat&#160;on&#160;Keisler’s&#160;seminal&#160;paper&#160;<a href="1504.06288s.html#6">[2],&#160;</a>which&#160;is&#160;very&#160;much<br/>
concerned&#160;with&#160;Keisler&#160;measures&#160;µ|∆&#160;for&#160;∆&#160;a&#160;finite&#160;set&#160;of&#160;stable&#160;formulas.&#160;A<br/>key&#160;observation&#160;(Lemma&#160;1.7&#160;of&#160;<a href="1504.06288s.html#6">[2])</a>,&#160;is&#160;that&#160;such&#160;µ|∆&#160;is&#160;a&#160;weighted&#160;sum&#160;of<br/>complete&#160;∆-types&#160;(the&#160;proof&#160;of&#160;which&#160;is&#160;more&#160;or&#160;less&#160;repeated&#160;in&#160;Lemma&#160;2.1<br/>in&#160;the&#160;next&#160;section).<br/>
We&#160;will&#160;need&#160;the&#160;following,&#160;which&#160;after&#160;a&#160;suitable&#160;translation&#160;is&#160;Proposi-<br/>
tion&#160;1.20&#160;of&#160;<a href="1504.06288s.html#6">[2]:</a><br/>
Fact&#160;1.4.&#160;<i>Suppose&#160;</i>∆&#160;<i>is&#160;a&#160;finite&#160;set&#160;of&#160;stable&#160;formulas&#160;and&#160;</i>µx&#160;<i>is&#160;a&#160;global<br/>Keisler&#160;measure.&#160;Then&#160;there&#160;is&#160;a&#160;small&#160;model&#160;</i>M&#160;<i>such&#160;that&#160;</i>µ|∆&#160;<i>does&#160;not&#160;fork<br/>over&#160;</i>M&#160;<i>in&#160;the&#160;sense&#160;that&#160;each&#160;</i>∆<i>-formula&#160;</i>ψ(x)&#160;<i>of&#160;positive&#160;</i>µ<i>-measure&#160;does</i><br/>
3<br/>
<hr/>
<a name=4></a><i>not&#160;fork&#160;over&#160;</i>M<i>.</i><br/>
In&#160;fact&#160;µ|∆&#160;will&#160;be&#160;the&#160;unique&#160;nonforking&#160;extension&#160;of&#160;µ|(∆,&#160;M),&#160;so&#160;µ|∆<br/>
will&#160;be&#160;a&#160;“generically&#160;stable”&#160;measure&#160;in&#160;the&#160;sense&#160;of&#160;<a href="1504.06288s.html#6">[1].&#160;</a>But&#160;all&#160;we&#160;will<br/>really&#160;need&#160;is&#160;the<br/>
Fact&#160;1.5.&#160;<i>A&#160;complete&#160;</i>∆<i>-type&#160;over&#160;a&#160;model&#160;</i>M&#160;<i>has&#160;a&#160;unique&#160;nonforking&#160;ex-<br/>tension&#160;to&#160;a&#160;global&#160;complete&#160;</i>∆<i>-type.</i><br/>
As&#160;in&#160;the&#160;statement&#160;of&#160;the&#160;theorem&#160;we&#160;will&#160;take&#160;∆&#160;to&#160;be&#160;{R(x,&#160;y),&#160;x&#160;=&#160;z}<br/>and&#160;likewise&#160;for&#160;∆∗.<br/>
<i>Acknowledgement.&#160;</i>Thanks&#160;to&#160;Sergei&#160;Starchenko&#160;for&#160;comments&#160;on&#160;a&#160;first&#160;draft<br/>of&#160;the&#160;paper.<br/>
2<br/>
Proof&#160;of&#160;Theorem&#160;1.1<br/>
First&#160;by&#160;Fact&#160;1.4,&#160;let&#160;M&#160;be&#160;a&#160;small&#160;model&#160;such&#160;that&#160;(V,&#160;W,&#160;R)&#160;is&#160;definable<br/>over&#160;M,&#160;and&#160;both&#160;µ|∆,&#160;ν|∆∗&#160;do&#160;not&#160;fork&#160;over&#160;M.<br/>
Lemma&#160;2.1.&#160;<i>Given&#160;</i>ǫ&#160;&gt;&#160;0<i>,&#160;we&#160;can&#160;write&#160;</i>V&#160;<i>as&#160;a&#160;disjoint&#160;union&#160;of&#160;</i>∆<i>-formulas<br/>(restricted&#160;to&#160;</i>V&#160;<i>)&#160;over&#160;</i>M<i>,&#160;</i>V&#160;=&#160;V1&#160;∪&#160;...&#160;∪&#160;Vm<i>,&#160;such&#160;that&#160;for&#160;each&#160;</i>i&#160;<i>there&#160;is&#160;a<br/>complete&#160;</i>∆<i>-type&#160;</i>pi&#160;<i>over&#160;</i>M&#160;<i>such&#160;that&#160;</i>µ(pi)&#160;&gt;&#160;0<i>,&#160;</i>Vi&#160;∈&#160;pi&#160;<i>(or&#160;</i>pi&#160;⊆&#160;Vi<i>)&#160;and<br/></i>µ(Vi&#160;\&#160;pi)&#160;≤&#160;ǫµ(Vi)<i>.</i><br/>
<i>Proof.&#160;</i>By&#160;induction&#160;on&#160;R∆(V&#160;)&#160;(which&#160;is&#160;a&#160;finite&#160;number).&#160;If&#160;it&#160;is&#160;0,&#160;then<br/>V&#160;is&#160;finite&#160;and&#160;consists&#160;of&#160;finitely&#160;many&#160;types,&#160;all&#160;realized&#160;in&#160;M,&#160;so&#160;there<br/>is&#160;nothing&#160;to&#160;do.&#160;Suppose&#160;R∆(V&#160;)&#160;=&#160;n&#160;&gt;&#160;0.&#160;Let&#160;p1,&#160;..,&#160;pk&#160;be&#160;the&#160;complete<br/>∆-types&#160;over&#160;M&#160;of&#160;R∆&#160;=&#160;n.&#160;Let&#160;µ(pi)&#160;=&#160;αi.&#160;We&#160;divide&#160;into&#160;cases.<br/><i>Case&#160;(i).&#160;</i>αi&#160;&gt;&#160;0&#160;for&#160;i&#160;=&#160;1,&#160;..,&#160;k.<br/>Then&#160;we&#160;can&#160;find&#160;Vi&#160;∈&#160;pi&#160;for&#160;i&#160;=&#160;1,&#160;..,&#160;k&#160;such&#160;that&#160;µ(Vi)&#160;≤&#160;αi/(1&#160;−&#160;ǫ)&#160;whereby<br/>µ(Vi&#160;\&#160;pi)&#160;≤&#160;ǫµ(Vi).&#160;We&#160;may&#160;assume&#160;that&#160;the&#160;Vi&#160;are&#160;disjoint.&#160;Let&#160;U&#160;=<br/>V1&#160;∪&#160;..&#160;∪&#160;Vk.&#160;Then&#160;V&#160;\&#160;U&#160;has&#160;∆-rank&#160;&lt;&#160;n&#160;so&#160;we&#160;can&#160;apply&#160;the&#160;induction<br/>hypothesis&#160;to&#160;it,&#160;to&#160;obtain&#160;the&#160;lemma&#160;for&#160;V&#160;.&#160;(Noting&#160;that&#160;if&#160;µ(V&#160;\&#160;U)&#160;=&#160;0<br/>we&#160;can&#160;just&#160;adjoin&#160;it&#160;to&#160;one&#160;of&#160;the&#160;Vi.)<br/>
<i>Case&#160;(ii).&#160;</i>Some&#160;but&#160;not&#160;all&#160;of&#160;the&#160;αi&#160;are&#160;0.<br/>Without&#160;loss&#160;α1,&#160;..αℓ&#160;&gt;&#160;0&#160;and&#160;αj&#160;=&#160;0&#160;for&#160;j&#160;=&#160;ℓ&#160;+&#160;1,&#160;..,&#160;k&#160;where&#160;1&#160;≤&#160;ℓ&#160;&lt;<br/>k.&#160;As&#160;in&#160;Case&#160;(i),&#160;find&#160;pairwise&#160;disjoint&#160;Vi&#160;∈&#160;pi&#160;for&#160;i&#160;=&#160;1,&#160;..,&#160;ℓ,&#160;such&#160;that<br/>
4<br/>
<hr/>
<a name=5></a><img class="yflip" src="html/1504.06288-5_1.png"/><br/>
<img class="yflip" src="html/1504.06288-5_2.png"/><br/>
<img class="yflip" src="html/1504.06288-5_3.png"/><br/>
<img class="yflip" src="html/1504.06288-5_4.png"/><br/>
µ(Vi&#160;\&#160;pi)&#160;≤&#160;µ(Vi).&#160;Now&#160;as&#160;µ(Vj)&#160;=&#160;0&#160;for&#160;j&#160;=&#160;ℓ&#160;+&#160;1,&#160;..,&#160;k&#160;we&#160;can&#160;find&#160;a&#160;∆-<br/>definable&#160;over&#160;M&#160;set&#160;V&#160;′&#160;containing&#160;pℓ+1&#160;∪&#160;...&#160;∪&#160;pk&#160;and&#160;disjoint&#160;from&#160;V1&#160;∪&#160;..&#160;∪&#160;Vℓ<br/>such&#160;that&#160;µ(V&#160;′)&#160;≤&#160;(ǫµ(V1)&#160;−&#160;µ(V1&#160;\&#160;p1))/(1&#160;−&#160;ǫ).&#160;Put&#160;V&#160;′&#160;=&#160;V<br/>
1<br/>
1&#160;∪&#160;V&#160;′.&#160;Then<br/>
µ(V&#160;′<br/>
).&#160;Put&#160;again&#160;U&#160;=&#160;V&#160;′<br/>
1&#160;\&#160;p1)&#160;≤&#160;ǫµ(V&#160;′<br/>
1<br/>
1&#160;∪&#160;V2&#160;∪&#160;...&#160;∪&#160;Vℓ.&#160;Then&#160;V&#160;\&#160;U&#160;has&#160;∆-rank<br/>
&lt;&#160;n&#160;and&#160;we&#160;can&#160;apply&#160;induction.<br/>
<i>Case&#160;(iii).&#160;</i>All&#160;αi&#160;are&#160;0.<br/>By&#160;Lemma&#160;1.7&#160;of&#160;<a href="1504.06288s.html#6">[2],&#160;</a>let&#160;p&#160;be&#160;a&#160;complete&#160;∆-type&#160;over&#160;M&#160;with&#160;µ(p)&#160;&gt;&#160;0.&#160;So<br/>by&#160;our&#160;case&#160;hypothesis,&#160;the&#160;∆-rank&#160;of&#160;p&#160;equals&#160;m&#160;&lt;&#160;n.&#160;Let&#160;W&#160;be&#160;a&#160;formula&#160;in<br/>p&#160;of&#160;∆-rank&#160;m.&#160;So&#160;µ(W&#160;)&#160;&gt;&#160;0&#160;and&#160;by&#160;induction&#160;hypothesis&#160;we&#160;find&#160;complete<br/>∆-types&#160;q1,&#160;..,&#160;qrover&#160;M&#160;of&#160;µ-measure&#160;&gt;&#160;0,&#160;and&#160;pairwise&#160;disjoint&#160;Wi&#160;∈&#160;qi&#160;such<br/>that&#160;W&#160;=&#160;W1&#160;∪&#160;..&#160;∪&#160;Wr&#160;and&#160;µ(Wi&#160;\&#160;qi)&#160;≤&#160;µ(Wi)&#160;for&#160;i&#160;=&#160;1,&#160;..,&#160;r.&#160;From&#160;our&#160;case<br/>hypothesis&#160;we&#160;can&#160;find&#160;a&#160;∆-formula&#160;over&#160;M,&#160;V&#160;′&#160;which&#160;contains&#160;p1∪....∪pk&#160;and<br/>is&#160;disjoint&#160;from&#160;W&#160;such&#160;that&#160;µ(V&#160;′)&#160;≤&#160;(ǫµ(W1)−µ(W1\q1))/(1−ǫ).&#160;Put&#160;W&#160;′&#160;=<br/>
1<br/>
W1&#160;∪&#160;V&#160;′&#160;and&#160;as&#160;above&#160;µ(W&#160;′<br/>
).&#160;Again&#160;let&#160;U&#160;=&#160;W&#160;′<br/>
1&#160;\&#160;q1)&#160;≤&#160;ǫµ(W&#160;′<br/>
1<br/>
1&#160;∪&#160;W2&#160;∪&#160;..&#160;∪&#160;Wr&#160;.<br/>
Then&#160;the&#160;∆-rank&#160;of&#160;V&#160;\&#160;U&#160;is&#160;&lt;&#160;n&#160;so&#160;we&#160;can&#160;apply&#160;induction&#160;to&#160;complete&#160;the<br/>proof&#160;in&#160;case&#160;(iii).<br/>
We&#160;can&#160;do&#160;the&#160;same&#160;thing&#160;for&#160;W&#160;to&#160;write&#160;W&#160;as&#160;a&#160;disjoint&#160;union&#160;of&#160;∆∗-<br/>
definable&#160;(over&#160;M)&#160;sets&#160;such&#160;that&#160;for&#160;each&#160;j&#160;there&#160;is&#160;a&#160;complete&#160;∆∗-type&#160;qj<br/>over&#160;M&#160;such&#160;that&#160;ν(Wj&#160;\&#160;qj)&#160;≤&#160;ǫν(Wj).<br/>
Lemma&#160;2.2.&#160;<i>For&#160;each&#160;</i>i&#160;=&#160;1,&#160;..,&#160;m&#160;<i>and&#160;</i>j&#160;=&#160;1,&#160;..,&#160;n<i>,&#160;we&#160;have&#160;(i)&#160;or&#160;(ii)&#160;of<br/>Theorem&#160;1.1</i><br/>
<i>Proof.&#160;</i>Fix&#160;i,&#160;j&#160;and&#160;we&#160;have&#160;complete&#160;∆-type&#160;pi(x)&#160;over&#160;M&#160;and&#160;complete<br/>∆∗-type&#160;qj&#160;over&#160;M.&#160;Now&#160;pi&#160;is&#160;definable,&#160;and&#160;its&#160;R-definition&#160;is&#160;given&#160;by&#160;a<br/>∆∗-formula&#160;(1.27&#160;of&#160;<a href="1504.06288s.html#6">[4])</a>.&#160;Namely&#160;there&#160;is&#160;a&#160;∆∗-formula&#160;ψ(y)&#160;over&#160;M&#160;such<br/>that&#160;for&#160;b&#160;∈&#160;W&#160;(M),&#160;R(x,&#160;b)&#160;∈&#160;pi(x)&#160;iff&#160;|=&#160;ψ(b).&#160;Likewise&#160;if&#160;p′&#160;is&#160;the&#160;unique<br/>
i<br/>
nonforking&#160;extension&#160;of&#160;pi&#160;to&#160;a&#160;complete&#160;global&#160;∆-type,&#160;ψ(y)&#160;is&#160;the&#160;R(x,&#160;y)-<br/>definition&#160;of&#160;p′.&#160;We&#160;have&#160;two&#160;cases:<br/>
i<br/>
Case&#160;(i):&#160;ψ(y)&#160;∈&#160;qj.<br/>Hence&#160;for&#160;all&#160;b&#160;∈&#160;Wj&#160;other&#160;than&#160;a&#160;set&#160;a&#160;set&#160;of&#160;ν-measure&#160;≤&#160;ǫν(Wj)&#160;we<br/>have&#160;|=&#160;ψ(b).&#160;Now&#160;suppose&#160;that&#160;|=&#160;ψ(b),&#160;hence&#160;R(x,&#160;b)&#160;∈&#160;p′,&#160;whereby&#160;p&#160;∪<br/>{¬R(x,&#160;b)}&#160;divides&#160;over&#160;M&#160;(by&#160;Fact&#160;1.5)&#160;so&#160;as&#160;µ&#160;does&#160;not&#160;divide&#160;over&#160;M,<br/>µ(p&#160;∪&#160;{¬(R(x,&#160;b)})&#160;=&#160;0,&#160;so&#160;for&#160;all&#160;a&#160;∈&#160;Vj&#160;outside&#160;a&#160;set&#160;of&#160;µ-measure&#160;≤&#160;ǫµ(Vi),<br/>we&#160;have&#160;|=&#160;R(a,&#160;b).&#160;We&#160;have&#160;actually&#160;proved&#160;the&#160;second&#160;clause&#160;of&#160;(i)&#160;of&#160;the<br/>theorem.&#160;To&#160;obtain&#160;the&#160;first&#160;clause,&#160;let&#160;χ(x)&#160;be&#160;the&#160;∆∗-definition&#160;of&#160;qj,&#160;so&#160;by<br/>
5<br/>
<hr/>
<a name=6></a><img class="yflip" src="html/1504.06288-6_1.png"/><br/>
<img class="yflip" src="html/1504.06288-6_2.png"/><br/>
<img class="yflip" src="html/1504.06288-6_3.png"/><br/>
<img class="yflip" src="html/1504.06288-6_4.png"/><br/>
Lemma&#160;2.8&#160;of&#160;<a href="1504.06288s.html#6">[4],&#160;</a>and&#160;our&#160;case&#160;hypothesis,&#160;χ(x)&#160;(a&#160;∆-formula&#160;over&#160;M)&#160;is&#160;in<br/>pi.&#160;Continue&#160;as&#160;above.<br/>
Case&#160;(ii):&#160;¬ψ(y)&#160;∈&#160;qj.&#160;In&#160;which&#160;case&#160;we&#160;obtain&#160;as&#160;in&#160;Case&#160;(i)&#160;that&#160;for&#160;all<br/>a&#160;∈&#160;Vi&#160;outside&#160;a&#160;set&#160;of&#160;µ-measure&#160;≤&#160;ǫµ(Vi),&#160;for&#160;all&#160;b&#160;∈&#160;Wj&#160;outside&#160;a&#160;set&#160;of<br/>ν-measure&#160;≤&#160;ǫν(Wj)&#160;we&#160;have&#160;¬R(a,&#160;b).<br/>
This&#160;completes&#160;the&#160;proof.<br/>
Theorem&#160;1.1&#160;follows&#160;directly&#160;from&#160;Lemmas&#160;2.1&#160;and&#160;2.2.<br/>
References<br/>
[1]&#160;E.&#160;Hrushovski,&#160;A.&#160;Pillay,&#160;P.&#160;Simon,&#160;Generically&#160;stable&#160;and&#160;smooth&#160;mea-<br/>
sures&#160;in&#160;NIP&#160;theories,&#160;365(2013),2341-2366.<br/>
[2]&#160;H.&#160;J.&#160;Keisler,&#160;Measures&#160;and&#160;forking,&#160;Annals&#160;of&#160;Pure&#160;and&#160;Applied&#160;Logic<br/>
34&#160;(1987),&#160;119-169.<br/>
[3]&#160;M.&#160;Malliaris&#160;and&#160;S.&#160;Shelah,&#160;Regularity&#160;lemmas&#160;for&#160;stable&#160;graphs,&#160;Trans.<br/>
Amer.&#160;Math&#160;Soc,&#160;366&#160;(2014),&#160;1551-1585.<br/>
[4]&#160;A.&#160;Pillay,&#160;<i>Geometric&#160;Stability&#160;Theory</i>,&#160;OUP,&#160;1996.<br/>
[5]&#160;S.&#160;Shelah,&#160;<i>Classification&#160;Theory&#160;and&#160;the&#160;number&#160;of&#160;nonisomorphic&#160;mod-</i><br/>
<i>els</i>,&#160;North&#160;Holland,&#160;1990.<br/>
6<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="1504.06288s.html#1">1 Introduction</a></li>
<li><a href="1504.06288s.html#4">2 Proof of Theorem 1.1</a></li>
</ul>
<hr/>
</body>
</html>
