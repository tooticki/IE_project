\ProvidesFile{biblatex.cfg}

\ExecuteBibliographyOptions{firstinits=true,isbn=false,doi=false}

% Use Commas instead of Fullstops
\renewcommand*{\newunitpunct}{\addcomma\space}

% Turn off use of 'In: '
\renewbibmacro{in:}{}

% Suppress pagetotals and pages.
\AtEveryBibitem{\clearfield{pagetotal}}

% Suppress citation prefixes.
\DeclareFieldFormat{postnote}{#1}
\DeclareFieldFormat{multipostnote}{#1}


% Dashed Author Names In Repeats
\InitializeBibliographyStyle{\global\undef\bbx@lasthash}
\renewcommand*\bibnamedash{\hbox to3em{\hrulefill}}
\providecommand*{\mkibid}[1]{#1}

\DeclareBibliographyDriver{set}{%
  \entryset
    {}
    {\ifnumequal{\thefield{entrysetcount}}{1}
       {\savefield{fullhash}{\bbx@lasthash}%
        \savefield{journaltitle}{\bbx@lastjournal}}
       {}}%
  \newunit\newblock
  \usebibmacro{setpageref}%
  \finentry}

\renewbibmacro*{author}{%
  \ifboolexpr{ test \ifuseauthor and not test {\ifnameundef{author}} }
    {\iffieldequals{fullhash}{\bbx@lasthash}
        {\iffieldundef{entrysetcount}
           {\bibnamedash\addcomma\space}
           {\ifnumequal{\thefield{entrysetcount}}{1}
              {\bibnamedash\addcomma\space}
              {\entrysetpunct}}}
        {\printnames{author}}%
      \savefield{fullhash}{\bbx@lasthash}%  
      \iffieldundef{authortype}
        {}
        {\setunit{\addcomma\space}%
         \usebibmacro{authorstrg}%
        }}
    {\global\undef\bbx@lasthash}%
}

\renewbibmacro*{journal}{%
  \iffieldundef{journaltitle}
    {}
    {\iffieldequals{journaltitle}{\bbx@lastjournal}
       {\bibstring[\mkibid]{ibidem}} 
       {\global\undef\bbx@lastjournal
         \printtext[journaltitle]{%
         \printfield[titlecase]{journaltitle}%
         \setunit{\subtitlepunct}%
         \printfield[titlecase]{journalsubtitle}}}}
}

% Change the formats of certain fields
\DeclareFieldFormat{pages}{#1}
\DeclareFieldFormat[article]{volume}{\textbf{#1}}
\DeclareFieldFormat[article,periodical]{number}{no.\ #1}
\DeclareFieldFormat[article,inbook,incollection,inproceedings,patent,thesis,unpublished]{title}{\mkbibemph{#1}\isdot}
\DeclareFieldFormat{journaltitle}{#1}

\renewbibmacro*{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
  \iffieldundef{series}
    {}
    {\newunit
     \printfield{series}%
     \setunit{\addspace}}%
  \usebibmacro{issue+date}%
  \setunit{\addspace}%
  \usebibmacro{volume+number+eid}%
  \setunit{\addcolon\space}%
  \usebibmacro{issue}%
  \newunit}

\renewbibmacro*{volume+number+eid}{%
  \setunit*{\addcomma\space}%
  \printfield{number}%
  \setunit{\addcomma\space}%
  \printfield{eid}}

\renewbibmacro*{issue+date}{%
\printfield{volume}%
  \setunit*{\space}%
  \printtext[parens]{%
    \iffieldundef{issue}
      {\usebibmacro{date}}
      {\printfield{issue}%
       \setunit*{\addspace}%
       \usebibmacro{date}}}%
  \newunit}

\endinput