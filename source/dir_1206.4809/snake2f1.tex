\begin{tikzpicture}[xscale=0.82,yscale=0.3]
\useasboundingbox  rectangle (17.5,48.5);

% Snake S_2

\draw[step=1cm,gray,very thin] (2,0) grid (17,37);

\draw[fill=red!20, draw=red!50!black]  (2,1) rectangle (3,0);
\draw[fill=black!20]  (2,2) rectangle (3,1);
\draw[fill=green!20, draw=green!50!black]  (2,3) rectangle (3,2);
\draw[fill=red!20!white, draw=red!50!black]  (4,3) rectangle (5,2);
\draw[fill=white!80!black]  (4,4) rectangle (5,3);
\draw[fill=green!20!white, draw=green!50!black]  (4,5) rectangle (5,4);
\draw[fill=white!80!black]  (3,3) rectangle (4,2);
\draw[fill=white!80!black]  (4,6) rectangle (5,5);
\draw[fill=red!20!white, draw=red!50!black]  (2,7) rectangle (5,6);
\draw[fill=white!80!black]  (2,8) rectangle (3,7);
\draw[fill=green!20!white, draw=green!50!black]  (2,9) rectangle (5,8);

\node at (3.5,8.5) {$0_02_1$};
\node at (3.5,6.5) {$0_02_0$};
\node at (4.5,4.5) {$0_01_12_1$};
\node at (4.5,2.5) {$0_01_12_0$};
\node at (2.5,2.5) {$0_01_02_1$};
\node at (2.5,0.5) {$0_01_02_0$};

\draw[fill=white!80!black]  (5,9) rectangle (6,8);

\draw[step=1cm,gray,very thin] (6,8) node (v3) {} grid (9,17) node (v1) {};
\draw[fill=red!20, draw=red!50!black]  (6,9) rectangle (7,8);
\draw[fill=black!20]  (6,10) rectangle (7,9);
\draw[fill=green!20, draw=green!50!black]  (6,11) rectangle (7,10);
\draw[fill=red!20!white, draw=red!50!black]  (8,11) rectangle (9,10);
\draw[fill=white!80!black]  (8,12) rectangle (9,11);
\draw[fill=green!20!white, draw=green!50!black]  (8,13) rectangle (9,12);
\draw[fill=white!80!black]  (7,11) rectangle (8,10);
\draw[fill=white!80!black]  (8,14) rectangle (9,13);
\draw[fill=red!20!white, draw=red!50!black]  (6,15) rectangle (9,14);
\draw[fill=white!80!black]  (6,16) rectangle (7,15);
\draw[fill=green!20!white, draw=green!50!black]  (6,17) rectangle (9,16);

\node at (7.5,16.5) {$0_12_1$};
\node at (7.5,14.5) {$0_12_0$};
\node at (8.5,12.5) {$0_11_12_1$};
\node at (8.5,10.5) {$0_11_12_0$};
\node at (6.5,10.5) {$0_11_02_1$};
\node at (6.5,8.5) {$0_11_02_0$};

\draw[fill=white!80!black]  (9,17) rectangle (10,16);

\draw[step=1cm,gray,very thin] (10,16) grid (13,25) node (v1) {};
\draw[fill=red!20, draw=red!50!black]  (10,17) rectangle (11,16);
\draw[fill=black!20]  (10,18) rectangle (11,17);
\draw[fill=green!20, draw=green!50!black]  (10,19) rectangle (11,18);
\draw[fill=red!20!white, draw=red!50!black]  (12,19) rectangle (13,18);
\draw[fill=white!80!black]  (12,20) rectangle (13,19);
\draw[fill=green!20!white, draw=green!50!black]  (12,21) rectangle (13,20);
\draw[fill=white!80!black]  (11,19) rectangle (12,18);
\draw[fill=white!80!black]  (12,22) rectangle (13,21);
\draw[fill=red!20!white, draw=red!50!black]  (10,23) rectangle (13,22);
\draw[fill=white!80!black]  (10,24) rectangle (11,23);
\draw[fill=green!20!white, draw=green!50!black]  (10,25) rectangle (13,24);

\node at (11.5,24.5) {$1_02_1$};
\node at (11.5,22.5) {$1_02_0$};
\node at (12.5,20.5) {$1_00_12_1$};
\node at (12.5,18.5) {$1_00_12_0$};
\node at (10.5,18.5) {$1_00_02_1$};
\node at (10.5,16.5) {$1_00_02_0$};

\draw[fill=white!80!black]  (13,25) rectangle (14,24);

\draw[step=1cm,gray,very thin] (14,24) grid (17,33) node (v1) {};
\draw[fill=red!20, draw=red!50!black]  (14,25) rectangle (15,24);
\draw[fill=black!20]  (14,26) rectangle (15,25);
\draw[fill=green!20, draw=green!50!black]  (14,27) rectangle (15,26);
\draw[fill=red!20!white, draw=red!50!black]  (16,27) rectangle (17,26);
\draw[fill=white!80!black]  (16,28) rectangle (17,27);
\draw[fill=green!20!white, draw=green!50!black]  (16,29) rectangle (17,28);
\draw[fill=white!80!black]  (15,27) rectangle (16,26);
\draw[fill=white!80!black]  (16,30) rectangle (17,29);
\draw[fill=red!20!white, draw=red!50!black]  (14,31) rectangle (17,30);
\draw[fill=white!80!black]  (14,32) rectangle (15,31);
\draw[fill=green!20!white, draw=green!50!black]  (14,33) rectangle (17,32);

\node at (15.5,32.5) {$1_12_1$};
\node at (15.5,30.5) {$1_12_0$};
\node at (16.5,28.5) {$1_10_12_1$};
\node at (16.5,26.5) {$1_10_12_0$};
\node at (14.5,26.5) {$1_10_02_1$};
\node at (14.5,24.5) {$1_10_02_0$};

\draw[fill=white!80!black]   (16,34) rectangle (17,33);

\draw[fill=red!20!white, draw=red!50!black]  (2,35) rectangle (17,34);
\draw[fill=white!80!black]   (2,36) rectangle (3,35);
\draw[fill=green!20!white, draw=green!50!black]  (2,37) rectangle (17,36);

\node at (9.5,34.5) {$2_0$};
\node at (9.5,36.5) {$2_1$};

\node at (1,0.5) {\normalsize $S_2$};

% c_2

\node (v2) at (7.5,5.5) {\normalsize $c_2$};
\draw [->] (v2) edge (v3);

% S_1

\draw[fill=red!20, draw=red!50!black]  (2,40.5) rectangle (3,39.5);
\draw[fill=black!20]  (2,41.5) rectangle (3,40.5);
\draw[fill=green!20, draw=green!50!black]  (2,42.5) rectangle (3,41.5);
\draw[fill=red!20!white, draw=red!50!black]  (4,42.5) rectangle (5,41.5);
\draw[fill=white!80!black]  (4,43.5) rectangle (5,42.5);
\draw[fill=green!20!white, draw=green!50!black]  (4,44.5) rectangle (5,43.5);
\draw[fill=white!80!black]  (3,42.5) rectangle (4,41.5);
\draw[fill=white!80!black]  (4,45.5) rectangle (5,44.5);
\draw[fill=red!20!white, draw=red!50!black]  (2,46.5) rectangle (5,45.5);
\draw[fill=white!80!black]  (2,47.5) rectangle (3,46.5);
\draw[fill=green!20!white, draw=green!50!black]  (2,48.5) rectangle (5,47.5);

\node at (1,40) {\normalsize $S_1$};


% f_1

\node (v4) at (2.5,37) {};
\node (v6) at (3.5,37) {};
\node (v8) at (4.5,37) {};
\node (v10) at (5.5,37) {};
\node (v12) at (6.5,37) {};
\node (v24) at (7.5,37) {};
\node (v26) at (8.5,37) {};
\node at (10.5,37) {};
\node at (11.5,37) {};
\node (v22) at (12.5,37) {};
\node (v20) at (13.5,37) {};
\node (v18) at (14.5,37) {};
\node (v16) at (15.5,37) {};
\node (v14) at (16.5,37) {};
\node (v5) at (2.5,40) {$0_01_0$};
\node (v7) at (2.5,41) {};
\node (v9) at (2.5,42) {$0_01_1$};
\node (v11) at (3.5,42) {};
\node (v13) at (4.5,42) {$0_11_0$};
\node (v25) at (4.5,43) {};
\node (v27) at (4.5,44) {$0_11_1$};
\node at (4.5,45) {};
\node at (4.5,46) {};
\node at (3.5,46) {$1_0$};
\node (v23) at (2.5,46) {};
\node (v21) at (2.5,47) {};
\node (v19) at (2.5,48) {};
\node (v17) at (3.5,48) {$1_1$};
\node (v15) at (4.5,48) {};
\draw [->] (v4) edge (v5);
\draw [->] (v6) edge (v7);
\draw [->] (v8) edge (v9);
\draw [->] (v10) edge (v11);
\draw [->] (v12) edge (v13);
\draw [->] (v14) edge (v15);
\draw [->] (v16) edge (v17);
\draw [->] (v18) edge (v19);
\draw [->] (v20) edge (v21);
\draw [->] (v22) edge (v23);
\draw [->] (v24) edge (v25);
\draw [->] (v26) edge (v27);
\node at (9,38.5) {\normalsize $...$};


\node at (10.5,43.5) {\normalsize $f_1$};
\end{tikzpicture}