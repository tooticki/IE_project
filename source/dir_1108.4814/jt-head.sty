%% This is a package designed to provide standard header information
%% for all maths documents produced by JT.
%%
%% Requires the packages: ifthen, xcolor, amsmath, amssymb, ntheorem
%%   hyperref, cleveref, jt-head.
%%
%% Style Options:
%%   nocolour - turns off colour links in hyperref.
%%   subsecnum - use subsection numbering for theorems.
%%   twosided - sets the geometry package to swap the long margin on
%%              alternate pages.
%%   thmswap - produces theorem environments of the form No. Theorem
%%             instead of Theorem No.

\NeedsTeXFormat{LaTeX2e}[1994/01/01]
\ProvidesPackage{jt-head}[2011/03/07 v1 Standard Header Information]

%======================================================
% Initial Stuff for Conditionals & Colours
%======================================================
\RequirePackage{ifthen}
\newboolean{book}
\newboolean{subsecnum}
\newboolean{nocolour}
\newboolean{thmswap}
\RequirePackage[usenames,dvipsnames,table]{xcolor}

%======================================================
% Declaring \ Executing Options
%======================================================
\DeclareOption{book}{\setboolean{book}{true}}
\DeclareOption{subsecnum}{\setboolean{subsecnum}{true}}
\DeclareOption{nocolour}{\setboolean{nocolour}{true}}
\DeclareOption{thmswap}{\setboolean{thmswap}{true}}
\ProcessOptions\relax

%======================================================
% Requiring Packages
%======================================================
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsbsy}
\RequirePackage{amstext}
\RequirePackage[amsmath,thmmarks,hyperref]{ntheorem}
\ifthenelse{\boolean{nocolour}}
{ \RequirePackage[
      colorlinks=true,
      allcolors=black,
      linktoc=section
      ]{hyperref} }
{ \RequirePackage[
      colorlinks=true,
      allcolors=Bittersweet,
      citecolor=Black,
      linktoc=section
      ]{hyperref} }
\RequirePackage{cleveref}

%======================================================
% Declaring New Theorems
%======================================================
\setlength{\theorempostskipamount}{0pt}

\newtheoremstyle{paragraph}
{\item[\hskip\labelsep \indent\theorem@headerfont ##2\theorem@separator]\pdfbookmark[1]{##2}{##2}}
{\item[\hskip\labelsep \indent\theorem@headerfont ##2.\ ##3\theorem@separator]\pdfbookmark[1]{##2}{##2}}

\newtheoremstyle{changep}
{\item[\hskip\labelsep \indent\theorem@headerfont ##2. ##1\theorem@separator]}
{\item[\hskip\labelsep \indent\theorem@headerfont ##2. ##1\ (##3)\theorem@separator]}

\newtheoremstyle{nonumberchangep}
{\item[\hskip\labelsep \indent\theorem@headerfont ##1\theorem@separator]}
{\item[\hskip\labelsep \indent\theorem@headerfont ##1\ (##3)\theorem@separator]}

\ifthenelse{\boolean{thmswap}}
{ \theoremstyle{changep} }
{ \theoremstyle{plain} }
\theoremseparator{.}
\theorembodyfont{\itshape}
\ifthenelse{\boolean{book}}
{ \newtheorem{thm}{Theorem}[chapter] }
{ \ifthenelse{\boolean{subsecnum}}
  { \newtheorem{thm}{Theorem}[subsection] }
  { \newtheorem{thm}{Theorem}[section] }
}

\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{conj}[thm]{Conjecture}

\theoremheaderfont{\bf}
\theorembodyfont{\normalfont}
\newtheorem{definition}[thm]{Definition}
\newtheorem{facts}[thm]{Facts}
\newtheorem{exerc}[thm]{Exercise}
\newtheorem{exmp}[thm]{Example}
\newtheorem{rem}[thm]{Remark}
\newtheorem*{notation}{Notation}

\theoremsymbol{\ensuremath{\blacksquare}}
\newtheorem*{proof}{Proof}

\theoremstyle{paragraph}
\theoremsymbol{}
\theoremseparator{.}
\newtheorem{pa}[thm]{}

%======================================================
% Cleveref Information for New Theorem Environments
% Lowercase then Uppercase definitions
%======================================================
\crefname{cor}{Corollary}{Corollaries}
\crefname{exmp}{Example}{Examples}
\crefname{prop}{Proposition}{Propositions}
\crefname{lem}{Lemma}{Lemmas}
\crefname{thm}{Theorem}{Theorems}
\crefname{appendix}{Appendix}{Appendicies}
\crefname{figure}{Figure}{Figures}
\crefname{problem}{Problem}{Problems}
\crefname{table}{Table}{Tables}
\crefname{chapter}{Chapter}{Chapters}
\crefname{definition}{Definition}{Definitions}
\crefname{exmp}{Example}{Examples}
\crefname{conj}{Conjecture}{Conjectures}
\crefname{rem}{Remark}{Remarks}
\crefname{facts}{Fact}{Facts}
\crefname{exerc}{Exercise}{Exercises}
\crefname{equation}{Eq.}{Eqs.}
\crefname{pa}{}{}

\crefformat{cor}{#2Corollary~#1#3}
\crefformat{example}{#2Example~#1#3}
\crefformat{prop}{#2Proposition~#1#3}
\crefformat{lem}{#2Lemma~#1#3}
\crefformat{thm}{#2Theorem~#1#3}
\crefformat{section}{#2Section~#1#3}
\crefformat{appendix}{#2Appendix~#1#3}
\crefformat{figure}{#2Figure~#1#3}
\crefformat{problem}{#2Problem~#1#3}
\crefformat{table}{#2Table~#1#3}
\crefformat{chapter}{#2Chapter~#1#3}
\crefformat{definition}{#2Definition~#1#3}
\crefformat{exmp}{#2Example~#1#3}
\crefformat{conj}{#2Conjecture~#1#3}
\crefformat{rem}{#2Remark~#1#3}
\crefformat{facts}{#2Fact~#1#3}
\crefformat{exerc}{#2Exercise~#1#3}
\crefformat{equation}{Eq.~(#2#1#3)}
\crefformat{pa}{#2#1#3}

\crefrangeformat{cor}{#3Corollaries~#1#4 to~#5#2#6}
\crefrangeformat{exmp}{#3Examples~#1#4 to~#5#2#6}
\crefrangeformat{prop}{#3Propositions~#1#4 to~#5#2#6}
\crefrangeformat{lem}{#3Lemmas~#1#4 to~#5#2#6}
\crefrangeformat{thm}{#3Theorems~#1#4 to~#5#2#6}
\crefrangeformat{section}{#3Sections~#1#4 to~#5#2#6}
\crefrangeformat{appendix}{#3Appendicies~#1#4 to~#5#2#6}
\crefrangeformat{figure}{#3Figures~#1#4 to~#5#2#6}
\crefrangeformat{table}{Tables~#3#1#4 to~#5#2#6}
\crefrangeformat{chapter}{#3Chapters~#1#4 to~#5#2#6}
\crefrangeformat{problem}{#3Problems~#1#4 to~#5#2#6}
\crefrangeformat{definition}{#3Definitions~#1#4 to~#5#2#6}
\crefrangeformat{exmp}{#3Examples~#1#4 to~#5#2#6}
\crefrangeformat{conj}{#3Conjectures~#1#4 to~#5#2#6}
\crefrangeformat{rem}{#3Remarks~#1#4 to~#5#2#6}
\crefrangeformat{facts}{#3Facts~#1#4 to~#5#2#6}
\crefrangeformat{exerc}{#3Exercises~#1#4 to~#5#2#6}
\crefrangeformat{equation}{Eqs.~(#3#1#4) to~(#5#2#6)}
\crefrangeformat{pa}{#3#1#4 to~#5#2#6}

\Crefname{cor}{Corollary}{Corollaries}
\Crefname{exmp}{Example}{Examples}
\Crefname{prop}{Proposition}{Propositions}
\Crefname{lem}{Lemma}{Lemmas}
\Crefname{thm}{Theorem}{Theorems}
\Crefname{appendix}{Appendix}{Appendicies}
\Crefname{figure}{Figure}{Figures}
\Crefname{problem}{Problem}{Problems}
\Crefname{table}{Table}{Tables}
\Crefname{chapter}{Chapter}{Chapters}
\Crefname{definition}{Definition}{Definitions}
\Crefname{exmp}{Example}{Examples}
\Crefname{conj}{Conjecture}{Conjectures}
\Crefname{rem}{Remark}{Remarks}
\Crefname{facts}{Facts}{Facts}
\Crefname{exerc}{Exercise}{Exercises}
\Crefname{equation}{Eq.}{Eqs.}
\Crefname{pa}{}{}

\Crefformat{cor}{#2Corollary~#1#3}
\Crefformat{example}{#2Example~#1#3}
\Crefformat{prop}{#2Proposition~#1#3}
\Crefformat{lem}{#2Lemma~#1#3}
\Crefformat{thm}{#2Theorem~#1#3}
\Crefformat{section}{#2Section~#1#3}
\Crefformat{appendix}{#2Appendix~#1#3}
\Crefformat{figure}{#2Figure~#1#3}
\Crefformat{problem}{#2Problem~#1#3}
\Crefformat{table}{#2Table~#1#3}
\Crefformat{chapter}{#2Chapter~#1#3}
\Crefformat{definition}{#2Definition~#1#3}
\Crefformat{exmp}{#2Example~#1#3}
\Crefformat{conj}{#2Conjecture~#1#3}
\Crefformat{rem}{#2Remark~#1#3}
\Crefformat{facts}{#2Facts~#1#3}
\Crefformat{exerc}{#2Exercises~#1#3}
\Crefformat{equation}{Eq.~(#2#1#3)}
\Crefformat{pa}{#2#1#3}

\Crefrangeformat{cor}{#3Corollaries~#1#4 to~#5#2#6}
\Crefrangeformat{exmp}{#3Examples~#1#4 to~#5#2#6}
\Crefrangeformat{prop}{#3Propositions~#1#4 to~#5#2#6}
\Crefrangeformat{lem}{#3Lemmas~#1#4 to~#5#2#6}
\Crefrangeformat{thm}{#3Theorems~#1#4 to~#5#2#6}
\Crefrangeformat{section}{#3Sections~#1#4 to~#5#2#6}
\Crefrangeformat{appendix}{#3Appendicies~#1#4 to~#5#2#6}
\Crefrangeformat{figure}{#3Figures~#1#4 to~#5#2#6}
\Crefrangeformat{table}{#3Tables~#1#4 to~#5#2#6}
\Crefrangeformat{chapter}{#3Chapters~#1#4 to~#5#2#6}
\Crefrangeformat{problem}{#3Problems~#1#4 to~#5#2#6}
\Crefrangeformat{definition}{#3Definitions~#1#4 to~#5#2#6}
\Crefrangeformat{exmp}{#3Examples~#1#4 to~#5#2#6}
\Crefrangeformat{conj}{#3Conjectures~#1#4 to~#5#2#6}
\Crefrangeformat{rem}{#3Remarks~#1#4 to~#5#2#6}
\Crefrangeformat{facts}{#3Facts~#1#4 to~#5#2#6}
\Crefrangeformat{exercises}{#3Exercises~#1#4 to~#5#2#6}
\Crefrangeformat{equation}{Equations~(#3#1#4) to~(#5#2#6)}
\Crefrangeformat{pa}{#3#1#4 to~#5#2#6}

%======================================================
% New and Renewed Commands
%======================================================
\newcommand{\lie}[1]{\ensuremath\mathfrak{#1}}

%======================================================
% Commands for Using \widecheck from package mathabx
%======================================================

\DeclareFontFamily{U}{mathx}{\hyphenchar\font45}
\DeclareFontShape{U}{mathx}{m}{n}{
      <5> <6> <7> <8> <9> <10>
      <10.95> <12> <14.4> <17.28> <20.74> <24.88>
      mathx10
      }{}
\DeclareSymbolFont{mathx}{U}{mathx}{m}{n}
\DeclareFontSubstitution{U}{mathx}{m}{n}

\DeclareFontFamily{U}{mathb}{\hyphenchar\font45}
\DeclareFontShape{U}{mathb}{m}{n}{
      <5> <6> <7> <8> <9> <10>
      <10.95> <12> <14.4> <17.28> <20.74> <24.88>
      mathb10
      }{}
\DeclareSymbolFont{mathb}{U}{mathb}{m}{n}
\DeclareFontSubstitution{U}{mathb}{m}{n}

\DeclareMathAccent{\widecheck}{0}{mathx}{"71}
\DeclareMathSymbol{\boxtimes}{2}{mathb}{"62}
\DeclareMathSymbol{\bigboxtimes}{1}{mathx}{"D2}

%======================================================
% Declaring New Maths Operators
%======================================================

% Group Names
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\U}{U}
\DeclareMathOperator{\PGL}{PGL}
\DeclareMathOperator{\PSL}{PSL}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\PSO}{PSO}
\DeclareMathOperator{\Or}{O}
\DeclareMathOperator{\Sp}{Sp}
\DeclareMathOperator{\PSp}{PSp}
\DeclareMathOperator{\PCSp}{PCSp}
\DeclareMathOperator{\CO}{CO}
\DeclareMathOperator{\Spin}{Spin}
\DeclareMathOperator{\HSpin}{HSpin}
\DeclareMathOperator{\orth}{O}
\DeclareMathOperator{\Proj}{P}

% Symmetric Groups
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\sym}{S}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\fix}{fix}

% Bold Algebraic Group Letters

\newcommand{\bB}{\ensuremath{\mathbf{B}}}
\newcommand{\bG}{\ensuremath{\mathbf{G}}}
\newcommand{\bH}{\ensuremath{\mathbf{H}}}
\newcommand{\bL}{\ensuremath{\mathbf{L}}}
\newcommand{\bM}{\ensuremath{\mathbf{M}}}
\newcommand{\bN}{\ensuremath{\mathbf{N}}}
\newcommand{\bP}{\ensuremath{\mathbf{P}}}
\newcommand{\bS}{\ensuremath{\mathbf{S}}}
\newcommand{\bT}{\ensuremath{\mathbf{T}}}
\newcommand{\bU}{\ensuremath{\mathbf{U}}}
\newcommand{\bW}{\ensuremath{\mathbf{W}}}
\newcommand{\bX}{\ensuremath{\mathbf{X}}}
\newcommand{\btB}{\ensuremath{\tilde{\mathbf{B}}}}
\newcommand{\btG}{\ensuremath{\tilde{\mathbf{G}}}}
\newcommand{\btL}{\ensuremath{\tilde{\mathbf{L}}}}
\newcommand{\btP}{\ensuremath{\tilde{\mathbf{P}}}}
\newcommand{\btT}{\ensuremath{\tilde{\mathbf{T}}}}

% Group Theory
\DeclareMathOperator{\Inn}{Inn}
\DeclareMathOperator{\Out}{Out}
\DeclareMathOperator{\inn}{inn}

% Lie Types
\DeclareMathOperator{\A}{A}
\DeclareMathOperator{\B}{B}
\DeclareMathOperator{\C}{C}
\DeclareMathOperator{\D}{D}
\DeclareMathOperator{\E}{E}
\DeclareMathOperator{\F}{F}
\DeclareMathOperator{\G}{G}
\DeclareMathOperator{\simc}{sc}
\DeclareMathOperator{\ad}{ad}

% Linear Algebra
\DeclareMathOperator{\Trace}{Trace}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\rk}{rk}
\DeclareMathOperator{\ch}{ch}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Coker}{Coker}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Image}{Im}
\DeclareMathOperator{\image}{im}
\DeclareMathOperator{\ID}{id}
\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Card}{Card}
\DeclareMathOperator{\Der}{Der}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\opp}{opp}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Maps}{Maps}

% Complex Numbers
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\im}{Im}

% Representation Theory
\DeclareMathOperator{\Ind}{Ind}
\DeclareMathOperator{\Inf}{Inf}
\DeclareMathOperator{\Cent}{Cent}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\module}{mod}
\DeclareMathOperator{\St}{St}
\DeclareMathOperator{\Irr}{Irr}
\DeclareMathOperator{\rad}{rad}
\DeclareMathOperator{\soc}{soc}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\reg}{reg}

% Lie Theory
\DeclareMathOperator{\hit}{ht}
\DeclareMathOperator{\alge}{alg}
\DeclareMathOperator{\relrank}{rel. rank}
\DeclareMathOperator{\SPR}{Spr}
\DeclareMathOperator{\AV}{AV}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\uni}{uni}