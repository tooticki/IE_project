THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

arXiv:1708.03843v5 [math.CO] 26 Jul 2018

ANTON BERNSHTEYN

A b s t r ac t . The aim of this note is twofold. On the one hand, we present a streamlined version of
Molloy’s new proof of the bound χ(G) 6 (1 + o(1))∆(G)/ ln ∆(G) for triangle-free graphs G, avoiding
the technicalities of the entropy compression method and only using the usual “lopsided” Lovász Local
Lemma (albeit in a somewhat unusual setting). On the other hand, we extend Molloy’s result to
DP-coloring (also known as correspondence coloring), a generalization of list coloring introduced recently
by Dvořák and Postle.

Basic notation. All graphs considered here are finite, undirected, and simple. For a graph G, its
vertex and edge sets are denoted V (G) and E(G) respectively.
For a subset U ⊆ V (G), U := V (G) \ U is the complement of U and G[U ] is the subgraph of G
induced by U . Let G − U := G[U ]. For two subsets U1 , U2 ⊆ V (G), EG (U1 , U2 ) denotes the set of all
edges of G with one endpoint in U1 and the other one in U2 .
For u ∈ V (G), NG (u) denotes the set of all neighbors of u in G, and degG (u) := |NG (u)| denotes the
degree of u. Let NG [u] := NG (u) ∪ {u} be the closed neighborhood of u. For d ∈ N, NGd [u] denotes the
set of all vertices that are at distance at most d from u (thus, NG0 [u] = {u} and NG1 [u] = NG [u]). The
maximum degree of G is denoted ∆(G).
S
S
Given a subset U ⊆ V (G), let NG (U ) := u∈U NG (u) and NG [U ] := u∈U NG [u]. A set I ⊆ V (G)
is independent if I ∩ NG (I) = ∅, i.e., if there are no u, v ∈ I with uv ∈ E(G).
For a set S, Pow(S) denotes the power set of S, i.e., the set of all subsets of S.
1. I n t ro d u c t i o n
A proper coloring of a graph G is a function f : V (G) → C, where C is a set, whose elements are
referred to as colors, such that f (u) 6= f (v) for each edge uv ∈ E(G). The smallest k ∈ N such that
there exists a proper coloring f : V (G) → C with |C| = k is called the chromatic number of G and
is denoted χ(G). List coloring is a generalization of ordinary graph coloring that was introduced
independently by Vizing [Viz76] and Erdős, Rubin, and Taylor [ERT79]. A list assignment for G is a
function L : V (G) → Pow(C). A proper coloring f : V (G) → C is called an L-coloring if f (u) ∈ L(u)
for every u ∈ V (G). The list-chromatic number χ` (G) of G is the smallest k ∈ N such that G admits
an L-coloring for every list assignment L such that |L(u)| = k for all u ∈ V (G).
The following is a celebrated result of Johansson [Joh96]:
Theorem 1.1 (Johansson [Joh96]). There exists a positive constant C such that for every triangle-free
graph G with maximum degree ∆,
∆
χ` (G) 6 (C + o(1))
.
ln ∆
Remark. Throughout, we use o(1) to indicate a function of ∆ that approaches 0 as ∆ → ∞.
Johansson originally proved Theorem 1.1 with C = 9. Subsequently, Pettie and Su [PS15] improved
the bound to C = 4. Very recently, Molloy [Mol17] reduced the constant to C = 1:
D e pa rt m e n t o f M at h e m at i c s , U n i v e r s i t y o f I l l i n o i s at U r b a n a – C h a m pa i g n , I L , U S A
E-mail address: bernsht2@illinois.edu.
This research is partially supported by the Illinois Distinguished Fellowship.
1

2

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

Theorem 1.2 (Molloy [Mol17, Theorem 1]). For every triangle-free graph G with maximum degree ∆,
∆
χ` (G) 6 (1 + o(1))
.
ln ∆
The two main new ideas that allowed Molloy to dramatically simplify Johansson’s proof and establish
Theorem 1.2 are:
– a new coupon collector-type result [Mol17, Lemma 7] with elements drawn uniformly at random
from possibly distinct sets; and
– the use of the entropy compression method instead of iterated applications of the Lovász Local
Lemma.
The entropy compression method (the name is due to Tao [Tao09]) was developed by Moser and
Tardos in order to prove an algorithmic version of the Lovász Local Lemma. Later it was observed
(first by Grytczuk, Kozik, and Micek in their study of nonrepetitive sequences [GKM13]) that the
Moser–Tardos algorithmic approach can sometimes lead to improved combinatorial results if applied
directly, with no explicit mention of the Lovász Local Lemma. This technique has since found many
applications, especially in the study of graph coloring; see, e.g., [EP13; Bos+16; Duj+16]. The recent
results of Molloy are a part of this program.
One may wonder however why the entropy compression method should be significantly superior to
the Local Lemma when applied specifically to the problem of coloring triangle-free graphs. Indeed,
there is a lot of “slackness” in the way the Local Lemma is used in Johansson’s proof of Theorem 1.1:
certain events happen with exponentially small probabilities, even though a polynomial upper bound
would have sufficed. In other words, the “bottleneck” in the proof is not the Local Lemma per se, but
rather some expectation/concentration details. Thus, it may appear surprising that using a better
alternative to the Local Lemma leads to improvements in this particular case.
In this note we show that the intuition outlined in the previous paragraph is, in fact, accurate: one
can replace the entropy compression method in Molloy’s proof of Theorem 1.2 by the usual Local
Lemma. This makes the argument particularly short and straightforward, as it removes the need for
the technical analysis of a randomized recoloring procedure.
The main novelty in our version of the proof consists in choosing a partial proper coloring f of G
uniformly at random (see Lemma 3.5). Note that the colors of individual vertices under f are highly
dependent, so understanding the behavior of f at first appears rather difficult. That is why one usually
assigns colors to the vertices of G independently from each other. But independence comes at a price:
It is impossible to ensure that the resulting coloring is proper away from a very small part of the
graph. This necessitates an iterative approach, forcing one to repeat the procedure several times until a
sufficiently large proportion of the vertices has been colored. Our main observation is that, despite the
dependencies, it is still possible to use the Local Lemma to directly analyze a uniformly random partial
proper coloring, thus obviating the need for iteration.
Using the Local Lemma instead of the entropy compression is the only significant difference between
our argument and the original proof of Theorem 1.2 due to Molloy. In particular, we need a coupon
collector-type lemma (Lemma 3.6), which is, essentially, a rephrasing of [Mol17, Lemma 7]. Nevertheless,
to make the presentation self-contained, we include all (or most of) the details.
Our second contribution is verifying the conclusion of Theorem 1.2 in the context of DP-coloring
(also known as correspondence coloring)—a generalization of list coloring introduced recently by Dvořák
and Postle [DP15] (see Section 2 for the definitions). A version of Johansson’s theorem for DP-coloring
was established previously by the author in [Ber16, Theorem 1.7], with no attempt to optimize the
constant factor.
Theorem 1.3. For every triangle-free graph G with maximum degree ∆,
∆
χDP (G) 6 (1 + o(1))
.
ln ∆
Theorem 1.3 yields a rather tight bound on the DP-chromatic number of triangle-free regular graphs
(the lower bound is given by [Ber16, Theorem 1.6]; cf. [Ber16, Corollary 1.8]):

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

3

Corollary 1.4. For every ∆-regular triangle-free graph G,
∆
∆
6 χDP (G) 6 (1 + o(1))
.
(1/2 − o(1))
ln ∆
ln ∆
Another result of Johansson asserts that χ` (G) = O(∆(G) ln ln ∆(G)/ ln ∆(G)) if G is Kr -free for
some fixed r > 4. Molloy [Mol17, Theorem 2] also gave a new short proof of this bound with explicit
dependence on r. In Section 4, we extend it to DP-coloring:
Theorem 1.5. There exists a positive constant C such that for any r > 4 and for every Kr -free graph G
with maximum degree ∆,
r∆ ln ln ∆
χDP (G) 6 C
.
ln ∆
We make no attempt to optimize the constant factor in Theorem 1.5. It is conjectured [AKS99,
Conjecture 3.1] that the correct upper bound for fixed r should be of the order O(∆/ ln ∆).
The main technical step in the proof of Theorem 1.5 is Lemma 4.2. It is similar to [Mol17, Lemma 15];
however, it is necessary to modify the proof of [Mol17, Lemma 15] somewhat in order to adapt it for the
DP-coloring framework, since, in contrast to list coloring, a DP-coloring of a graph cannot be naturally
represented as a partition of its vertex set into independent subsets.
2. D P - C o l o r i n g
DP-coloring was introduced by Dvořák and Postle in [DP15] in order to settle a long-standing open
question of Borodin regarding list coloring planar graphs with no cycles of certain lengths [Bor13,
Problem 8.1]. Just like list coloring extends ordinary coloring by allowing the lists of available colors to
vary from vertex to vertex, DP-coloring generalizes list coloring by allowing the identifications between
the colors in the lists to vary from edge to edge.
Definition 2.1. Let G be a graph. A cover of G is a pair H = (L, H), consisting of a graph H and a
function L : V (G) → Pow(V (H)), satisfying the following requirements:
(C1) the sets {L(u) : u ∈ V (G)} form a partition of V (H);
(C2) for every u ∈ V (G), the graph H[L(u)] is complete;
(C3) if EH (L(u), L(v)) 6= ∅, then either u = v or uv ∈ E(G);
(C4) if uv ∈ E(G), then EH (L(u), L(v)) is a matching.
A cover H = (L, H) of G is k-fold if |L(u)| = k for all u ∈ V (G).
Remark. The matching EH (L(u), L(v)) in Definition 2.1(C4) does not have to be perfect and, in
particular, is allowed to be empty.
Definition 2.2. Let H = (L, H) be a cover of a graph G. An H -coloring of G is an independent set
in H of size |V (G)|.
Remark. Equivalently, an independent set I in H is an H -coloring if |I ∩ L(u)| = 1 for all u ∈ V (G).
Definition 2.3. The DP-chromatic number χDP (G) of a graph G is the smallest k ∈ N such that G
admits an H -coloring for every k-fold cover H of G.
Fig. 1 shows a pair of distinct 2-fold covers of the 4-cycle C4 . Note that C4 admits an H1 -coloring
but not an H2 -coloring. In particular, χDP (C4 ) > 3. On the other hand, it can be easily seen that
χDP (G) 6 ∆(G) + 1 for any graph G, and so χDP (C4 ) = 3. A similar argument demonstrates that
χDP (Cn ) = 3 for any cycle Cn of length n > 3.
One can obtain a cover of a graph G from a list assignment for G, thus showing that list coloring
is a special case of DP-coloring and, in particular, χDP (G) > χ` (G) for all graphs G. Specifically,
let G be a graph and let L : V (G) → Pow(C) be a list assignment for G. Let H denote the graph
with vertex set V (H) := {(u, c) : u ∈ V (G) and c ∈ L(u)}, in which two distinct vertices (u, c) and
(v, d) are adjacent if and only if either u = v, or else, uv ∈ E(G) and c = d. For each u ∈ V (G), set

4

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

H1

H2

Figure 1. Two distinct 2-fold covers of a 4-cycle.
L0 (u) := {(u, c) : c ∈ L(u)}. Then H := (L0 , H) is a cover of G, and there is a natural bijective
correspondence between the L-colorings and the H -colorings of G. More precisely, if f is an L-coloring
of G, then the set If := {(u, f (u)) : u ∈ V (G)} is an H -coloring of G; and conversely, given an
H -coloring I of G, we have |I ∩ L0 (u)| = 1 for all u ∈ V (G), so an L-coloring fI can be defined by the
property (u, fI (u)) ∈ I ∩ L0 (u).
3. P ro o f o f T h e o r e m 1 . 3
3.1. Probabilistic tools. We use the following “lopsided” version of the Symmetric Lovász Local
Lemma (the LLL for short); see, e.g., [AS00, p. 65]:
Lemma 3.1 (Lovász Local Lemma). Let I be a finite set. For each i ∈ I, let Bi be a random event.
Suppose that for every i ∈ I, there is a set Γ(i) ⊆ I such that |Γ(i)| 6 d and for all Z ⊆ I \ Γ(i),
 

\

Pr Bi 
Bj  6 p.
j∈Z

T
(A horizontal line over an event denotes its negation.) If 4pd 6 1, then Pr i∈I Bi > 0.
Remark. In a more commonly used version of the LLL, each event Bi is mutually independent from the
events Bj with j 6∈ Γ(i) ∪ {i}. Lemma 3.1 has exactly the same proof, but it makes no independence
requirements (which will be important for its application in the proof of Lemma 3.5).
We will need a version of Chernoff bounds for negatively correlated random variables, introduced by
Panconesi and Srinivasan [PS97]. We say that {0, 1}-valued random variables X1 , . . . , Xn are negatively
correlated if for all S ⊆ {1, . . . , n},
Y
Pr [Xi = 1 for all i ∈ S] 6
Pr [Xi = 1] .
i∈S

Lemma 3.2 (Chernoff bounds; see [PS97] and [Mol17,
Lemma 3]). Let X1 , . . . , Xn be {0, 1}-valued
P
random variables and let Yi := 1 − Xi . Set X := ni=1 Xi . If the variables Y1 , . . . , Yn are negatively
correlated, then

Pr [X 6 (1 − δ)E[X]] 6 exp −δ 2 E[X]/2 for any 0 < δ < 1.
If the variables X1 , . . . , Xn are negatively correlated, then
Pr [X > (1 + δ)E[X]] 6 exp (−δE[X]/3) for any δ > 1.
3.2. Additional
notation. Let G be a graph and let H = (L, H) be a cover of G. For U ⊆ V (G),
S
let L(U ) := u∈U L(u). Define H ∗ to be the spanning subgraph of H such that an edge xy ∈ E(H)
belongs to E(H ∗ ) if and only if x and y are in different parts of the partition {L(u) : u ∈ V (G)}. For
clarity, and to emphasize the dependence on L, we write deg∗H (x) instead of degH ∗ (x). The domain of
an independent set I in H is dom(I) := {u ∈ V (G) : I ∩ L(u) 6= ∅}. Let GI := G − dom(I) and let
HI = (LI , HI ) denote the cover of GI defined by
HI := H − NH [I]

and

LI (u) := L(u) \ NH (I) for all u ∈ V (GI ).

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

5

By definition, if I 0 is an HI -coloring of GI , then I ∪ I 0 is an H -coloring of G.
We use bold type to emphasize that a certain value (such as a set I) is a random variable.
3.3. The proof. We will reduce Theorem 1.3 to the following result from [Hax01], which is a special
case of a more general theorem of Aharoni and Haxell (unpublished):
Theorem 3.3 (Aharoni–Haxell; [Hax01, Theorem 2]). Let ` > 1 and let F be a graph with ∆(F ) 6 `/2.
Suppose that V (F ) = V1 ∪ . . . ∪ Vn is a partition of the vertex set of F such that |Vi | > ` for all 1 6 i 6 n.
Then F has an independent set I with |I ∩ Vi | = 1 for all 1 6 i 6 n.
We will use Theorem 3.3 in the form of the following corollary:
Lemma 3.4. Let H = (L, H) be a cover of a graph G. If there is a positive integer ` such that
|L(u)| > ` for all u ∈ V (G) and deg∗H (x) 6 `/2 for all x ∈ V (H), then G is H -colorable.
To derive Lemma 3.4, one simply has to apply Theorem 3.3 with H ∗ in place of F and the partition
{L(u) : u ∈ V (G)} in place of {V1 , . . . , Vn }. For completeness, we give a short self-contained proof of
Lemma 3.4 under the stronger assumption that deg∗H (x) 6 `/8 for all x ∈ V (H) in the appendix (this
weaker version of Lemma 3.4 is also sufficient for our purposes; see [Ree99, Theorem 2] and [Mol17,
Lemma 5] for two of its incarnations in the list coloring setting).
Standing assumptions. For the rest of the proof, fix 0 < ε < 1, a triangle-free graph G of sufficiently
large maximum degree ∆, and a k-fold cover H = (L, H) of G with k = (1 + ε)∆/ ln ∆. Set ` := ∆ε/2 .
In view of Lemma 3.4, it suffices to establish the following:
Lemma 3.5. The graph H contains an independent set I such that:
(i) |LI (u)| > ` for all u ∈ V (GI ); and
(ii) deg∗HI (x) 6 `/2 for all x ∈ V (HI ).
To prove Lemma 3.5, we need a variant of [Mol17, Lemma 7]:
Lemma 3.6. Fix a vertex u ∈ V (G) and an independent set J ⊆ L(NG [u]). Let I 0 be a uniformly
random independent subset of LJ (NG (u)) and let I := J ∪ I 0 . Then:
(a) Pr [|LI (u)| < `] 6 ∆−3 /8; and

(b) Pr there is x ∈ LI (u) with deg∗HI (x) > `/2 6 ∆−3 /8.
The proof of Lemma 3.6 is virtually identical to that of [Mol17, Lemma 7], so we first show how to
derive Lemma 3.5 from Lemma 3.6 (this is the new ingredient in our version of Molloy’s argument).
Proof of Lemma 3.5 (assuming Lemma 3.6). Choose an independent set I in H uniformly at random.
(Since the domain of I may be a proper subset of V (G), in the context of list coloring this is equivalent
to choosing a uniformly random partial proper coloring.) The following immediate observation plays a
key role in the proof:
Fix U ⊆ V (G) and an independent set J ⊆ L(U ). Then the random variable I ∩ L(U ),
conditioned on the event {I ∩ L(U ) = J}, is uniformly distributed over the independent
subsets of LJ (U ).

(#)

For each u ∈ V (G), let Bu denote the event
Bu := {u 6∈ dom(I) and either |LI (u)| < ` or there is x ∈ LI (u) with deg∗HI (x) > `/2}.
Clearly, if none of the events Bu happen, then I satisfies the conclusion of Lemma 3.5.
For each u ∈ V (G), set Γ(u) := NG3 [u]. Since |Γ(u)| 6 ∆3 , to apply the LLL, it remains to verify
that for all Z ⊆ Γ(u),
" 
#
\

Pr Bu 
Bv 6 ∆−3 /4.

v∈Z

6

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

By definition, the outcome of any Bv is determined by the set I ∩ L(NG2 [v]). If v 6∈ Γ(u), then the
distance between u and v is at least 4, so NG2 [v] ⊂ NG (u). Therefore, the set I ∩ L(NG (u)) determines
the outcome of every Bv with v 6∈ Γ(u). Hence, it suffices to prove that
h 
i

Pr Bu I ∩ L(NG (u)) = J 6 ∆−3 /4 for all independent J ⊆ L(NG (u)).
To that end, fix a vertex u ∈ V (G) and an independent set J ⊆ L(NG (u)). We may assume that
u 6∈ dom(J), i.e., J ⊆ L(NG [u]) (otherwise the event Bu is incompatible with {I ∩ L(NG (u)) = J}).
Let I 0 := I ∩ L(NG (u)). By (#), the variable I 0 , under the condition {I ∩ L(NG (u)) = J}, is uniformly
distributed over the independent subsets of LJ (NG (u)). Thus, we are in the situation described by
Lemma 3.6, and so
h 
i

Pr Bu I ∩ L(NG (u)) = J 6 ∆−3 /8 + ∆−3 /8 = ∆−3 /4,


as desired.
Proof of Lemma 3.6. Define
p0 := Pr [|LI (u)| < `]

and



p1 := Pr there is x ∈ LI (u) with deg∗HI (x) > `/2 .

Let • be a special symbol distinct from all the elements of V (H). Since G is triangle-free, the set
NG (u) is independent, so EH (L(v), L(w)) = ∅ for any two distinct v, w ∈ NG (u). Hence, I 0 can be
constructed via the following procedure:
For each v ∈ NG (u), uniformly at random select an element xv from LJ (v) ∪ {•}.
– If xv = •, then leave I 0 ∩ L(v) empty;
– otherwise, set I 0 ∩ L(v) := {xv }.
e (x) denote the set of all vertices v ∈ NG (u) such that NH (x) ∩ LJ (v) 6= ∅. Using
For x ∈ L(u), let N
this notation, we obtain

Y 
 0

1
Pr [x ∈ LI (u)] = Pr I ∩ NH (x) = ∅ =
1−
.
|LJ (v)| + 1
e (x)
v∈N

e (x) and exp(−1/α) 6 1 − 1/(α + 1) 6 exp(−1/(α + 1)) for all α > 0,
Since |LJ (v)| > 1 for all v ∈ N




X
X
1 
1
.
exp −
6 Pr [x ∈ LI (u)] 6 exp −
(3.1)
|LJ (v)|
|LJ (v)| + 1
e (x)
v∈N

e (x)
v∈N

Now we can conclude

X

E [|LI (u)|] =

Pr [x ∈ LI (u)] >

x∈L(u)

Notice that
X

X

e (x)
x∈L(u) v∈N

1
6
|LJ (v)|

X

exp −

x∈L(u)

X

X

v∈NG (u) : y∈LJ (v)
LJ (v)6=∅


X
e (x)
v∈N

1 
.
|LJ (v)|

1
6 degG (u) 6 ∆,
|LJ (v)|

so, by the convexity of the exponential function,




X
X
1 
∆
(1 + ε)∆

exp −
> k exp −
=
· ∆−1/(1+ε) > 2`,
|LJ (v)|
k
ln ∆
x∈L(u)

e (x)
v∈N

provided ∆ is large enough. Putting everything together, we obtain E [|LI (u)|] > 2`. To prove that the
random variable |LI (u)| is highly concentrated around its expectation, we need the following claim:

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

7

Claim. The indicator random variables of the events {x 6∈ LI (u)} for x ∈ L(u) are negatively correlated.
Proof of Claim. It is enough to argue that for all x ∈ L(u) and Y ⊆ L(u) \ {x}, we have
Pr [x 6∈ LI (u) | Y ∩ LI (u) = ∅] 6 Pr [x 6∈ LI (u)] .

(3.2)

To that end, let x ∈ L(u) and Y ⊆ L(u) \ {x}. Inequality (3.2) is equivalent to
Pr [Y ∩ LI (u) = ∅ | x ∈ LI (u)] > Pr [Y ∩ LI (u) = ∅] .
This can in turn be rewritten as





Pr I 0 ∩ NH ∗ (y) 6= ∅ for all y ∈ Y  I 0 ∩ NH ∗ (x) = ∅ > Pr I 0 ∩ NH ∗ (y) 6= ∅ for all y ∈ Y ,
a

which holds since the sets NH ∗ (x) and NH ∗ (Y ) are disjoint.
Now we can apply Lemma 3.2 to conclude that




1
1
p0 6 Pr |LI (u)| < E [|LI (u)|] 6 exp − E [|LI (u)|] 6 exp (−`/4) < ∆−3 /8,
2
8

for large enough ∆. This proves (a).
To prove (b), we will show that for all x ∈ L(u),


px := Pr x ∈ LI (u) and deg∗HI (x) > `/2 6 ∆−4 .
P
This is enough, as p1 6 x∈L(u) px and |L(u)| = k < ∆/8 for large enough ∆. Let x ∈ L(u). The
second inequality in (3.1) implies


X
1
,
px 6 Pr [x ∈ LI (u)] 6 exp −
|LJ (v)| + 1
e (x)
v∈N

so we may assume

exp −


X
e (x)
v∈N

1
 > ∆−4 ,
|LJ (v)| + 1

X

i.e.,

e (x)
v∈N

Then
X
X




E deg∗HI (x) =
Pr v 6∈ dom(I 0 ) =
e (x)
v∈N

e (x)
v∈N

1
6 4 ln ∆.
|LJ (v)| + 1

1
6 4 ln ∆ 6 `/4,
|LJ (v)| + 1

e (x) are mutually independent, so the Chernoff
for large enough ∆. The events {v 6∈ dom(I 0 )} for v ∈ N
bound for independent {0, 1}-valued random variables yields






px 6 Pr deg∗HI (x) > `/2 6 Pr deg∗HI (x) > E deg∗HI (x) + `/4 6 exp (−`/12) 6 ∆−4 ,
for large enough ∆, as desired.


4. P ro o f o f T h e o r e m 1 . 5

The general scheme of the argument is similar to that of the proof of Theorem 1.3.
Standing assumptions. Fix an integer r > 4, a Kr -free graph G of large maximum degree ∆, and a
k-fold cover H = (L, H) of G with k > 200r∆ log2 log2 ∆/ log2 ∆. Set ` := ∆9/10 .
The role of Lemma 3.5 is played by the following statement:
Lemma 4.1. The graph H contains an independent set I such that
|LI (u)| > ` for all u ∈ V (GI )

and

∆(GI ) < `.

Note that Lemma 4.1 readily implies Theorem 1.5, since the DP-chromatic number of a graph is
always at most one plus its maximum degree. Lemma 4.1 in turn follows from an analog of [Mol17,
Lemma 15] for DP-coloring:

8

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

Lemma 4.2. Fix a vertex u ∈ V (G) and an independent set J ⊆ L(NG [u]). Let I 0 be a uniformly
random independent subset of LJ (NG (u)) and let I := J ∪ I 0 . Then:
(a) Pr [|LI (u)| < `] 6 ∆−3 /8; and

(b) Pr degGI (u) > ` and |LI (v)| > ` for all v ∈ NGI (u) 6 ∆−3 /8.
The derivation of Lemma 4.1 from Lemma 4.2 is almost verbatim identical to that of Lemma 3.5
from Lemma 3.6, and we do not spell it out here. To prove Lemma 4.2, we need a variant of a result
due to Shearer [She95] that was established by Molloy [Mol17, Lemma 14]. For a graph F , let ind(F )
denote the number of independent sets in F and let α(F ) denote the median size of an independent set
in F , i.e., the supremum of all α > 0 such that F contains at least ind(F )/2 independent sets of size at
least α. For λ > 0, define
log2 λ
f (λ) :=
.
2r log2 log2 λ
Lemma 4.3 ([Mol17, Lemma 14]). If F is a nonempty Kr -free graph, then α(F ) > f (ind(F )).
Proof of Lemma 4.2. We start with the proof of (a). For each x ∈ L(u), the layer of x is the set
Λ(x) := LJ (NG (u)) ∩ NH (x).
Equivalently, using the notation introduced in §3.2, we can write Λ(x) := NHJ∗ (x); i.e., Λ(x) contains all
the neighbors of x in H ∗ that are not adjacent to any element of J. Note that the layer of x intersects
each list L(v) for v ∈ NG (u) in at most one element. Also, for distinct x, y ∈ L(u), the layers Λ(x) and
Λ(y) are disjoint. However, in contrast to the situation in list coloring, H may contain edges between
Λ(x) and Λ(y) that are not covered by the cliques H[L(v)].
Let x ∈ L(u). For an independent set Q ⊆ LJ (NG (u)) \ Λ(x), let F (x, Q) denote the subgraph of H
induced by the vertices in Λ(x) with no neighbors in Q. The following observation is similar to (#)
from the proof of Lemma 3.5:
Fix x ∈ L(u) and an independent set Q ⊆ LJ (NG (u)) \ Λ(x). Then the random variable
I 0 ∩ Λ(x), conditioned on the event {I 0 \ Λ(x) = Q}, is uniformly distributed over the
independent sets in F (x, Q).

([)

From ([), it follows that I 0 can be constructed via the following randomized procedure. Let x1 , . . . , xk
be an arbitrary ordering of the set L(u). For each 1 6 i 6 k, let Λi := Λ(xi ).
Let I0 be a uniformly random independent subset of LJ (NG (u)). Set s0 := 0 and t0 := 0.
Repeat the next steps for each 1 6 i 6 k:
– Let Fi := F (xi , Ii−1 \ Λi ). Define si and ti as follows:
if ind(Fi ) > ∆1/20 , then si := si−1 + 1 and ti := ti−1 ,
while
1/20
if ind(Fi ) 6 ∆
, then si := si−1
and ti := ti−1 + 1.
– Let Si be a uniformly random independent set in Fi and let Ii := (Ii−1 \ Λi ) ∪ Si .
Set := Ik .
I0

It is clear from ([) that the set I 0 constructed by the above procedure is uniformly distributed over the
independent subsets of LJ (NG (u)) (see also [Mol17, Lemma 15, Claim 1]).
Let a(1), a(2), . . . and b(1), b(2), . . . be two infinite random sequences of zeros and ones drawn
independently from each other, such that for all s and t, we have
Pr[a(s) = 1] = 1/2

and

Pr[b(t) = 1] = ∆−1/20 .

Note that if the values I0 , S1 , . . . , Si−1 are fixed, then the corresponding conditional probability of
{|Si | > α(Fi )} is at least 1/2, while the conditional probability of {Si = ∅} is precisely 1/ ind(Fi ) (here
we are using the fact that the sets I0 , S1 , . . . , Si−1 fully determine Fi ). Therefore, we can couple

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

9

the distributions of the sequences a(1), a(2), . . . and b(1), b(2), . . . with the randomized procedure
described above in such a way that
if ind(Fi ) > ∆1/20 and a(si ) = 1, then |Si | > α(Fi ), while
if ind(Fi ) 6 ∆1/20 and b(ti ) = 1, then
Si = ∅.

(4.1)

The Chernoff bound for independent random variables implies that, with probability at least 1 − ∆−3 /8,
|{1 6 s 6 k/2 : a(s) = 1}| > k/5

and

|{1 6 t 6 k/2 : b(t) = 1}| > `.

(4.2)

We claim that |LI (u)| > ` whenever (4.2) holds. Since sk + tk = k, we always have either sk > k/2 or
tk > k/2. If sk > k/2, then (4.1) and the first part of (4.2) imply that there are at least k/5 indices i
such that ind(Fi ) > ∆1/20 and |Si | > α(Fi ). By Lemma 4.3, any such i satisfies
log2 ∆
|Si | > α(Fi ) > f (ind(Fi )) > f (∆1/20 ) >
,
40r log2 log2 ∆
so in this case
k
X
log2 ∆
k
|I 0 | =
> ∆.
|Si | > ·
5 40r log2 log2 ∆
i=1

This is a contradiction, as |I 0 | 6 degG (u) 6 ∆. Thus, we must have tk > k/2. From (4.1) and the
second part of (4.2), we obtain that there are at least ` indices i such that ind(Fi ) 6 ∆1/20 and Si = ∅.
But xi ∈ LI (u) for any such i, so |LI (u)| > `, as desired. This completes the proof of (a).
To prove (b), consider any collection v1 , . . . , vd`e of d`e distinct elements of NG (u). We claim that


1
,
(4.3)
Pr vt 6∈ dom(I 0 ) and |LI (vt )| > ` for all 1 6 t 6 d`e 6
d`e!

∆
/d`e! < ∆−3 /8 for large ∆. To show (4.3), consider an arbitrary independent
which is enough as d`e
set Q ⊆ LJ (NG (u)) disjoint from L(vt ) for all 1 6 t 6 d`e. We either have
|LJ (vt ) \ NH (Q)| < ` for some t,
or else, there exist at least d`e! ways to greedily choose elements xt ∈ LJ (vt ) so that Q ∪ {x1 , . . . , xd`e }
is an independent set. Therefore,



1
Pr vt 6∈ dom(I 0 ) and |LI (vt )| > ` for all 1 6 t 6 d`e  I 0 \ L({v1 , . . . , vd`e }) = Q 6
.
d`e!
Since Q is arbitrary, this yields (4.3).



A p p e n d i x : P ro o f o f a w e a k e r v e r s i o n o f L e m m a 3 . 4
Lemma. Let H = (L, H) be a cover of a graph G. If there is a positive integer ` such that |L(u)| > `
for all u ∈ V (G) and deg∗H (x) 6 `/8 for all x ∈ V (H), then G is H -colorable.
Proof. If necessary, we may remove some vertices from H to arrange that arrange that |L(u)| = ` for
all u ∈ V (G). Let I be a random subset of V (H) obtained by choosing, independently and uniformly,
a single vertex from each list L(u). For xy ∈ E(H ∗ ), let Bxy denote the random event {{x, y} ⊆ I}.
Then I is an independent set, and hence an H -coloring, precisely when none of the events Bxy happen.
By definition, Pr [Bxy ] = `−2 . Let u, v ∈ V (G) be such that x ∈ L(u), y ∈ L(v) and define
Γ(xy) := {x0 y 0 ∈ E(H ∗ ) : x0 ∈ L(u) or y 0 ∈ L(v)}.
Then
|Γ(xy)| 6

X
x0 ∈L(u)

deg∗H (x0 ) +

X

deg∗H (y 0 ) 6 2 · ` · `/8 = `2 /4.

y 0 ∈L(v)

Since Bxy is mutually independent from the events Bx0 y0 with x0 y 0 6∈ Γ(xy), an application of the LLL
proves that I is an H -coloring of G with positive probability, as desired.

Acknowledgments. I am very grateful to the anonymous referees for their valuable comments.

10

THE JOHANSSON–MOLLOY THEOREM FOR DP-COLORING

References
N . A l o n, M . K r i v e l e v i c h, and B . S u da kov. Coloring graphs with sparse
neighborhoods, J. Comb. Theory, Ser. B, 77 (1999), 73–82
N . A l o n and J . H . S p e n c e r. The Probabilistic Method. 2nd ed. John Wiley & Sons,
[AS00]
2000
A . B e r n s h t e y n. The asymptotic behavior of the correspondence chromatic number ,
[Ber16]
Disc. Math., 339 (2016), 2680–2692
[Bor13]
O . B o ro d i n. Colorings of plane graphs: a survey, Disc. Math., 313 (2013), 517–539
[Bos+16] B . B o s e k, S . C z e rw i ń s k i, J . G ry t c z u k, and P . R z ą ż e w s k i. Harmonious
coloring of uniform hypergraphs, Applicable Analysis and Disc. Math., 10 (2016), 73–87
[Duj+16] V . D u j m ov i ć, G . J o r e t, J . Ko z i k, and D . R . Wo o d. Nonrepetitive colouring
via entropy compression, Combinatorica, 36 (2016), 661–686
[DP15]
Z . Dvo ř á k and L . P o s t l e. Correspondence coloring and its application to list-coloring
planar graphs without cycles of lengths 4 to 8, https : / / arxiv . org / abs / 1508 . 03437
(preprint), 2015
[ERT79] P . E r d ő s, A . L . Ru b i n, and H . Tay l o r. Choosability in graphs, Proc. West Coast
Conf. on Combinatorics, Graph Theory and Computing, Congressus Numerantium XXVI,
(1979), 125–157
[EP13]
L . E s p e r e t and A . Pa r r e au. Acyclic edge-coloring using entropy compression,
European J. Combin., 34 (6) (2013), 1019–1027
[GKM13] J . G ry t c z u k, J . Ko z i k, and P . M i c e k. New approach to nonrepetitive sequences,
Rand. Str. & Alg., 42 (2) (2013), 214–225
[Hax01]
P . E . H a x e l l. A note on vertex list colouring, Combinatorics, Probability and Computing,
10 (2001), 345–347
[Joh96]
A . J o h a n s s o n. Asymptotic choice number for trangle free graphs. Technical Report
91–95. DIMACS, 1996
[Mol17]
M . M o l l oy. The list chromatic number of graphs with small clique number , https:
//arxiv.org/abs/1701.09133v2 (preprint), 2017
[PS97]
A . Pa n c o n e s i and A . S r i n i va s a n. Randomized distributed edge coloring via an
extension of the Chernoff–Hoeffding bounds, SIAM J. Comput., 26 (2) (1997), 350–368
S . P e t t i e and H . - H . S u. Distributed coloring algorithms for triangle-free graphs,
[PS15]
Information and Computation, 243 (2015), 263–280
[Ree99]
B . R e e d. The list colouring constants, J. Graph Theory, 31 (1999), 149–153
[She95]
J . B . S h e a r e r. On the independence number of sparse graphs, Rand. Str. & Alg., 7 (3)
(1995), 269–271
T . Tao. Moser’s entropy compression argument, What’s new, https : / / terrytao .
[Tao09]
wordpress.com/2009/08/05/mosers-entropy-compression-argument/ (blog post), 2009
[Viz76]
V . G . V i z i n g. Раскраска вершин графа в предписанные цвета (Russian) [Vertex
colorings with given colors], Metody Diskret. Analiz., 29 (1976), 3–10
[AKS99]

