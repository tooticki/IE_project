arXiv:1701.03301v1 [math.LO] 12 Jan 2017

IDEMPOTENT ULTRAFILTERS
WITHOUT ZORN’S LEMMA
MAURO DI NASSO AND ELEFTHERIOS TACHTSIS
Abstract. We introduce the notion of additive filter and present a new proof
of the existence of idempotent ultrafilters on N without any use of Zorn’s
Lemma, and where one only assumes the Ultrafilter Theorem for the continuum.

Introduction
Idempotent ultrafilters are a central object in Ramsey theory of numbers. Over
the last forty years they have been extensively studied in the literature, producing
a great amount of interesting combinatorial properties (see the extensive monography [12]). As reported in [11], it all started in 1971 when F. Galvin realized that by
assuming the existence of ultrafilters on N that are “almost translation invariant”,
one could produce a short proof of a conjecture of R. Graham and B. Rothschild,
that was to become a cornerstone of Ramsey theory of numbers: “For every finite
coloring of the natural numbers there exists an infinite set X such that all finite
sums of distinct elements of X have the same color.” However, at that time the
problem was left open as whether such special ultrafilters could exist at all. In
1972, N. Hindman [9] showed that the continuum hypothesis suffices to construct
those ultrafilters, but their existence in ZFC remained unresolved. Eventually, in
1974, N. Hindman [10] proved Graham-Rothschild conjecture (now known as Hindman’s Theorem) with a long and intricate combinatorial argument that avoided
the use of ultrafilters. Shortly afterwards, in 1975, S. Glazer observed that “almost translation invariant” ultrafilters are precisely the idempotent elements of the
semigroup (βN, ⊕), where βN is the Stone-Čech compactification of the discrete
space N (which can be identified with the space of ultrafilters on N) and where ⊕
is a suitable pseudo-sum operation between ultrafilters. The existence of idempotent ultrafilters is then immediate, since any compact Hausdorff right-topological
semigroup has idempotents, a well-known fact in semigroup theory known as EllisNumakura’s Lemma. The proof of that lemma heavily relies on the axiom of choice,
as it consists in a clever and elegant use of Zorn’s Lemma jointly with the topological properties of a compact Hausdorff space. In 1989, T. Papazyan [16] introduced
the notion of “almost translation invariant filter ”, and proved that the maximal filters in that class, obtained by applying Zorn’s Lemma, are necessarily ultrafilters,
and hence idempotent ultrafilters.
2000 Mathematics Subject Classification. Primary 03E25, 03E05, 54D80; Secondary 05D10.
Key words and phrases. Algebra on βN, Idempotent ultrafilters, Ultrafilter Theorem.
1

2

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

Despite their central role in a whole area of combinatorics of numbers, no other
proofs are known for the existence of idempotent ultrafilters. However, as it often happens with fundamental objects of mathematics, alternative proofs seem
desirable because they may give a better insight and potentially lead to new applications. It is worth mentioning that generalizations of idempotent ultrafilters have
been recently considered both in the usual set-theoretic context, and in the general
framework of model theory: see [15] where P. Krautzberger thoroughly investigated
the almost translation invariant filters (appropriately named “idempotent filters”),
and see [1] where U. Andrews and I. Goldbring studied a model-theoretic notion of
idempotent type and its relationship with Hindman’s Theorem.
In this paper we introduce the notion of additive filter, which is weaker than
the notion of idempotent filter. By suitably modifying the argument used in EllisNumakura’s Lemma, we show that Zorn’s Lemma is not needed to prove that every
additive filter can be extended to a maximal additive filter, and that every maximal
additive filter is indeed an idempotent ultrafilter. Precisely, we will only assume
the following restricted form of the Ultrafilter Theorem (a strictly weaker form of
the axiom of choice): “Every filter on R can be extended to an ultrafilter.”

1. Preliminary facts
Although the notions below could also be considered on arbitrary sets, here we
will focus only on the set of natural numbers N. We agree that a natural number
is a positive integer, so 0 6∈ N.
Recall that a filter F is a nonempty family of nonempty sets that is closed under
supersets and under (finite) intersections.1 An ultrafilter is a filter that is maximal
with respect to inclusion; equivalently, a filter U is an ultrafilter if whenever A ∈
/U,
the complement Ac ∈ U . Trivial examples are given by the principal ultrafilters
Un = {A ⊆ N | n ∈ A}. Notice that an ultrafilter is non-principal if and only if
it extends the Fréchet filter {A ⊆ N | Ac finite} of cofinite sets. In the following,
F , G will denote filters on N, and U , V , W will denote ultrafilters on N.
Recall that the Stone-Čech compactification βN of the discrete space N can be
identified with the space of all ultrafilters on N endowed with the Hausdorff topology
that has the family {{U ∈ βN | A ∈ U } | A ⊆ N} as a base of (cl)open sets. (We
note here that the above identification is feasible in ZF, i.e., in the Zermelo–Fraenkel
set theory minus the axiom of choice AC; see [7, Theorems 14, 15].)
The existence of non-principal ultrafilters is established by the
• Ultrafilter Theorem UT: “For every set X, every proper filter on X can be
extended to an ultrafilter.”
The proof is a direct application of Zorn’s Lemma.2 It is a well-known fact that
UT is a strictly weaker form of AC (see, e.g., [13] and references therein). This
means that one cannot prove UT in ZF alone, and that ZF+UT does not prove AC.
1 More formally, F ⊆ P(N) \ {∅} is a filter if the following three properties are satified:
(1) N ∈ F , (2) B ⊇ A ∈ F ⇒ B ∈ F , (3) A, B ∈ F ⇒ A ∩ B ∈ F .
2 In the study of weak forms of choice, one usually considers the equivalent formulation given
by the Boolean Prime Ideal Theorem BPI: “Every nontrivial Boolean algebra has a prime ideal”.
(See [13] where BPI is Form 14 and UT is Form 14 A.)

IDEMPOTENT ULTRAFILTERS WITHOUT ZORN’S LEMMA

3

Definition 1.1. The pseudo-sum of two filters F and G is defined by letting for
every set A ⊆ N:
A ∈ F ⊕ G ⇐⇒ {n | A − n ∈ G } ∈ F
where A − n = {m ∈ N | m + n ∈ A} is the rightward shift of A by n.
Notice that if U and V are ultrafilters, then also their pseudo-sum U ⊕ V is an
ultrafilter. It is verified in a straightforward manner that the space of ultrafilters
βN endowed with the pseudo-sum operation has the structure of a right-topological
semigroup; that is, ⊕ is associative, and for every ultrafilter V the “product-onthe-right” U 7→ U ⊕ V is a continuous function on βN (see [12] for all details).
Definition 1.2. An idempotent ultrafilter is an ultrafilter U which is idempotent
with respect to the pseudo-sum operation, i.e., U = U ⊕ U .
We remark that the notion of idempotent ultrafilter is considered and studied in
the general setting of semigroups (see [12]; see also the recent book [18]); however,
for simplicity, here we will stick to idempotents in (βN, ⊕).
For sets A ⊆ N and for ultrafilters V , let us denote by
AV = {n | A − n ∈ V }.
So, by definition, A ∈ F ⊕ V if and only if AV ∈ F . Notice that for every A, B
one has AV ∩ BV = (A ∩ B)V , AV ∪ BV = (A ∪ B)V , and (AV )c = (Ac )V .
The following construction of filters will be useful in the sequel.
Definition 1.3. For filters F , G and ultrafilter V , let
F (V , G ) = {B ⊆ N | B ⊇ F ∩ AV for some F ∈ F and some A ∈ G }.
Notice that, whenever it satisfies the finite intersection property, the family
F (V , G ) is the smallest filter that contains both F and {AV | A ∈ G }. Families F (V , G ) satisfy the following properties that will be relevant to our purposes.
Proposition 1.4 (ZF). Let F be a filter, and let V be an ultrafilter. Then for
every filter G ⊇ F ⊕ V , the family F (V , G ) is a filter such that F ⊆ F (V , G )
and G ⊆ F (V , G ) ⊕ V .
Proof. The inclusion F (V , G ) ⊇ F follows from the trivial observation that NV =
N, and hence F = F ∩ N = F ∩ NV ∈ F (V , G ) for every F ∈ F . All sets in
F (V , G ) are nonempty; indeed if F ∩ AV = ∅ for some F ∈ F and some A ∈ G ,
then F ⊆ (AV )c = (Ac )V ⇒ (Ac )V ∈ F ⇔ Ac ∈ F ⊕ V ⊆ G ⇒ A ∈
/ G.
Since F (V , G ) is closed under supersets and under finite intersections, it is a filter.
Finally, A ∈ G ⇒ AV = N ∩ AV ∈ F (V , G ) ⇔ A ∈ F (V , G ) ⊕ V .

Corollary 1.5 (ZF). Let F be a filter, and let V , W be ultrafilters where W ⊇
F ⊕ V . Then for every ultrafilter U we have:
(1) If U ⊇ F (V , W ) then U ⊕ V = W ;
(2) If U ⊕ V = W and F ⊆ U then F (V , W ) ⊆ U .
Proof. (1) If U ⊇ F (V , W ) then U ⊇ F and W ⊆ F (V , W ) ⊕ V ⊆ U ⊕ V , and
hence W = U ⊕ V , since no inclusion between ultrafilters can be proper, by their
maximality.
(2) By definition, U ⊕ V = W if and only if AV ∈ U for all A ∈ W . Since
F ∈ U for all F ∈ F , it follows that F (V , W ) ⊆ U .


4

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

Let us now denote by UT(X) the restriction of UT to the set X, namely the
property that every filter on X is extended to an ultrafilter. In particular, in the
sequel we will consider UT(N) and UT(R).3
Corollary 1.6 (ZF+UT(N)). Let F be a filter and let V , W be ultrafilters. Then
W ⊇ F ⊕ V if and only if W = U ⊕ V for some ultrafilter U ⊇ F .
Proof. One direction is trivial, because U ⊇ F directly implies U ⊕ V ⊇ F ⊕ V
for every V . Conversely, given an ultrafilter W ⊇ F ⊕ V , by UT(N) we can pick
an ultrafilter U ⊇ F (V , W ) ⊇ F , and the equality U ⊕ V = W is satisfied by (1)
of the previous corollary.

2. Additive filters
The central notion in this paper is the following.
Definition 2.1. A filter F is additive if for every ultrafilter V ⊇ F , the pseudosum F ⊕ V ⊇ F ; that is, AV ∈ F for every A ∈ F .
Remark 2.2. In 1989, T. Papazyan [16] considered the almost translation invariant
filters F such that F ⊆ F ⊕ F , and showed that every maximal filter in that
class is necessarily an ultrafilter, and hence an idempotent ultrafilter. We remark
that almost translation invariance is a stronger notion with respect to addivity;
indeed, it is straightforwardly seen that any almost translation invariant filter is
additive, but not conversely. (For the latter assertion, see Example 3.9 in the next
section.) That same class of filters, named idempotent filters, has been thoroughly
investigated by P. Krautzberger in [15].
A first trivial example of an additive filter is given by F = {N}; another easy
example is given by the Fréchet filter {A ⊆ N | Ac finite} of cofinite sets. More
interesting examples are obtained by considering “additively large sets”. For any
X ⊆ N, the set of all (finite) sums of distinct elements of X is denoted by
(
)
X 
FS(X) =
x  F ⊆ X is finite nonempty .
x∈F

Recall that a set A ⊆ N is called additively large if it contains a set FS(X)
for some infinite X. A stronger version of Hindman’s Theorem states that the
family of additively large sets is partition regular, i.e., if an additively large set
is partitioned into finitely many pieces, then one of the pieces is still additively
large. By using a model-theoretic argument, it was shown that this property is
a ZF-theorem, although no explicit proof is known where the use of the axiom of
choice is avoided (see §4.2 of [4]).
As mentioned in the introduction, idempotent ultrafilters can be used to give a
short and elegant proof of Hindman’s Theorem; indeed, in ZF, all sets in an idempotent ultrafilter are additively large, whereas, in ZFC, for every additively large set
A there exists an idempotent ultrafilter U such that A ∈ U .4 For completeness,
let us recall here a proof of the former combinatorial property, whose simplicity and
elegance was the main motivation for the interest in that special class of ultrafilters.
3 UT(N) is Form 225 in [13].
4 See Theorem 5.12 and Lemma 5.11 of [12], respectively.

IDEMPOTENT ULTRAFILTERS WITHOUT ZORN’S LEMMA

5

Notice first that if V ⊕ V = V then V is non-principal.5 If A ∈ V , then
A = A ∩ AV ∈ V . It is readily verified that A⋆ − a ∈ V for every a ∈ A⋆ . Pick any
x1 ∈ A⋆ . Then A1 = A⋆ ∩ (A∗ − x1 ) ∈ V , and we can pick x2 ∈ A1 where x2 > x1 .
Since x1 , x2 , x1 +x2 ∈ A⋆ , the set A2 = A⋆ ∩(A⋆ −x1 )∩(A⋆ −x2 )∩(A⋆ −x1 −x2 ) ∈ V ,
and we can pick x3 ∈ A2 where x3 > x2 . By iterating the process, one obtains an
infinite sequence X = {x1 < x2 < x3 < . . .} such that FS(X) ⊆ A⋆ ⊆ A, as
desired.6
Every additively large set determines an additive filter, as the next ZF-example
clarifies.
⋆

Example 2.3. Given an infinite set X = {x1 < x2 < . . .}, denote by
F S X = {A ⊆ N | A ⊇ FS(X \ F ) for some finite F ⊂ X} .
Clearly, F S X is a filter that contains FS(X). It just takes a quick check to verify
that F S X ⊆ F S X ⊕ F S X , and hence F S X is additive.
Proposition 2.4 below provides a necessary and sufficient condition for a filter
to be additive, and shows that additive filters directly correspond to the closed
sub-semigroups of (βN, ⊕).
Proposition 2.4 (ZF+UT(N)). A filter F is additive if and only if F ⊆ U ⊕ V
for every pair of ultrafilters U , V ⊇ F .
Proof. For the “only if” implication, notice first that ZF+UT(N) implies that F
equals the intersection of all ultrafilters U ⊇ F . By the hypothesis, for every
A ∈ F one has that AV ∈ U for all ultrafilters U ⊇ F , and hence AV ∈ F .
Conversely, assume there exists an ultrafilter V ⊇ F with F 6⊆ F ⊕ V , and pick
a set A ∈ F with A ∈
/ F ⊕ V , that is, AV ∈
/ F . Then there exists an ultrafilter
U ⊇ F with AV ∈
/ U (note that the family {F ∩ (AV )c | F ∈ F } has the finite
intersection property, thus it can be extended to an ultrafilter by UT(N)). Then
A∈
/ U ⊕ V and the set A is a witness of F 6⊆ U ⊕ V .

Remark 2.5. If C is a nonempty closed sub-semigroup of (βN, ⊕) then
\
Fil(C) =
U
U ∈C

is an additive filter. To show this, notice first that if V ⊇ Fil(C) is an ultrafilter,
then V ∈ C = C. So, for all ultrafilters V , V ′ ⊇ Fil(C) one has that V ⊕ V ′ ∈ C
by the property of sub-semigroup, and hence V ⊕ V ′ ⊇ Fil(C). Conversely, if F is
an additive filter, then UT(N) implies that
Cl(F ) = {U ∈ βN | U ⊇ F }
is a nonempty closed sub-semigroup. Moreover, the two operations are one the
inverse of the other, since Cl(Fil(C)) = C and Fil(Cl(F )) = F for every nonempty
closed sub-semigroup C and for every additive filter F .
Next, we show two different ways of extending additive filters that preserve the
additivity property.
5 The only possible principal idempotent ultrafilter would be generated by an element m such
that m + m = m, whereas we agreed that 0 ∈
/ N.
6 For detailed proofs of other basic properties of idempotent ultrafilters the reader is referred
to [12].

6

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

Proposition 2.6 (ZF+UT(N)). Let F be an additive filter. Then for every ultrafilter V ⊇ F , the filter F ⊕ V is additive.
Proof. Take any ultrafilter W ⊇ F ⊕ V . Then, by Corollary 1.6, there exists an
ultrafilter U ⊇ F such that W = U ⊕ V . By additivity of F , we have that
F ⊆ F ⊕U ⊆ V ⊕U ⇒ F ⊆ F ⊕V ⊕U ⇒ F ⊕V ⊆ F ⊕V ⊕U ⊕V =
(F ⊕ V ) ⊕ W .

Proposition 2.7 (ZF). Let F be an additive filter. Then for every ultrafilter V
where V ⊇ F ⊕ V , F (V , V ) is an additive filter.
Proof. Let U1 , U2 ⊇ F (V , V ) be ultrafilters. We want to show that F (V , V ) ⊆
U1 ⊕ U2 . Since F is additive and U1 , U2 ⊇ F (V , V ) ⊇ F by Proposition 1.4, we
have that F ⊆ U1 ⊕ U2 . By Corollary 1.5, we have U1 ⊕ V = U2 ⊕ V = V , and
so V = U1 ⊕ U2 ⊕ V . But then for every A ∈ V the set AV ∈ U1 ⊕ U2 , and the
proof is complete.

Theorem 2.8 (ZF+UT(N)). If a filter is maximal among the additive filters then
it is an idempotent ultrafilter.
Proof. Let F be maximal among the additive filters. By UT(N) we can pick an
ultrafilter V ⊇ F . We will show that V = F and V ⊕ V = V . By additivity
F ⊆ F ⊕ V , and since F ⊕ V is additive, by maximality F = F ⊕ V . Since F is
additive and the ultrafilter V ⊇ F ⊕ V , also the filter F (V , V ) is additive by the
previous proposition and so, again by maximality, F (V , V ) = F . In particular,
for every A ∈ V one has that AV ∈ F (V , V ) = F , that is A ∈ F ⊕ V = F .
This shows that V ⊆ F , and hence V = F . Finally, since V ⊇ F (V , V ) and
V ⊇ F ⊕ V , we have V ⊕ V = V by Corollary 1.5.

Thanks to the above properties of additive filters, one proves the existence of
idempotent ultrafilters with a straight application of Zorn’s Lemma.
Theorem 2.9 (ZFC). Every additive filter can be extended to an idempotent ultrafilter.
Proof. Given an additive filter F , consider the following family
F = {G ⊇ F | G is an additive filter}.
It is easily S
verified that if hGi | i ∈ Ii is an increasing sequence of filters in F, then
the union i∈I Fi is an additive filter. So, Zorn’s Lemma applies, and one gets
a maximal element G ∈ F. By the previous theorem, G ⊇ F is an idempotent
ultrafilter.

Remark 2.10. As already pointed out in the introduction, with the only exception
of [16], the only known proof of existence of idempotent ultrafilters is grounded on
Ellis-Numakura’s Lemma, a general result in semigroup theory that establishes the
existence of idempotent elements in every compact right-topological semigroups.
An alternate argument to prove the above Theorem 2.9 can be obtained by same
pattern. Indeed, given an additive filter F , by Remark 2.5 we know that C = Cl(F )
is a closed nonempty sub-semigroup of the compact right-topological semigroup
(βN, ⊕). In consequence, (C, ⊕) is itself a compact right-topological semigroup,
so Ellis-Numakura’s Lemma applies, and one gets the existence of an idempotent
element U ∈ C; clearly, U ⊇ F .

IDEMPOTENT ULTRAFILTERS WITHOUT ZORN’S LEMMA

7

As Zorn’s Lemma was never used in this section except for the last theorem
above, we are naturally lead to the following question:
• Can one prove Theorem 2.9 without using Zorn’s Lemma?
Clearly, at least some weakened form of the Ultrafilter Theorem must be assumed,
as otherwise there may be no non-principal ultrafilters at all (see [13]). We will
address the above question in the next section.
3. Avoiding Zorn’s Lemma
Proposition 3.1 (ZF). Assume there exists a choice function Φ that associates
to every additive filter F an ultrafilter Φ(F ) ⊇ F . Then there exists a choice
function Ψ that associates to every additive filter F an ultrafilter Ψ(F ) ⊇ F such
that Ψ(F ) ⊇ F ⊕ Ψ(F ).
Proof. Given an additive filter F , let us define a sequence of filters by transfinite
recursion as follows. At the base step, let F0 = F . At successor steps, let Fα+1 =
Fα if Φ(Fα ) ⊇ Fα ⊕ Φ(F
S α ), and let Fα+1 = Fα ⊕ Φ(Fα ) otherwise. Finally, at
limit steps λ, let Fλ = α<λ Fα . It is readily seen by induction that all Fα are
additive filters, and that Fα ⊆ Fβ for α ≤ β. If it was Fα+1 6= Fα for all α, then
the sequence hFα | α ∈ ONi would be strictly increasing.7 This is not possible,
even without assuming AC, because otherwise we would have a 1-1 correspondence
α 7→ Fα+1 \ Fα from the proper class ON into the set P(P(N)), contradicting the
replacement axiom schema. Then define Ψ(F ) = Φ(Fα ) where α is the least ordinal
such that Fα+1 = Fα . Such an ultrafilter Ψ(F ) satisfies the desired properties.
Indeed, Φ(Fα ) ⊇ Fα ⊇ F0 = F . Moreover, if it was Φ(Fα ) 6⊇ F ⊕ Φ(Fα ),
then also Φ(Fα ) 6⊇ Fα ⊕ Φ(Fα ), and so Fα+1 = Fα ⊕ Φ(Fα ). But then, since
Φ(Fα ) ⊇ Fα and Φ(Fα ) 6⊇ Fα+1 , it would follow that Fα+1 6= Fα , against the
hypothesis.

Theorem 3.2 (ZF). Assume there exists a choice function Φ that associates to
every additive filter F an ultrafilter Φ(F ) ⊇ F . Then there exists a choice function
Θ that associates to every additive filter F an idempotent ultrafilter Θ(F ) ⊇ F .
Proof. Fix a function Ψ as given by the previous proposition. Given an additive
filter F , by transfinite recursion let us define the sequence hFα | α ∈ ONi as
follows. At the base step, let F0 = F . At successor steps α + 1, consider the
ultrafilter Vα = Ψ(Fα ), and let Fα+1 = Fα if Vα ⊇ FS
α (Vα , Vα ), and let Fα+1 =
Fα (Vα , Vα ) otherwise. At limit steps λ, let Fλ = α<λ Fα . It is shown by
induction that all Fα are additive filters, and that Fα ⊆ Fβ for α ≤ β. Indeed,
notice that at successor steps Fα (Vα , Vα ) ⊇ Fα is additive by Proposition 2.7, since
Vα = Ψ(Fα ) ⊇ Fα ⊕Vα . By the same argument as used in the proof of the previous
proposition, it cannot be Fα+1 6= Fα for all ordinals. So, we can define Θ(F ) =
Ψ(Fα ) where α is the least ordinal such that Fα+1 = Fα . Let us verify that the
ultrafilter Θ(F ) satisfies the desired properties. First of all, Θ(F ) = Ψ(Fα ) ⊇ F .
Now notice that Vα ⊇ Fα (Vα , Vα ), as otherwise Fα+1 = Fα (Vα , Vα ) and we would
have Fα 6= Fα+1 , since Vα ⊇ Fα but Vα 6⊇ Fα+1 . So, Θ(F ) = Ψ(Fα ) = Vα , and
by Corollary 1.5, we finally obtain that Vα ⊕ Vα = Vα .

7 By ON we denote the proper class of all ordinals.

8

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

Corollary 3.3 (ZF). Assume there exists a choice function Φ that associates to
every additive filter F an ultrafilter Φ(F ) ⊇ F . Then for every additively large
set A there exists an idempotent ultrafilter U where A ∈ U .
Proof. Let X be an infinite set with FS(X) ⊆ A, and consider the additive filter
F S X of Example 2.3. Then A ∈ F S X and, by the previous theorem, F S X is
included in an idempotent ultrafilter.

In order to prove that every additive filter extends to an idempotent ultrafilter,
one does not need the full axiom of choice, and indeed we will see that a weakened
version of the Ultrafilter Theorem suffices.
The result below was proved in [8, Lemma 4(ii)] as the outcome of a chain
of results about the relative strength of UT(R) with respect to properties of the
Tychonoff products 2P(R) and 2R , where 2 = {0, 1} has the discrete topology.8 In
order to keep our paper self-contained, we give here an alternative direct proof
where explicit topological notions are avoided.
Proposition 3.4 (ZF+UT(R)). There exists a choice function Φ that associates
to every filter F on N an ultrafilter Φ(F ) ⊇ F .
Proof. Every filter is an element of P(P(N)), which is in bijection with P(R). So,
in ZF, one has a 1-1 enumeration of all filters {FY | Y ∈ F} for a suitable family
F ⊆ P(R). Fix a bijection ψ : P(N) × P(R) → P(R), let I = Fin(R) × Fin(Fin(R))
(where for a set X, Fin(X) denotes the set of finite subsets of X), and for every
(A, Y ) ∈ P(N) × P(R), let
X(A, Y ) = {(F, S) ∈ I | S ⊆ P(F ); ψ(A, Y ) ∩ F ∈ S}.
Notice that for every B ⊆ P(N) × P(R), the family
hBi = {X(A, Y ) | (A, Y ) ∈ B} ∪ {X(A, Y )c | (A, Y ) ∈
/ B}
has the finite intersection property. Indeed, given pairwise distinct (A1 , Y1 ), . . .,
(Ak , Yk ) ∈ B and pairwise distinct (B1 , Z1 ), . . . , (Bh , Zh ) ∈
/ B, for every i, j pick
an element ui,j ∈ ψ(Ai , Yi )△ψ(Bj , Zj ) (where △ denotes the symmetric difference
of sets). If we let
F = {ui,j | i = 1, . . . , k; j = 1, . . . , h} and S = {ψ(Ai , Yi ) ∩ F | i = 1, . . . , k},
Tk
Th
then it is readily seen that (F, S) ∈ i=1 X(Ai , Yi ) ∩ j=1 X(Bj , Zj )c .
For every Y ∈ F, let us now consider the following family of subsets of I:
GY = {X(A, Y ) | A ∈ FY } ∪ {Λ(A, B, Y ) | A, B ⊆ N} ∪ {Γ(A, Y ) | A ⊆ N}
∪ {∆(A, B, Y ) | A ⊆ B ⊆ N}
where
• Λ(A, B, Y ) = X(A, Y )c ∪ X(B, Y )c ∪ X(A ∩ B, Y ) ;
• Γ(A, Y ) = X(A, Y ) ∪ X(Ac , Y ) ;
• ∆(A, B, Y ) = X(A, Y )c ∪ X(B, Y ).
8 Precisely, a proof of Proposition 3.4 is obtained by combining the following ZF-results: (a)

UT(R) if and only 2P(R) is compact; (b) βN embeds as a closed subspace of 2R ; (c) UT(R) implies
that 2R , and hence βN, is both compact and Loeb. Recall that a topological space is Loeb if there
exists a choice function on the family of its nonempty closed subspaces. Recall also that nonempty
closed subspaces of βN correspond to filters (see Remark 2.5).

IDEMPOTENT ULTRAFILTERS WITHOUT ZORN’S LEMMA

9

Sk
We want to show that every finite union S
i=1 GYi where Yi ∈ F has the finite
intersection property, and hence also G = Y ∈F GY has the finite intersection
property. By UT(N), which follows from UT(R), we can pick ultrafilters Vi ⊇ FYi
for i = 1, . . . , k. Then
H =

k
[

({X(A, Yi ) | A ∈ Vi } ∪ {X(A, Yi )c | A ∈
/ Vi })

i=1

has the finite intersection property, because H ⊂ hBi where B = {(A, Yi ) | 1 ≤
Sk
i ≤ k; A ∈ Vi }. Now let G1 , . . . , Gh ∈ i=1 GYi . For every Gj pick Hj ∈ H such
that Hj ⊆ Gj as follows. If Gj = X(A, Yi ) for some A ∈ FYi then let Hj = Gj ; if
Gj = Λ(A, B, Yi ) then let Hj = X(A, Yi )c if A ∈
/ Vi , let Hj = X(B, Yi )c if A ∈ Vi
and B ∈
/ Vi , and let Hj = X(A ∩ B, Yi ) if A, B ∈ Vi ; if Gj = Γ(A, Yi ) then let
Hj = X(A, Yi ) if A ∈ Vi , and let Hj = X(Ac , Yi ) if A ∈
/ Vi ; and if Gj = ∆(A, B, Yi )
(where A ⊆ B) then let Hj = X(B, Yi ) if A ∈ Vi or B ∈ Vi , and let Hj = X(A, Yi )c
Th
Th
if A 6∈ Vi and B 6∈ Vi . But then j=1 Gj is nonempty because it includes j=1 Hj
and the family H has the finite intersection property.
Since I = Fin(R) × Fin(Fin(R)) is in bijection with R, by UT(R) there exists an
ultrafilter U ⊇ G . Finally, for every Y ∈ F, the family
UY = {A ⊆ N | X(A, Y ) ∈ U}
is an ultrafilter that extends FY . Indeed, if A ∈ FY then X(A, Y ) ∈ GY ⊆ U,
and so A ∈ UY . Now assume A, B ∈ UY , i.e. X(A, Y ), X(B, Y ) ∈ U. Since
Λ(A, B, Y ) ∈ GY ⊆ U, we have X(A∩B, Y ) = Λ(A, B, Y )∩X(A, Y )∩X(B, Y ) ∈ U,
and so A ∩ B ∈ UY . Now let A ∈ UY and also let B ⊇ A. Since ∆(A, B, Y ) ∈
GY ⊆ U, we have X(A, Y ) ∩ ∆(A, B, Y ) ∈ U. Furthermore, X(B, Y ) ⊇ X(A, Y ) ∩
X(B, Y ) = X(A, Y ) ∩ ∆(A, B, Y ), thus X(B, Y ) ∈ U, and consequently B ∈ UY .
Now let A ⊆ N. If A ∈
/ UY , i.e. if X(A, Y ) ∈
/ U, then X(A, Y )c ∈ U. But
c
Γ(A, Y ) ∈ GY ⊆ U, so X(A , Y ) ⊇ Γ(A, Y ) ∩ X(A, Y )c ∈ U, and hence Ac ∈ UY .
Clearly, the correspondence FY 7→ UY yields the desired choice function.

Remark 3.5. In ZF, the property that “there exists a choice function Φ that associates to every filter F on N an ultrafilter Φ(F ) ⊇ F ” is equivalent to the property
that “βN is compact and Loeb” (see [8, Proposition 1(ii)]). We remark that the
latter statement is strictly weaker than UT(R) in ZF (see [14, Theorem 10]).
By putting together Proposition 3.4 with Theorem 3.2, one obtains:
Theorem 3.6 (ZF+UT(R)). Every additive filter can be extended to an idempotent
ultrafilter.
Remark 3.7. Since every idempotent filter F ⊆ F ⊕ F is readily seen to be
additive, as a straight corollary we obtain Paparyan’s result [16] that every maximal
idempotent filter is an idempotent ultrafilter.
Remark 3.8. The above Theorem 3.6 cannot be proved by ZF alone. Indeed, since
the Fréchet filter {A ⊆ N | N\A is finite} is additive, one would obtain the existence
of a non-principal ultrafilter on N in ZF, against the well-known fact that there exist
models of ZF with no non-principal ultrafilters on N (see [13]).
We conclude this section by showing an example of an additive filter F which
is not idempotent, i.e., F 6⊆ F ⊕ F .

10

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

Recall that a nonempty family P ⊆ P(N) is partition regular if in every finite
partition A = C1 ∪. . .∪Cn where A ∈ P, one of the pieces Ci ∈ P; it also assumed
that P is closed under supersets, i.e., A′ ⊇ A ∈ P ⇒ A′ ∈ P. In this case, the
dual family
P ∗ = {A ⊆ N | Ac ∈
/ P} = {A ⊆ N | A ∩ B 6= ∅ for every B ∈ P}
T
is a filter; moreover, by assuming UT(N), one has P ∗ = {U ∈ βN | U ⊇ P}.
All these facts follow from the definitions in a straightforward manner (see, e.g.,
[12, Theorem 3.11] or [2]).
Call finitely additively large (FAL for short) a set A ⊆ N such that for every n ∈ N
there exist x1 < . . . < xn with FS({xi }ni=1 ) ⊆SA. Clearly every additively large set
is FAL, but not conversely; e.g., the set A = k∈N FS({2i | 2k−1 ≤ i < 2k }) is FAL
but not additively large.9

Example 3.9. (ZF). The following family is an additive filter which is not idempotent:
F = {A ⊆ N | Ac is not FAL}.
First of all, the dual family F is a filter because the family of FAL sets is partition
regular. Recall that the latter property is a consequence of Folkman’s Theorem in
its finite version: “For every n and for every r there exists N such that for every
r-coloring {1, . . . , N } = C1 ∪ . . . ∪ Cr there exists a set S of cardinality n with
FS(S) monochromatic.” (For a ZF-proof of Folkman’s Theorem, see [6, Theorem
11, Lemma 12], pp. 81–82.)
In order to show that F is additive, fix any ultrafilter V ⊇ F ; we want to see
that F ⊆ F ⊕ V . Notice that every B ∈ V is FAL, as otherwise B c ∈ F ⊆ V
and we would have ∅ = B ∩ B c ∈ V . By the definitions, if A ∈
/ F ⊕ V then
AV = {n | A − n ∈ V } 6∈ F , i.e., (AV )c = {n | Ac − n ∈ V } is FAL. Then for
every n there exist x1 < . . . < xn T
such that Ac − s ∈ V for every s ∈ FS({xi }ni=1 ).
Since the finite intersection B = {Ac − s | s ∈ FS({xi }ni=1 )} also belongs to V ,
we can pick y1 < . . . < yn where y1 > x1 + . . . + xn such that FS({yi }ni=1 ) ⊆ B. It
is readily verified that x1 + y1 < . . . < xn + yn and that FS({xi + yi }ni=1 ) ⊆ Ac .
This shows that Ac is FAL, and hence A 6∈ F .
Let us now check that the filter F is not idempotent. To this end, we need
some preliminary work. DenoteP
by N0 = N ∪ {0}, and let ψ : Fin(N0 ) → N0
i
be the bijection where ψ(F ) =
i∈F 2 for F 6= ∅ and ψ(∅) = 0. Notice that
ψ(F ) + ψ(G) = ψ(F △G) + 2 · ψ(F ∩ G), and also observe that for every H one has
2 · ψ(H) = ψ(1 + H) where 1 + H = {1 + h | h ∈ H}. In consequence, if E is the
set of even natural numbers, the following property is easily checked:
(⋆) Let F, G ∈ Fin(E). Then ψ(F ) + ψ(G) = ψ(H) for some H ∈ Fin(E) if
and only if F ∩ G = ∅ and F ∪ G = H.
S
Now fix a partition E = n∈N0 An of the even natural numbers into infinitely
many infinite sets, and define

	
X = ψ(F ∪ G) | ∅ 6= F ∈ Fin(A0 ) & ∅ 6= G ∈ Fin(Aψ(F ) ) .

We will see that X c ∈ F and X c ∈
/ F ⊕ F , thus showing that F 6⊆ F ⊕ F .
The first property follows from the fact that there are no triples a, b, a + b ∈ X,
and hence X is not FAL. To see this, assume by contradiction that ψ(F1 ∪ G1 ) +
9 This example is mentioned in [3], p. 4499; see also [2, Theorem 1.12], where FAL sets are
called IP<ω sets.

IDEMPOTENT ULTRAFILTERS WITHOUT ZORN’S LEMMA

11

ψ(F2 ∪ G2 ) = ψ(F3 ∪ G3 ) for suitable nonempty F1 , F2 , F3 ∈ Fin(A0 ) and Gi ∈
Fin(Aψ(Fi ) ). By the above property (⋆), it follows that (F1 ∪ G1 ) ∩ (F2 ∪ G2 ) = ∅,
and hence F1 ∩ F2 = ∅; moreover, (F1 ∪ G1 ) ∪ (F2 ∪ G2 ) = F3 ∪ G3 , and hence
F1 ∪ F2 = F3 and G1 ∪ G2 = G3 . This is not possible because F1 ∩ F2 = ∅ implies
that F1 , F2 6= F3 , and so (G1 ∪ G2 ) ∩ G3 = ∅.
By the definitions, X c 6∈ F ⊕ F if and only if Ξ = {n | X c − n ∈ F } 6∈ F
if and only if Ξc = {n | X − n is FAL} is FAL, and this last property is true.
Indeed, for every nonempty F ∈ Fin(A0 ) and for every nonempty G ∈ Fin(Aψ(F ) ),
we have that F ∩ G = ∅ and so ψ(F ∪ G) = ψ(F ) + ψ(G). In consequence, the
set X − ψ(F ) ⊇ {ψ(G) | ∅ 6= G ∈ Fin(Aψ(F ) )} = FS(Aψ(F ) ) is additively large,
and hence FAL. But then also Ξc ⊇ {ψ(F ) | ∅ 6= F ∈ Fin(A0 )} = FS(A0 ) is FAL
because it is additively large, as desired.
Remark 3.10. The above example is fairly related to Example 2.8 found in P.
Krautzberger’s thesis [15]; however there are relevant differences. Most notably,
besides the fact that different semigroups are considered, our example is carried
within ZF, whereas the proof in [15] requires certain weak forms of the axiom of
choice. Let us see in more detail.
In [15] one first considers a partial semigroup (F, ·) on the family F of finite
subsets of N where the partial operation is defined by means of disjoint unions,
and then the corresponding semigroup of ultrafilters (δF, ·) where δF is a suitable
closed subspace of βF. (See [15, Definition 1.4] for details.) By Graham-Rothschild
parameter-sets Theorem [5], the family of sets that contain arbitrarily large finite
union sets10 is partition regular, and so the following closed set is nonempty:
H = {U ∈ δF | (∀A ∈ U )(∀n ∈ N)(∃x1 < . . . < xn ) FU({xi }ni=1 ) ⊆ A}.
(Notice that UT(N) suffices to prove H 6= ∅; indeed, any ultrafilter on F extending
the filter {A ⊆ F | Ac does not contain arbitrarily large union sets} is in H.) It is
then shown that H is a sub-semigroup and that the filter
\
H = Fil(H) = {U | U ∈ H}

is not idempotent. This last property is proved by showing the existence of an
injective sequence of ultrafilters hUn | n ∈ Ni in H whose limit U -limn (n+Un ) ∈
/H
for a suitable U ∈ H; notice that here countably many choices are made.11
It is well-known that partition regularity results about finite unions can be (almost) directly translated into partition regularity results about finite sums, and
conversely (see, e.g., [6, Theorem 13] and [12, pp.113-114]). Along these lines, our
Example 3.9 can be seen as a translation of the above example to (βN, ⊕). We
remark that, besides some non-trivial adjustments, we paid attention not to use
any form of choice; to this end, we directly considered the dual filter
F = {A ⊆ N | Ac is not FAL}.
instead of the corresponding closed sub-semigroup {U ∈ βN | (∀A ∈ U )(A is FAL)}.
10 A finite union set is a set of the form FU(X) = {S
F ∈X F | ∅ 6= X ∈ Fin(X)}.

11 More precisely, for every n ∈ N one picks an ultrafilter U ∈ H that contains a suitable set
n

An ∈ H . (See [15] for details.) In view of Proposition 3.4, instead of countable choice one could
assume UT(R) to get such a sequence.

12

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

4. Final remarks and open questions
By only assuming a weaker property for a filter F than additivity, one can prove
that every set A ∈ F is finitely additively large.
Proposition 4.1 (ZF). Let F be filter, and assume that there exists an ultrafilter
V ⊇ F such F ⊆ F ⊕ V . Then for every A ∈ F and for every k there exist
k-many elements x1 < . . . < xk such that FS({xi }ni=1 ) ⊆ A.
Proof. Let V be an ultrafilter as given by the hypothesis. If V ⊇ F is principal,
say generated by m ∈ N, then A ∈ F ⇒ m ∈ A. Moreover, since F ⊆ F ⊕ V , we
also have that A ∈ F ⇒ AV = A − m ∈ F . But then every A ∈ F contains all
multiples hm for h ∈ N, and the thesis trivially follows. So, let us assume that V
is non-principal.
For the sake of simplicity, here we will only consider the case k = 4; for arbitrary
k, the proof is obtained by the same argument. Notice first that, since F ⊆ F ⊕ V ,
we have that A ∈ F ⇒ AV ∈ F , and hence also AV 2 , AV 3 ∈ F , where we denoted
V 2 = V ⊕ V and V 3 = V ⊕ V ⊕ V .
• Pick x1 ∈ A ∩ AV ∩ AV 2 ∩ AV 3 ∈ F .
Then x1 ∈ A, and A − x1 , AV − x1 , AV 2 − x1 ∈ V .
• Pick x2 ∈ A ∩ (A − x1 ) ∩ AV ∩ (AV − x1 ) ∩ AV 2 ∩ (AV 2 − x1 ) ∈ V . As V
is non-principal, we can take x2 > x1 .
Then x2 , x2 + x1 ∈ A, and A − x2 , A − x1 − x2 , AV − x2 , AV − x1 − x2 ∈ V .
• Pick x3 ∈ A ∩ (A − x1 ) ∩ (A − x2 ) ∩ (A − x1 − x2 ) ∩ AV ∩ (AV − x1 ) ∩ (AV −
x2 ) ∩ (AV − x1 − x2 ) ∈ V . We can take x3 > x2 .
Then x3 , x3 + x1 , x3 + x2 , x3 + x2 + x1 ∈ A and A − x3 , A − x1 − x3 , A − x2 −
x3 , A − x1 − x2 − x3 ∈ V .
• Pick x4 ∈ A ∩ (A − x1 ) ∩ (A − x2 ) ∩ (A − x3 ) ∩ (A − x1 − x2 ) ∩ (A − x1 −
x3 ) ∩ (A − x2 − x3 ) ∩ (A − x1 − x2 − x3 ) ∈ V . We can take x4 > x3 .
We finally obtain that FS({x1 < x2 < x3 < x4 }) ⊆ A.

Notice that, by combining Theorem 3.6 with the fact that every set in an idempotent filter is additively large, one obtains the following stronger property.
Proposition 4.2 (ZF + UT(R)). Let F be an additive filter. Then every A ∈ F
is additively large.
Another corollary of Theorem 3.6 is the following:
Proposition 4.3 (ZF+ UT(R)). Let F be an additive filter. Then for every B ⊆ N
there exists an additive filter G ⊇ F such that either B ∈ G or B c ∈ G .
Since, in ZF, every element of an idempotent ultrafilter is additively large, it may
be possible that the last two propositions above are also ZF-results. With regard to
this, let us recall that also Hindman’s Theorem is a theorem of ZF, although this
was established only indirectly by a model-theoretic argument (see §4.2 of [4]), and
as yet, no explicit ZF-proof of Hindman’s Theorem is available.
(1) Is Proposition 4.2 provable in ZF?
(2) Is Proposition 4.3 provable in ZF?
Let us now consider the following statements:

IDEMPOTENT ULTRAFILTERS WITHOUT ZORN’S LEMMA

(a)
(b)
(c)
(d)

“Every
“Every
“There
“There

13

additive filter can be extended to an idempotent ultrafilter.”
idempotent filter can be extended to an idempotent ultrafilter.”
exists an idempotent ultrafilter on N.”
exists a non-principal ultrafilter on N.”

In the previous section, we showed in ZF that UT(R) ⇒ (a) and noticed that
(a) ⇒ (b) ⇒ (c) ⇒ (d). We also recalled that (d) cannot be proved by ZF alone.
These facts suggest to investigate whether any of the above implications can be
reversed.
(3) Does ZF prove that (a) ⇒ UT(R)?
(4) Does ZF prove that (b) ⇒ (a)?
(5) Does ZF prove that (c) ⇒ (b)?
(6) Does ZF prove that (d) ⇒ (c)?
Remark 4.4. A detailed investigation of the strength of Ellis-Numakura’s Lemma
in the hierarchy of weak choice principles is found in [17]. In particular, in that
paper it is shown that either one of the Axiom of Multiple Choice MC or the
Ultrafilter Theorem UT (in its equivalent formulation given by the Boolean Prime
Ideal Theorem BPI) suffices to prove Ellis-Numakura’s Lemma.12 (The key point of
the proof is the fact that both MC and UT imply the existence of a choice function
for the family of nonempty closed sub-semigroups of any compact right topological
semigroup.) Recall that, as pointed out in Remark 2.5, under the assumption of
UT(N) (or of MC, since MC ⇒ UT(N)), nonempty closed sub-semigroups of (βN, ⊕)
exactly correspond to additive filters, and so one obtains that either one of MC or
UT implies that every additive filter on N is extended to an idempotent ultrafilter.
References
[1] U. Andrews and I. Goldbring, Hindman’s theorem and idempotent types, arXiv:1508.03613,
2015.
[2] V. Bergelson and N. Hindman, Partition regular structures contained in large sets are abundant, J. Comb. Theory (Series A) 93, 2001, 18–36.
[3] V. Bergelson and N. Hindman, Quotient sets and density recurrent sets, Trans. Amer. Math.
Soc. 364, 2012, 4495–4531.
[4] W.W. Comfort, Some recent applications of ultrafilters to topology, in General Topology
and its Relations to Modern Analysis and Algebra IV, Lecture Notes in Mathematics 609,
Springer, 1977, 34–42.
[5] R.L. Graham and B.L Rothschild, Ramsey’s theorem for n-parameter sets, Trans. Am. Math.
Soc. 159, 1971, 257–292.
[6] R. Graham, B. Rothschild, and J. Spencer, Ramsey Theory, Wiley, New York, 1990.
[7] E.J. Hall and K. Keremedis, Čech–Stone compactifications of discrete spaces in ZF and some
weak forms of the Boolean Prime Ideal Theorem, Topology Proc. 41, 2013, 111–122.
[8] H. Herrlich, K. Keremedis, and E. Tachtsis, Remarks on the Stone spaces of the integers and
the reals without AC, Bull. Polish Acad. Sci. Math. 59(2), 2011, 101–114.
[9] N. Hindman, The existence of certain ultrafilters on N and a conjecture of Graham and
Rothschild, Proc. Am. Math. Soc. 36, 1972, 341–346.
[10] N. Hindman, Finite sums from sequences within cells of a partition of N, J. Comb. Theory
(Series A) 17, 1974, 1–11.
12 MC postulates the existence of a “multiple choice” function for every family A of nonempty
sets, i.e., a function F such that F (x) is a nonempty finite subset of x for every x ∈ A. Recall that
MC is equivalent to AC in ZF, but it is strictly weaker than AC in Zermelo–Fraenkel set theory
with atoms ZFA (see [13]).

14

MAURO DI NASSO AND ELEFTHERIOS TACHTSIS

[11] N. Hindman, Algebra in the Stone-Čech compactification and its applications to Ramsey
Theory, Sci. Math. Jpn. 62, 2005, 321–329.
[12] N. Hindman and D. Strauss, Algebra in the Stone-Čech Compactification, Theory and Applications (2nd edition), W. de Gruyter, 2011.
[13] P. Howard and J.E. Rubin, Consequences of the Axiom of Choice, Mathematical Surveys and
Monographs 59, American Mathematical Society, 1998.
[14] K. Keremedis, Tychonoff products of two-element sets and some weakenings of the Boolean
prime ideal theorem, Bull. Polish Acad. Sci. Math. 53, 2005, 349–359.
[15] P. Krautzberger, Idempotent Filters and Ultrafilters, PhD thesis, Freie Universität, Berlin,
2009.
[16] T. Papazyan, The existence of almost translation invariant ultrafilters on any semigroup,
Proc. Amer. Math. Soc. 107, 1989, 1133–1135.
[17] E. Tachtsis, On the set-theoretic strength of Ellis’ Theorem and the existence of free idempotent ultrafilters on ω, submitted manuscript.
[18] S. Todorcevic, Introduction to Ramsey spaces, Annals of Mathematics Studies 174, Princeton
University Press, 2010.
Dipartimento di Matematica, Università di Pisa, Italy
E-mail address: mauro.di.nasso@unipi.it
Department of Mathematics, University of the Aegean, Greece
E-mail address: ltah@aegean.gr

