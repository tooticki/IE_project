QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED
TRIANGULATED SURFACES

arXiv:1807.06910v2 [math.RT] 20 Jul 2018

MIN HUANG

Abstract. We study quantum cluster algebras from unpunctured surfaces,
which are isomorphic to the skein algebras associated with the surfaces, [22],
we generalize the Laurent expansion formula given by [32], [23], [24] to the
quantum case. Particularly, this gives a combinatorial proof of the positivity
for such class of quantum cluster algebras. Specialize the quantum parameter
to 1, our proof becomes a new proof of the Laurent expansion formula in the
commutative case.

1. Introduction
Cluster algebras are commutative algebras that were introduced by Fomin and
Zelevinsky around the year 2000. The quantum cluster algebras were later introduced in [2]. The theory of cluster algebras is related to numerous other fields including Lie theory, representation theory of algebras, the periodicity issue, Teichmüller
theory and mathematical physics.
A cluster algebra is a subalgebra of rational function field with a distinguish set
of generators, called cluster variables. Different cluster variables are related by a
iterated procedure called mutations. By construction, cluster variables are rational
functions. In [13], Fomin and Zelevinsky proved that they are Laurent polynomials
of initial cluster variables. It was proved that the coefficients of these Laurent
polynomials are non-negative, known as positivity of the coefficients, see [19, 15].
The original motivation of Fomin and Zelevinsky is to develop a combinatorial
approach to the canonical bases in quantum groups (see [21, 18]) and the total
positivity in algebraic groups. They conjectured that the cluster structure should
serve as an algebraic framework for the study of the “dual canonical bases” in
various coordinate rings and their q-deformations. Particularly, they conjectured
all cluster monomials belong to the dual canonical bases, this was proved recently by
[17, 28]. Generally it can be very hard to write the dual canonical bases explicitly.
From this point of view, it is important to give the explicit (quantum) Laurent
polynomial of a (quantum) cluster variable with respect to any (quantum) cluster.
A lot of researches approached to this way. For acyclic skew-symmetric cluster
algebras, [3, 4, 5] gave a Laurent expansion formula, know as Caldero-Chapoton
map, where the coefficients are Euler-Poincaré characteristics of appropriate Grassmannians of quiver representations. [14, 25, 26, 27] generalized this approach to the
cluster algebras which admit a categorification by a 2-Calabi-Yau category; by [1],
Date: version of July 23, 2018.
2010 Mathematics Subject Classification. 13F60; 05C70; 05E15; 57M50.
Key words and phrases. quantum cluster algebra, quantum Laurent expansion, skein algebra,
unpunctured surface, positivity.
1

2

MIN HUANG

[20]. In these papers, they named the Laurent expansion formula as cluster character. [10, 16, 6] generalized the cluster character to the acyclic skew-symmetrizable
and acyclic totally sign-skew-symmetrizable cases. However, since all of the above
formulas are in terms of Euler-Poincaré characteristics (which can be negative),
they do not immediately imply the positivity of the coefficients.
In the other direction, many works on the cluster algebras from surfaces, introduced by [12]. For cluster algebras from unpunctured surfaces, [32] gave an explicit
Laurent expansion formula in terms of T -paths for the boundary coefficients cases;
[31] generalized the result in [32] to the principal coefficients cases; [23] gave the
Laurent expansion formula in terms of perfect matchings, which turned out to be
a very useful tool. [24] generalized [23] to the cluster algebras from surfaces with
arbitrary coefficients. More precisely, in these cases, the cluster variables and the
arcs in the surface (O, M ) are one to one correspondence, and seeds and the triangulations are one to one correspondence. Fix a triangulation T . For each arc γ,
we can associate a graph GT,γ , see [23, 8]. A perfect matching P is a collection of
edges in GT,γ such that each vertex is incident to exactly one edge in P . Then each
perfect matching gives a term of the Laurent expansion formula of xγ (the cluster
variable associate with γ) respect to xT (the cluster associate with T ).
However, few works on the quantum case. [30] generalized the Caldero-Chapoton
map to the quantum case. [29] gave the explicit quantum Laurent expansion formula
for the quantum cluster algebras of type A. Recently, [7] gave an explicit quantum
Laurent expansion formula for the quantum cluster algebras of type A and the
Kronecker type.
In this paper, we will focus on the quantum cluster algebras from the unpunctured surfaces, introduced by [22]. These quantum cluster algebras are isomorphic
to the skein algebras (with marked points) associated with the surfaces. For these
quantum cluster algebras, the quantum cluster variables and the arcs in the surface
(O, M ) are one to one correspondence, and quantum seeds and the triangulations
are one to one correspondence.
Our aim is to give the quantum Laurent expansion formulas. Our idea is to
associate each perfect matching a q-power, which aim to be the q-coefficients, where
q is the quantum parameter. Precisely, fix a triangulation T and an arc γ, we
construct a valuation map on the set of perfect matchings of GT,γ in Theorem 3.11.
It turned out that the valuation map successfully acts the roles of q-coefficients,
see Theorem 3.12, where we give the quantum Laurent expansion formula. In
particular, specialize q to 1, we actually give a new proof of the Laurent expansion
formula in the commutative case. As corollary, we show the coefficients appear in
the quantum Laurent polynomials are non-negative.
The paper is organized as follows. We give background on quantum cluster algebras and quantum cluster algebras from unpunctured surfaces in Section 2. In
Section 3, we first recall some terminologies, then give our main results, Theorem
3.9, Theorem 3.11, last, as applications of the main results, we give the quantum
Laurent expansion formula for any quantum cluster variable with respect to a quantum seed, Theorem 3.12, and the positivity, Theorem 3.13. To prove Theorems 3.9,
3.11, we give some preparations in Section 4. We prove Theorem 3.9 in Section 5,
and Theorem 3.11 in Section 6.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 3

Throughout this paper, denote by E(G) the edges set of a graph G and denote
by |S| the cardinality of a set S.
2. Preliminaries
2.1. Quantum cluster algebras. In this subsection, we recall the definition of
quantum cluster algebras by [2]. We follow the convention in [28]. Fix two integers
e be an m × n integer matrix. Let Λ be an m × m skew-symmetric
n ≤ m. Let B
e Λ) compatible if (B)
e t Λ = (D 0) for some diagonal
integer matrix. We call (B,
e t is the transpose of B.
e Note that in this
matrix D with positive entries, where (B)
e
e is full rank.
case, the upper n × n submatrix of B is skew-symmetrizable, and B
Let q be the quantum parameter. A quantum seed t consists a compatible pair
e Λ) and a collection of indeterminate xi (t), i ∈ [1, m], called quantum cluster
(B,
variables. Let {ei } be the standard basis of Zm and x(t)ei = xi (t). Define the
corresponding quantum torus T (t) to be the algebra which is freely generated by
x(t)~a , ~a ∈ Zm as Z[q ±1/2 ]-module, with multiplication on these elements defined by
~

~

~

x(t)~a x(t)b = q Λ(t)(~a,b)/2 x(t)~a+b ,
where Λ(t)(, ) means the bilinear form on Zm such that
λ(t)(ei , ej ) = λ(t)ij .
For any k ∈ [1, n], we define the mutation of t at the k-th direction to be the
e 0 ), λ(t0 )), where
new seed t0 = µk (t) = ((xi (t0 )i∈[1,m] ), B(t
(1) xi (t0 ) = xi (t) for iP6= t,
P
(2) xk (t0 ) = x(t)−ek + i [bik ]+ ei + x(t)−ek + i [−bik ]+ ei .
e 0 ) = (b0 ) is determined by B(t)
e = (bij ):
(3) B(t
ij

−bij ,
if i = k or j = k,
b0ij =
bij + [bik ]+ [bkj ]+ − [−bik ]+ [−bkj ]+ , otherwise.
(4) Λ(t0 ) is skew-symmetric and satisfies:

Λ(t)ij ,
if i, j 6= k,
0
P
Λ(t )ij =
Λ(t)(ei , −ek + l [blk ]+ el ), if i 6= k = j,
where [a]+ = max(a, 0).
The quantum torus T (t0 ) for the new seed t0 is defined similarly.
We define a quantum cluster algebra Aq as following:
(1) Choose an initial seed t0 = ((x1 , · · · , xm ), B, Λ).
(2) All the seeds t are obtained from t0 by iterated mutations at directions k ∈ [1, n].
(3) Aq = Z[q ±1/2 ]hx−1
i (t0 ), i ∈ [n + 1, m]ihxi (t)it,i∈[1,m] .
(4) xn+1 , · · · , xm are called frozen variables or coefficients.
(5) A quantum cluster variable in t is called a quantum cluster variable of Aq .
(6) x(t)~a for some t and ~a ∈ Nm is called a quantum cluster monomial.
2.1. Theorem. (Quantum Laurent Phenomenon,[2]) Let Aq be a quantum cluster
algebra and t be a seed. For any quantum cluster variable x of Aq , we have x ∈ T (t).

4

MIN HUANG

2.2. Conjecture. (Positivity Conjecture, [2]) Let Aq be a quantum cluster algebra
and t be a seed. For any quantum cluster variable x of Aq ,
x ∈ N[q ±1/2 ]hx(t)~a | ~a ∈ Zm i.
This conjecture was recently proved by [9] in the skew-symmetric case.
2.2. Quantum cluster algebras from unpunctured surfaces. In this subsection, we recall the quantum cluster algebras associated with unpunctured surfaces
by [22]. Let O be a connected oriented Riemann surface with boundary. Fix a
non-empty set M of marked points in the closure of O with at least one marked
point on each boundary component. We call the pair (O, M ) a bordered surface
with marked points. Marked points in the interior of O are called punctures.
In this paper, we consider the case that (O, M ) without punctures, and we simply
refer (O, M ), or O where there is no chance of confusion, as an unpunctured surface.
A boundary arc in (O, M ) is a curve which lies in the boundary of O and connects
two marked points without passing through a third.
An arc γ in (O, M ) is a curve (up to isotopy) in S such that: the endpoints
are in M ; γ does not cross itself, except its endpoints may coincide; except for the
endpoints, γ is disjoint from M and from the boundary of O; and γ does not cut
out a monogon or a bigon.
For two arcs γ, γ 0 in (O, M ), the crossing number N (γ, γ 0 ) of γ and γ 0 is the
minimum of the numbers of crossings of arcs α and α0 , where α is isotopic to γ and
α0 is isotopic to γ 0 . We call γ and γ 0 are compatible if the crossing number of γ and
γ 0 is 0. A triangulation is a maximal collection of compatible arcs together with
all boundary arcs. Given a triangulation T and a non-boundary arc τ of T , there
exists a unique arc τ 0 such that (T \ {τ }) ∪ {τ 0 } is a new triangulation. Denote
(T \ {τ }) ∪ {τ 0 } by µτ (T ). For anP
arc γ and a triangulation T , the crossing number
N (γ, T ) of γ and T is defined as τ ∈T N (γ, τ ).
We call a triangulation T an indexed triangulation if the order of the arcs in T
is fixed. For an indexed triangulation T = {τ1 , · · · , τn , · · · , τm } of O, we always
assume τi , i = n + 1, · · · , m are boundary arcs.
An end of an arc γ will be a strand of γ in a small enough neighborhood of
an endpoint, see [22]. For an arc γ, let ‡1 (γ) and ‡2 (γ) be two ends of γ (for an
arbitrary numbering).
For two non-crossing arcs γ, γ 0 and pair of ends ‡(γ), ‡(γ 0 ), define (See [22])

if ‡(γ) and ‡(γ 0 ) have different endpoints,
 0,
1,
if ‡(γ 0 ) is clockwise to ‡(γ),
Λ‡(γ)‡(γ 0 ) =

−1, if ‡(γ 0 ) is counterclockwise to ‡(γ),
P
and Λγγ 0 = i,j∈{1,2} Λ‡i (γ)‡j (γ 0 ) .
From the definition, we have the following observation.
2.3. Lemma. Let ∆ be a triangulation in T with edges τ1 , τ2 , τ3 . Let ‡(τ1 ) and ‡(τ2 )
be two ends of τ1 and τ2 , respectively, such that they follow each other immediately
in ∆. For any end ‡(τ ) of any arc τ ∈ T with ‡(τ ) 6= ‡(τ1 ), ‡(τ2 ), then
Λ‡(τ ),‡(τ1 ) = Λ‡(τ ),‡(τ2 ) .

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 5

Given an indexed triangulation T = {τ1 , · · · , τm }, define a skew-symmetric m×m
integer matrix ΛT , called the orientation matrix of T , by ΛTij = Λ‡(τi )‡(τj ) .
For two arcs τ , τ 0 in an indexes triangulation T = {τ1 , · · · , τm } and pair of ends
‡(τ ), ‡(τ 0 ), define

if ‡(τ ) and ‡(τ 0 ) have different endpoints,
 0,
T
1,
if ‡(τ 0 ) is immediately clockwise to ‡(τ ),
b‡(τ )‡(τ 0 ) =

−1, if ‡(τ 0 ) is immediately counterclockwise to ‡(τ ),
P
and bTττ 0 =
bT‡ (τ )‡ (τ 0 ) . We say the m×n matrix B T = (bTij ) with bTij = bTτi τj ,
i,j∈{1,2}

i

j

the signed adjacency matrix of T . One can see the definition coincide with the
definition in [11].
2.4. Proposition. [22] Let (O, M ) be an unpunctured surface. If T is an indexed
triangulation of O, then
(1) (B T , ΛT ) is a compatible pair.
(2) (B µτi (T ) , Λµτi (T ) ) = µi (B T , ΛT ) for any 1 ≤ i ≤ n.
From this proposition, we can associate (O, M ) with a quantum cluster algebra,
denoted as Aq (O). Moreover, the quantum seeds and the triangulations of O are
one to one correspondence; the cluster variables and the arcs of O are one to one
correspondences. For details, see [22]. Therefore, given a triangulation T and an
arc γ, we use the notion xT to denote the cluster determined by T and xγ to denote
the cluster variable determined by γ.
3. Quantum Laurent expansions
In this section, we give some preparations and our main results. Precisely, we
give the quantum Laurent expansion of a quantum cluster variable with respect to
arbitrary quantum cluster of Aq (O). As an application, we prove the positivity for
such class of quantum cluster algebras.
Throughout this section, let O be an unpunctured surface and T = {τ1 , · · · , τm }
be an indexed triangulation, and let γ be an oriented arc in O. For each i ∈ [1, m],
we associate τi a vector ei ∈ Zm with the i-th coordinate 1 and others 0. For
convenient, for τ ∈ T , we also denote eτ the vector associated with τ .
Before state our main results, we recall the construction of the graph GT,γ and
the definition of perfect matching. For more details, see [24, Section 4], [8].
Let p0 be the starting point of γ, and let pd+1 be its endpoint. Assume γ crosses
T at p1 , · · · , pd in order. Let τij be the arc in T containing pj . Let ∆j−1 and ∆j
be the two ideal triangles in T on either side of τij .
For each pj , we associate a tile G(pj ) as follows. Define ∆j1 and ∆j2 to be two
triangles with edges labeled as in ∆j−1 and ∆j , further, the orientations of ∆j1 and
∆j2 both agree with those of ∆j−1 and ∆j if j is odd; the orientations of ∆j1 and
∆j2 both disagree with those of ∆j−1 and ∆j otherwise. We glue ∆j1 and ∆j2 at the
edge labeled τij , so that the orientations of ∆j1 and ∆j2 both either agree or disagree
with those of ∆j−1 and ∆j . We say the edge labeled τij the diagonal of G(pj ).

6

MIN HUANG

The two arcs τij and τij+1 form two edges of the triangle ∆j . Denote the third
edge of ∆j by τ[γj ] . After glue the tiles G(pj ) and G(pj+1 ) at the edge labeled τ[γj ]
for 1 ≤ j < d − 1 step by step, we obtain a graph, denote as GT,γ . Let GT,γ be the
graph obtained from GT,γ by removing the diagonal of each tile.
In particular, when γ ∈ T , let GT,γ be the graph with one only edge labeled γ.
3.1. Definition. If γ is an oriented arc and τi1 , · · · , τid is the sequence of arcs
in T which γ crosses, we define the crossing vector of γ with respect to T to be
~c(γ) = ei1 + · · · + eid ∈ Zm .
P

T

m
Let T be an indexed triangulation of O, we denote q − i<j ai aj Λij /2 xaτ11 · · · xaτm
m
~
a
by xT for any ~a = (a1 , · · · , am ) ∈ Z . Therefore the quantum cluster monomials
of Aq (O) are the forms x~aT for indexed triangulation T and ~a ∈ Nm .

3.2. Definition. ([24, Definition 4.6]) A perfect matching of a graph G is a subset
P of the edges of G such that each vertex of G is incident to exactly one edge of
P . Denote the set of all perfect matchings of G by P(G). If the edges of a perfect
matching P of GT,γ are labeled τj1 , · · · , τjr , then we define the associated vector of
~
a(P )−~
c(γ)
P to be ~a(P ) = ej1 + · · · + ejr and the weight x(P ) of P to be xT
.
According to the definition, we have the following observation.
3.3. Lemma. Let Gi and Gi+1 be two consecutive tiles of GT,γ sharing same edge
a. If b (respectively c) is an edge of Gi (respectively Gi+1 ) which is incident to a,
then b and c can not in a perfect matching of G at the same time.
Proof. Without loss of generality, we may assume that Gi+1 is on the right of Gi .
In case b and c are incident, then they can not in a perfect matching according to
the definition. In case b and c are not incident, we have the following possibilities,
see the Figures below.
b
b
Gi a Gi+1
c

Gi a Gi+1
c

We shall only prove the first case since the second case can be proved dually.
Clearly, our result holds when i = 1. Suppose our result holds for i < k. When
i = k, if Gi−1 is on the left of Gi , then b, c ∈ P for a perfect matching P implies
b, c0 ∈ P , see the figure below, this contradicts our induction hypothesis. If Gi−1 is
below to Gi , then b, c ∈ P implies c0 ∈ P , see the figure below. Thus no edge in P
is incident to the vertex o if i − 1 = 1 or Gi−2 is on the left of Gi−1 , and hence i > 2
and Gi−2 is below to Gi−1 . Therefore, b, c ∈ P for a perfect matching P implies
b0 , c0 ∈ P , see the figure below. This contradicts to our induction hypothesis. The
proof of the lemma is complete.


QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 7

b
Gi a Gi+1

b
Gi−1

c
c0 Gi−1

Gi a Gi+1

o
Gi−2 b0

c

c0

3.4. Definition. ([24, Definition 4.7]) Let b1 and b2 be the two edges of GT,γ which
lie in the counterclockwise direction from the diagonal of G(p1 ). Then the minimal
matching P− (GT,γ ) is defined as the unique matching which contains only boundary
edges and does not contain edges b1 or b2 . The maximal matching P+ (GT,γ ) is the
other matching with only boundary edges.
According to the definitions, we have the following observation.
3.5. Lemma. Let a be an edge of the tile G(pj ). If a is in the maximal/minimal
perfect matching of GT,γ , then a lies in the counterclockwise/clockwise direction
from the diagonal of G(pj ) when j is odd and lies in the clockwise/counterclockwise
direction from the diagonal of G(pj ) when j is even.
Proof. We shall only prove the case of maximal perfect matching. We prove the
lemma by induction on j. When j = 1, it follows by the definition of P+ . Assume
it holds for j < k. We consider the case j = k. We shall prove the case G(pk−1 ) is
on the left of G(pk ) since the case G(pk−1 ) below to G(pk ) can be proved similarly.
When G(pk−1 ) is on the left of G(pk ), a can not be the left edge of G(pk ). In case
a is the upper edge or lower edge, by Lemma 3.3, either the left edge of G(pk−1 )
in P+ or the upper edge of G(pk−2 ) in P+ , as shown in the Figure below. Thus a
satisfies the required condition by induction hypothesis. In case a is the right edge,
then the upper edge of G(pk−1 ) in P+ , as shown in Figure below. Thus a satisfies
the required condition by induction hypothesis. Our result follows.

a
k−1

a
k−2 k−1

k

k−1

k

k

a

3.6. Definition. Let P be a perfect matching of GT,γ .
(1) We call P can do flip at a tile G(p) if G(p) has two edges belong to P , in such
case we define the flip µp (P ) of P at G(p) to be the perfect matching obtained
from P by replacing the edges in G(p) by the remaining two edges.
(2) In case P can do flip at G with diagonal labeled by τ ∈ T , we call the pair of
the edges of G(p) lying in P a τ -mutable edges pair in P , any other edge in P
is called non-τ -mutable edge in P .

8

MIN HUANG

Assume that the edges in a perfect matching P of GT,γ are labeled τj1 , · · · , τjr .
If P can do flip at G(ps ), assume τjt , τjt+1 are the edges in G(ps ), we associate P
and ps vectors
e+
ps (P ) = ejt+2 + · · · + ejr − (eis+1 + · · · + eid ),
e−
ps (P ) = ej1 + · · · + ejt−1 − (ei1 + · · · + eis−1 ).
When a perfect matching P can do flip at G(p), we define
−
Ω(p, P ) = ΛT (~a(P ) − ~a(µp P ), e+
p (P ) − ep (P ))

This notation will be used frequently throughout this paper.
The following proposition implies Ω(p, P ) only depends on the coordinate of eτ
−
in e+
p (P ) − ep (P ), where τ is the label of the diagonal of G(p). In case of no
confusion, we also write ΛT as Λ.
3.7. Proposition. Suppose that the edges of G(p) are labeled a1 , a2 , a3 and a4 , and
the diagonal of G(p) is labeled τ . Assume that a1 , a3 follow τ in the clockwise order,
and a2 , a4 follow τ in the counter clockwise order in T . Then for any ς ∈ T

P4
4, if ς = τ ,
i
=
i=1 (−1) Λai ,ς
0, if ς 6= τ .
Proof. Denote the ends of ai by ‡i−1 (ai ) and ‡i (ai ) for i = 1, 2, 3, 4 ∈ Z4 . See the
Figure below.
In case ς 6= τ , denote the ends of ς by ‡1 (ς) and ‡2 (ς). If ς 6= τ ∈ T and
ς ∈
/ {a1 , a2 , a3 , a4 }, then by Lemma 2.3 Λ‡i (ai ),‡j (ς) = Λ‡i (ai+1 ),‡j (ς) for any i ∈ Z4
P4
and j = 1, 2. Thus we have i=1 (−1)i Λai ,ς = 0 in this case. If ς ∈ {a1 , a2 , a3 , a4 },
we may assume ς = a1 since the other cases can be proved similarly, then by
Lemma 2.3 Λ‡i (ai ),‡j (a1 ) = Λ‡i (ai+1 ),‡j (a1 ) for any i = 2, 3, 4 and j = 1, 4, and
Λ‡1 (a2 ),‡1 (a1 ) = 1 = −Λ‡4 (a4 ),‡4 (a1 ) . Moreover, we have
Λ‡1 (a2 ),‡4 (a1 ) = Λ‡1 (a2 ),‡4 (a4 ) = −Λ‡4 (a4 ),‡1 (a2 ) = −Λ‡4 (a4 ),‡1 (a1 ) .
P4
P4
Therefore i=1 (−1)i Λai ,a1 = i=2 (−1)i Λai ,a1 = 0.
Assume ‡1 (τ ) and ‡2 (τ ) are the ends of τ which are close to ‡1 (a1 ) and ‡3 (a3 ),
respectively. See the Figure below. We have
Λ‡1 (a2 ),‡1 (τ ) = Λ‡3 (a4 ),‡2 (τ ) = −Λ‡1 (a1 ),‡1 (τ ) = −Λ‡3 (a3 ),‡3 (τ ) = 1,
and by Lemma 2.3
Λ‡4 (a1 ),‡j (τ ) = Λ‡4 (a4 ),‡j (τ ) , Λ‡2 (a2 ),‡j (τ ) = Λ‡2 (a3 ),‡j (τ )
for j = 1, 2. Moreover, since ‡1 (a1 ) and ‡1 (τ ) follow each other immediately in T ,
and ‡1 (a2 ) and ‡1 (τ ) follow each other immediately in T , by Lemma 2.3 we have
Λ‡1 (a1 ),‡2 (τ ) = Λ‡1 (a2 ),‡2 (τ ) ,
Similarly,
Λ‡3 (a3 ),‡1 (τ ) = Λ‡3 (a4 ),‡1 (τ ) .
Therefore

P4

i=1 (−1)

i

Λai ,τ = 4.



QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 9

‡1 (a2 ) a ‡2 (a2 )
2
‡1 (a1 )
‡2 (a3 )
τ
a1
a3
‡4 (a1 )
‡4 (a4 )

‡3 (a3 )
a4

‡3 (a4 )

3.8. Definition. Let S be a set. A subset S of its power set is called a partition
of S if ∪R∈S R = S and R ∩ R0 = ∅ if R 6= R0 ∈ S. A partition map from a set S
to a set S 0 is a map from a partition of S to a partition of S 0 . A partition map is
called a partition bijection if it is a bijection.
With the above preparations, now we can state our first main result of this paper.
3.9. Theorem. Let (O, M ) be an unpunctured surface and T be an indexed triangulation. Let γ be an oriented arc in O. For any non-boundary arc τ ∈ T , there
are partitions P and P0 of P(GT,γ ) and P(Gµτ (T ),γ ), respectively, and a bijection
π : P → P0 . Moreover, π satisfies
(1) P
|S| = 1 or |π(S)| =P
1 for any S ∈ P.
0
(2)
P ∈S x(P )|q=1 =
P 0 ∈π(S) x(P )|q=1 for any S ∈ P.
3.10. Remark. The partitions P, P0 depend on T , γ and τ . To avoid the lengthy
of the symbols, we do not write them as P(T , γ, τ ), P0 (T , γ, τ ).
Our second main result is the following.
3.11. Theorem. Let (O, M ) be a surface without punctures and T be an indexed
triangulation. Let γ be an oriented arc in O.
(1) There uniquely exists a valuation map v : P(GT,γ ) → Z such that
(a) (initial conditions) v(P+ (GT,γ )) = v(P− (GT,γ )) = 0.
(b) (iterated relation) If P ∈ P(GT,γ )) can do flip at a tile G(p), then
v(P ) − v(µp P ) = Ω(p, P ).
(2) Further, if τ is a non-boundary arc in T and π is the partition bijection from
P(GT,γ ) to P(Gµτ T,γ ) given in Theorem 3.9, then, for any S ∈ P,
P
P
0
v(P )/2
x(P ) = P 0 ∈π(S) q v(P )/2 x(P 0 ).
P ∈S q
As a corollary of Theorem 3.11, we can give the quantum Laurent expansion.
3.12. Theorem. Let (O, M ) be an unpuntured surface and T be an indexed triangulation. If γ is an oriented arc in O, then the quantum Laurent expansion of xγ
with respect to the cluster xT is
P
xγ = P ∈P(GT ,γ ) q v(P )/2 x(P ).
Proof. We prove the Theorem by the induction of the crossing number N (γ, T ) of
γ and T . If N (γ, T ) = 0, then γ ∈ T , P = {γ} and v(P ) = 0. Clearly, we have
xγ = xγ . Assume N (γ, T ) > 0 and the result holds for the case the crossing number
is less than N (γ, T ). We can choose an arc τ ∈ T such that N (γ, µτ (T )) < N (γ, T ).

10

MIN HUANG

P
v(P 0 )/2
By induction hypothesis, xγ =
x(P 0 ). By Theorem 3.9
P 0 ∈P(Gµτ (T ),γ ) q
P
P
0
v(P )/2
v(P )/2
and Theorem 3.11 (2),
x(P 0 ) =
x(P ).
P 0 ∈P(Gµτ (T ),γ ) q
P ∈P(GT ,γ ) q
Therefore,
P
xγ = P ∈P(GT ,γ ) q v(P )/2 x(P ).
Our result follows.



The remainder question is: Can we give an explicit formula for the valuation
map v?
As an immediately corollary of Theorem 3.12, we have the positivity of our case.
3.13. Theorem. Let O be a surface without punctures. The positivity holds for the
quantum cluster algebra Aq (O).
Proof. Since q v(P ) ∈ N[q ±1 ] for any P ∈ P(GT,γ ), by Theorem 3.12, our result
follows.


3.14. Example. Let (O, M ), T and γ be as shown in the following figure.
1 2

γ

4

3

The arcs in T are labeled 1, 2, 3, 4, as shown. Thus, GT,γ is the following.
2
1
2
1
2
3

1 4
2

P

2 3
1

v
0
-8
0
-8
-4

1 4
2

P

2 3
1

v
8
0
8
0

1

4

2

P

v
-4
0
4
4

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 11

Therefore,
xγ

=
+
+
+
+
=
+
+

q 0 x−3e1 +4e2 + q 8/2 x−3e1 +2e2 +e3 +e4 + q −4/2 x−e1 −2e2 +2e3 +2e4
q −8/2 x−3e1 +2e2 +e3 +e4 + q 0/2 x−3e1 +2e3 +2e4 + q 0/2 xe1 −2e2 +e3 +e4
q 0/2 x−3e1 +2e2 +e3 +e4 + q 8/2 x−3e1 +2e3 +2e4 + q 4/2 x−e1 +e3 +e4
q −8/2 x−3e1 +2e3 +2e4 + q 0/2 x−3e1 −2e2 +3e3 +3e4 + q 4/2 x−e1 −2e2 +2e3 +2e4
q −4/2 x−e1 +e3 +e4
x−3e1 +4e2 + (q 2 + q −2 )x−e1 −2e2 +2e3 +2e4 + (q 4 + 1 + q −4 )x−3e1 +2e2 +e3 +e4
xe1 −2e2 +e3 +e4 + (q 2 + q −2 )x−e1 +e3 +e4 + (q 4 + 1 + q −4 )x−3e1 +2e3 +2e4
x−3e1 −2e2 +3e3 +3e4 .

4. Comparison of P(GT,ρ ) and P(Gµτ (T ),ρ )
Let ρ be a continuous sub-curve of γ such that the endpoints of ρ are not in the
arcs in T . The orientation of ρ is inherited from the orientation of γ. Fix τ ∈ T ,
assume the arc obtained from T by flip at τ is τ 0 . In this section, we compare the
sets of perfect matchings of GT,ρ and Gµτ (T ),ρ . Throughout this section, assume
τ 0 6= γ 6∈ T and ρ is maximal with the property that each arc in T it crosses is in
the same triangle with τ .
Denote the first tile and the last tile of GT,ρ by G1 and Gs , respectively. Then
GT,γ can be obtained by gluing some graph G left or below to G1 and some graph
G0 right or upper to Gs . Note that G is empty if and only if ρ and γ have the same
starting point, G0 is empty if and only if ρ and γ have the same endpoint. When
G is not empty, we say the left almost or lower almost edge of G1 is the first gluing
edge of GT,ρ , and when G0 is not empty, we say the right almost or upper almost
edge of Gs is the last gluing edge of GT,ρ . Similarly, we can define the first/last
gluing edge of Gµτ (T ),ρ . Since ρ is maximal with the property that each arc in T it
crosses is in the same triangle with τ , one can see the labels of the first/last gluing
edges of GT,ρ and Gµτ (T ),ρ are the same.
For two edges of GT,ρ labeled τ , we say they are equivalent if they are incident
to a same diagonal of a tile of GT,ρ . Each such equivalence class is called a τ equivalence class in GT,ρ . We divide the edges of GT,ρ labeled τ into the following
types for all cases up to a difference of relative orientation.
(I)
(II)
(III)
(IV )

there are two non-incident edges in its equivalence class.
there are two incident edges in its equivalence class.
there is one edge in its equivalence class and it is incident to a diagonal.
there is one edge in its equivalence class and it is not incident to a diagonal.

Type (I):
τ
τ
τ
Type (II):

12

MIN HUANG

τ
τ

τ

Type (III)
τ

τ
τ

τ
Type (IV)
τ
τ

Denote by nτ (T, ρ) the number of τ -equivalence classes in GT,ρ and we list the
τ -equivalence classes according to the order of the tiles. Denote by ST,ρ the set
containing all sequences ν = (ν1 , · · · , νnτ (T,ρ) ) which satisfies νj ∈ {−1, 0, 1} if the
j-th τ -equivalence class is of type (I), νj ∈ {−1, 0} if the j-th τ -equivalent class
is of type (II) or (III), νj ∈ {0, 1} if the j-th τ -equivalence class is of type (IV).
Given a sequence ν= (ν1 , · · · , νnτ (T,ρ) ) ∈ ST,ρ , let Pντ (GT,ρ ) containing all perfect
matching P which contains νj + 1 edges of the j-th τ -equivalence class if the j-th
τ -equivalence class is of type (I) (II) or (III), and νj edges of the j-th τ -equivalence
class if the j-th τ -equivalence class is of type (IV).
Note that if νj = −1, then the j-th τ -equivalence class corresponds to a diagonal
of a tile G(p), moreover, any P ∈ Pντ (GT,ρ ) can do flip at G(p).
One can easily see the following result holds.
4.1. Lemma. P(GT,ρ ) =

F

ν∈ST ,ρ

Pντ (GT,ρ ).

Assume a1 , a4 , τ and a2 , a3 , τ are two triangles in T such that a1 , a3 are clockwise
to τ and a2 , a4 are counterclockwise to τ , as shown in the figure below. Since O
without punctures, T does not have self-folded triangle, a2 6= a3 and a1 6= a4 .
Similarly, do flip at τ , we know a1 6= a2 and a3 6= a4 .
a2
a1

τ

a3

a4
4.1. When a1 6= a3 and a2 6= a4 . Since ρ is maximal with the property that each
crossing point is in the same triangle with τ and τ 0 6= γ ∈
/ T , we have the following
possibilities (the addition operation below is taken in Z4 ):
(1) ρ crosses τ, ai for i = 1, 2, 3, 4.
(2) ρ crosses ai , τ, ai+1 for i = 1, 3.
(3) ρ crosses ai , τ, τ 0 , ai+2 for i = 1, 2.
(4) ρ crosses τ 0 , ai for i = 1, 2, 3, 4.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 13

(5) ρ crosses ai , τ 0 , ai+1 for i = 2, 4.
Since case (1) and case (4) are dual, case (2) and case (5) are dual, we shall only
consider cases (1), (2) and (3).
In case (1), ρ and γ have the same starting point. We may assume ρ crosses τ, a2 ,
then up to a difference of relative orientation, GT,ρ and Gµτ (T ),ρ are the following
graphs, respectively,
a2
a6
a5
τ a3 a2 a5

a1

a4

a1

a2 a6
τ0

τ

In this case, GT,ρ (respectively Gµτ (T ),ρ ) has one τ -(respectively τ 0 -)equivalence
0
class of type (III) (respectively (IV)). Thus nτ (T, ρ) = nτ (µτ (T ), ρ). Moreover,
τ
we have a partition bijection ψρ from P(GT,ρ ) to P(Gµτ (T ),ρ ) by ψρ (P−1
(GT,ρ )) =
0
0
τ
τ
τ
P1 (Gµτ (T ),ρ ) and ψρ (P0 (GT,ρ )) = P0 (Gµτ (T ),ρ ). As shown in the figure below.

{

}

,

{

}

{ },
{ }.

It is easy to see the right upper edge labeled a5 /a6 of GT,ρ is in the left set if
and only if the right upper edge labeled a5 /a6 of Gµτ (T ),ρ is in the right set. Thus,
the last gluing edge of GT,ρ is in the left set if and only if the last gluing edge of
Gµτ (T ),ρ in the right set. Since ρ and γ have the same starting point, GT,ρ and
Gµτ (T ),ρ do not have first gluing edges.
In this case, P± (Gµτ (T ),ρ ) have no τ 0 -mutable edges pair.
In case (2), we may assume ρ crosses a1 , τ, a2 , then up to a difference of relative
orientation, GT,ρ and Gµτ (T ),ρ are the following graphs, respectively,
a2
a6
a5
τ a3 a2 a5

a1
a8

a4
τ
a1 τ

a1

a2 a6

a8

τ0
a1 a2

a7

a7

In this case, GT,ρ (respectively Gµτ (T ),ρ ) has one τ -(respectively τ 0 -)equivalence
0
class of type (II) (respectively (IV)). Thus nτ (T, ρ) = nτ (µτ (T ), ρ). Moreover, we
have a partition bijection ψρ from P(GT,ρ ) to P(Gµτ (T ),ρ ) as shown in the following.

{

}

,

{ },

{

}

{ },

{

}

{ }.

As case (1), we can see that the first/last gluing edge of GT,ρ is in the left set if
and only if the first/last gluing edge of Gµτ (T ),ρ in the right set.

14

MIN HUANG

In this case, P± (GT,ρ ) have no τ -mutable edges pair. P± (Gµτ (T ),ρ ) have no
τ 0 -mutable edges pair.
In case (3), we may assume ρ crosses a2 , τ, τ 0 , a4 , then up to a difference of
relative orientation, GT,ρ and Gµτ (T ),ρ are the following graphs, respectively,
a6
τ
a8

a2

a4 a1 τ a3 a2 a5
a7

a4

a4

a2
a1
τ0

a8

a3
a4

τ0

a6

τ

a5
a2
τ0

a7
In this case, GT,ρ (respectively Gµτ (T ),ρ ) has one τ -(respectively τ 0 -)equivalence
0
class of type (I). Thus nτ (T, ρ) = nτ (µτ (T ), ρ). Moreover, we have a partition
bijection ψρ from P(GT,ρ ) to P(Gµτ (T ),ρ ) as shown in the following figure.

{

}

{

{

}

{ },

{

}

{ },

{

,

}

,

},

{ }.

As cases (1) and (2), we can see that the first/last gluing edge of GT,ρ is in the
left set if and only if the first/last gluing edge of Gµτ (T ),ρ in the right set.
In this case, clearly the labels of τ -mutable edges pair in P± (GT,ρ ) and the labels
of τ 0 -mutable edges pair in P± (Gµτ (T ),ρ ) are the same.
4.2. When a1 = a3 or a2 = a4 .
4.2. Lemma. If a1 = a3 and a2 = a4 , then O is a torus with one marked point.
Proof. Denote the triangles formed by a1 , a4 , τ and a2 , a3 , τ by ∆1 and ∆2 , respectively. If a1 = a3 and a2 = a4 , gluing a1 , a3 and gluing a2 , a4 , we get the subspace
O0 of O formed by the union of triangles ∆1 and ∆2 is homeomorphism to the torus,
the Klein bottle or the real prjective plan with one marked point, which is a closed
surface without boundary. Since O is a connected manifold, O = O0 . Moreover,
since O is oriented, it is a torus with one marked point.

In view of the above lemma, we know a1 = a3 and a2 = a4 can not hold at the
same time since O without punctures. We may assume that a1 = a3 , thus a2 6= a4 .

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 15

Since ρ is not self-crossing and is maximal with the property that each crossing
point is in the same triangle with τ and τ 0 6= γ ∈
/ T , consider the universal covering
of O, we have the following possibilities:

(1) ρ crosses a2 , τ, τ 0 , a4 .
(2) ρ crosses ai , τ 0 , a1 , τ, ai for i = 2, 4.
(3) ρ crosses ai , τ for i = 2, 4.
s
}|
{
z
(4) ρ crosses τ 0 , a1 , (τ 0 , τ, a1 ), · · · , (τ 0 , τ , a1 ), τ 0 for s ≥ 0.
s
z
}|
{
(5) ρ crosses ai , τ 0 , a1 , (τ 0 , τ, a1 ), · · · , (τ 0 , τ , a1 ), τ 0 for i = 2, 4 and s ≥ 0.
s
}|
{
z
0
0
(6) ρ crosses a2 , τ , a1 , (τ , τ, a1 ), · · · , (τ 0 , τ , a1 ), τ 0 , a4 for s ≥ 0.
(7) ρ crosses ai , τ 0 for i = 2, 4.
s
z
}|
{
0
(8) ρ crosses τ, a1 , (τ, τ , a1 ), · · · , (τ, τ 0 , a1 ), τ for s ≥ 0.
s
z
}|
{
0
(9) ρ crosses ai , τ, a1 , (τ, τ , a1 ), · · · , (τ, τ 0 , a1 ), τ for i = 2, 4 and s ≥ 0.
s
}|
{
z
0
(10) ρ crosses a2 , τ, a1 , (τ, τ , a1 ), · · · , (τ, τ 0 , a1 ), τ, a4 for s ≥ 0.

Since cases (3) and (7), (4) and (8), (5) and (9), (6) and (10) are dual respectively,
we shall only discuss cases (1)-(6).

In case (1), up to a difference of relative orientation, GT,ρ and Gµτ (T ),ρ are the
following graphs, respectively,
a6
τ
a8

a2

a6

a4 a1 τ a1 a2 a5
a7

a4

τ

a4

a2
a1
τ0

a8

a1
a4

τ0

a5
a2
τ0

a7
In this case, GT,ρ (respectively Gµτ (T ),ρ ) has one τ -(respectively τ 0 -)equivalence
0
class of type (I). Thus nτ (T, ρ) = nτ (µτ (T ), ρ). Moreover, we have a partition
bijection ψρ from P(GT,ρ ) to P(Gµτ (T ),ρ ) as shown in the following figure.

16

MIN HUANG

{

}

{

},

{

}

{ },

{

}

{ },

{

,

}

,

{ }.

One can see that the first/last gluing edge of GT,ρ is in the left set if and only if
the first/last gluing edge of Gµτ (T ),ρ in the right set.
In this case, clearly the labels of τ -mutable edges pair in P± (GT,ρ ) and the labels
of τ 0 -mutable edges pair in P± (Gµτ (T ),ρ ) are the same.
In case (2), we may assume i = 2, then up to a difference of relative orientation,
GT,ρ and Gµτ (T ),ρ are the following graphs, respectively,
a2

a6

a2

a1
a1
a6

a2

τ a1 a2 a5
a4
τ
τ a1 τ

a5

τ0
a6

a1 τ 0 a2 a5
a4
a1
a1 τ 0 a1

τ0

a2

a2

a6

a5

a2

In this case, GT,ρ (respectively Gµτ (T ),ρ ) has one τ -(respectively τ 0 -)equivalence
0
class of type (II), (IV) (respectively (IV), (II)). Thus nτ (T, ρ) = nτ (µτ (T ), ρ).
Moreover, we have a partition bijection ψρ from P(GT,ρ ) to P(Gµτ (T ),ρ ) as shown
in the following figure.

{

}

{

{
}

,

,

},

{

},

{

}

{

},

{

}

{

}.

We can see that the first/last gluing edge of GT,ρ is in the left set if and only if
the first/last gluing edge of Gµτ (T ),ρ in the right set.
In this case, P± (GT,ρ ) have no τ -mutable edges pair. P± (Gµτ (T ),ρ ) have no
τ 0 -mutable edges pair.
In case (3), ρ and γ have the same starting point. We may assume ρ crosses τ, a2 ,
then up to a difference of relative orientation, GT,ρ and Gµτ (T ),ρ are the following
graphs, respectively,

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 17

a2

a6

a5

τ a1 a2 a5

a1

a4

a1

a2 a6

τ

τ0

In this case, GT,ρ (respectively Gµτ (T ),ρ ) has one τ -(respectively τ 0 -)equivalence
0
class of type (III) (respectively (IV)). Thus nτ (T, ρ) = nτ (µτ (T ), ρ). Moreover, we
have a partition bijection ψρ from P(GT,ρ ) to P(Gµτ (T ),ρ ) as shown in the following.

{

}

,

{

}

{ },
{ }.

We can see that the last gluing edge of GT,ρ is in the left set if and only if the
last gluing edge of Gµτ (T ),ρ in the right set. Since ρ and γ have the same starting
point, GT,ρ and Gµτ (T ),ρ do not have first gluing edges.
In this case, P± (Gµτ (T ),ρ ) have no τ 0 -mutable edges pair.
To consider the remaining cases, we should introduce more notations. If both a
and b are edges of two different triangles in T , for any non-negative integer s, we
define the graph Hs (a, b) to be GT,ς , where ς is the curve in O crossing a s + 1
times and b s times alternately. See the graph below.
b
a
b
a
b
a
b
a

b

b

a

b

a

a

b

a
b

b
a

a
b

Denote the i-th tile of Hs (a, b) by Hi . For a sequence (λ1 , · · · , λs ) ∈ {0, 1}s ,
let H(λ1 ,··· ,λs ) (a, b) contains all perfect matching P of Hs (a, b) satisfying the following conditions: if λi = 1, then the two edges of H2i labeled a are both in P ;
if λi = 0, then the two edges of H2i labeled a are both not in P ; for a sequence
0
(λ1 , · · · , λs+1 ) ∈ {0, 1}s+1 , let H(λ
(a, b) contains all the perfect matching
1 ,··· ,λs+1 )
P of Hs (a, b) satisfying the following conditions: if λi = 1, then the two edges of
H2i−1 labeled b are both in P ; if λi = 0, then the two edges of H2i−1 labeled b are
0
both not in P . See the following figure for example H(1,0) (a, b) and H(1,0,1)
(a, b).
(λ1 , λ2 ) = (1, 0)
(λ1 , λ2 , λ3 ) = (1, 0, 1)
We have the easy observations.
a
4.3. Lemma. (1) H(λ1 ,··· ,λs ) (a, b) = P(λ
(Hs (a, b)).
1 −1,λ1 +λ2 −1,··· ,λs−1 +λs −1,λs −1)
0
b
(2) H(λ1 ,··· ,λs+1 ) (a, b) = P(λ1 ,λ1 +λ2 −1,··· ,λs +λs+1 −1,λs+1 ) (Hs (a, b)).
(3)
F
P(Hs (a, b)) =
H
(a, b)
F(λ1 ,··· ,λs )∈{0,1}s (λ1 ,···0 ,λs )
=
H
(λ1 ,··· ,λs+1 )∈{0,1}s+1
(λ1 ,··· ,λs+1 ) (a, b).

Proof. (1) and (2) follow by definition. (3) follows immediately by Lemma 3.3. 

18

MIN HUANG

4.4. Lemma. (1) If P 6= Q ∈ H(λ1 ,··· ,λs ) (a, b), then there exists i ∈ [1, s + 1] such
that P and Q can do flip at the tile H2i−1 and P ∩ E(H2i−1 ) 6= Q ∩ E(H2i−1 ).
0
(2) If P 0 6= Q0 ∈ H(λ
(a, b), then there exists i ∈ [1, s] such that P 0 and Q0
1 ,··· ,λs+1 )
can do flip at the tile H2i and P 0 ∩ E(H2i ) 6= Q0 ∩ E(H2i ).
Proof. We shall only prove (1) because (2) can be proved similarly. If we assume
λ0 = λs+1 = 0 in convention, according to the definition of H(λ1 ,··· ,λs ) (a, b), P and
Q can do flips at tiles H2i−1 for i ∈ [1, s + 1] satisfies λi−1 = λi = 0, the other edges
in P and Q are the same. Therefore our result follows at once.

Now we turn to the comparison of the perfect matchings of GT,ρ and Gµτ (T ),ρ .
In case (4), ρ = γ. Up to a difference of relative orientation, GT,ρ and Gµτ (T ),ρ
are the following graphs, respectively,
a1
a1
a1
τ
τ
τ
τ
a2

a1
a2

a1 a4 τ a2 a1 a4 τ a2
τ

a1

τ

a1

τ

a1

τ

τ0

a1

τ0

a1

τ0

a1

τ0

τ 0 a4 a1 a2 τ 0 a4 a1 a2 τ 0 a4
a1

a2 a1 a4 τ a2 a1 a4

τ0

a1

a1

τ0

a1

a4 a1 a2 τ 0 a4 a1 a2 τ 0
τ0

a1

τ0

a4

a1

0

Clearly we have nτ (T, ρ) = nτ (µτ (T ), ρ).
Since GT,ρ is isomorphic to Hs+1 (a1 , τ ) and
Gµτ (T ),ρ is isomorphic to Hs+2 (τ 0 , a1 ).
F
0
(a1 , τ ),
By Lemma 4.3, as sets, we have P(GT,ρ ) ∼
= (λ1 ,··· ,λs+2 )∈{0,1}s+2 H(λ
1 ,··· ,λs+2 )
F
0
∼
and P(Gµτ (T ),ρ ) = (λ1 ,··· ,λs+2 )∈{0,1}s+2 H(λ1 ,··· ,λs+2 ) (τ , a1 ).
We have the following observation.
0
4.5. Lemma. Let P ∈ H(λ
(a1 , τ ) for some sequence (λ1 , · · · , λs+2 ). We
1 ,··· ,λs+2 )
assume λ0 = 1 in convention, then for any i ∈ [1, s + 2],
(1) the edge labeled a2 of the (2i − 1)-th tile is in P but non-τ -mutable if and only
if λi−1 = 1 and λi = 0;
(2) the edge labeled a4 of the (2i − 1)-th tile is in P but non-τ -mutable if and only
if λi = 0 and λi+1 = 1.

Proof. By the symmetry, we shall only prove (1).
“Only If Part:” Since the edge labeled a2 of the (2i − 1)-th tile is in P but nonτ -mutable, the edges labeled a1 , a4 of the (2i − 2)-th tile and the edges labeled τ
of the (2i − 1)-th tile are not in P . Thus the edges labeled τ of the (2i − 3)-th tile
are in P . Therefore, λi−1 = 1 and λi = 0.
“If Part:” Since λi−1 = 1, the edges labeled τ of the (2i − 3)-th tile are in P , and
hence the edges labeled a1 and a4 of the (2i − 2)-th tile are not in P . Since λi = 0,
the edges labeled τ of the (2i − 1)-th tile are not in P . Therefore, the edge labeled
a2 of the (2i − 1)-th tile is in P but non-τ -mutable.

Similarly, we have the following result. The proof is similar to the proof of
Lemma 4.5, so we omit it.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 19

4.6. Lemma. Let P ∈ H(λ1 ,··· ,λs+2 ) (τ 0 , a1 ) for some sequence (λ1 , · · · , λs+2 ). We
assume λ0 = λs+3 = 0 in convention, then for any i ∈ [1, s + 3],
(1) the edge labeled a2 of the (2i − 1)-th tile is in P but non-τ 0 -mutable if and only
if λi−1 = 0 and λi = 1;
(2) the edge labeled a4 of the (2i − 1)-th tile is in P but non-τ 0 -mutable if and only
if λi = 1 and λi+1 = 0.
0
4.7. Lemma. Let P ∈ H(λ
(a1 , τ ) and P 0 ∈ H(1−λ1 ,··· ,1−λs+2 ) (τ 0 , a1 ). For
1 ,··· ,λs+2 )
each edge τ 6= a ∈ T , the number of the non-τ -mutable edges labeled a in P equals
to the number of the non-τ 0 -mutable edges labeled a in P 0 .

Proof. By Lemma 3.3, if a 6= a2 , a4 , then the two numbers both are equal to 0. If
a = a2 , by Lemma 4.5 and Lemma 4.6, for each i ∈ [1, s + 2], the edge labeled a2 of
the (2i − 1)-th tile of GT,ρ is non-τ -mutable in P if and only if the edge labeled a2
of the (2i − 1)-th tile of Gµτ (T ),ρ is non-τ -mutable in P 0 . By Lemma 4.6, the edge
labeled a2 of the (2(s + 3) − 1)-th tile of GT,ρ is not a non-τ -mutable edge in P .
Therefore, the result holds for a = a2 . Similarly, the result holds for a = a4 .


as

0
Thus, we associate P ∈ H(λ
(a1 , τ ) with H(1−λ1 ,··· ,1−λs+2 ) (τ 0 , a1 ), denote
1 ,··· ,λs+2 )

ψρ (P ) = H(1−λ1 ,··· ,1−λs+2 ) (τ 0 , a1 ).
On the other hand, for each P 0 ∈ H(λ1 ,··· ,λs+2 ) (a1 , τ ), we associate P 0 with
0
ψρ0 (P 0 ) = H(1−λ
(a1 , τ 0 ).
1 ,··· ,1−λs+2 )

Clearly P 0 ∈ ψρ (P ) if and only if P ∈ ψρ0 (P 0 ), in this case, by Lemma 4.7 the
number of non-τ -mutable edges labeled a in P equals to the number of non-τ 0 mutable edges labeled a in P 0 for any τ 6= a ∈ T .
In this case, since ρ = γ, GT,ρ and Gµτ (T ),ρ have no first or last gluing edge.
Clearly the labels of τ -mutable edges pair in P± (GT,ρ ) and the labels of τ 0 -mutable
edges pair in P± (Gµτ (T ),ρ ) are the same.
In case (5), ρ and γ have the same starting point. We may assume i = 4, then up
to a difference of relative orientation, GT,ρ and Gµτ (T ),ρ are the following graphs,
respectively,
a7
τ
a2

a1

a1

τ

a1 a4 τ a2 a1 a4 τ a2
τ

a1

τ

a1

τ

a1
a1

a2 a1 a4 τ a2
τ

a1

a4 a8
τ
a1 a4
τ
a7

a1
a2

τ0

a1

τ0

a1

τ 0 a4 a1 a2 τ 0 a4 a1 a2 τ 0 a4
a1

τ0

a1

a1

τ0
0

Clearly we have nτ (T, ρ) = nτ (µτ (T ), ρ).

τ0

a1

τ0

τ0

a4 a1 a2 τ 0 a4 a1 a2
τ0

a1

τ0

a4 a8
a1
τ 0 a4
a1

20

MIN HUANG

Since GT,ρ can be obtained by gluing a tile with a graph which is isomorphic to
Hs (a1 , τ ), we have P(GT,ρ ) = P1 t P2 , where P1 contains all P which contains the
upper right edge labeled a7 , P2 contains all P which contains the upper right edge
labeled a8 . By Lemma 4.3, as sets, we have
0
∼F
P1 =
(λ1 ,··· ,λs+1 )∈{0,1}s+1 H(λ1 ,··· ,λs+1 ) (a1 , τ ),
0
∼F
P2 =
(λ1 ,··· ,λs )∈{0,1}s H(λ1 ,··· ,λs ) (a1 , τ ).
By the same reason, P(Gµτ (T ),ρ ) = P10 t P20 , where P10 contains all P which
contains the upper right edge labeled a7 , P20 contains all P which contains the
upper right edge labeled a8 . As sets, we have
F
0
P0 ∼
=
s+1 H(λ ,··· ,λ
) (τ , a1 ),
1

(λ1 ,··· ,λs+1 )∈{0,1}

P20

1

s+1

F
∼
= (λ1 ,··· ,λs )∈{0,1}s H(λ1 ,··· ,λs ) (τ 0 , a1 ).

0
As case (4), under the above isomorphisms, for each P ∈ H(λ
(a1 , τ ), we
1 ,··· ,λs+1 )
associate P with
ψρ (P ) = H(1−λ1 ,··· ,1−λs+1 ) (τ 0 , a1 ).
0
For each P ∈ H(λ
(a1 , τ ), we associate P with
1 ,··· ,λs )

ψρ (P ) = H(1−λ1 ,··· ,1−λs ) (τ 0 , a1 ).
On the other hand, for each P 0 ∈ H(λ1 ,··· ,λs+1 ) (a1 , τ ), we associate P 0 with
0
ψρ0 (P 0 ) = H(1−λ
(a1 , τ 0 ).
1 ,··· ,1−λs+1 )

For each P 0 ∈ H(λ1 ,··· ,λs ) (a1 , τ ), we associate P 0 with
0
ψρ0 (P 0 ) = H(1−λ
(a1 , τ 0 ).
1 ,··· ,1−λs )

We can see P 0 ∈ ψρ (P ) if and only if P ∈ ψρ0 (P 0 ), in this case, by Lemma
4.7 the number of non-τ -mutable edges labeled a in P equals to the number of
non-τ 0 -mutable edges labeled a in P 0 for each τ 6= a ∈ T .
For each P ∈ P(GT,ρ ) and P 0 ∈ P(Gµτ (T ),ρ ) with P 0 ∈ ψρ (P ), since ψρ (Pi ) ⊂ Pi0
for i = 1, 2, the last gluing edge of GT,ρ is in P if and only if the last gluing edge
of Gµτ (T ),ρ in P 0 . Since ρ and γ have the same starting point, GT,ρ and Gµτ (T ),ρ
do not have first gluing edges.
In this case, clearly the labels of τ -mutable edges pair in P± (GT,ρ ) and the labels
of τ 0 -mutable edges pair in P± (Gµτ (T ),ρ ) are the same.
In case (6), up to a difference of relative orientation, GT,ρ and Gµτ (T ),ρ are the
following graphs, respectively,
a7
τ
a2
a5

a1

τ

a1

a1 a4 τ a2 a1 a4 τ a2
τ
a1
τ
a1
a2 a1
a6

τ

a1
a1

a2 a1 a4 τ a2
τ

a1

a4 a8
τ
a1 a4
τ

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 21

a7
a1
a2
a5

τ0

a1

τ0

a1

τ 0 a4 a1 a2 τ 0 a4 a1 a2 τ 0 a4
a1
0
a1
a1
τ0
a2 τ 0τ

τ0

a1

τ0

τ0

a4 a1 a2 τ 0 a4 a1 a2
τ0

a1

τ0

a4 a8
a1
τ 0 a4
a1

a6
0

Clearly we have nτ (T, ρ) = nτ (µτ (T ), ρ).
Since we can obtain GT,ρ by gluing two tiles with a graph which is isomorphic
to Hs (a1 , τ ), we have P(GT,ρ ) = P1 t P2 t P3 t P4 , where P1 contains all P which
contains the lower left edge labeled a6 and the upper right edge labeled a7 , P2
contains all P which contains the lower left edge labeled a6 and the upper right
edge labeled a8 , P3 contains all P which contains the lower left edge labeled a5
and the upper right edge labeled a7 , P4 contains all P which contains the lower left
edge labeled a5 and the upper right edge labeled a8 . By Lemma 4.3, as sets, we
have
F
0
(a1 , τ ),
P1 ∼
= (λ1 ,··· ,λs+1 )∈{0,1}s+1 H(λ
1 ,··· ,λs+1 )
F
0
∼
P2 = (λ1 ,··· ,λs )∈{0,1}s H(λ1 ,··· ,λs ) (a1 , τ ),
F
0
P3 ∼
(a1 , τ ),
= (λ2 ,··· ,λs+1 )∈{0,1}s H(λ
1 ,··· ,λs+1 )
F
0
∼
(a1 , τ ).
P4 =
s−1 H
(λ2 ,··· ,λs )∈{0,1}

(λ2 ,··· ,λs )

Similarly, P(Gµτ (T ),ρ ) = P10 tP20 tP30 tP40 , where P10 contains all P which contains
the lower left edge labeled a6 and the upper right edge labeled a7 , P20 contains all
P which contains the lower left edge labeled a6 and the upper right edge labeled
a8 , P30 contains all P which contains the lower left edge labeled a5 and the upper
right edge labeled a7 , P40 contains all P which contains the lower left edge labeled
a5 and the upper right edge labeled a8 . As sets, we have
F
P10 ∼
= (λ1 ,··· ,λs+1 )∈{0,1}s+1 H(λ1 ,··· ,λs+1 ) (τ 0 , a1 ),
F
P20 ∼
= (λ1 ,··· ,λs )∈{0,1}s H(λ1 ,··· ,λs ) (τ 0 , a1 ),
F
P30 ∼
= (λ2 ,··· ,λs+1 )∈{0,1}s H(λ2 ,··· ,λs+1 ) (τ 0 , a1 ),
F
P40 ∼
= (λ2 ,··· ,λs )∈{0,1}s−1 H(λ2 ,··· ,λs ) (τ 0 , a1 ).
0
As cases (4) and (5), under the above isomorphisms, for each P ∈ H(λ
(a1 , τ ),
1 ,··· ,λs+1 )
we associate P with

ψρ (P ) = H(1−λ1 ,··· ,1−λs+1 ) (τ 0 , a1 ).
0
For each P ∈ H(λ
(a1 , τ ), we associate P with
1 ,··· ,λs )

ψρ (P ) = H(1−λ1 ,··· ,1−λs ) (τ 0 , a1 ).
0
For each P ∈ H(λ
(a1 , τ ), we associate P with
2 ,··· ,λs+1 )

ψρ (P ) = H(1−λ2 ,··· ,1−λs+1 ) (τ 0 , a1 ).
0
For each P ∈ H(λ
(a1 , τ ), we associate P with
2 ,··· ,λs )

ψρ (P ) = H(1−λ2 ,··· ,1−λs ) (τ 0 , a1 ).

22

MIN HUANG

On the other hand, for each P 0 ∈ H(λ1 ,··· ,λs+1 ) (a1 , τ ), we associate P 0 with
0
ψρ0 (P 0 ) = H(1−λ
(a1 , τ 0 ).
1 ,··· ,1−λs+1 )

For each P 0 ∈ H(λ1 ,··· ,λs ) (a1 , τ ), we associate P 0 with
0
ψρ0 (P 0 ) = H(1−λ
(a1 , τ 0 ).
1 ,··· ,1−λs )

For each P 0 ∈ H(λ2 ,··· ,λs+1 ) (a1 , τ ), we associate P 0 with
0
(a1 , τ 0 ).
ψρ0 (P 0 ) = H(1−λ
2 ,··· ,1−λs+1 )

For each P 0 ∈ H(λ2 ,··· ,λs ) (a1 , τ ), we associate P 0 with
0
(a1 , τ 0 ).
ψρ0 (P 0 ) = H(1−λ
2 ,··· ,1−λs )

We can see P 0 ∈ ψρ (P ) if and only if P ∈ ψρ0 (P 0 ), in this case, by Lemma
4.7 the number of non-τ -mutable edges labeled a in P equals to the number of
non-τ 0 -mutable edges labeled a in P 0 for each τ 6= a ∈ T .
For each P ∈ P(GT,ρ ) and P 0 ∈ P(Gµτ (T ),ρ ) with P 0 ∈ ψρ (P ), since ψρ (Pi ) ⊂ Pi0
for i = 1, 2, 3, 4, the first/last gluing edge of GT,ρ is in P if and only if the first/last
gluing edge of Gµτ (T ),ρ in P 0 .
In this case, clearly the labels of τ -mutable edges pair in P± (GT,ρ ) and the labels
of τ 0 -mutable edges pair in P± (Gµτ (T ),ρ ) are the same.
We summarize above discussions as the following proposition.
4.8. Proposition. Keep the foregoing notations. Let T be a triangulation of O
and τ be an arc in T . Let τ 0 6= γ ∈
/ T be an arc in O. Let ρ be a subcurve of γ
such that the endpoints are not in the arcs in T . Suppose that ρ is maximal with
the property that each arc in T it crosses is in the same triangle with τ . Then
0

(1) nτ (T, ρ) = nτ (µτ (T ), ρ).
(2) The labels of τ -mutable edges pair in P± (GT,ρ ) and the labels of τ 0 -mutable
edges pair in P± (Gµτ (T ),ρ ) are the same.
(3) We can associate a subset ψρ (P ) of P(Gµτ (T ) , ρ) for each P ∈ P(GT,ρ ) and a
subset ψρ0 (P 0 ) of P(GT,ρ ) for each P 0 ∈ P(Gµτ (T ),ρ ), which satisfy
(a) P 0 ∈ ψρ (P ) if and only if P ∈ ψρ0 (P 0 ). In such case,
τ0
(b) P ∈ Pντ (GT,ρ ) for some ν if and only if P 0 ∈ P−ν
(Gµτ (T ),ρ );
(c) the number of non-τ -mutable edges labeled a in P equals to the number of
non-τ 0 -mutable edges labeled a in P 0 for each τ 6= a ∈ T ;
(d) the first/last gluing edge of GT,ρ is in P if and only if the first/last gluing
edge of Gµτ (T ),ρ is in P 0 .
Proof. We already proved (1) and (2) hold for each case.
When a1 6= a3 , a2 6= a4 . We have a partition bijection between P(GT,ρ ) and
P(Gµτ (T ),ρ ). For any P ∈ P(GT,ρ ), there is a unique S ⊂ P(Gµτ (T ),ρ ) such that
P ∈ S according to the partition bijection. We define ψρ (P ) be the subset of
P(Gµτ (T ),ρ ) which corresponds to S under the partition bijection. Use the same
method, we can define ψρ0 (P 0 ) for any P 0 ∈ P(Gµτ (T ),ρ ). It is easy to check that
ψρ and ψρ0 satisfy the conditions of (3).
When a1 = a3 or a2 = a4 , we may assume a1 = a3 . We have already proved (3)
holds for cases (4,5,6). Dually, (3) holds for cases (8,9,10). In the remaining cases,

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 23

we have a partition bijection between P(GT,ρ ) and P(Gµτ (T ),ρ ). The results can
be proved similarly as the case when a1 6= a3 , a2 6= a4 .

The following observations would help us to prove theorem 3.9.
4.9. Lemma. Keep the foregoing notations. Let P, Q ∈ Pντ (GT,ρ ) with P 6= Q for
some ν. Then either ψρ (P ) ∩ ψρ (Q) = ∅ or there exists a tile G of GT,ρ with
diagonal labeled τ such that P and Q can do flips at G and P ∩ E(G) 6= Q ∩ E(G).
Proof. When a1 6= a3 , a2 6= a4 . We have a partition bijection between P(GT,ρ ) and
P(Gµτ (T ),ρ ). By the definition of ψρ , it is easy to see the following fact. If P and
Q are not in the same set S which in the domain of the partition bijection, then
ψρ (P ) ∩ ψρ (Q) = ∅. Otherwise, the latter possibility happens.
When a1 = a3 or a2 = a4 , we may assume a1 = a3 . In cases (4,5,6,8,9,10), by
Lemma 4.3 and Lemma 4.4, there exists a tile G with diagonal labeled τ such that
P and Q can do flips at G and P ∩ E(G) 6= Q ∩ E(G). In the remaining cases, the
result can be proved similarly as the case when a1 6= a3 , a2 6= a4 .

4.10. Lemma. Keep the foregoing notations.
P

ν

(1) For any P ∈ Pντ (GT,ρ ), we have |ψρ (P )| = 2 νl =1 l . Precisely, for each t such
that νt = 1, there are two possibilities to choose the edges of G0lt as τ 0 -mutable
edges pair in P 0 for each P 0 ∈ ψρ (P ), the other remaining edges are the same
for P 0 6= P 00 ∈ ψρ (P ). Here G0lt is the tile of Gµτ (T ),ρ determined by the t-th
τ 0 -equivalence class when νt = 1.
P
0
ν
(2) For any P 0 ∈ Pντ (Gµτ (T ),ρ ), we have |ψρ0 (P 0 )| = 2 νl =1 l . Precisely, for each
t such that νt = 1, there are two possibilities to choose the edges of Glt as
τ -mutable edges pair in P for each P ∈ ψρ0 (P 0 ), the other remaining edges are
the same for P 6= Q ∈ ψρ (P ). Here Glt is the tile of GT,ρ determined by the
t-th τ -equivalence class when νt = 1.
Proof. We shall only prove (1) because (2) can be proved dually.
When a1 6= a3 , a2 6= a4 . It is easy to verify the result by checking the partition
bijection between P(GT,ρ ) and P(Gµτ (T ),ρ ).
When a1 = a3 or a2 = a4 , we may assume a1 = a3 . In cases (4,5,6), by Lemma
4.3 (1), ψρ (P ) = H(λ1 ,··· ,λs ) (τ 0 , a1 ) for some s and (λ1 , · · · , λs ). It is easy to see
H(λ1 ,··· ,λs ) (τ 0 , a1 ) satisfies the required condition. In cases (8,9,10), by Lemma
0
4.3 (2), ψρ (P ) = H(λ
(a1 , τ 0 ) for some s and (λ1 , · · · , λs ). It is easy to see
1 ,··· ,λs )
0
0
H(λ1 ,··· ,λs ) (a1 , τ ) satisfies the required condition. In the remaining cases, the result
can be proved similarly as the case when a1 6= a3 , a2 6= a4 .

We need the following observations for the proof of Theorem 3.11.
4.11. Lemma. Keep the foregoing notations.
(1) P+ (Gµτ (T ),ρ ) ⊂ ψρ (P+ (GT,ρ )), P− (Gµτ (T ),ρ ) ⊂ ψρ (P− (GT,ρ )).
(2) P+ (GT,ρ ) ⊂ ψρ0 (P+ (Gµτ (T ),ρ )), P− (GT,ρ ) ⊂ ψρ0 (P− (Gµτ (T ),ρ )).
Proof. We shall only prove (1) because (2) can be proved dually.
When a1 6= a3 , a2 6= a4 . It is easy to see the result holds by checking the partition
bijection between P(GT,ρ ) and P(Gµτ (T ),ρ ).

24

MIN HUANG

When a1 = a3 or a2 = a4 , we may assume a1 = a3 . In cases (4,5,6), since
0
0
0
P+ (Hs (a1 , τ )) ∈ H(0,···
,0) (a1 , τ ), P− (Hs (a1 , τ )) ∈ H(1,··· ,1) (a1 , τ ) and P+ (Hs+1 (τ , a1 )) ∈
0
0
0
H(1,··· ,1) (τ , a1 ), P− (Hs+1 (τ , a1 )) ∈ H(0,··· ,0) (τ , a1 ), our result follows in these
cases. Dually, our result holds in cases (8,9,10). In the remainding cases, the result
can be verified similarly as the case when a1 6= a3 , a2 6= a4 .

4.12. Lemma. Keep the foregoing notations.
(1) Suppose that P ∈ P(GT,ρ ) can do flip at a tile G(p) with diagonal labeled
ai , i = 1, 2, 3, 4. If all τ -mutable edges pairs in P are labeled ai−1 , ai+1 , then
there exists P 0 ∈ ψρ (P ) such that P 0 satisfies
(a) P 0 can do flip at G0 (p), here G0 (p) is the tile of Gµτ (T ),ρ determined by p.
(b) µp (P 0 ) ∈ ψρ (µp (P )).
(c) all τ 0 -mutable edges pairs in P 0 are labeled ai−1 , ai+1 .
0
+
(d) the coordinates of eai in e+
p (P ) and ep (P ) are the same, and the coordi0
−
nates of eai in e−
p (P ) and ep (P ) are the same.
0
(2) Suppose that P ∈ P(Gµτ (T ),ρ ) can do flip at a tile G0 (p) with diagonal labeled
ai , i = 1, 2, 3, 4. If all τ 0 -mutable edges pairs in P 0 are labeled ai−1 , ai+1 , then
there exists P ∈ ψρ0 (P 0 ) such that P satisfies
(a) P can do flip at G(p), here G(p) is the tile of GT,ρ determined by p.
(b) µp (P ) ∈ ψρ0 (µp (P 0 )).
(c) all τ -mutable edges pairs in P are labeled ai−1 , ai+1 .
0
+
(d) the coordinates of eai in e+
p (P ) and ep (P ) are the same, and the coordi0
−
−
nates of eai in ep (P ) and ep (P ) are the same.
Proof. We shall only prove (1) because (2) can be proved dually.
When a1 6= a3 , a2 6= a4 . By checking the partition bijection between P(GT,ρ )
and P(Gµτ (T ),ρ ), we can see the results hold.
When a1 = a3 or a2 = a4 , we may assume a1 = a3 . The cases (1,2,3,7) can be
verified similarly as the case when a1 6= a3 , a2 6= a4 . In cases cases (4,5,6), i = 1
0
and there exist s and λ ∈ {0, 1}s such that P ∈ H(λ
(a1 , τ ). Assume G(p)
1 ,··· ,λs )
0
is the (2i − 1)-th tile, we have µp (P ) ∈ H(λ1 ,··· ,λi−1 ,1−λi ,λi+1 ,··· ,λs ) (a1 , τ ). For any
perfect matching P 0 in ψρ (P ) = H(1−λ1 ,··· ,1−λs ) (τ 0 , a1 ), P 0 can do flip at G0 (p), the
0
2i-th tile of Gµτ (T ),ρ , and µp (P 0 ) ∈ H(1−λ
(a1 , τ ) = ψρ (µp (P )). We
1 ,··· ,λi ,··· ,1−λs )
0
can choose P ∈ ψρ (P ) such that all the τ 0 -mutation edges pairs are labeled a2 , a4 .
+
0
Then the coordinates of eai in e+
p (P ) and ep (P ) are both s − i and the coordinates
−
0
of eai in e−
p (P ) and ep (P ) are both i − 1. The result follows in these cases. Dually,
the result can be proved in cases (8,9,10).


5. Proof of the Theorem 3.9
In this section, we prove Theorem 3.9. Our strategy is the following: we divide
the arc γ into sub-curves γi which are either satisfy the assumptions in Section 4 or
not cross a1 , a2 , a3 , `
a4 , τ . First, we show each P ∈ P(GT,γ ) uniquely corresponds to
an element (Pi ) ∈ P(GT,γi ), see Proposition 5.1. Secondly, using the functions
ψγi , ψγ0 i defined in Section 4 we construct the partition bijection between P(GT,γ )
and P(Gµτ (T ),γ ). And we show it satisfies the conditions in Theorem 3.9.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 25

Let γ be an arc in O and T be a triangulation. We divide γ into some continuous
sub-curves γ1 , γ2 , · · · , γk at some generic points such that, for each γi , either it
crosses no arc which is in the same triangle with τ or it is maximal with the
property that each arc it crosses is in the same triangle with τ . See the figure
below for an example. Assume the crossing points of γi and T are pis , pis +1 · · · , pit
for some 1 ≤ is ≤ it ≤ d. Then GT,γi = ∪is ≤l≤it G(pl ), and GT,γ is obtained
from GT,γi by gluing GT,γi and GT,γi+1 at some edges ui for i ∈ [1, k]. Denote the
corresponding gluing edges for Gµτ (T ),γ by u0i for i ∈ [1, k].

τ

γ1 τ
γ

γ2

γ3

Given a perfect matching P of GT,γ , for each j, we associate P a perfect matching
ιj (P ) of GT,γj as follows: denote the edges incident to ui by vi , wi and vi0 , wi0 , as
shown in the figure below, where vi , wi are edges of GT,γi and vi0 , wi0 are edges of
GT,γi+1 . By Lemma 3.3, ui ∈ P or vi ∈ P or wi0 ∈ P .
vi0

vi
ui
wi

ιj (P )


P



P
=
P



P

wi0

∩ E(GT,γj ),
∩ E(GT,γj ) ∪ {uj−1 },
∩ E(GT,γj ) ∪ {uj },
∩ E(GT,γj ) ∪ {uj−1 , uj },

if
if
if
if

vj−1 , wj0 ∈
/ P,
vj−1 ∈ P and wj0 ∈
/ P,
vj−1 ∈
/ P and wj0 ∈ P ,
vj−1 , wj0 ∈ P ,

Specially,

ι1 (P )

=


ιk (P )

=

P ∩ E(GT,γ1 ),
if w10 ∈
/ P,
P ∩ E(GT,γ1 ) ∪ {u1 }, if w10 ∈ P .

P ∩ E(GT,γ1 ),
if vk−1 ∈
/ P,
P ∩ E(GT,γ1 ) ∪ {uk−1 }, if vk−1 ∈ P .

One can see ιj (P ) is a perfect matching of GT,γj by definition for j ∈ [1, k].
`k
The following proposition illustrates P(GT,γ ) is a subset of i=1 P(GT,γi ). Thus
we can study P(GT,γ ) “locally”.
5.1. Proposition. Keep the notations as above. Assume τ 0 6= γ ∈
/ T . Then we
have a bijection
ι : P(GT,γ ) → {(Pi )i | Pi ∈ P(GT,γi ), ∀j, uj ∈ Pj ∪ Pj+1 },

P → (ιi (P ))i .

Proof. We first prove ι is well-defined. For any 1 ≤ j < k, by the constructions of
ιj (P ) and ιj+1 (P ), uj ∈
/ ιj (P ) if and only if vj ∈ P , uj ∈
/ ιj+1 (P ) if and only if

26

MIN HUANG

wj0 ∈ P . However, vj ∈ P and wj0 ∈ P can not hold at the same time by Lemma
3.3. Thus for any 1 ≤ j < k, uj ∈ ιj (P ) ∪ ιj+1 (P ).
Next we show ι is a bijection. Define
ι−1 : {(Pi )i | Pi ∈ P(GT,γi ), ∀j, uj ∈ Pj ∪ Pj+1 } → P(GT,γ ),
(Pi )i → (∪i Pi ) \ {u1 , · · · , uk−1 }.
Here in the notation (∪i Pi ) \ {u1 , · · · , ak−1 }, if uj ∈ Pj ∩ Pj+1 , then we delete uj
in ∪i Pi once, this means uj ∈ (∪i Pi ) \ {u1 , · · · , uk−1 } in this case. By Lemma 3.3,
for each 1 ≤ j < k, either uj ∈ Pj or vj ∈ Pj , and either uj ∈ Pj+1 or wj0 ∈ Pj+1 .
Thus one of the cases vj ∈ ι((Pi )i ), wj0 ∈ ι((Pi )i ) and uj ∈ ι((Pi )i ) happens. Hence
(∪i Pi ) \ {u1 , · · · , uk−1 } is a perfect matching of GT,γ .
Now we prove ι−1 is the inverse of ι.
For any P ∈ P(GT,γ ), for any 1 ≤ j < k, if vj ∈ P , then vj ∈ ιj (P ), and hence
vj ∈ ι−1 ι(P ); if uj ∈ P , then uj ∈ ιj (P ) ∩ ιj+1 (P ), and hence uj ∈ ι−1 ι(P ); if
wj0 ∈ P , then wj0 ∈ ιj+1 (P ), and hence wj0 ∈ ι−1 ι(P ). Therefore ι−1 ι(P ) = P .
For any (Pi )i ∈ {(Pi )i | Pi ∈ P(GT,γi ), ∀j, uj ∈ Pj ∪ Pj+1 }, for any 1 ≤ j < k,
one of the following cases happens: vj ∈ Pj , uj ∈ Pj+1 or uj ∈ Pj , wj0 ∈ Pj+1 or
uj ∈ Pj , uj ∈ Pj+1 . If vj ∈ Pj , uj ∈ Pj+1 , then vj ∈ ι−1 ((pi )i ), and hence vj ∈
(ιι−1 ((Pi )i ))j and uj ∈ (ιι−1 ((Pi )i ))j+1 ; if uj ∈ Pj , wj0 ∈ Pj+1 , then wj0 ∈ ι−1 ((pi )i ),
and hence uj ∈ (ιι−1 ((Pi )i ))j and wj0 ∈ (ιι−1 ((Pi )i ))j+1 ; if uj ∈ Pj ∩ Pj+1 , then
uj ∈ ι−1 ((pi )i ), and hence uj ∈ (ιι−1 ((Pi )i ))j and uj ∈ (ιι−1 ((Pi )i ))j+1 . Therefore
ιι−1 ((Pi )i ) = (Pi )i .
The proof of the proposition is complete.

According to this Proposition, we would write a perfect matching P ∈ P(GT,γ ) as
(Pi ) in the sequel. We arrange the order of τ -equivalence classes in GT,γi according
to the orientation of γ. By Lemma 4.1, for any perfect matching P of GT,γ , P ∈
Pντ (GT,γ ) for some sequence ν. By the truncation of γ, we can truncate ν as
ν 1 , · · · , ν k such that Pi ∈ Pντi (GT,γi ) for any i ∈ [1, k]. Similarly, we would write
P 0 ∈ P(Gµτ (T ),γ ) as (Pi0 ) with Pi0 ∈ P(Gµτ (T ),γi ).
5.2. Lemma. Let P = (Pi ) ∈ P(GT,γ ). For any (Pi0 ) such that Pi0 ∈ ψγi (Pi ), i ∈
[1, k], (Pi0 ) forms a perfect matching of Gµτ (T ),γ . Moreover, if uj ∈
/ Pj ∩ Pj+1 for
0
some j ∈ [1, k − 1], then u0j ∈
/ Pj0 ∩ Pj+1
.
Proof. For any j ∈ [1, k−1], since (Pi ) ∈ P(GT,γ ), uj ∈ Pj ∪Pj+1 by Proposition 5.1,
0
and hence u0j ∈ Pj0 ∪ Pj+1
by Proposition 4.8 (3.d). Therefore, by the dual version
0
of Proposition 5.1, (Pi ) forms a perfect matching of Gµτ (T ),γ . By Proposition 4.8
0
(3.d), if uj ∈
/ Pj ∩ Pj+1 for some j ∈ [1, k − 1], then u0j ∈
/ Pj0 ∩ Pj+1
.

For a sequence ν = (vl ) ∈ ST,γ , we choose pairs of elements in the index set
[1, nτ (T, γ)] by induction on nτ (T, γ), the length of ν as follows. Firstly, choose a
pair (vs , vt ), s < t satisfies (1) vs vt = −1; (2) vl = 0 for all s < l < t; (3) vl vs ≥ 0
for all l < s, and we call {s, t} a ν-pair. Then delete vs , vt from (vl ), we get a
sequence (vl0 ) of length less than nτ (T, γ), and we do the same steps on (vl0 ) as on
(vl ). In particular, if {s, t} does not exist in the first step, let the set of the ν-pairs
to be empty. It is easy to see the set of ν-pairs equals to the set of (−ν)-pairs.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 27

Let P ∈ Pντ (GT,γ ) for some ν. When νs = −1, the s-th τ -equivalence class
in GT,γ corresponds to a diagonal of a tile, denote as G(pls ), of GT,γ . Similarly,
denote by G0 (plt ) the tile of Gµτ (T ),γ corresponds to the t-th τ 0 -equivalence class.
Let π(P ) be the subset of P(Gµτ (T ),γ ) containing all P 0 = (Pi0 ) such that Pi0 ∈
ψγi (Pi ) and the edges in P 0 ∩ G0 (plt ) and the edges in P ∩ G(pls ) have the same
labels for any ν-pair {s, t} with νt = 1.
0

Dually, change the roles of τ and τ 0 , for any P 0 ∈ Pντ (Gµτ (T ),γ ), let π 0 (P 0 ) be
the subset of P(GT,γ ) containing all P = (Pi ) such that Pi ∈ ψγ0 i (Pi0 ) and the edges
in P ∩ E(G(pls )) and the edges in P 0 ∩ E(G0 (plt )) have the same labels for any
ν-pair {s, t} with νs = 1.
We have the following characterization of π(P ) for P ∈ Pντ (GT,γ ).
0
5.3. Proposition. Keep the foregoing notations. Assume τP
6= γ ∈
/ T . Let P
max{0, νl }
τ
(G
).
Then
|π(P
)|
=
2
.
Precisely,
let
be a perfect matching
in
P
T,γ
ν
P
S = {s ∈ [1, νl ] | νs = 1, s is not in a ν pair}, for each s ∈ S, there are 2
possibilities to choose the edges of G0ls as τ 0 -mutable pair in P 0 for any P 0 ∈ π(P ).
The other remaining edges are the same for any P 0 6= P 00 ∈ π(P ).

Proof. It follows by the construction of π(P ) and Lemma 4.10.



τ
τ
τ
Denote by P+
(GT,γ ), P=0
(GT,γ
P ) and P−
P(GT,γ ) the subset
P of P(GT,γ ) which
τ
contain all P ∈ Pν (GT,γ ) with
νl > 0,
νl = 0 and
νl < 0, respectively.
τ0
τ0
τ0
Dually, we have the notions of P+ (Gµτ (T ),γ ), P=0 (Gµτ (T ),γ ) and P−
(Gµτ (T ),γ ).
0
0
τ
τ
τ
Thus π(P ) ⊂ P−
(Gµτ (T ),γ ) for any P ∈ P+
(GT,γ ), π(P ) ⊂ P=0
(Gµτ (T ),γ ) for any
τ
τ0
τ
P ∈ P=0
(GT,γ ) and π(P ) ⊂ P+
(Gµτ (T ),γ ) for any P ∈ P−
(GT,γ ).

5.4. Lemma. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . Let P 0 = (Pi0 ) be
0
0
a perfect matching in P(Gµτ (T ),γ ). For any P = (Pi ) ∈ π (P ), we have P 0 ∈ π(P ).
0

τ
(GT,γ ). By PropoProof. Assume P 0 ∈ Pντ (Gµτ (T ),γ ) for some ν, then P ∈ P−ν
0
sition 4.8 (3.b), Pi ∈ ψγi (Pi ) for i ∈ [1, k]. Since P = (Pi ) ∈ π 0 (P 0 ), the edges
in P ∩ E(G(pls )) and the edges in P 0 ∩ E(G0 (plt )) have the same labels for any
ν-pair {s, t} with νs = 1, equivalently, the edges in P ∩ E(G(pls )) and the edges
in P 0 ∩ E(G0 (plt )) have the same labels for any (−ν)-pair {s, t} with −νt = 1.

Therefore, P 0 ∈ π(P ).

5.5. Proposition. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . We have
τ
τ0
P → π(P ) gives partition bijections from P+
(GT,γ ) to P−
(Gµτ (T ),γ ) and from
P
τ
τ0
(Gµτ (T ),γ ). Moreover, x(P )|q=1 = P 0 ∈π(P ) x(P 0 )|q=1 .
P=0
(GT,γ ) to P=0
τ
τ
Proof. For any P = (Pi ), Q = (Qi ) ∈ P+
(GT,γ ) ∪ P=0
(GT,γP) with P 6= Q.
P Assume
τ
τ
0
P ∈ Pν (GT,γ ) and Q ∈ Pν 0 (GT,γ ) for some ν and ν with
νl ≥ 0 and
νl0 ≥ 0.
0
i
0i
If ν 6= ν , then ν 6= ν for some i ∈ [1, k], and hence ψγi (P ) ∩ ψγi (Q) = ∅ by
using Proposition 4.8 (3.b). Hence π(P ) ∩ π(Q) = ∅.
If ν = ν 0 , then Pi 6= Qi for some i ∈ [1, k] since P 6= Q. By Lemma 4.9, either
ψγi (Pi ) ∩ ψγi (Qi ) = ∅ or there exists a tile G of GT,γi with diagonal labeled τ such
that P and Q can do flips at G and P ∩ E(G) 6= Q ∩ E(G).

28

MIN HUANG

In case ψγi (Pi ) ∩ ψγi (Qi ) = ∅, πi (Pi ) ∩ πi (Qi ) = ∅, and hence π(P ) ∩ π(Q) = ∅.
In the latter case, we may P
assume G corresponds to the t-th τ -equivalence class.
We have νt = −1. Since
νl ≥ 0, there exists s such that {s, t} is a ν-pair.
Since P ∩ E(G) 6= Q ∩ E(G), according to the constructions of π(P ) and π(Q),
π(P ) ∩ π(Q) = ∅.
Using Lemma 5.4, we have
S
S
τ0
τ0
P ∈P τ (GT ,γ ) π(P ) = P− (Gµτ (T ),γ ),
P ∈P τ (GT ,γ ) π(P ) = P=0 (Gµτ (T ),γ ).
+

=0

Therefore, P → π(P ) induces the required partition bijections. Moreover, since
xτ 0 |q=1 = (x−1
+ xa2 xa4 ))|q=1 , by Proposition 4.8 (3.c) and Proposition 5.3,
τ (xa1 xaP
3
we have x(P )|q=1 = P 0 ∈π(P ) x(P 0 )|q=1 .

Dually, change the roles of τ and τ 0 , we have the following.
5.6. Proposition. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . We have
τ
0
0
0
τ0
P → π (P ) gives partition bijections from P+ (Gµτ (T ),γ ) to P− (GT,γ ) and from
P
τ0
τ
P=0
(Gµτ (T ),γ ) to P=0
(GT,γ ). Moreover, x(P 0 )|q=1 = P ∈π0 (P 0 ) x(P )|q=1 .
τ
By Lemma 5.4, clearly π 0 π(P ) = P for all P ∈ P=0
(GT,γ ).

With the preparations, we now give the proof of Theorem 3.9.
Proof of Theorem 3.9: If τ 6= γ ∈ T , the theorem clearly holds since GT,γ =
Gµτ (T ),γ . If γ = τ or τ 0 , from xτ 0 = x−eτ +ea1 +ea3 + x−eτ +ea2 +ea4 and xτ 0 =
x−eτ +ea1 +ea3 + x−eτ +ea2 +ea4 , we can see the theorem
Fholds.
F τ
τ
τ
In case τ 0 6= γ ∈
/ T , since P(GT,γ ) = P+
(GT,γ ) P=0
(GT,γ ) P−
(GT,γ ) and
F
F
0
0
0
τ
τ
τ
(Gµτ (T ),γ ), by Propositions 5.5
(Gµτ (T ),γ ) P=0
(Gµτ (T ),γ ) P+
P(Gµτ (T ),γ ) = P−
and 5.6, our result follows at once.

6. Proof of Theorem 3.11
6.1. Valuation maps on P(GT,γ ). In this subsection, we give two valuation maps
v+ , v− : P(GT,γ ) → Z. We will prove that v+ coincide with v− and v as in
Theorem 3.11. Throughout this section let O be an unpunctured surface and T be
a triangulation. Let γ be an oriented arc in O crossing T with points p1 , · · · , pd in
order. Assume that p1 , · · · , pd belong to the arcs τi1 , · · · , τid , respectively in T .
6.1. Lemma. If P ∈ P(GT,γ ) can do flip at G(ps ), then
(1) µps (P ) can do flip at G(ps ), and µps µps (P ) = P .
(2) Ω(ps , P ) + Ω(ps , µps (P )) = 0.
Proof. (1) Since G(ps ) has two edges belong to µps (P ) according to the definition
of µps (P ), µps (P ) can do flip at G(ps ). µps µps (P ) = P is clear.
(2) Since µps (P ) only change the edges which belong to G(ps ), one can see
−
−
e+
(P
) = e+
ps
ps (µps (P )) and eps (P ) = eps (µps (P )). Thus
Ω(ps , P ) + Ω(ps , µps (P ))
−
= Λ(e(P ) − e(µps (P )), e+
p (P ) − ep (P ))
−
+Λ(e(µps (P )) − e(µps µps (P )), e+
ps (µps (P )) − eps (µps (P )))
+
−
−
= Λ(e(P ) − e(µps (P )), eps (P ) − eps (P )) + Λ(e(µps (P )) − e(P ), e+
ps (P ) − eps (P ))
= 0.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 29

The proof of the lemma is complete.



6.2. Lemma. If P ∈ P(GT,γ ) can do flips at G(ps ) and G(pt ) for some s, t such
that |s − t| > 1, then
(1) µps (P ) and µpt (P ) can do flips at G(pt ) and G(ps ), respectively, and
µps µpt (P ) = µpt µps (P ).
(2) Ω(ps , P ) + Ω(pt , µps (P )) = Ω(pt , P ) + Ω(ps , µpt (P )).
Proof. (1) Since |s − t| > 1, the edges of G(pt ) in P are also in µs (P ), and hence
µs (P ) can do flip at G(pt ). Similarly, µpt (P ) can do flip at G(ps ). By definition,
µps µpt (P ) and µpt µps (P ) are obtained from P via replacing the edges of G(ps ) and
G(pt ) by the remaining edges simultaneously. Thus, µps µpt (P ) = µpt µps (P ).
±
±
(2) Denote the coordinates of eis in e±
ps (P ) and eps (µpt (P )) by nis (P ) and
±
±
±
nis (µpt (P )), respectively. Denote the coordinates of eit in ept (P ) and ept (µps (P ))
±
by n±
it (P ) and nit (µps (P )), respectively.
In case τis and τit are not in the same triangle in T or τis = τit , we have
±
±
±
n±
is (P ) = nis (µpt (P )) and nit (P ) = nit (µps (P )). Since |s − t| > 1, e(µps (P )) −
e(µpt µps (P )) = e(P )−e(µpt (P )) and e(µpt (P ))−e(µps µpt (P )) = e(P )−e(µps (P )).
Therefore by Proposition 3.7
=
=
=
=
=

Ω(ps , P ) + Ω(pt , µps (P ))
−
Λ(e(P ) − e(µps (P )), e+
ps (P ) − eps (P ))
−
+Λ(e(µps (P )) − e(µpt µps (P )), e+
pt (µps (P )) − ept (µps (P )))
+
−
Λ(e(P ) − e(µps (P )), nis (P )eis − nis (P )eis )
−
+Λ(e(µps (P )) − e(µpt µps (P )), n+
it (µps (P ))eit − nit (µps (P ))eit )
+
−
Λ(e(µpt (P )) − e(µps µpt (P )), nis (µpt (P ))eis − nis (µpt (P ))eis )
−
+Λ(e(P ) − e(µpt (P )), n+
it (P )eit − nit (P )eit )
−
Λ(e(µpt (P )) − e(µps µpt (P )), e+
ps (µpt (P )) − eps (µpt (P )))
−
+
+Λ(e(P ) − e(µpt (P )), ept (P ) − ept (P ))
Ω(ps , µpt (P )) + Ω(pt , P ).

Since Ω(p, Q) = −Ω(p, µp (Q)) for any Q which can do flip at G(p),
Ω(ps , P ) + Ω(pt , µps (P )) = Ω(pt , P ) + Ω(ps , µpt (P ))
holds if and only if
Ω(ps , µps (P )) + Ω(pt , P ) = Ω(pt , µps (P )) + Ω(ps , µpt µps (P ))
holds if and only if
Ω(ps , µpt (P )) + Ω(pt , µps µpt (P )) = Ω(pt , µpt (P )) + Ω(ps , P )
holds.
In case τis and τit are in a same triangle in T , we therefore shall assume
that τit ∈ P ∩ G(ps ) and τis ∈ P ∩ G(pt ), otherwise we can do flips for P
to make our assumption holds. Without loss of generality, assume that s < t.
+
−
−
+
+
Then n+
is (µpt (P )) = nis (P ) − c, nis (µpt (P )) = nis (P ) and nit (µps (P )) = nit (P ),
−
n−
it (µps (P )) = nit (P ) − c, where c = 1 or 2. Moreover, by Proposition 3.7, we have
Λ(e(µpt (P )) − e(µps µpt (P )), eis ) + Λ(e(P ) − e(µpt (P )), eit ) = 0.

30

MIN HUANG

Thus
=
=
=
=

Ω(ps , P ) + Ω(pt , µps (P ))
−
Λ(e(P ) − e(µps (P )), n+
is (P )eis − nis (P )eis )
+
+Λ(e(µps (P )) − e(µpt µps (P )), nit (µps (P ))eit − n−
it (µps (P ))eit )
+
Λ(e(µpt (P )) − e(µps µpt (P )), nis (µpt (P ))eis + ceis − n−
is (µpt (P ))eis )
−
+Λ(e(P ) − e(µpt (P )), n+
(P
)e
−
n
(P
)e
+
ce
)
it
it
it
it
it
−
(µ
(µ
(P
))
−
e
Λ(e(µpt (P )) − e(µps µpt (P )), e+
pt (P )))
p
ps
ps
t
−
(P
))
(P
)
−
e
+Λ(e(P ) − e(µpt (P )), e+
pt
pt
Ω(ps , µpt (P )) + Ω(pt , P ).


The following fact is easy but important.
6.3. Lemma. For any two perfect matchings P, Q ∈ P(GT,γ ), Q can be obtained
from P by a sequence of flips.
Proof. We prove this lemma by the induction of the number of tiles d of GT,γ . If
d = 0, then Q = P . If d = 1, then either Q = P or Q = µp1 (P ). Thus the
lemma holds for d = 0 and d = 1. Assume that the lemma holds for d < k. When
d = k, without loss of generality, we may assume that G(p2 ) is on the right of
G(p1 ). Denote the edges of G(P1 ) by b1 , b2 , b3 and b4 , see the figure below. Thus
for any R ∈ P(GT,γ ), b1 ∈ R or b2 , b4 ∈ R. In case b1 ∈ P ∩ Q, then P \ {b1 }
and Q \ {b1 } are perfect matchings of graph G(p2 ) ∪ · · · ∪ G(pd ). By the induction
hypothesis, Q \ {b1 } can be obtained from P \ {b1 } by a sequence of flips, thus
Q can be obtained from P by a sequence of flips. In case b2 , b4 ∈ P ∩ Q, then
P \ {b2 , b4 } and Q \ {b2 , b4 } are perfect matchings of graph G(p3 ) ∪ · · · ∪ G(pd ).
By the assumption of induction, Q \ {b2 , b4 } can be obtained from P \ {b2 , b4 } by
a sequence of flips, thus Q can be obtained from P by a sequence of flips. In case
b1 ∈ P and b2 , b4 ∈ Q, then b1 ∈ P ∩ µp1 (Q). Thus µp1 (Q) can be obtained from P
by a sequence of flips, and hence Q can be obtained from P by a sequence of flips.
In case b1 ∈ Q and b2 , b4 ∈ P , then b1 ∈ µp1 (P ) ∩ Q. Thus Q can be obtained from
µp1 (P ) by a sequence of flips, and hence Q can be obtained from P by a sequence
of flips. The proof of the Lemma is complete.

b2
b1

p1 b3 p2
b4

6.4. Lemma. Let P be a perfect matching of GT,γ . Suppose that (pi1 , · · · , pir )
is a sequence such that µpit−1 · · · µpi1 can do flip at G(pit ) for 1 ≤ t ≤ r and
µpir · · · µpi1 (P ) = P . Then
(1) there exists 2 ≤ t ≤ r such that pit = pi1 .
(2) There exist t < t0 such that pit0 = pit and pis0 6= pis for any s0 6= s with
t < s, s0 < t0 . In this case, |is − it | > 1 for any s satisfies t < s < t0 .

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 31

Proof. (1) Denote the edges of G(pi1 ) by b1 , b2 , b3 and b4 as in the figure below.
Since P can do flip at G(pi1 ), without loss of generality, assume that b1 , b3 ∈ P . In
case i1 = 1 or i1 = d, µpi1 (P ) has to do flip at G(pi1 ) to obtain b1 or b3 . In case
G(pi1 −1 ) is on the left of G(pi1 ) and G(pi1 +1 ) is on the right of G(pi1 ), µpi1 (P ) has
to do flip at G(pi1 ) to delete b2 , b4 . In case G(pi1 −1 ) is on the left of G(pi1 ) and
G(pi1 +1 ) on top of G(pi1 ), µpi1 (P ) has to do flip at G(pi1 ) to delete b4 . In case
G(pi1 −1 ) is under G(pi1 ) and G(pi1 +1 ) is on the right of G(pi1 ), µpi1 (P ) has to do
flip at G(pi1 ) to delete b2 . In case G(pi1 −1 ) is under G(pi1 ) and G(pi1 +1 ) on top
of G(pi1 ), µpi1 (P ) has to do flip at G(pi1 ) to obtain b1 , b3 . Therefore in both cases
there exists 2 ≤ t ≤ r such that pit = pi1 .
b2
b2
pi1

b1

b3

b1

b4

p it

b3

b4

0

(2) The existence of (t, t ) follows immediately by (1). We may assume is 6= it
for all s satisfies t < s < t0 . Suppose that |is − it | = 1 for some s with t < s < t0 .
Choose the minimal s satisfies such conditions. By the minimality of s and Lemma
6.2, µpis−1 · · · µpit+1 µpit · · · µpi1 (P ) = µpit µpis−1 · · · µpit+1 µpit−1 · · · µpi1 (P ), denote
this perfect matching by Q. Denote the edges of G(pit ) by b1 , b2 , b3 and b4 as in
the figure below. Since Q can do flip at Git , we may assume b1 , b3 ∈ Q. Since Q
can do flip at G(pis ) and |is − it | = 1, G(is ) is on the left or the right of G(it ). In
case G(is ) is on the right of G(it ), then b1 , b3 , b5 ∈ Q, and thus b1 , b6 , b7 ∈ µpis (Q).
Since µpi 0 · · · µpis+1 µpis (Q) can do flip at G(pit0 ) = G(pit ), there exists s0 with
t −1
s + 1 ≤ s0 < t0 such that pis0 = pis , a contradiction. Similarly, one can prove such
s does not exist in case G(is ) is under G(it ). Therefore, our result follows.

b2
b1

b6

pit b3 pis
b4

b5

b7

6.5. Theorem. Let (O, M ) be an unpunctured surface and γ be an oriented arc in
O. Suppose that T is an indexed triangulation of O.
(1) There uniquely exists a maximal valuation map v+ : P(GT,γ ) → Z such that
(a) (initial condition) v+ (P+ (GT,γ )) = 0.
(b) (iterated relation) If P ∈ P(GT,γ )) can do flip at G(p), then
v+ (P ) − v+ (µp P ) = Ω(p, P ).
(2) There uniquely exists a minimal valuation map v− : P(GT,γ ) → Z such that
(a) (initial condition) v− (P− (GT,γ )) = 0.
(b) (iterated relation) If P ∈ P(GT,γ )) can do flip at G(p), then
v− (P ) − v− (µp P ) = Ω(p, P ).
Proof. We shall only prove Statement (1). By Lemma 6.3, v+ is unique if it exists.
We have to show that v+ is well-defined exist. That is, if µpir · · · µpi1 (P ) = P for
some sequence (pi1 , · · · , pir ), then

32

MIN HUANG

Ω(pi1 , pi2 , · · · , pir ; P ) :=

r
X

Ω(pis , µpis−1 · · · µpi1 (P )) = 0.

s=2

We prove Ω(pi1 , pi2 , · · · , pir ; P ) = 0 by induction on r. When r = 0, nothing
need to be proved. It is clear that r 6= 1. When r = 2, then pi1 = pi2 and
Ω(pi1 , pi2 ; P ) = 0 follows by Lemma 6.1 (2). Assume Ω(pi1 , pi2 , · · · , pir ; P ) = 0
holds for r < k. In case r = k, according to Lemma 6.4 (2), choose a pair (t, t0 )
with 1 ≤ t < t0 ≤ k such that pit0 = pit and pis0 6= pis for any s0 6= s with
t < s, s0 < t0 . Thus the sequence of flips µik · · · µit0 +1 µit0 −1 · · · µit+1 µit−1 · · · µi1 is
defined for P and µik · · · µit0 +1 µit0 −1 · · · µit+1 µit−1 · · · µi1 (P ) = P . We claim that
Ω(pi1 , pi2 , · · · , pik ; P ) = Ω(pi1 , · · · , pit−1 , pit+1 , · · · , pit0 −1 , pit0 +1 , · · · , pik ; P ).
Once the claim is true, Ω(pi1 , · · · , pit−1 , pit+1 , · · · , pit0 −1 , pit0 +1 , · · · , pik ; P ) = 0
by induction hypothesis, and thus Ω(pi1 , pi2 , · · · , pik ; P ) = 0. Our result follows.
In the following, we prove our claim. Denote Q = µit−1 · · · µi1 (P ), to prove our
claim, it suffices to prove that
X

Ω(pis , µpis−1 · · · µpit (Q)) =

X

Ω(pis , µpis−1 · · · µpit+1 (Q)).

t<s<t0

t≤s≤t0

By Lemma 6.4 (2) and Lemma 6.2 step by step, we have
P

t≤s≤t0

Ω(pis , µpis−1 · · · µpit (Q))
P

Ω(pis , µpis−1 · · · µpit (Q))

=

Ω(pit , Q) + Ω(pit+1 , µpit (Q)) +

=

Ω(pit+1 , Q) + Ω(pit , µpit+1 (Q)) +

=

Ω(pit+1 , Q) + Ω(pit , µpit+1 (Q)) + Ω(pit+2 , µpit+1 µpit (Q))
P
+ t+3≤s≤t0 Ω(pis , µpis−1 · · · µpit (Q))

=

Ω(pit+1 , Q) + Ω(pit , µpit+1 (Q)) + Ω(pit+2 , µpit µpit+1 (Q))
P
+ t+3≤s≤t0 Ω(pis , µpis−1 · · · µpit (Q))

=

Ω(pit+1 , Q) + Ω(pit+2 , µpit+1 (Q)) + Ω(pit , µpit+2 µpit+1 (Q))
P
+ t+3≤s≤t0 Ω(pis , µpis−1 · · · µpit (Q))

t+2≤s≤t
P

0

t+2≤s≤t0

Ω(pis , µpis−1 · · · µpit (Q))

= ···
P
=
t<s<t0 Ω(pis , µpis−1 · · · µpit+1 (Q))
+Ω(pit , µpi 0 · · · µpit+1 (Q)) + Ω(pit0 , µpi 0 · · · µpit+1 µpit (Q))
t −1
t −1
P
=
t<s<t0 Ω(pis , µpis−1 · · · µpit+1 (Q))
=

+Ω(pit , µpi 0 · · · µpit+1 (Q)) + Ω(pit , µpit µpi 0 · · · µpit+1 (Q))
t −1
t −1
P
Ω(p
,
µ
·
·
·
µ
(Q)).
is
pis−1
pit+1
t<s<t0

The last equality follows by Lemma 6.1 (2). This verified our claim.



QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 33

6.2. v+ = v− . Recall that a1 , a4 , τ and a2 , a3 , τ form two triangles in T and a1 , a3
are clockwise to τ , a2 , a4 are counterclockwise to τ . Let d be a non-negative integer.
For any sequence λ = (λ1 , · · · , λd ) ∈ {0, 1}d , denote by n(λ) the integer such that
P

z1 z2 · · · zd = q n(λ)/2 x−deτ +

P
λi (ea1 +ea+3 )+(d− λi )(ea2 +ea4 )

,

where

zi

=

x−eτ +ea1 +ea3 , if λi = 1,
x−eτ +ea2 +ea4 , if λi = 0.

Clearly, n(λ) = 0 if all λi = 1 or all λi = 0. Using the notation of n(λ), we have
P
P
P
(xτ 0 )d = λ q n(λ)/2 x−deτ + λi (ea1 +ea+3 )+(d− λi )(ea2 +ea4 ) .
6.6. Lemma. Keep the foregoing notations. For any i ∈ [1, d], if λ and λ0 satisfies
λj = λj for j 6= i and λi = 1, λ0i = 0, then
n(λ) − n(λ0 ) = 4(i − 1) − 4(d − i).
~

Proof. Assume that z1 z2 · · · zi−1 = q d1 /2 x~a and zi+1 · · · zd = q d2 /2 xb for some
d1 , d2 ∈ Z, where
 −e +e +e
x τ a1 a3 , if λi = 1,
zi =
x−eτ +ea2 +ea4 , if λi = 0,
P
P
and ~a = −(i − 1)eτ + j<i λj (ea1 + ea+3 ) + (i − 1 − j<i λj )(ea2 + ea4 ), and
~b = −(d − i)eτ + P λj (ea + ea+3 ) + (d − i − P λj )(ea + ea ).
j>i

j>i

1

By the definitions of n(λ) and n(λ0 ), we have
~

4

P

λi (ea1 +ea+3 )+(d−

P

λ0i (ea1 +ea+3 )+(d−

q d1 /2 x~a (x−eτ +ea1 +ea3 )q d2 /2 xb = q n(λ)/2 x−deτ +
~

2

0

q d1 /2 x~a (x−eτ +ea2 +ea4 )q d2 /2 xb = q n(λ )/2 x−deτ +

P

P

λi )(ea2 +ea4 )

,

λ0i )(ea2 +ea4 )

.

Thus, n(λ) = d1 + d2 + Λ(~a, ~b) + Λ(~a, −eτ + ea1 + ea3 ) + Λ(−eτ + ea1 + ea3 , ~b),
and n(λ0 ) = d1 + d2 + Λ(~a, ~b) + Λ(~a, −eτ + ea2 + ea4 ) + Λ(−eτ + ea2 + ea4 , ~b). Hence,
n(λ) − n(λ0 ) = Λ(~a − ~b, ea1 + ea3 − ea2 − ea4 ) = −4(i − 1) + 4(d − i),
here the last equality follows by Proposition 3.7.



6.7. Lemma. Keep the foregoing notations. If τ 0 6= γ ∈
/ T , then
(1) for P = P± (GT,γ ), the τ -mutable edges pairs in P have the same labels.
(2) for P 0 = P± (Gµτ (T ),γ ), the τ 0 -mutable edges pairs in P 0 have the same labels.
Proof. This follows immediately from Lemma 3.5.



6.8. Lemma. Keep the foregoing notations. If τ 0 6= γ ∈
/ T , then
(1) P+ (Gµτ (T ),γ ) and P− (Gµτ (T ),γ ) belong to π(P+ (GT,γ )) ∪ π(P− (GT,γ )) and they
can not belong to π(P+ (GT,γ )) or π(P− (GT,γ )) at the same time.
(2) P+ (GT,γ ) and P− (GT,γ ) belong to π 0 (P+ (Gµτ (T ),γ ))∪π 0 (P− (Gµτ (T ),γ )) and they
can not belong to π 0 (P+ (Gµτ (T ),γ )) or π 0 (P− (Gµτ (T ),γ )) at the same time.

34

MIN HUANG

Proof. We shall only prove (1). Write P+ (Gµτ (T ),γ ) as (Pi0 ), hence Pi0 contains
only boundary edges for i ∈ [1, k]. As a consequence, Pi0 = P+ (Gµτ (T ),γi ) or
Pi0 = P− (Gµτ (T ),γi ) for i ∈ [1, k]. By Lemma 4.11, we have P+ (GT,γi ) ∈ ψγ0 i (Pi0 ) or
P− (GT,γi ) ∈ ψγ0 i (Pi0 ). Thus, for each i ∈ [1, k], there exists Pi which contains only
boundary edges such that Pi ∈ ψγ0 i (Pi0 ). By Proposition 4.8 (2) and Lemma 6.7,
the τ -mutable edges pairs in Pi , i ∈ [1, k] have the same labels with the τ 0 -mutable
edges pairs in Pi0 , i ∈ [1, k]. Therefore, (Pi ) ∈ π 0 (P+ (Gµτ (T ),γ )). By Lemma 5.2,
(Pi ) contains only boundary edges. Therefore, P+ (GT,γ ) or P− (GT,γ ) belongs to
π 0 (P+ (Gµτ (T ),γ )). From Lemma 5.4, P+ (Gµτ (T ),γ ) ∈ π(P+ (GT,γ )) ∪ π(P− (GT,γ )).
Similarly, P− (Gµτ (T ),γ ) ∈ π(P+ (GT,γ )) ∪ π(P− (GT,γ )). Since P+ (Gµτ (T ),γi ) and
P− (Gµτ (T ),γi ) can not belong to ψγi (P+ (GT,γi )) or ψγi (P− (GT,γi )) at the same
time for each i by Lemma 4.11, P+ (Gµτ (T ),γ ) and P− (Gµτ (T ),γ ) can not belong to
π(P+ (GT,γ )) or π(P− (GT,γ )) at the same time. Our result follows.

According to Lemma 6.8, P± (Gµτ (T ),γ ) ∈ π(P±ε (GT,γ )) for ε = ±. Assume
0
0
.
∈ P0 such that P± (Gµτ (T ),γ ) ∈ S±
S± ∈ P such that P± (GT,γ ) ∈ S± and S±
0
0
0
0
Thus π (S+ ) = Sε and π (S− ) = S−ε .
Note that for any P ∈ P(GT,γ ), the vector ~a(P ) − ~c(P ) in Definition 3.2 can be
~ ) + B(P
~ ) + C(P
~ ), where A(P
~ ) corresponds to the non-τ -mutable
written as A(P
~ ) corresponds to
edges in P and diagonals of GT,γ , which are not labeled τ ; B(P
~
the τ -mutable edges pairs in P ; C(P ) corresponds to edges in P and diagonals
of GT,γ , which are labeled τ . In particular, when P ∈ Pντ (GT,γ ) for some ν,
~ ) = P νl eτ . Similarly, for any P 0 ∈ P(Gµ (T ),γ ), the vector ~a(P 0 ) − ~c(P 0 ) in
C(P
τ
~ 0 (P 0 )+ B
~ 0 (P 0 )+ C
~ 0 (P 0 ), where A
~ 0 (P 0 ) corresponds
Definition 3.2 can be written as A
0
0
to the non-τ -mutable edges in P and diagonals of Gµτ (T ),γ , which are not labeled
~ 0 (P 0 ) corresponds to the τ 0 -mutable edges pairs in P 0 ; C
~ 0 (P 0 ) corresponds to
τ 0; B
edges in P 0 and diagonals of Gµτ (T ),γ , which are labeled τ 0 . In particular, when
~ 0 (P 0 ) = P νl eτ 0 .
P 0 ∈ Pντ (Gµτ (T ),γ ) for some ν, C
P
P
0
νl ≥ 0. Denote d =
νl . Choose s1 , · · · , sd
Let P 0 ∈ Pντ (Gµτ (T ),γ ) with
be the indices in order such that νsi = 1 and si is not in a ν-pair for i ∈ [1, d].
By the dual version of Proposition 5.3, for each λ ∈ {0, 1}d , there uniquely exists
P (λ) ∈ π 0 (P 0 ) such that, for any i ∈ [1, d], the edges of G(plsi ) labeled a1 , a3 are in
P (λ) when λi = 1 and the edges of G(plsi ) labeled a2 , a4 are in P (λ) when λi = 0.
0
Denote v±
be the maximal and minimal valuation maps on P(Gµτ (T ),γ ), which
exist by Theorem 6.5.
0

6.9. Lemma. Keep the foregoing notations. Let P 0 ∈ Pντ (Gµτ (T ),γ ) with
(1) The following are equivalent.
P
0
0
(a) q v+ (P )/2 x(P 0 ) = P ∈π0 (P 0 ) q vε (P )/2 x(P );
0
(b) v+
(P 0 ) = vε (P (0, 0, · · · , 0));
0
(c) v+ (P 0 ) = vε (P (1, 1, · · · , 1)).
(2) The following are equivalent.
P
0
0
(a) q v− (P )/2 x(P 0 ) = P ∈π0 (P 0 ) q v−ε (P )/2 x(P );
0
(b) v−
(P 0 ) = v−ε (P (0, 0, · · · , 0));
0
(c) v− (P 0 ) = v−ε (P (1, 1, · · · , 1)).

P

νl ≥ 0.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 35

P
Proof. We shall only prove (1) since (2) can be proved similarly. Assume
νl = d.
~ 0 (P 0 ) = deτ 0 and C(P
~ ) = −deτ for all P ∈ π 0 (P 0 ). For simplicity, write
Thus C
~ 0 (P 0 ) as A
~0, B
~ 0 (P 0 ) as B
~ 0 . By Proposition 4.8 (3.c), A(P
~ )=A
~ 0 for all P ∈ π 0 (P 0 ).
A
Thus,
~0

~ 0 +de

x(P 0 ) = xA +B

τ0

~0

~ 0 ,de

= q −Λ(A +B

τ 0 )/2

~0

~0

xA +B xdeτ 0 .

Therefore,
x(P 0 )

P
P
~0 ~ 0 P
n(λ)/2 −deτ + λi (ea1 +ea3 )+(d− λi )(ea2 +ea4 )
xA +B
x
λq
P
P
P
~0 ~ 0
~0 ~ 0
= q −Λ(A +B ,deτ 0 )/2 λ q n(λ)/2 xA +B x−deτ + λi (ea1 +ea3 )+(d− λi )(ea2 +ea4 ) .
~0

~ 0 ,de

= q −Λ(A +B

τ 0 )/2

~0 + B
~ 0 are 0, by the compatible condition,
Since the coordinates of eτ and eτ 0 in A
P
P
0
0
~
~
~0 +B
~ 0 , deτ 0 )
we have Λ(A + B , −deτ + λi (ea1 +ea3 )+(d− λi )(ea2 +ea4 )) = Λ(A
for any λ, thus
~0

~ 0 −deτ +P λi (ea +ea )+(d−P λi )(ea +ea )
1
3
2
4

x(P 0 ) = q n(λ)/2 xA +B

.

d

On the other hand, for any λ ∈ {0, 1} ,
~0

~ 0 +P λi (ea +ea )+(d−P λi )(ea +ea )−deτ
1
3
2
4

x(P (λ)) = xA +B

.

0
(P 0 )
v+

+ n(λ) = vε (P (λ)) for all λ ∈ {0, 1}d .
Therefore, (a) holds if and only if
0
For any i ∈ [1, d], if λ and λ satisfies λj = λj for j 6= i and λi = 1, λ0i = 0, by
−
the construction of ν-pairs, the coordinates of eτ in e+
pls (P (λ)) and epls (P (λ)) are
i
i
−(d − i) and −(i − 1), respectively. By Proposition 3.7, we have Ω(plsi , P (λ)) =
4(d − i) − 4(i − 1). Therefore,
vε (P (λ)) − vε (P (λ0 )) = 4(d − i) − 4(i − 1).
Moreover, by Lemma 6.6 and n(0, · · · , 0) = n(1, · · · , 1) = 0, our result follows. 
We have the following results as applications of Lemma 6.9.
6.10. Proposition. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T , then
P
P
0
v+
(P 0 )/2
0
vε (P )/2
(1)
x(P ) = P ∈Sε q
x(P ).
0 q
P 0 ∈S+
P
P
0
v−
(P 0 )/2
0
v−ε (P )/2
(2)
x(P ) = P ∈S−ε q
x(P ).
P 0 ∈S 0 q
−

Proof. We shall only prove (1) because (2)P
can be proved similarly. We may assume
that P+ (Gµτ (T ),γ ) ∈ Pν (Gµτ (T ),γ ) with
νl ≥ 0. By Lemma 6.8 and the dual
version of Proposition 5.3, there exists λ such that Pε (GT,γ ) = P (λ). By Lemma
6.7, λ = (0, 0, · · · , 0) or (1, 1, · · · , 1). Since vε (P (λ)) = vε (Pε (GT,γ )) = 0, by
Lemma 6.9, our result follows.

6.11. Proposition. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . Let Q be
a perfect matching of GT,γ which can do flip at a tile G(p) with the diagonal is not
labeled a1 , a2 , a3 , a4 . Assume S1 , S2 ∈ P such that Q ∈ S1 and µp (Q) ∈ S2 . Then
P
P
0
v+
(P 0 )/2
(1)
x(P 0 ) = P ∈S1 q vε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v+
(P 0 )/2
x(P 0 ) = P ∈S2 q vε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q
P
P
0
v−
(P 0 )/2
(2)
x(P 0 ) = P ∈S1 q v−ε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v−
(P 0 )/2
x(P 0 ) = P ∈S2 q v−ε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q

36

MIN HUANG

Proof. We shall only prove (1). Assume Q ∈ Pντ (GT,γ ) for some ν, then µp (Q) ∈
Pντ (GT,γ ). Denote the label
by a.
P of the diagonal of G(p)
0
We first suppose that
νl ≥ 0. Denote
by
Q
and
Q00 the perfect matchings
P
νl
corresponding to (0, 0, · · · , 0) ∈ {0, 1}
in π(Q) and π(µp (Q)), respectively.
In case a 6= τ , G(p) is a tile of GT,γj for some γj which does not cross a1 , a2 , a3 , a4 , τ .
Write Q as (Qi ), then µp (Q) = (µp (Qi )), here µp (Qi ) = Qi if i 6= j. Write Q0 as
(Q0i ) and Q00 as (Q00i ). By the constructions of Q0 and Q00 , Q0j = Qj , Q00j = µp (Qj )
and Q0i = Q00i for i 6= j. Thus, Q00 = µp (Q0 ). By Proposition 4.8 (3.c), the number
of edges labeled a in Qi is the same with that in Q0i for all i ∈ [1, k]. Further, by
Propositions 4.8 (3.d), 3.7 and Qj = Q0j , we have Ω(p, Q) = Ω(p, Q0 ). Therefore,
0
0
vε (Q) − vε (µp (Q)) = Ω(p, Q) = Ω(p, Q0 ) = v+
(Q0 ) − v+
(Q00 ).
0
0
Thus vε (Q) = v+
(Q0 ) holds if and only if vε (µp (Q)) = v+
(Q00 ) holds. Consequently,
by the dual version of Lemma 6.9, our result follows in this case.
In case a = τ , assume G(p)
class in GT,γ ,
P corresponds to the t-th τ -equivalence
and hence νt = −1. Since
νl ≥ 0, there exists s ∈ [1, nτ (T, γ)] such that {s, t}
τ0
is a ν-pair, and hence νs = 1. Since Q0 ∈ P−ν
(Gµτ (T ),γ ) and −νs = −1, the
s-th τ 0 -equivalence class in Gµτ (T ),γ corresponds to the tile G0 (pls ) with diagonal
labeled τ 0 . By the constructions of Q0 and Q00 , we have Q00 = µpls (Q0 ). We
may assume the edges of G(p) labeled a1 , a3 are inP
Q. Hence the
P edges labeled
0
a1 , a3 are in Q0P
. By Proposition
3.7,
Ω(p
,
Q
)
=
4(
(−ν
)
−
l
l
s
l>s P
l<s (−νl )) and
P
Ω(p, Q) = −4( l>t νl − l<t νl ). Since {s, t} is a ν-pair, l∈(s,t) νl = 0, where
(s, t) means the integers between s and t. Thus, Ω(p, Q) = Ω(pls , Q0 ). Therefore,
0
0
vε (Q) − vε (µp (Q)) = Ω(p, Q) = Ω(pls , Q0 ) = v+
(Q0 ) − v+
(Q00 ).
0
0
(Q00 ) holds. Consequently,
(Q0 ) holds if and only if vε (µp (Q)) = v+
Thus vε (Q) = v+
by the dual version of Lemma
6.9, our result follows in this case.
P
Now we suppose that
νl ≤ 0. Denote π(Q) = {Q0 } and π(µp (Q)) = {Q00 }.
In case a 6= τ , by the same reason, we have Q00 = µp (Q0 ) and Q0 , Q00 ∈
τ0
P
P−ν (Gµτ (T ),γ ). Change the roles of T and µτ (T ), as the discussion for the case
νl ≥ 0, our result follows in this case.
In case a = τ , assume G(p) corresponds to the t-th τ -equivalence class in GT,γ ,
and hence νt = −1. If t is not in a ν-pair, then Q0 = Q00 , and hence S1 = S2 .
Our result follows at once in this case. If t is in a ν-pair {s, t}, then νs = 1.
τ0
Since Q0 ∈ P−ν
(Gµτ (T ),γ ) and −νs = −1, the s-th τ 0 -equivalence class in Gµτ (T ),γ
corresponds to the tile G0 (pls ) with diagonal labeled τ 0 . By the same reason, we
have P
Q00 = µpls (Q0 ). Change the roles of T and µτ (T ), as the discussion for the
case
νl ≥ 0, our result follows in this case.


6.12. Lemma. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . Let Q be a
perfect matching of GT,γ which can do flip at a tile G(p) with diagonal labeled aq
for q = 1, 2, 3, 4. Assume S1 , S2 ∈ P such that Q ∈ S1 and µp (Q) ∈ S2 . If all the
τ -mutable edges pairs in Q are labeled aq−1 , aq+1 (addition in Z4 ), then
P
P
0
v+
(P 0 )/2
(1)
x(P 0 ) = P ∈S1 q vε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v+
(P 0 )/2
x(P 0 ) = P ∈S2 q vε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q
P
P
0
v−
(P 0 )/2
(2)
x(P 0 ) = P ∈S1 q v−ε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v−
(P 0 )/2
x(P 0 ) = P ∈S2 q v−ε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 37

Proof. We shall only prove (1). Without loss of generality, we may assume the
diagonal of G(p) is labeled a1 . Assume Q ∈ Pντ (GT,γ ) and µp (Q) ∈ Pντ0 (GT,γ ).
Write Q as (Qi ) and assume G(p) is a tile of GT,γj for some j. Thus µp (Q) =
(µp (Qi )) with µp (Qi ) = Qi for i 6= j. By Lemma 4.12, there exists Q0j ∈ ψγj (Qj )
satisfies (a) Q0j can do flip at G0 (p), (b) µp (Q0j ) ∈ ψγj (µp (Qj )), (c) all τ 0 -mutable
edges pairs in Q0j are labeled a2 , a4 . For each i 6= j, choose Q0i ∈ ψγi (Qi ) such that
all τ 0 -mutation edges pairs in Q0i are labeled a2 , a4 . Since all τ -mutable edges pairs
in Q are labeled a2 , a4 , all τ -mutable edges pairs in µp (Q) are labeled a2 , a4 . By the
constructions of π(Q) and π(µp (Q)), we have (Q0i ) ∈ π(Q) and (µp (Q0i )) ∈ π(µp (Q)),
0
0
0
0
here we mean µp (Q
Pi ) = Qi for i 6= j. Clearly, (µp (Qi )) = µp ((Qi )).
Suppose that
νl ≥ 0. By Lemma 4.12 (1.d) and Proposition 4.8 (3.c), the
+
0
coordinates of ea1 in e+
p (Q) and ep ((Qi )) are the same and the coordinates of ea1
−
0
in e−
p (Q) and ep ((Qi )) are the same. Thus, by Proposition 3.7, we have Ω(p, Q) =
0
Ω(p, (Qi )). Therefore,
0
0
vε (Q) − vε (µp (Q)) = Ω(p, Q) = Ω(p, (Q0i )) = v+
((Q0i )) − v+
((µp (Q0i ))).
0
0
((µp (Q0i ))) holds.
((Q0i )) holds if and only if vε (µp (Q)) = v+
Thus vε (Q) = v+
0
0
Since all mutation edges
pairs
P
Pin 0(Qi ) are labeled a2 , a4 , (Qi ) ∈ π(Q) corresponds
νl
0
to (0, 0, · · · , 0) ∈ {0, 1}
. If
νl ≥ 0, since all mutation edges pairs in (µp (Q
))
Pi 0
0
arePlabeled a2 , a4 , (µp (Qi )) ∈ π(µp (Q)) corresponds to (0, 0, · · · , 0) ∈ {0, 1} νl .
If
νl0 < 0, since all mutation edges pairs in µpP
(Q) are labeled a2 , a4 , (Q0i ) ∈
0
0
−
νl0
π ((µp (Qi ))) corresponds to (0, 0, · · · , 0) ∈ {0, 1}
. In both cases, by Lemma
6.9 and its dual version,
our
result
follows.
P
Suppose
νl ≤ 0. Change the roles of T and µτ (T ), as the discussion for
P that
the case
νl ≥ 0, our result follows in this case.


6.13. Proposition. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . Let Q be
a perfect matching of GT,γ which can do flip at a tile G(p) with diagonal labeled aq
for q = 1, 2, 3, 4. Assume S1 , S2 ∈ P such that Q ∈ S1 and µp (Q) ∈ S2 . Then
P
P
0
v+
(P 0 )/2
(1)
x(P 0 ) = P ∈S1 q vε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v+
(P 0 )/2
x(P 0 ) = P ∈S2 q vε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q
P
P
0
v−
(P 0 )/2
(2)
x(P 0 ) = P ∈S1 q v−ε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v−
(P 0 )/2
x(P 0 ) = P ∈S2 q v−ε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q
Proof. We shall only prove (1) since (2) can be proved similarly. After do flips
from Q at the tiles G with diagonal labeled τ and the edges labeled aq , aq+2 are in
Q, we obtain a perfect matching R which satisfies the conditions of Lemma 6.12.
By Lemma 6.2 (1), µp (R) can be obtained by the same steps of flips from µp (Q).
Assume S10 , S20 ∈ P such that R ∈ S10 and µp (R) ∈ S20 . Applying Proposition 6.11
step by step to Q and µp (Q), we have the following
P
P
0
v+
(P 0 )/2
(a)
x(P 0 ) = P ∈S1 q vε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v+
(P 0 )/2
x(P 0 ) = P ∈S 0 q vε (P )/2 x(P ) holds.
P 0 ∈π(S10 ) q
1
P
P
0
v+
(P 0 )/2
0
vε (P )/2
(b)
q
x(P
)
=
x(P ) holds if and only if
0
P ∈S2 q
PP ∈π(S2 ) v0 (P 0 )/2
P
0
vε (P )/2
+
x(P ) = P ∈S 0 q
x(P ) holds.
P 0 ∈π(S 0 ) q
2

2

38

MIN HUANG

P
P
0
0
On the other hand, by Lemma 6.12, P 0 ∈π(S 0 ) q v+ (P )/2 x(P 0 ) = P ∈S 0 q vε (P )/2 x(P )
1
1
P
P
0
0
holds if and only if P 0 ∈π(S 0 ) q v+ (P )/2 x(P 0 ) = P ∈S 0 q vε (P )/2 x(P ) holds.
2
2
Therefore, Our result follows.

Summaries Propositions 6.11 and 6.13, we obtain.
6.14. Proposition. Keep the foregoing notations. Assume τ 0 6= γ ∈
/ T . Let Q be a
perfect matching of GT,γ which can do flip at a tile G(p). Assume S1 , S2 ∈ P such
that Q ∈ S1 and µp (Q) ∈ S2 . Then
P
P
0
v+
(P 0 )/2
(1)
x(P 0 ) = P ∈S1 q vε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v+
(P 0 )/2
x(P 0 ) = P ∈S2 q vε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q
P
P
0
v−
(P 0 )/2
(2)
x(P 0 ) = P ∈S1 q v−ε (P )/2 x(P ) holds if and only if
P 0 ∈π(S1 ) q
P
P
0
v−
(P 0 )/2
x(P 0 ) = P ∈S2 q v−ε (P )/2 x(P ) holds.
P 0 ∈π(S2 ) q
6.15. Theorem. Keep the foregoing notations. For any S ∈ P,
P
P
0
vε (P )/2
(1)
x(P ) = P 0 ∈π(S) q v+ /2 x(P 0 ).
P ∈S q
P
P
0
v−ε (P )/2
(2)
x(P ) = P 0 ∈π(S) q v− /2 x(P 0 ).
P ∈S q
Proof. We shall only prove (1) because (2) can be proved similarly. First suppose
that γ 6= τ, τ 0 . Choose P ∈ S, by Lemma 6.3, P can be obtained from Pε (GT,γ )
by a sequence of flips. In this case, the equality follows by Proposition 6.10 and
Proposition 6.14. Now suppose that γ = τ or τ 0 . Then the equality becomes to
xτ = x−eτ 0 +ea1 +ea3 + x−eτ 0 +ea2 +ea4 or xτ 0 = x−eτ +ea1 +ea3 + x−eτ +ea2 +ea4 ,
which clearly holds. Our result follows.



Now we can give the proof of Theorem 3.11.
Proof of Theorem 3.11: By Theorem 6.15, it suffices to show v+ = v− . We
prove this by induction on N (γ, T ), the number of crossing points of γ with T .
When N (γ, T ) = 0 or 1, it is easy to see that v+ = v− = 0. Assume v+ =
v− for all N (γ, T ) < d. When N (γ, T ) = d > 1, there exists τ ∈ T such that
0
the N (γ, µτ (T )) < d. Denote v±
the maximal and minimal valuation maps on
0
0
= v−
. By the dual version of Lemma
P(Gµτ (T ),γ ). By induction hypothesis, v+
6.8, P+ (GT,γ ) ∈ π 0 (Pε (Gµτ (T ),γ )) for some ε ∈ {+, −}. For simplicity, we may
τ
assume
P ε = +. Assume P+ (GT,γ ) ∈ Pν (GT,γ ) for some ν.
If
νl ≤ 0, by the dual version of Proposition 5.3 and
Lemma 6.7, P+ (GT,γ ) =
P
−
νl
, here P (λ) means the
P (λ) with λ = (0, 0, · · · , 0) or (1, 1, · · · , 1) ∈ {0, 1}
perfect matching in π 0 (P+ (Gµτ (T ),γ )) which is determined by λ. By Theorem 6.15
0
0
0
and Lemma 6.9 (2), we have v− (P+ (GT,γ )) = v−
(P+ (Gµτ (T ),γ )). Since v+
= v−
,
0
v− (P+P
(Gµτ (T ),γ )) = 0, and hence v− (P+ (GT,γ )) = 0. Consequently, v+ = v− .
If
νl ≥ 0, by Proposition 5.3 andPLemma 6.7, P+ (Gµτ (T ),γ ) = P 0 (λ) with
λ = (0, 0, · · · , 0) or (1, 1, · · · , 1) ∈ {0, 1} νl , here P 0 (λ) means the perfect matching
in π(P+ (GT,γ )) which is determined by λ. By Theorem 6.15 and the dual version
0
0
0
of Lemma 6.9 (2), we have v− (P+ (GT,γ )) = v−
(P+ (Gµτ (T ),γ )). Since v+
= v−
,
0
v− (P+ (Gµτ (T ),γ )) = 0, and hence v− (P+ (GT,γ )) = 0. Consequently, v+ = v− .
The proof of Theorem 3.11 is complete.

QUANTUM CLUSTER ALGEBRAS FROM UNPUNCTURED TRIANGULATED SURFACES 39

Acknowledgements: The author is thankful to S. Liu, I. Assem, T. Brüstle
and D. Smith for financial support. Part of the result is posted at the conference
Cluster Algebras and Math Physics (East Lansing, May 7-May 12), the author
thanks the organizers for their hospitality. Thanks Ilke Canakci for pointing their
results on quantum Laurent expansion. Last, the author would take the opportunity
to thanks his Ph.D. advisor Prof. Fang Li for continued encouragement these years.
References
[1] C. Amiot, Cluster categories for algebras of global dimension 2 and quivers with potential, Ann. Inst. Fourier 59 (6) (2009) 2525-2590.
[2] A. Berenstein A, A. Zelevinsky, Quantum cluster algebras. Adv Math 195 (2) (2005)
405-455.
[3] P. Caldero, F. Chapoton, Cluster algebras as Hall algebras of quiver representations,
Comment. Math. Helv. 81 (2006) 595-616.
[4] P. Caldero, B. Keller, From triangulated categories to cluster algebras, Invent. Math.
172 (2008) 169-211.
[5] P. Caldero, B. Keller, From triangulated categories to cluster algebras II, Ann. Sci.
École Norm. Sup. (4) 39 (6) (2006) 983-1009.
[6] P.G. Cao, M. Huang, F. Li, Categorification of sign-skew-symmetric cluster algebras
and some conjectures on g-vectors, arXiv:1704.07549.
[7] I. Canakci, P. Lampe, An expansion formula for type A and Kronecker quantum cluster
algebras, arXiv:1807.07539.
[8] I. Canakci, R. Schiffler, Snake graph calculus and cluster algebras from surfaces, J.
Algebra 2013, 382, 240-281.
[9] B. Davison, Positivity for quantum cluster algebras, Annals of Mathematics 187 (2018)
157-219.
[10] L. Demonet, Categorification of skew-symmerizable cluster algebras, Algebr Represent
Theory 14 (2011) 1087-1162.
[11] A. Felikson, M. Shapiro, P. Tumarkin, Cluster algebras and triangulated surfaces, Adv.
Math. 231 (2012) 2953-3002.
[12] S. Fomin, M. Shapiro, D. Thurston, Cluster algebras and triangulated surfaces. Part
I: Cluster complexes, Acta Math. 201 (2008) 83-146.
[13] S. Fomin, A. Zelevinsky, Cluster algebras I: Foundations, J. Amer. Math. Soc. 15
(2002) 497-529.
[14] C.J. Fu, B. Keller, On cluster algebras with coefficients and 2-Calabi-Yau categories,
Trans. Amer.Math. Soc. 362 (2) (2010) 859-895.
[15] M. Gross, P. Hacking, S. Keel, M. Kontsevich, Canonical bases for cluster algebras, J.
Amer. Math. Soc. 31 (2018) 497-608.
[16] M. Huang, F. Li, Unfolding of acyclic sign-skew-symmetric cluster algebras and applications to positivity and F-polynomials, arXiv:1609.05981v2.
[17] S.J Kang, M. Kashiwara, M. Kim and S.J Oh, Monoidal categorification of cluster
algebras, J. Amer. Math. Soc. 31 (2018) 349-426.
[18] M. Kashiwara, Bases cristallines, C. R. Acad. Sci. Paris Sér. I Math., 311 (6) (1990)
277-280.
[19] K.Y. Lee, R. Schiffler, Positivity for cluster algebras, Annals of Mathematics 182 (2015)
73-125.
[20] D. Labardini-Fragoso, Quivers with potentials associated to triangulated surfaces,
Proc. Lond. Math. Soc. (3) 98 (3) (2009) 797-839.
[21] G. Lusztig, Canonical bases arising from quantized enveloping algebras, J. Amer. Math.
Soc., 3(2) (1990) 447-498.
[22] G. Muller, Skein and cluster algebras of marked surfaces, Quantum Topol. 7 (2016),
no. 3, 435-503.
[23] G. Musiker, R. Schiffler, Cluster expansion formulas and perfect matchings, J. Algebraic Combin. 32 (2) (2010) 187-209.
[24] G. Musiker, R. Schiffler, and L. Williams, Positivity for cluster algebras from surfaces,
Adv. Math. 227 (2011) 2241-2308.

40

MIN HUANG

[25] Y. Palu, Cluster characters for triangulated 2-Calabi-Yau categories, Ann. Inst. Fourier
58 (6) (2008) 2221-2248.
[26] P.-G. Plamondon, Cluster characters for cluster categories with infinite-dimensional
morphism spaces, Adv. Math. 227 (2011) 1-39.
[27] P.-G. Plamondon, Cluster algebras via cluster categories with infinite-dimensional morphism spaces, Compositio Math. 147 (2011) 1921-1954.
[28] F. Qin, Triangular bases in quantum cluster algebras and monoidal categorification
conjectures, Duke Math. J. 166, Number 12 (2017) 2337-2442.
[29] D. Rupel, On Quantum analogue of the Caldero-Chapoton formula, Int. Math. Res.
Not. IMRN 14 (2011) 3207-3236.
[30] D. Rupel, Quantum cluster characters for valued quivers, Trans. Amer. Math. Soc. 367
(2015), no. 10, 7061-7102.
[31] R. Schiffler, On cluster algebras arising from unpunctured surfaces II, Adv. Math. 223
(6) (2010) 1885-1923.
[32] R. Schiffler, H. Thomas, On cluster algebras arising from unpunctured surfaces, Int.
Math. Res. Not. IMRN 17 (2009) 3160-3189.
Min Huang
Département de mathématiques, Université de Sherbrooke, Sherbrooke, Québec, J1K
2R1, Canada
E-mail address: minhuang1989@hotmail.com

