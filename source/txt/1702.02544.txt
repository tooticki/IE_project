arXiv:1702.02544v2 [math.DS] 13 Feb 2017

ON PRODUCT OF DIFFERENCE SETS FOR SETS OF
POSITIVE DENSITY
ALEXANDER FISH
Abstract. In this paper we prove that given two sets E1 , E2 ⊂ Z
of positive density, there exists k ≥ 1 which is bounded by a number
depending only on the densities of E1 and E2 such that kZ ⊂ (E1 −
E1 ) · (E2 − E2 ). As a corollary of the main theorem we deduce that if
α, β > 0 then there exist N0 and d0 which depend only on α and β such
that for every N ≥ N0 and E1 , E2 ⊂ ZN with |E1 | ≥ αN, |E2 | ≥ βN
there exists d ≤ d0 a divisor of N satisfying d ZN ⊂ (E1 −E1 )·(E2 −E2 ).

1. introduction
One of the main themes of additive combinatorics is sum-product estimates. It goes back to Erdös and Szemerédi [3] who conjectured that for
any finite set A ∈ Z (or in R), for every ε > 0 we have
|A + A| + |A · A| ≫ |A|2−ε ,
where the A + A = {a + b | a, b ∈ A}, and A · A = {ab | a, b ∈ A}. Currently
the best known estimate is due to Konyagin-Shkredov [6] and it is based on
the beautiful previous breakthrough work by Solymosi [7]:
|A + A| + |A · A| ≫ |A|4/3+c ,
for any c < 5/9813.
In this paper we study a slightly twisted, but nevertheless related, sumproduct phenomenon. Namely, we address the following
Question 1. For a given infinite set E ⊂ Z, how much structure does
possess the set (E − E) · (E − E)?
We will restrict our attention to sets having positive density, see the definition below.
Furstenberg [5] noticed a intimate connection between difference sets for
sets of positive density, and the sets of return times of a set of positive
measure in measure-preserving systems. In this paper we will establish an
arithmetic richness of a set of return times of a set of a positive measure to
itself within a measure-preserving system. Recall that a triple (X, µ, T ) is a
measure-preserving system if X is a compact metric space, µ is a probability
Date: 8 February 2017.
2010 Mathematics Subject Classification. Primary: 37A45; Secondary: 11E25, 11T30.
Key words and phrases. Diﬀerence sets, sum-product estimates.
1

2

ALEXANDER FISH

measure on the Borel σ-algebra of X, and T : X → X is a bi-measurable
map which preserves µ. For a measurable set A ⊂ X with µ(A) > 0 the set
of return times from A to itself is:
R(A) = {n ∈ Z | µ(A ∩ T n A) > 0}.
We will denote by E 2 = {e2 |e ∈ E} the set of squares of E ⊂ Z. It
has been proved by Björklund and the author [2] that for any three sets
of positive measure A, B, and C in measure-preserving systems there exists
k ≥ 1 (depending on the sets A, B, and C) such that k Z ⊂ R(A) · R(B) −
R(C)2 . One of the motivations for this work was to show that k in the latter
statement depends only on the measures of the sets A, B, and C. We prove
the latter, and even more surprisingly, we show that R(C) can be omitted.
We have
Theorem 1.1. Let (X, µ, T ) and (Y, ν, S) be measure-preserving systems,
and let A ⊂ X, B ⊂ Y be measurable sets with µ(A) > 0, and ν(B) > 0.
Then there exist k0 depending only on µ(A) and ν(B)), and k ≤ k0 such that
k Z ⊂ R(A) · R(B).
This result has a few combinatorial consequences. To state the first application, we recall that the upper Banach density of a set E ⊂ Z is defined
by
|E ∩ {a, a + 1, . . . , a + (N − 1)}|
.
d∗ (E) = lim sup sup
N
N →∞ a∈Z
Through Furstenberg’s correspondence principle [5], we obtain
Corollary 1.1. Let E1 , E2 ⊂ Z be sets of positive upper Banach density.
Then there exist k0 which depends only on the densities of E1 and E2 and
k ≤ k0 such that
k Z ⊂ (E1 − E1 ) · (E2 − E2 ).
Another application of Theorem 1.1 is the following result.
Corollary 1.2. For any α, β > 0 there exist N0 and d0 , depending only
on α and β, such that for every N ≥ N0 and E1 , E2 ⊂ ZN with |E1 | ≥
αN, |E2 | ≥ βN there exists d ≤ d0 which is a divisor of N and d ZN ⊂
(E1 − E1 ) · (E2 − E2 ).
Corollary 1.2 implies also that if p is a large enough prime and E1 , E2 ⊂ Zp
satisfy |E1 | ≥ αp, |E2 | ≥ βp, then (E1 − E1 ) · (E2 − E2 ) = Zp . This also
follows from a result by Hart-Iosevich-Solymosi [4] who proved that if E ⊂ Fq
(where Fq is a field with q elements) with |E| ≥ q 3/4+ε then for q large enough
(E − E) · (E − E) = Fq .
Acknowledgment: The work has been carried out during a research visit to
Weizmann Institute, Israel. The author would like to thank Feinberg visiting
program and Mathematics Department at Weizmann Institute for their support. The author is indebted to Omri Sarig for his constant encouragement

ON PRODUCT OF DIFFERENCE SETS FOR SETS OF POSITIVE DENSITY

3

and support, Eliran Subag and Igor Shparlinski for enlightening discussions,
and Ilya Shkredov for his useful comments on the first version of the paper
and for allowing us to reproduce his simplified proof of Lemma 2.1.
2. Proof of Theorem 1.1
Let us assume that (X, µ, T ) is a measure-preserving system, and let A ⊂
X be a measurable set with µ(A) > 0. Recall that the set of return times of
A is defined by
R(A) = {n ∈ Z | µ(A ∩ T n A) > 0}.
The theorem will follow from the following statement.
Lemma 2.1. For every L ≥ 1 and every b ∈ Z \ {0} there exists m ≤
1
⌊ µ(A)
L ⌋ + 1 such that
{mb, 2mb, . . . , Lmb} ⊂ R(A).
Indeed, let R(A) and R(B) be sets of return times for measurable sets A
1
⌋ + 1. Then for every
and B of positive measures. Then choose N = ⌊ ν(B)
b ∈ Z \ {0} there exist 1 ≤ i < j ≤ N such that ν((S b )i B ∩ (S b )j B) > 0.
Then by S-invariance of ν it follows that there exists 1 ≤ m ≤ N (m = j − i)
such that mb ∈ R(B).
Let us define L = N !. By Lemma 2.1 there exists n = n(L, µ(A)) such that
for every b ∈ Z \ {0} there exists m ≤ n with {mb, 2mb, . . . , Lmb} ∈ R(A).
Let us define k = L · n!. Take any b ∈ Z \ {0}. By the choice of n,
there exists m ≤ n such that {mb, 2mb, . . . , Lmb} ∈ R(A). By the choice
k
∈ R(B).
of N it follows that there exists 1 ≤ j ≤ N such that j · Lm
Lm
Lm
Also, j is an integer less or equal than Lm, therefore j b ∈ R(A). Thus
k
kb = Lm
j b · j Lm ∈ R(A) · R(B). This finishes the proof of Theorem 1.1.
Proof1 of Lemma 2.1. Let (X, µ, T ) be a measure-preserving system, and let
A ⊂ X be a measurable set, and let b ∈ Z \{0}. We introduce a new product
Q
Q
ib and the product
system Z = L
X with the transformation S = L
i=1 T
Qi=1
L
measure ν = i=1 µ. Then (Z, ν, S) is a measure-preserving system, and the
Q
set Ã = L
i=1 A has measure
 
ν Ã = µ(A)L > 0.
1
Then by Poincaré lemma there exists m ≤ ⌊ µ(A)
L ⌋ + 1 such that

ν(Ã ∩ S m Ã) > 0.
The latter means that for every 1 ≤ i ≤ L we have
µ(A ∩ T ibm A) > 0.
1This proof of the lemma has been proposed to the author by I. Shkredov.

4

ALEXANDER FISH

1
Therefore, we have {bm, 2bm, . . . , Lbm} ∈ R(A) for m ≤ ⌊ µ(A)
L ⌋ + 1.



3. Proofs of Corollaries 1.1 and 1.2
Furstenberg [5] in his seminal work on Szemerédi’s theorem showed:
Correspondence Principle. Given a set E ⊂ Z there exists a measurepreserving system (X, µ, T ) and a measurable set A ⊂ X such that for all
n ∈ Z we have
d∗ (E ∩ (E + n)) ≥ µ(A ∩ T n A),
and
d∗ (E) = µ(A).

Proof of Corollary 1.1. Let E1 , E2 ⊂ Z be sets of positive densities. Then by
Furstenberg’s correspondence principle there exist measure-preserving systems (X, µ, T ) and (Y, ν, S) and measurable sets A ⊂ X, B ⊂ Y that satisfy
µ(A) = d∗ (E1 ), ν(B) = d∗ (E2 )
and
R(A) ⊂ E1 − E1 , R(B) ⊂ E2 − E2 .
By Theorem 1.1 there exist k(µ(A), ν(B)) and k ≤ k(µ(A), ν(B)) such that
k Z ⊂ R(A) · R(B). The latter statement implies the conclusion of the
corollary.

Proof of Corollary 1.2. Let α > 0, and β > 0 and let E1 , E2 ⊂ ZN with
|E1 | ≥ αN , and |E2 | ≥ βN . It is clear that X = ZN with the shift map
T x = x+ 1( mod N ) and the uniform measure µ on X defined by µ(E) = |E|
N
for any E ⊂ X is a measure-preserving system. It is also clear that for
(X, µ, T ) and the sets E1 , E2 ⊂ X we have2 R(E1 ) = (E1 − E1 ) + N Z and
R(E2 ) = (E2 − E2 ) + N Z. Then by Theorem 1.1 it follows that if N ≥ N0 ,
where N0 depends only on α and β, then there exist k(α, β) and k ≤ k(α, β)
such that k Z ⊂ R(E1 ) · R(E2 ). Then by the Chinese Remainder theorem
for d = gcd (k, N ) ≤ k we have d Z ⊂ (E1 − E1 ) · (E2 − E2 ) + N Z, which
implies the statement of the corollary.


2We identify here the ring Z with the set {0, 1, . . . , N − 1}.
N

ON PRODUCT OF DIFFERENCE SETS FOR SETS OF POSITIVE DENSITY

5

4. Further problems
To formulate the first problem, we mention a recent result by BjörklundBulinski [1], who proved, in particular, that for any E ⊂ Z3 of positive
density there exists k ≥ 1, depending on the set E and not only on its
density, such that
k Z ⊂ {x2 − y 2 − z 2 | (x, y, z) ∈ E − E}.
Recall, the definition of the upper Banach density of a set E ⊂ Z2 :
d∗ (E) =

|E ∩ [a, b) × [c, d)|
.
(b − a)(d − c)
b−a→∞,d−c→∞
lim sup

Problem 1. Is it true that given E1 , E2 ⊂ Z of positive density there exist
k0 , which depends only on d∗ (E1 ) and d∗ (E2 ), and k ≤ k0 such that k Z ⊂
(E1 − E1 )2 − (E2 − E2 )2 ? If yes, can we show that for any set E ⊂ Z2 of
positive density there exist k0 , which depends only on d∗ (E), and k ≤ k0 such
that k Z ⊂ {x2 − y 2 | (x, y) ∈ E − E}?
The next two problems arise naturally by Theorem 1.1 and the following
result proved by Björklund and the author in [2]:
Theorem 4.1. Let E ⊂ M at0d (Z) = {(aij ) ∈ Zd×d | tr(aij ) = 0} be a set of
positive density. Then there exists k ≥ 1 (which a priori depends on the set
E and not only on its density) such that for any matrix A ∈ k · M at0d (Z)
there exists B ∈ E − E such that the characteristic polynomial of B coincides
with the characteristic polynomial of A.
Problem 2. Is it true that given E ⊂ Z2 of positive upper Banach density,
there exist k0 that depends only on d∗ (E) and k ≤ k0 such that
k Z ⊂ {xy | (x, y) ∈ E − E}?
We also would like to establish the quantitative version of Theorem 4.1:
Problem 3. Is it true that the parameter k in Theorem 4.1 depends only on
the density of the set E ⊂ M at0d (Z)?
In view of Corollary 1.2 we believe that a similar statement holds true for
any finite commutative ring.
Conjecture 1. Let α > 0. Then there exist N and k depending only on α
such that for any finite commutative ring R with |R| ≥ N and any set E ⊂ R
satisfying |E| ≥ α|R| the set (E − E) · (E − E) contains a subring R0 such
that |R|/|R0 | ≤ k.

6

ALEXANDER FISH

References
[1] M. Björklund, K. Bulinski, Twisted patterns in large subsets of ZN . Preprint.
[2] M. Björklund, A. Fish, Characteristic polynomial patterns in difference sets of matrices, Bull. London Math. Soc. (2016) 48 (2): 300-308.
[3] P. Erdös, E. Szemerédi, On sums and products of integers. Studies in pure mathematics, 213-218, Birkhäuser, Basel, 1983.
[4] D. Hart, A. Iosevich, J. Solymosi, Sum-product estimates in finite fields via Kloosterman sums, Int. Math. Res. Not. IMRN 2007, no. 5
[5] H. Furstenberg, Ergodic behavior of diagonal measures and a theorem of Szemerédi
on arithmetic progressions. J. Analyse Math. 31 (1977), 204–256.
[6] S.V. Konyagin, I.D. Shkredov, New results on sum-products in R, Preprint,
arXiv:1602.03473.
[7] J. Solymosi, Bounding multiplicative energy by the sumset, Advances in Mathematics
Volume 222, Issue 2, (2009), 402-408.
[8] E. Szemerédi, On sets of integers containing no k elements in arithmetic progression,
Collection of articles in memory of Juriı̆ Vladimirovič Linnik, Acta Arith.
School of Mathematics and Statistics, University of Sydney, Australia
E-mail address: alexander.fish@sydney.edu.au

