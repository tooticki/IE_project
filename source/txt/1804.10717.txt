Traces of Hypergraphs

arXiv:1804.10717v2 [math.CO] 23 Sep 2018

Noga Alonâˆ—

Guy Moshkovitzâ€ 

Noam Solomonâ€¡

Abstract
Let Tr(n, m, k) denote the largest number of distinct projections onto k coordinates guaranteed in any family of m binary vectors of length n. The classical Sauer-Perles-Shelah Lemma
implies that Tr(n, nr , k) = 2k for k â‰¤ r. While determining Tr(n, m, k) precisely for general k
and m seems hopeless, estimating it remains a widely open problem with connections to important questions in computer science and combinatorics. For example, an influential result of
Kahn-Kalai-Linial gives non-trivial bounds on Tr(n, m, k) for k = Î˜(n) and m = Î˜(2n ). Here
we prove that, for r, Î±âˆ’1 â‰¤ no(1) , it holds that Tr(n, nr , Î±n) = nÂµ(1+o(1)) with
Âµ=

r + 1 âˆ’ log(1 + Î±)
.
2 âˆ’ log(1 + Î±)
o(1)

Thus, we (essentially) determine Tr(n, m, k) for k = Î˜(n) and all m up to 2n .
For the proof we establish a â€œsparseâ€ version of another classical result, the Kruskal-Katona
Theorem, which gives a stronger guarantee when the hypergraph does not induce dense subhypergraphs. Furthermore, we prove that the parameters in our sparse Kruskal-Katona theorem
are essentially best possible. Finally, we mention two simple applications which may be of
independent interest.

1

Introduction

For a hypergraph (or a set system) F, the trace of F on a vertex subset I is defined as the set
of projections of the edges of F onto I, namely,
  FI = {e âˆ© I : e âˆˆ F}. The shatter function,
or trace function, of F is Tr(F, k) = maxI FI  with I a set k vertices. The focus of this paper
is the following important extremal function; for integers n â‰¥ k and 0 â‰¤ m â‰¤ 2n , let Tr(n, m, k)
denote the largest number of distinct projections onto k vertices guaranteed in any n-vertex m-edge
hypergraph:
 
Tr(n, m, k) = min Tr(F, k) = min max FI .
F âŠ†2[n]
|F |=m

F âŠ†2[n] IâŠ†[n]
|F |=m |I|=k

There is a considerable number of results, in various areas of discrete mathematics, determining
or estimating this function for certain values of the parameters. The most famous result is arguably
the Sauer-Perles-Shelah Lemma ([16], [17], see also Vapnik and Chervonenkis [18] for a slightly
weaker estimate).
âˆ—

Department of Mathematics, Princeton University, Princeton, New Jersey, USA and Center for Mathematical
Sciences and Applications, Harvard University, Cambridge, Massachusetts, USA. Email: nalon@math.princeton.edu.
â€ 
Center for Mathematical Sciences and Applications, Harvard University, Cambridge, Massachusetts, USA. Email:
guymoshkov@gmail.com.
â€¡
Center for Mathematical Sciences and Applications, Harvard University, Cambridge, Massachusetts, USA. Email:
noam.solom@gmail.com.

1

Theorem 1.1 (Sauer-Perles-Shelah). Tr(n, m, k) = 2k for m >

Pkâˆ’1
i=0

n
i .

The VC-dimension of a hypergraph F is the largest k so that Tr(F, k) = 2k , i.e., it is the largest
number k so that F has a full projection on some k vertices. The VC-dimension is a basic combinatorial measure of the complexity of a hypergraph; understanding the shatter function beyond
the case of full projections is a very natural direction. Shatter functions and the VC-dimension are
extensively studied in combinatorial and computational geometry, as well as in machine learning
(see the survey of MatousÌŒek [15] for several geometric and algorithmic applications of shatter functions, and the survey of Angulin [3] for the role VC-dimension is playing in computational learning
theory).
In [6], Bondy proved that Tr(n, n, n âˆ’ 1) = n, and a remark in [1] and in [9] is that
Tr(n, m, 3) = 7 for m = 1 + n + [n2 /4] + 1,
and the same argument implies that determining the smallest m for which Tr(n, m, 4) = 15 is
equivalent to determining the maximum possible number of edges of a 3-uniform hypergraph on n
vertices with no complete hypergraph on 4 verticesâ€”a well-known open problem of TuraÌn. Additional results that can all be formulated in terms of the function Tr(n, m, k) appear in [5], [12], [4],
[8] and more.
Recently, Bukh and Goaoc were able to estimate Tr(n, nO(1) , k) for constant values of k that
are not too small (and also improved an earlier lower bound of [8]). In the other extreme regime,
a classical paper of Kahn et al. [12] proves that for every 0 < Î±, Î² < 1,
Tr(n, Î²2n , Î±n) â‰¥ (1 âˆ’ nâˆ’c )2Î±n ,
where c = c(Î±, Î²) > 0 depends only on Î±, Î². Benny Chor conjectured in the 80s that one can in
fact make the error term exponentially rather than polynomially small in n. This conjecture was
recently disproved by Bourgain et al. [4]. In fact, Bourgain et al. prove several additional results,
in particular strengthening those of [12].
In [5], BollobaÌs and Radcliffe considered the case where m is polynomial and k is linear. For
the lower bound they were able to prove the following.
Theorem 1.2 (BollobaÌs and Radcliffe [5, Theorem 7]). For constants r â‰¥ 2 and 0 < Î± â‰¤ 1 it holds
that Tr(n, nr , Î±n) â‰¥ â„¦(nÎ»r ) with1
(
âˆš
log(1 + Î±)
Î± âˆˆ [ 2 âˆ’ 1, 1]
âˆš
Î»=
log(1 + Î±)/H(log(1 + Î±)) Î± âˆˆ (0, 2 âˆ’ 1)
As for the upper bound, it would seem that among hypergraphs on n vertices with a given
number of edges m, a hypergraph F with Tr(F, k) = Tr(n, m, k) should be very symmetric, when
k is not too small or too large. A natural candidate for such an extremal hypergraph is thus the
hypergraph containing all edges up to the appropriate size. BollobaÌs and Radcliffe were able to
show that this is in fact not the case.
Theorem 1.3 (BollobaÌs-Radcliffe [5, Theorem 11]). For every constant integer r â‰¥ 2,
 X

r  
n
Tr n,
, n/2 â‰¤ o(nr ).
i
i=0

1

Here H(x) = âˆ’x log(x) âˆ’ (1 âˆ’ x) log(1 âˆ’ x) is the binary entropy function, and the logarithms are in base 2.

2

1.1

Our results

Our main result in this paper determines the value of Tr(n, nr , Î±n), for constant r and Î±, up to
logarithmic factors, thus closing the gap between the lower and upper bounds in Theorems 1.2
and 1.3. We henceforth use the following standard notation: for two functions f (n) and g(n), by
f = OÌƒ(g) we mean f = O(g logc (g)) for some absolute constant c > 0; f = â„¦Ìƒ(g) and f = Î˜Ìƒ(g) are
defined analogously. The main result of this paper is as follows.
Theorem 1.4 (Main result). Let r â‰¥ 1, Î± âˆˆ (0, 1]. If r, Î±âˆ’1 â‰¤ no(1) then Tr(n, nr , Î±n) = nÂµ(1âˆ’o(1))
where
r + 1 âˆ’ log(1 + Î±)
Âµ = Âµ(r, Î±) =
.
(1)
2 âˆ’ log(1 + Î±)
Moreover, if r = O(1), Î±âˆ’1 â‰¤ (log n)O(1) then Tr(n, nr , Î±n) = Î˜Ìƒ(nÂµ ).

It is perhaps instructive to consider one representative special case: r = 2, Î± = 1/2. In this
case, the proofs in [5] bound Tr(n, n2 , n/2) as follows;
â„¦(n1.169925.. ) = â„¦(n2 log2 3/2 ) â‰¤ Tr(n, n2 , n/2) â‰¤

n2 (log log n)O(1)
= o(n2 ),
log n

whereas Theorem 1.4 in particular implies that
Tr(n, n2 , n/2) = Î˜Ìƒ(n1+1/(3âˆ’log 2 3) ) = Î˜Ìƒ(n1.706695.. ).
A new Kruskal-Katona-type theorem. As it turns out, our main result can be readily deduced
from a new version of the well-known Kruskal-Katona Theorem. Recall that the Kruskal-Katona
Theorem gives a lower bound on the number of i-sets contained within the edges of a uniform
hypergraph. Formally, for a hypergraph F and i âˆˆ N we denote
 
 
	
F
= S  |S| = i and âˆƒe âˆˆ F : S âŠ† e .
i
The following classical version of the Kruskal-Katona Theorem was given by LovaÌsz [14]. Henceforth, for real y > 0 we use the standard notation
 
y
y(y âˆ’ 1) Â· Â· Â· (y âˆ’ i + 1)
=
.
i
i!

We use the abbreviation that F is a k-graph to mean that F is a k-uniform hypergraph.

Theorem 1.5 (Kruskal-Katona Theorem, LovaÌsz [14]). Let F be a k-graph. If |F| = ky with real
 

y > 0 then for every 0 â‰¤ i â‰¤ k we have  Fi  â‰¥ yi .

Our new version of the Kruskal-Katona Theorem gives a stronger lower bound depending on
the sparsity of the hypergraph F. As is standard, we denote the sub-hypergraph of a hypergraph F
induced on a vertex subset I by F[I] = ( I, {e | e âˆˆ F and e âŠ† I} ). We denote the largest number
of edges in an induced sub-hypergraph on i vertices by


span(F, i) := max F[I].
IâŠ†[n]
|I|=i

3

We next state our new version of the Kruskal-Katona Theorem. (See Theorem 2.7 for a slightly
stronger form.) For the parameters relevant to our applications here, it provides a significantly
stronger estimate than the classical theorem, using an appropriate sparseness assumption.
Theorem 1.6 (â€œSparse Kruskal-Katona Theoremâ€). Let F be a k-graph with n vertices and |F| =
nr edges, r â‰¥ 1. If



x
1
span(F, Î±n) â‰¤ min
n, |F|
2
k âˆ’ âŒˆrâŒ‰
with real x â‰¥ 2k then for every r + 1 â‰¤ i â‰¤ k we have
 
x
 F 

 â‰¥ 1 Â· i  |F|,
 i  C x
k
with C = (8k/Î±)âŒˆ5râŒ‰ log n.

It is of course natural to ask whether the bound in Theorem 1.6 is essentially best possible. Our
third result in this paper proves that this is indeed the case.
Theorem 1.7 (Upper bound for Sparse Kruskal-Katona).
Let n, k, x âˆˆ N+ , r â‰¥ 1 and 0 < Î± â‰¤ 1
x
1/6
k
r
with 3r â‰¤ k â‰¤ x â‰¤ n
and n â‰¤ Î± n â‰¤ k n. There exists a k-graph F with n vertices, |F| = nr
  (x)

edges, and span(F, Î±n) â‰¤ O( xk n) such that for every 0 â‰¤ i â‰¤ k we have  Fi  â‰¤ xi |F|.
(k)

Applications. We end the paper with two simple applications of our main result, in geometry
and in graph theory. We first describe the geometric application. Let H be a family of halfspaces2
in Rd , and let P be a set of points in Rd . We say that P separates H if for every pair of distinct
halfspaces H1 6= H2 âˆˆ H there is a point in P that lies in one and outside the other.
Proposition 1.8. Let P âŠ‚ Rd be a set of n points and let H be a family of nr halfspaces in Rd ,
with 1 â‰¤ r â‰¤ nÎ´ , such that P separates H. Then there exists a subset P â€² âŠ† P of at most n1âˆ’Î´
r+1
points and a subset Hâ€² âŠ† H of at least n 2 (1âˆ’O(Î´)) halfspaces such that P â€² separates Hâ€² .
The graph-theoretic application shows that in any graph with not too many independent sets,
one can always find an induced subgraph on a vanishingly small number of vertices that nevertheless
retains significantly more than square root of the total number of independent sets.

Proposition 1.9. Let G = (V, E) be an n-vertex graph, and assume that the number of independent
sets in G is nr with 1 â‰¤ r â‰¤ nÎ´ . Then there exists a subset V â€² âŠ† V of at most n1âˆ’Î´ vertices such
r+1
that the number of independent sets in the induced subgraph G[V â€² ] is at least n 2 (1âˆ’O(Î´)) .
Organization. In Section 2 we prove Theorem 1.6 using an appropriate hypergraph decomposition method. We use it in Subsection 2.2 to deduce the lower bound in Theorem 1.4. In
Subsection 3.1 we prove that the parameters of Theorem 1.6 are essentially best possible, and in
Subsection 3.2 we prove a matching upper bound for Theorem 1.4, using a probabilistic construction. Our applications, Proposition 4.1 and Proposition 4.3, are given in Section 4.
2

A halfspace consist of all points above a hyperplane.

4

Proofs overview. For the proof of the sparse Kruskal-Katona Theorem (Theorem 1.6, see also
Theorem 2.7 below) we proceed as follows. In the first part of the proof we apply a new approximate
hypergraph decomposition method, relying on the sparseness of the input hypergraph, into links.
The decomposition is performed iteratively, in each step finding many vertices of high degree within
the current link and restricting the next links to them. The final step of these iterations consists
of â€œcleaningâ€ each link by iteratively removing vertices of low degree. We then prove, using the
sparseness of the hypergraph, that in fact most of the parts in our decomposition have few edges. In
the second part of the proof we find, by applying the classical Kruskal-Katona Theorem, i-subsets
within the edges of each (sub)link separately. We then argue that, since the links approximately
decompose the hypergraph, we may essentially collect the i-subsets from all links without much
overcounting. The proof of our lower bound for traces (in Theorem 1.4) follows quite easily from
the sparse Kruskal-Katona Theorem by applying it on the most â€œpopular layerâ€ of the hypergraph
(i.e., the uniform hypergraph with the most edges contained in our hypergraph, which we may
assume is down-closed) and projecting onto a random subset of Î±n vertices.
For the proof that the parameters in the sparse Kruskal-Katona Theorem are essentially best
possible (Theorem 3.1 below) we give a randomized construction of a uniform hypergraph whose
edges contain few i-subsets. The construction is fairly simple: the union of a carefully chosen
number of cliques on random subsets, such that it simultaneously holds that there are many cliques
and yet they are nearly edge disjoint. We show in particular that the expected number of edges
induced on subsets of Î±n vertices is sufficiently small so as to allow taking a union bound over all
cliques. The proof of the upper bound for traces (in Theorem 1.4) follows by taking the down-closed
hypergraph generated by the uniform hypergraph above, and then upper bounding the expected
trace on a random subset of Î±n vertices.
Throughout the paper we assume, whenever needed, that n is sufficiently large. All logarithms are
in base 2 unless otherwise specified. To simplify the presentation we omit all floor and ceiling signs
whenever these are not crucial.

2

Sparse Kruskal-Katona and Traces Lower Bound

In this section we prove Theorem 1.6. Henceforth, for a hypergraph F on V and for a vertex subset
I âŠ† V we denote by F(I) the link of I in F, that is,
F(I) = ( V \ I, {e \ I | I âŠ† e âˆˆ F} ).
Note that if F is a k-graph then F(I) is a (k âˆ’ |I|)-graph. For a tuple U of vertices in V we
denote by |U | the number of distinct vertices in U , and by F(U ) the link F(I) where I is the set
of (distinct) vertices in U (and so F(U ) is a (k âˆ’ |U |)-graph).
For the proof we will need several lemmas which we state and prove below. We begin with the
following simple â€œhypergraph regularizationâ€ lemma.
Lemma 2.1. Every hypergraph F = (V, E) has an induced sub-hypergraph F â€² = (V â€² , E â€² ) satisfying:
1. |E â€² |/|V â€² | â‰¥ |E|/|V |.
2. The degree of each vertex v âˆˆ V â€² in F â€² is at least
3. |E â€² | > |E|/2.
5

|E â€² |
2|V â€² | log |V | .

Proof. Put n = |V |, V0 = V and E0 = E. Starting with i = 0, as long as the hypergraph
Fi = (Vi , Ei ) in which |Vi | = n âˆ’ i does not satisfy (2), let Vi+1 be the set obtained from Vi by
removing a vertex of minimum degree in Fi , and let Fi+1 be the induced subhypergraph on this
set. It is easy to see that |Ei+1 |/|Vi+1 | > |Ei |/|Vi | and hence this process must terminate with a
nonempty hypergraph Fj = (Vj , Ej ). Define V â€² = Vj , E â€² = Ej . Then (1) holds as the quantity
|Ei |/|Vi | keeps increasing during the process, (2) holds by the definition of j, and (3) holds since
â€²

|E | = |Ej | â‰¥ |E0 |

â‰¥ |E0 | 1 âˆ’

jâˆ’1
Y

i=0
jâˆ’1
X
i=0

1âˆ’


1
2(n âˆ’ i) log n



ln n  |E|
1
â‰¥ |E| 1 âˆ’
>
.
2(n âˆ’ i) log n
2 log n
2

Lemma 2.2. Let F be a hypergraph on n vertices with span(F, i) â‰¤
|
Then F has at least i vertices of degree at least |F
2n .

|F |
2 ,

for some integer 0 < i < n.

Proof. Let I âŠ† V (F ) denote the set of vertices of F of degree at least
|F |
|
|F| âˆ’ n Â· |F
2n = 2 . By the assumption on span(F, i) we thus have |I| > i.

|F |
2n .

Then |F [I]| >

By an iterative application of Lemma 2.2 we obtain the following.
Lemma 2.3. Let s âˆˆ N+ and let F be a hypergraph on V with span(F, i) â‰¤

are at least

is

|F |
2s |V |sâˆ’1 .

Then there

|F |
(2|V |)s .

s

s-tuples U âˆˆ V with |F(U )| â‰¥

Proof. Put n = |V |. For a tuple U of vertices in V we denote by F U the sub-hypergraph of F on
V with edge set {e âˆˆ F : U âŠ† e}. Note that |F U | = |F(U )|. We proceed by induction on s, noting
that the induction basis s = 1 is Lemma 2.2. For the induction step, let F be as in the statement,
and note that by the induction hypothesis there are at least isâˆ’1 (s âˆ’ 1)-tuples U âˆˆ V sâˆ’1 with
|F |
|F U | = |F(U )| â‰¥ (2n)
sâˆ’1 . Fix one such U = (v1 , . . . , vsâˆ’1 ) and apply Lemma 2.2 on the hypergraph
F U , noting that, as required,

span(F U , i) â‰¤ span(F, i) â‰¤

|F|
|F U |
,
â‰¤
2s nsâˆ’1
2

where the first inequality uses the fact that F U is a sub-hypergraph of F on V . Thus, F U has
U
|F |
at least i vertices v of degree at least |F2n | â‰¥ (2n)
s . This means that for each such v, the s-tuple

|F |
sâˆ’1 (s âˆ’ 1)-tuples U in a
U â€² = (v1 , . . . , vsâˆ’1 , v) satisfies |F(U â€² )| = |F U | â‰¥ (2n)
s . Going over all i
similar fashion, we deduce that the total number of s-tuples U â€² as above is at least isâˆ’1 Â· i. This
completes the induction step and the proof.

P
The following lemma gives a unified lower bound for the summation ki=0 xi Î³ i that is independent of the ratio between k and x. See Section A in the Appendix for a proof of this lemma.
â€²

Lemma 2.4. For every k âˆˆ N+ and real 0 â‰¤ Î³ â‰¤ 1, x â‰¥ k we have
 k  
k  
X
x i 1 X x log(1+Î³)
.
Î³ â‰¥
i
i
4
i=0

i=0

6

Finally, we have the following well-known bounds.
Claim 2.5. We have eâˆ’2x â‰¤ 1 âˆ’ x â‰¤ eâˆ’x , where the upper bound holds for every real x and the
lower bound holds for every 0 â‰¤ x â‰¤ 1/2.
Proof. The
bound is well known, and the lower bound follows from it since we have 1 âˆ’ x =
 upper
x
x âˆ’1
1 + 1âˆ’x
â‰¥ eâˆ’ 1âˆ’x â‰¥ eâˆ’2x , where the last inequality uses 0 â‰¤ x â‰¤ 1/2.

2.1

Sparse Kruskal-Katona Theorem

In this subsection we prove Theorem 2.7, which is a more precise version of Theorem 1.6. First, we
will need a lemma which extends the classical Kruskal-Katona Theorem 1.5 by collecting i-subsets
from the hypergraphâ€™s links.
Lemma 2.6. Let F be a k-graph on V , and let t âˆˆ N. For every t â‰¤ i â‰¤ k we have
 
X  xU 
 F 
âˆ’t


 i â‰¥i
i âˆ’ |U |
t
U âˆˆV

where xU is given by |F (U )| =

xU 
kâˆ’|U | .

Proof. Put I = V t , and let t â‰¤ i â‰¤ k. Apply the Kruskal-Katona Theorem (Theorem 1.5) on each
link F(U ) with U âˆˆ I. Since F(U ) is a (k âˆ’ |U |)-graph and 0 â‰¤ i âˆ’ |U | â‰¤ k âˆ’ |U | (using |U | â‰¤ t â‰¤ i
 F (U ) 

 â‰¥ xU . Now, for every U âˆˆ I denote
for the lower bound), Theorem 1.5 implies that  iâˆ’|U
iâˆ’|U |
|







F(U
)
F(U ) âˆ—
= f âˆª U  f âˆˆ
.
i âˆ’ |U |
i

We have that



F(U )
i

âˆ—

 
F
âŠ†
i

and


  

 
 F(U ) âˆ—   F(U ) 
xU

=
â‰¥
.

  i âˆ’ |U | 
i
i âˆ’ |U |

We therefore deduce that

  


 
X  xU 
X F(U )âˆ— 
 F   [ F(U ) âˆ— 


 â‰¥ iâˆ’t
 â‰¥ iâˆ’t
â‰¥
,

 i  


i âˆ’ |U |
i
i
U âˆˆI

U âˆˆI

U âˆˆI

)
where, crucially, the penultimate inequality uses the fact that if an i-set g appears in F (U
i
)âˆ—
U âˆˆ g t , implying that g appears in at most it families F (U
. This completes the proof.
i

âˆ—

then

Note that Lemma 2.6 recovers Theorem 1.5 by taking t = 0.
We prove the following stronger form of Theorem 1.6, our sparse Kruskal-Katona Theorem.

Theorem 2.7. Let F be a k-graph with n vertices and |F| = nr edges, r â‰¥ 1. Let s âˆˆ N be the
|F |
âŒˆ2râŒ‰ /Î±âŒˆrâŒ‰ ,3 and put t = s + 1. If
smallest satisfying (2n)
s < c Â· span(F, Î±n) with c = (8k)



x
1
span(F, Î±n) â‰¤ min
n, |F|
kâˆ’t
2
3

One may think of |F|/(2n)s as an approximation (from below) to the average degree of a vertex s-tuple in F.


|
Alternatively, s can be defined as s = log |F
/ log(2n) with Ïƒ = c Â· span(F, Î±n).
Ïƒ

7

with real x > 0 then for every t â‰¤ i â‰¤ k we have
 
 F 
1


 i â‰¥ C Â·

with C = (8k/Î±)âŒˆ4râŒ‰ log n.

x
iâˆ’t

x |F|,
kâˆ’t



Remark 2.8. The parameters in Theorem 2.7 satisfy the following relations:
t â‰¤ âŒˆrâŒ‰ â‰¤ k.

(2)

For the first inequality, note that otherwise s = âŒˆrâŒ‰ and so, by the definition of s, c Â· span(F, Î±n) â‰¤
|F|/(2n)sâˆ’1 â‰¤ n, implying that span(F, Î±n) < Î±n and thus, by averaging, |F| < n, contradicting
the statementâ€™s assumption r â‰¥ 1. For the second inequality, notice nr = |F| â‰¤ nk â‰¤ nk .

Note that the error term C increases with the quotient k/Î± and with r. This precludes us from
taking hypergraphs of large uniformity, with many edges, or from inducing on too few vertices.
More formally, we have the following corollary.
Remark 2.9. Under the assumptions of Theorem 2.7:
1. If (k/Î±)r â‰¤ (log n)O(1) then |F|/C â‰¥ â„¦Ìƒ(|F|).
2. If k/Î± â‰¤ no(1) then |F|/C â‰¥ |F|1âˆ’o(1) .

We now show how to deduce the sparse Kruskal-Katona Theorem from Theorem 2.7.


x
x
Proof of Theorem 1.6. We have that kâˆ’âŒˆrâŒ‰
â‰¤ kâˆ’t
using (2) and since, by assumption, x â‰¥ 2k.
Thus, the condition here implies the condition in Theorem 2.7. As for the guarantee in Theorem 2.7,
note that
âˆ’1
 kâˆ’1
x 
(k âˆ’ t)! Y
iâˆ’t
(x âˆ’ j + t)
x  =
(i âˆ’ t)!
kâˆ’t
j=i

âˆ’1

 kâˆ’1
 âˆ’1

kâˆ’i kâˆ’1
Y
(k âˆ’ t)! Y
t
kâˆ’t k!
t
=
(x âˆ’ j)
(x âˆ’ j) 1 +
â‰¥
Â·
1+
(i âˆ’ t)!
xâˆ’j
i!
x âˆ’ (k âˆ’ 1)
j=i
j=i
âˆ’1
âˆ’1

 kâˆ’1
kâˆ’1
x
Y
t k Y
kâˆ’t k! 
âˆ’t k!
âˆ’t i 
â‰¥ (ek)
(x âˆ’ j)
= (ek)
Â·
(x âˆ’ j)
1+
â‰¥
x ,
i!
k
i!
k
j=i

j=i

where the second inequality uses the statementâ€™s assumption x â‰¥ 2k, and the third inequality uses
the upper bound in Claim 2.5. Thus, multiplying C from Theorem 2.7 by (8k)âŒˆrâŒ‰ â‰¥ (ek)t (recall (2))
completes the proof.
Proof of Theorem 2.7. We will prove the implication that if the stronger condition
 


1
x
1
span(F, Î±n) â‰¤ min
Î±n, |F| ,
c kâˆ’t
2

8

(3)

(where c is as in the statement of the theorem) holds then for every t â‰¤ i â‰¤ k we in fact have
 
x 
 F 
1
iâˆ’t


(4)
 i  â‰¥ c log n |F| x  .
kâˆ’t

To see why this would complete the proof, let xÌƒ satisfy




xÌƒ
x
c
=
,
kâˆ’t
Î± kâˆ’t

(5)

so that if F satisfies the statementâ€™s original assumption that span(F, Î±n) â‰¤ min
then it satisfies (3) with xÌƒ replacing x. Thus, from (4),



 
xÌƒ
x
x
 F 
1
Î±
1
iâˆ’t
iâˆ’t
iâˆ’t


 i  â‰¥ c log n |F| xÌƒ  â‰¥ c2 log n |F| x  â‰¥ C |F| x  ,
kâˆ’t
kâˆ’t
kâˆ’t



	
x 
1
kâˆ’t n, 2 |F|

where the second inequality uses (5) for both the denominator and the numerator, as (5) implies
xÌƒ â‰¥ x since c/Î± â‰¥ 1.
We henceforth assume (3), and our goal is to prove (4). By the definition of s we have
|F|
|F|
< c Â· span(F, Î±n) â‰¤
.
s
(2n)
(2n)sâˆ’1

(6)

|
The upper bound in (6) implies in particular that span(F, Î±n) â‰¤ 2s|F
. Thus, by Lemma 2.3,
nsâˆ’1
s
there is a family U âŠ† V (F ) of s-tuples U of vertices of F satisfying

|F(U )| â‰¥

|F|
=: b,
(2n)s

(7)

such that |U | â‰¥ Î±s ns . For each U âˆˆ U apply Lemma 2.1 on the (k âˆ’ |U |)-graph F(U ) to obtain an
induced subgraph F(U )reg with
1
1
|F(U )reg | > |F(U )| â‰¥ b,
2
2

(8)

such that F(U )reg has nU vertices and minimum degree at least


1
xU
b
Â·
=:
k âˆ’ (|U | + 1)
4 log n nU

(9)

with xU > 0. Let t â‰¤ i â‰¤ k. Applying Lemma 2.6 with our t to the links of the vertices of each
F(U )reg , we deduce that

 


xU
X
X iâˆ’(|U
 F 
x
1
1
1
|+1)
U


 |F|,
nU
â‰¥
(10)
xU
 i  â‰¥ it
i âˆ’ (|U | + 1)
4(2k)t log n ns
kâˆ’(|U |+1)
U âˆˆU

U âˆˆU

where the second inequality uses (9) together with (7) and the fact that i â‰¤ k. Let


 

xU
x
â€²
U = U âˆˆU :
â‰¤
.
k âˆ’ (|U | + 1)
kâˆ’t
9

For every U âˆˆ U â€² we have

xU
(iâˆ’(|U
(x)
|+1))
â‰¥ kâˆ’t iâˆ’t
, which follows from Claim A.1.4 We will show that
xU
x
(kâˆ’(|U |+1))
(kâˆ’t
)

1
|U â€² | â‰¥ Î±s ns .
2

(11)

By (10), this would imply that
 
 F 
Î±s

â‰¥
 i  8(2k)2t log n

x 
iâˆ’t
x  |F|
kâˆ’t

1
â‰¥
c log n

x 
iâˆ’t
x  |F|,
kâˆ’t

where the last inequality uses 8(2k)2t /Î±s â‰¤ (8k)âŒˆ2râŒ‰ /Î±âŒˆrâŒ‰ = c (recall (2)). Thus, proving (11) would
imply (4) and complete
the proof.
x 
Put S = kâˆ’t
Î±n. It remains to prove (11). Assume for contradiction that |U \ U â€² | â‰¥ 21 (Î±n)s .
Note that by definition of U â€² together with (9) we deduce that for every U âˆˆ U \ U â€² we have
nU â‰¤

1
Â·
4 log n

b

â‰¤

x
kâˆ’t

1
Â·
2

b

=

x
kâˆ’t

b 1
Â· Î±n =: n0 .
S 2

Note that from the lower bound in (6) together with (3) we deduce that b â‰¤ S. Since n0 â‰¥ nU â‰¥ 1,
we have that n0 satisfies
1
1 â‰¤ n0 â‰¤ Î±n.
(12)
2
Put
(
Î±n
if s â‰¥ 1
1
â„“ = Â· n0 +s
(13)
2
1
if s = 0
Note that (12) implies
1â‰¤

Î±n
â‰¤ Î±n,
n0 + s

(14)

where the lower bound further uses the fact that s â‰¤ r and the fact that we may assume r â‰¤ Î±n/2
as otherwise there is nothing to prove5 . Let U âˆ— âŠ† U \ U â€² be an arbitrary subset with |U âˆ— | = âŒˆâ„“âŒ‰,
which is well defined as â„“ â‰¤ 12 (Î±n)s â‰¤ |U \ U â€² |; here, the first inequality is immediate for s = 0
bound in (14) together with the bound Î±n â‰¤ (Î±n)s .
by (13), and for s â‰¥ 1 follows from the upper

For each U âˆˆ U denote IU = V F(U )reg âˆª U , and note that

	
F[IU ] = e âˆª U | e âˆˆ F(U )reg .
(15)
S
Let I = U âˆˆU âˆ— IU denote the union of these sets of vertices. Then I satisfies that
|I| â‰¤

X

U âˆˆU âˆ—

(nU + s) â‰¤ âŒˆâ„“âŒ‰ (n0 + s) â‰¤ 2â„“(n0 + s) â‰¤ Î±n,

4
Indeed, take x, y, k, i, âˆ† there to be, respectively, x, xU , k âˆ’ (|U | + 1), i âˆ’ (|U | + 1), t âˆ’ (|U | + 1), and bound
(i âˆ’ (|U | + 1))âˆ’(tâˆ’(|U |+1)) from below by kâˆ’t .
 

(x)
(kâˆ’t
5
iâˆ’t )
Otherwise C â‰¥ |F|, and so the statementâ€™s lower bound on  Fi  is trivially true since iâˆ’t
â‰¤ ki ,
â‰¤ kâˆ’t
x
(
(
)
kâˆ’t)
kâˆ’t
 
where the first inequality uses the decreasing monotonicity of the function z 7â†’ az / zb with a â‰¤ b â‰¤ z.

10

where the penultimate inequality uses the lower bound â„“ â‰¥ 12 from (14). Moreover, I satisfies that
 [

X 
X 




F(U )reg  > k âˆ’s Â· 1 b âŒˆâ„“âŒ‰ ,
F[IU ] = kâˆ’s
|F[I]| â‰¥ 
F[IU ] â‰¥ kâˆ’s
2
âˆ—
âˆ—
âˆ—
U âˆˆU

U âˆˆU

U âˆˆU

where the second inequality uses the fact that e âˆˆ F[IU ] for at most ks s-tuples U (by (15),
e âˆˆ F[IU ] implies U âŠ† e), and the third inequality uses (8). Now, if s = 0 then âŒˆâ„“âŒ‰ = 1 and b = |F|,
hence we get |F[I]| > |F|/2 â‰¥ span(F, Î±n) using (3), a contradiction. Otherwise, we get
|F[I]| >

Î±n
1
1
1
Â·b
= s+1 S â‰¥ S â‰¥ span(F, Î±n),
s+1
8k
n0
4k
c

where the first inequality uses (13) and bounds n0 +s â‰¤ 2n0 k (as n0 â‰¥ 1 by (12) and s â‰¤ k by (10)),
the equality uses (12), and the last inequality uses (3). We thus again obtain a contradiction. This
completes the proof.
We have the following important corollary of Theorem 2.7.
Corollary 2.10. Let F be a k-uniform hypergraph with n vertices and |F| = nr edges, r â‰¥ 1. If
n
1 o
span(F, Î±n) â‰¤ min Bn, |F|
2

with real B > 0, then for every 0 â‰¤ Î³ â‰¤ 1 the expected trace of F on a uniformly random subset of
Î³n vertices is at least
|F|
1
,
Â·
C â€² B 1âˆ’log(1+Î³)
âˆš
with C â€² = (8k/Î±Î³)âŒˆ5râŒ‰ log n, provided k â‰¤ Î³n.
x 
Proof. Write B = kâˆ’t
with x > 0 with t âˆˆ N as in Theorem 2.7, so that span(F, Î±n) â‰¤
 x  1 	
min kâˆ’t n, 2 |F| . The expected trace of F on a uniformly random set of q = Î³n vertices is, by
Theorem 2.7,


k   nâˆ’i
k 
k  
X
X
X
 F  qâˆ’i
 F  i âˆ’1
x

  â‰¥

Î³ e â‰¥ |F| 
Î³i
x
 i  n
 i 
i
âˆ’
t
eC
kâˆ’t i=t
q
i=0
i=0



log(1+Î³)  t 
kâˆ’t
X x
|F|
x
Î³
Î³ t |F|
|F|
t
j


=
Î³ â‰¥
=
x Î³
x
1âˆ’log(1+Î³)
4eC
j
k
âˆ’
t
B
eC kâˆ’t
4eC kâˆ’t
j=0

with C = (8k/Î±)âŒˆ4râŒ‰ log n as in Theorem 2.7, where the first inequality uses (recall the lower bound
âˆš
in Claim 2.5 and the statementâ€™s assumption k â‰¤ q)
nâˆ’i
iâˆ’1
iâˆ’1
iâˆ’1
 q i Y
Y
Y
2
qâˆ’j
(n âˆ’ i)! q!
qâˆ’i
i

eâˆ’2j/q = Î³ i eâˆ’i /q â‰¥ Î³ i eâˆ’1 ,
(1
âˆ’
j/q)
â‰¥
Î³
=
â‰¥
=
n
n! (q âˆ’ i)!
nâˆ’j
n
q
j=0

j=0

j=0

and the last inequality uses Lemma 2.4. Using (2) to bound t, the proof follows.

Note that the statement in Corollary 2.10 does not depend on k, the uniformity of the hypergraph, except in the error term C â€² . In fact, in order for this statement to be meaningful, C â€² should
be negligible, so k should be relatively small, e.g., poly-logarithmic in n.
11

Remark 2.11. If the bound in Corollary 2.10 is tight, then, in the proof of Theorem 2.7, all the
inequalities become (essentially) equalities. In the proof of Theorem 2.7, we showed that the number
of s-tuples in U â€² is at least 12 (Î±n)s . It is then easy to verify that for half of these s-tuples U , we
have tU â‰ˆ t0 , xU â‰ˆ x and then x â‰ˆ 2k. (Quantifying this statement precisely requires more details,
which we omit here.) Note that this remark applies to Corollary 2.10 but not to Theorem 2.7 itself,
as evident from the matching upper bound in Subsection 3.1.

2.2

Tight lower bound for traces

Recalling the definition of Âµ in (1), we now prove the lower bound in our main result Theorem 2.12.
Theorem 2.12. Let r â‰¥ 1, Î± âˆˆ (0, 1]. If r, Î±âˆ’1 â‰¤ nÎ´ then Tr(n, nr , Î±n) â‰¥ nÂµ(1âˆ’O(Î´)) . Moreover,
if r = O(1), Î±âˆ’1 â‰¤ (log n)O(1) then Tr(n, nr , Î±n) â‰¥ â„¦Ìƒ(nÂµ ).

Proof. Let H be a down-closed hypergraph6 on n vertices with |H| = nr . We will prove lower
bounds on Tr(H, Î±n), which would complete the proof since
 assume
 we may
	 the given hypergraph
is down-closed (this is standard, see, e.g., [1]). Put Hi = e âˆˆ H  |e| = i , and let F = Hk where
k maximizes |Hk |. Observe that since H is down-closed we have |H| â‰¥ 2k , which implies that
k â‰¤ log |H|, and therefore |F| â‰¥ |H|/(log |H| + 1). We assume Tr(F, Î±n) â‰¤ 21 |F|, as otherwise we
are done since
1
Tr(H, Î±n) â‰¥ Tr(F, Î±n) â‰¥ |H|/(log |H| + 1) = â„¦Ìƒ(nr ).
2
âˆš
Now, write Tr(F, Î±n) = Bn with B > 0. Since span(F, Î±n) â‰¤ Tr(F, Î±n) and since k â‰¤ Î±n
(i.e., k2 /Î± â‰¤ n) for all large enough n, we apply Corollary 2.10 with Î³ = Î± to obtain that
Bn = Tr(F, Î±n) â‰¥

|F|
1
,
â€²
1âˆ’log(1+Î±)
C B

with C â€² = (8k/Î±2 )âŒˆ5râŒ‰ log n, where the inequality uses the fact that the maximal trace on Î±n
vertices is at least as large as the expected trace on a random subset of Î±n vertices. This gives a
lower bound on B; we therefore deduce
1
1
1  2âˆ’log(1+Î±)
|F|
Â·
Â·n
Tr(H, Î±n) â‰¥ Tr(F, Î±n) = Bn â‰¥
Câ€²
n
1
1
1


 1
1
1âˆ’log(1+Î±) 2âˆ’log(1+Î±)
1âˆ’log(1+Î±) 2âˆ’log(1+Î±)
=
|F|n
|H|n
â‰¥
â‰¥ â€²â€² Â· nÂµ ,
Câ€²
C â€²â€²
C

with C â€²â€² = (log |H| + 1)C â€² â‰¤ (8 log |H|/Î±2 )âŒˆ5râŒ‰ log n â‰¤ (8r log n/Î±2 )âŒˆ6râŒ‰ . Now, if r, Î±âˆ’1 â‰¤ nÎ´ then
C â€²â€² â‰¤ nO(Î´r) , which implies that Tr(H, Î±n) â‰¥ nÂµ(1âˆ’O(Î´)) . Moreover, if r â‰¤ O(1), Î±âˆ’1 â‰¤ (log n)O(1)
then C â€²â€² â‰¤ (log n)O(1) , which implies that Tr(H, Î±n) â‰¥ â„¦Ìƒ(nÂµ ). This completes the proof.

Remark. In the proof of Theorem 2.12 it seems tempting to write Tr(F, Î±0 n) = B0 n with Î±0 â‰ª Î±,
so that B0 â‰ª B. Then, Corollary 2.10 would mean that the expected trace on Î±n random vertices
|F |
|F |
, which seemingly contradicts the fact that our lower bound
â‰« B 1âˆ’log(1+Î±)
would be roughly 1âˆ’log(1+Î±)
B0

is tight! The reason this cannot happen is that, for any Î±0 that is not too small, though the average
trace on Î±0 n vertices is substantially smaller than that on Î±n vertices, the maximal traces can
actually be the same. Indeed, in the upper bound construction one can show that Tr(F, Î±0 n) â‰ˆ
Tr(F, Î±n) for any Î±0 â‰¤ Î± that is not too small.
6

Also called monotone. A hypergraph H is down-closed if for every edge H, all its subsets are also edges of H.

12

3

Upper Bounds

3.1

Upper Bound for the Sparse Kruskal-Katona Theorem

In this subsection we show that the parameters in Theorem 2.7 are best possible up to the error
term. Formally, we prove the following.
Theorem 3.1 (Upper bound for sparse Kruskal-Katona).
Let n, k, x âˆˆ N+ , r â‰¥ 1 and 0 < Î± â‰¤ 1
x
1/6
k
r
with 3r â‰¤ k â‰¤ x â‰¤ n
and n â‰¤ Î± n â‰¤ k n. There exists a k-graph F with n vertices, |F| = nr
  (x)

edges, and span(F, Î±n) â‰¤ 6 xk n such that for every 0 â‰¤ i â‰¤ k we have  Fi  â‰¤ xi |F|.
(k )
We will need the following lemma relating hypergeometric and binomial random variables.

Lemma 3.2. Let H be a hypergeometric random variable with parameters (n, x, y),7 and let B be
âˆš
a binomial random variable with parameters (x, y/n). If x â‰¤ n then for every 0 â‰¤ h â‰¤ x we have
Pr[H = h] â‰¤ 2 Pr[B = h].
Proof. We have
Pr[H = h] =
=
â‰¤

 
x nâˆ’x
y  nâˆ’y 
y!
(n âˆ’ y)!
x (n âˆ’ x)!
h yâˆ’h
h xâˆ’h
Â·
Â·
=
=
n
n
n!
(y âˆ’ h)! (n âˆ’ y âˆ’ (x âˆ’ h))!
h
x
y
Qxâˆ’hâˆ’1
  h 
  Qhâˆ’1

x
y
nâˆ’yâˆ’t
x
n âˆ’ y xâˆ’h
t=0
t=0 y âˆ’ t
Â· Qxâˆ’hâˆ’1
â‰¤
Qhâˆ’1
h
h
n
nâˆ’h
nâˆ’hâˆ’t
t=0 n âˆ’ t
t=0
  h 
  h 
xâˆ’h

x
x
y
y
nâˆ’y
n âˆ’ y xâˆ’h
(2h/n)Â·(xâˆ’h)
h

n

n

e

â‰¤2

h

n

n

.

where the first inequality uses that h â‰¤ y (as otherwise Pr[H = h] = 0 and there is nothing to
âˆš
prove), the second inequality uses the lower bound in Claim 2.5 as h â‰¤ x â‰¤ n â‰¤ n/2 (the last
âˆš
inequality assumes n â‰¥ 2, for otherwise x â‰¤ 1 in which case H = B so there is nothing to prove),
âˆš
and the third inequality uses the fact that h(x âˆ’ h) â‰¤ x2 /4 â‰¤ n/4 as x â‰¤ n. Recalling that B is
a binomial random variable with parameters (x, Î±) with Î± = y/n, we deduce
 
x h
Pr[H = h] â‰¤ 2
Î± (1 âˆ’ Î±)xâˆ’h = 2 Pr[B = h],
h
as desired.
We will make use of the following version of Chernoffâ€™s bound (c.f., e.g., [2], Appendix A).
Claim
Pn3.3. Let X1 , . . . , Xn be mutually independent random variables with Xi âˆˆ [0, 1], and put
X = i=1 Xi , Âµ = E[X]. Then Pr(X â‰¥ 6x) â‰¤ exp(âˆ’x) for every x â‰¥ Âµ/3.
Proof. Put y = 3x â‰¥ Âµ. Then Pr(X â‰¥ 6x) = Pr(X â‰¥ 2y) â‰¤ Pr(X âˆ’ Âµ â‰¥ y) â‰¤ exp(âˆ’y/3) =
exp(âˆ’x), where the second inequality is Chernoffâ€™s large-deviation bound (again using y â‰¥ Âµ).
7

I.e., H = |X âˆ© Y | where X âŠ† [n] is a uniformly random subset of size x and Y âŠ† [n] is a fixed subset of size y.

13

Proof of Theorem 3.1. Let â„“ âˆˆ N satisfy
n
nr

x â‰¤ â„“ â‰¤ k,
Î±
k

(16)

which is well defined by the statementâ€™s upper bound on Î±k nr . Let S1 , . . . , Sâ„“ be â„“ independent
uniformly random size-x subsets of [n].S We letF be the k-graph on [n] consisting of a complete
k-graph on each Sj , that is, F = [n], â„“j=1 Skj .
We next analyze the random k-graph F constructed above. Let E1 be the event that every two
j â€² â‰¤ â„“) intersect in fewer than t := 3r elements, and let E2 be the event that
sets Sj , Sj â€² (1 â‰¤ j 6=

span(F, Î±n) â‰¤ 6 xk n. We first show that the proof would follow by proving that
Pr(E1 and E2 ) > 0.


To see this first note that, by construction, 


|Sj |
= â„“ xi for every
j=1
i

cliques Skj are (edge-)disjoint

F 
i

more, note that the event E1 implies that the
assumption k â‰¥ t, and so

â‰¤

Pâ„“

E1 implies |F| = â„“

(17)

0 â‰¤ i â‰¤ k. Further-

 
x
.
k

by the statementâ€™s

(18)

Therefore, (17) implies the existence of an n-vertex k-graph F satisfying:

â€¢ |F| = â„“ xk â‰¥ nr , using (18) and the lower bound in (16),

â€¢ span(F, Î±n) â‰¤ 6 xk n, and

â€¢ 

F 
i

â‰¤â„“

x
i

=

(xi)
|F|, using (18),
(xk)

from which the proof immediately follows by taking an arbitrary subgraph of F with nr edges.
To prove (17) we first claim that
1
Pr(E1 ) â‰¥ .
(19)
2
Denote by B the binomial random variable with parameters (x, p) where p = x/n. For every j 6= j â€²
we have
 


x t
Pr |Sj âˆ© Sj â€² | â‰¥ t â‰¤ 2 Pr B â‰¥ t â‰¤ 2
p
t
â‰¤ (xp)t = x2t /nt = x6r /n3r â‰¤ nâˆ’2r â‰¤ â„“âˆ’2 ,

where the first inequality uses Lemma 3.2 using the statementâ€™s upper bound on x, the penultimate
inequality again uses the statementâ€™s upper bound on x, and the last inequality uses the upper
bound in (16) together with the statementâ€™s lower bound on Î±k nr . This implies, by taking the
union bound over all 2â„“ unordered pairs 1 â‰¤ j 6= j â€² â‰¤ â„“, that with probability at least 12 all set
pairs Sj , Sj â€² with j 6= j â€² intersect at fewer than 3r elements. This proves
 (19).
We now show that Pr(E2 ) â‰¥ 1/2 (that is, that span(F, Î±n) â‰¤ 6 xk n except with probability
smaller than 1/2), which would prove (17). Fix I âŠ† [n] of size q = Î±n. Note that F[I] =

14


P
For each 1 â‰¤ j â‰¤ â„“ consider the random variable Xj = |Sjkâˆ©I| , let X = â„“j=1 Xj , and
note that |F[I]| â‰¤ X. We have
x  
x   
X
X
h
x h h
E(Xj ) =
Pr[|Sj âˆ© I| = h] â‰¤ 2
Î± (1 âˆ’ Î±)xâˆ’h
k
h k
h=k
h=k



  xâˆ’k
 
x
X x xâˆ’k
X x âˆ’ k 
h
xâˆ’h
k x
j
(xâˆ’k)âˆ’j
k x
=2
Î± (1 âˆ’ Î±)
= 2Î±
Î± (1 âˆ’ Î±)
= 2Î±
,
k
hâˆ’k
k
j
k
Sâ„“

j=1

Sj âˆ©I 
.
k

j=0

h=k

where the first inequality follows from Lemma 3.2 using the statementâ€™s upper bound on x. Thus,
by linearity of expectation,
 
 
x
k x
E(X) â‰¤ â„“ Â· 2Î±
â‰¤2
n,
(20)
k
k

where the second
inequality uses the upper bound in (16). Since Xj â‰¤ xk for every 1 â‰¤ j â‰¤ â„“, we

have that X/ xk isa sum of mutually independent random
variables each in [0, 1]. We thus apply

Claim 3.3 on X/ xk , using the fact that n â‰¥ 13 E(X/ xk ) by (20), to deduce that
  i
h
h x
i
x
Pr X â‰¥ 6
n = Pr X/
â‰¥ 6n â‰¤ exp(âˆ’n) < 2âˆ’n .
k
k

n
Using the union bound over all Î±n
â‰¤ 12 2n choices of I âŠ† [n] with |I| = Î±n we deduce that, except
with probability smaller than 1/2, for every I âŠ† [n] with |I| = Î±n it holds that |F[I]| â‰¤ 6 xk n. As
mentioned before, together with (19) this proves (17) and so we are done.

3.2

Traces upper bound

In this subsection we complete the proof of Theorem 1.4 by proving the upper bound Tr(n, nr , Î±n) â‰¤
âˆš
O(nÂµ ), with Âµ as in (1), for every r â‰¤ n/ log n and 0 â‰¤ Î± â‰¤ 1. A proof can be obtained from the
proof of Theorem 3.1 with some effort. For completeness, we give here a self-contained proof.
Put x = (Âµ âˆ’ 1) log n. Let S1 , . . . , Sâ„“ be â„“ independent uniformly random subsets of [n], each of
size x, where
1
nr
nÂµ
â„“ := x =
.
(21)
2
2
(1 + Î±)x
S
Let the family F âŠ† 2[n] consist of the union over j of all subsets of the set Sj ; that is, F = â„“j=1 2Sj .
Let E1 be the event that |F| â‰¥ nr , and let E2 be the event that Tr(F, Î±n) â‰¤ 8nÂµ . Note that the
proof would follow by showing that
Pr(E1 and E2 ) > 0.
First, we claim that

(22)

1
Pr(E1 ) â‰¥ .
(23)
2
Put t = 3r. Denote by B the binomial random variable with parameters (x, p) where p = x/n. For
every j 6= j â€² we have
 
x t
Pr(|Sj âˆ© Sj â€² | â‰¥ t) â‰¤ 2 Pr(B â‰¥ t) â‰¤ 2
p
t
â‰¤ (xp)t = x6r /n3r â‰¤ nâˆ’2r â‰¤ â„“âˆ’2 ,
15

where the first inequality uses Lemma 3.2 together with the fact that
âˆš
x â‰¤ r log n â‰¤ n

(24)

by the assumed upper bound on r, and the last inequality uses (21). Conditioned on the above we
have, by taking the union bound over all 2â„“ pairs of sets, that

 
x
1
x
|F| â‰¥ â„“ 2 âˆ’
â‰¥ â„“ Â· 2x = nr ,
2
â‰¤t
where the second inequality uses t = 3r â‰¤ x/2 (for all n large enough), and the equality uses (21).
This proves (23).
We now show that Pr(E2 ) â‰¥ 1/2 (that is, Tr(F, Î±n) â‰¤ 8nÂµ except with probability smaller
than 1/2), thus proving (22). Fix I âŠ† [n] of size q = Î±n. Note that
FI =

â„“
[

{S âˆ© I | S âŠ† Sj } =

j=1

â„“
[

2Sj âˆ©I .

j=1

P
For each 1 â‰¤ j â‰¤ â„“ consider the random variable Xj = |2Sj âˆ©I |, let X = â„“j=1 Xj and note that
|FI | â‰¤ X. We have
 
x
x
X
X
h
h x
E(Xj ) =
2 Pr[|Sj âˆ© I| = h] â‰¤ 2
2
Î±h (1 âˆ’ Î±)xâˆ’h
h
h=0
h=0
x  


X
2Î± x
x
2Î± h
= 2(1 âˆ’ Î±)x 1 +
= 2(1 + Î±)x ,
= 2(1 âˆ’ Î±)x
1âˆ’Î±
h 1âˆ’Î±
h=0

where the first inequality uses Lemma 3.2 together with (24). Thus, by linearity of expectation
and by (21),
E(X) â‰¤ â„“ Â· 2(1 + Î±)x = 4nÂµ .
(25)
Note that, by our choice of x at the beginning of the proof,
nÂµ /2x = nÂµ /2(Âµâˆ’1) log n = n.

(26)

Since Xj â‰¤ 2x for every 1 â‰¤ j â‰¤ â„“, we have that X/2x is a sum of mutually independent random
variables each in [0, 1]. We thus apply Claim 3.3 on X/2x , using the fact that E(X/2x ) â‰¤ 4n by (25)
and (26), to deduce that





Pr X â‰¥ 8nÂµ = Pr X/2x â‰¥ 8n â‰¤ exp âˆ’ (4/3)n < 2âˆ’n .
 1 n
n
Using the union bound over all Î±n
â‰¤ 2 2 choices of I âŠ† [n] with |I| = Î±n we deduce that, except
with probability smaller than 1/2, for every I âŠ† [n] with |I| = Î±n it holds that |FI | â‰¤ 8nÂµ . As
mentioned before, together with (19) this proves (17) and so we are done.

4

Applications

In this section we give two easy applications of our results on traces, in geometry and in graph
theory.
16

4.1

Separating halfspaces using few points

We recall the necessary definitions and the statement of this application. Let H be a family of
halfspaces in Rd , and let P be a set of points in Rd . We say that P separates H if for every pair of
distinct halfspaces H1 6= H2 âˆˆ H there is a point in P that lies in one and outside the other. Given
P and H such that P separates H, it is interesting to ask how few points in P can we choose while
still separating many of the hyperplanes in H.
Proposition 4.1. Let P âŠ‚ Rd be a set of n points and let H be a family of nr halfspaces in Rd ,
with 1 â‰¤ r â‰¤ nÎ´ , such that P separates H. Then there exists a subset P â€² âŠ† P of at most n1âˆ’Î´
r+1
points and a subset Hâ€² âŠ† H of at least n 2 (1âˆ’O(Î´)) halfspaces such that P â€² separates Hâ€² .
Proof. Let F be the hypergraph on P with edge set {H âˆ© P | H âˆˆ H}. By assumption, for
any pair of distinct halfspaces H1 6= H2 âˆˆ H there is a point p âˆˆ P such that p âˆˆ H1 and
p 6âˆˆ H2 , or p âˆˆ H2 and p âˆˆ
/ H1 . In particular, H1 âˆ© P 6= H2 âˆ© P , and therefore |F| = |H| = nr .
Applying Theorem 2.12 with r, Î±âˆ’1 = nÎ´ , there exists a subset P â€² âŠ† P of size n1âˆ’Î´ such that
r+1
|FP â€² | â‰¥ nÂµ(1âˆ’O(Î´)) â‰¥ n 2 (1âˆ’O(Î´)) . Note that FP â€² = {H âˆ© P â€² | H âˆˆ H}. Let Hâ€² âŠ† H be obtained
by assigning to each member Q of FP â€² an arbitrary halfspace H â€² âˆˆ Hâ€² with H â€² âˆ© P â€² = Q. By
construction, |Hâ€² | = |FP â€² |, hence it remains to show that P â€² separates Hâ€² . Again by construction,
for every pair of distinct halfspaces H1 6= H2 âˆˆ Hâ€² we have H1 âˆ© P â€² 6= H2 âˆ© P â€² . This means that
there exists a point pâ€² âˆˆ P â€² such that either pâ€² âˆˆ H1 and pâ€² âˆˆ
/ H2 , or pâ€² âˆˆ H2 and pâ€² âˆˆ
/ H1 , thus
completing the proof.
In fact, halfspaces can be replaced in Proposition 4.1 by any family of subsets of Rd , as long
as the set of points P separates them. Indeed, in the proof of Proposition 4.1 we considered for
each halfspace only the subset of points in P that are contained in it. The condition that P
separates H implies that all the corresponding subsets of P are distinct, and that is all that is
really needed. However, it does seem reasonable to expect that for â€œfavorableâ€ geometric objects,
such as halfspaces, better bounds holdâ€”as we believe is the case.
Remark 4.2. It is worth noting that the number of halfspaces in Proposition 4.1 is necessarily polynomial if the dimension d is constant; in fact, an exact formula is known [10], which in particular
implies that the number of halfspaces in Rd separated by n points is at most O(nd ). As mentioned
above, the assertion in Proposition 4.1 holds also when we replace halfspaces by any family of nr
subsets, for example, general convex sets.

4.2

Retaining independent sets in induced subgraphs

An independent set in a graph is a vertex subset that spans no edges. Given a graph G, one can
ask how many independent sets are retained in small subgraphs of G. Using our result for traces,
o(1)
independent sets then it must have a subset of at most n1âˆ’Î´
we easily obtain that if G has 2n
vertices, with Î´ a sufficiently small constant, retaining asymptotically more than square root of the
number of independent sets.
Proposition 4.3. Let G = (V, E) be an n-vertex graph, and assume that the number of independent
sets in G is nr with 1 â‰¤ r â‰¤ nÎ´ . Then there exists a subset V â€² âŠ† V of at most n1âˆ’Î´ vertices such
r+1
that the number of independent sets in the induced subgraph G[V â€² ] is at least n 2 (1âˆ’O(Î´)) .

17

Proof. Let F be the hypergraph on V whose edges are the independent sets in G. Apply Theorem 2.12 with r, Î±âˆ’1 = nÎ´ to deduce that there is a subset S of V (F) = V with n1âˆ’Î´ vertices such
r+1
that |FS |, the number of projections of the edges of F onto S, is at least nÂµ(1âˆ’O(Î´)) â‰¥ n 2 (1âˆ’O(Î´)) .
The proof follows by observing that, by definition and construction,
FS = {I âˆ© S : I âˆˆ F}

= {I âˆ© S : I is an independent set of G} = {I : I is an independent set of G[S]}.

We note that, since Theorem 2.12 is such an abstract statement, we could have replaced the
notion of independent sets in a graph by any other monotone family (i.e., a family closed under
taking subsets) of vertex subsets. Thus, for example, a statement analogous to Proposition 4.3
holds for independent sets in hypergraphs, for subsets inducing a subgraph not containing some
fixed graph H, and more.

Acknowledgement
We would like to thank Michael Langberg for useful discussions.

References
[1] N. Alon, On the density of sets of vectors, Discrete Math. 46 (1983), 199-202.
[2] N. Alon and J. H. Spencer, The Probabilistic Method, Fourth Edition, Wiley, 2016, xiv+375
pp.
[3] D. Angluin, Computational learning theory: survey and selected bibliography, Proc. 24th
Annual ACM Symposium on Theory of Computing 1992.
[4] J. Bourgain, J. Kahn and G. Kalai, Influential coalitions for Boolean Functions, arXiv
1409.3033.
[5] B. BollobaÌs and A. J. Radcliffe, Defect Sauer results, J. Combinatorial Theory Ser. A 72
(1995), 189-208.
[6] J. A. Bondy, Induced subsets, J. Combin. Theory Ser. B 12 (1972), 201-202.
[7] B. Bukh and X. Goaoc, Shatter functions with polynomial growth rates, arXiv 1701.06632.
[8] O. Cheong, X. Goaoc, and C. Nicaud, Set systems and families of permutations with small
traces, European Journal of Combinatorics 34 (2013), 229-239.
[9] P. Frankl, On the trace of finite sets, J. Combin. Theory Ser. A 34 (1983), 41-45.
[10] E. F. Harding, The number of partitions of a set of N points in k dimensions induced by
hyperplanes, Proc. Edinburgh Math. Soc. (2) 15 1966/1967, 285â€“289.
[11] G. O. H. Katona, A theorem on finite sets, in: Theory of Graphs (ErdoÌ‹s, P. and Katona, G.
O. H., eds.), AkadeÌmiai KiadoÌ, Budapest.
18

[12] J. Kahn, G. Kalai and N. Linial , The influence of variables on Boolean functions, Proc. 29th
Annual Symposium on Foundations of Computer Science, 1988.
[13] J. B. Kruskal, The number of simplices in a complex, in: Mathematical Optimization Techniques, Univ. California Press, Berkeley (1963), 251-278.
[14] L. LovaÌsz, Combinatorial Problems and Exercises, 13.31, North-Holland, Amsterdam, 1979.
[15] J. MatousÌŒek, Geometric Set Systems, European Congress of Mathematics, Springer (1998) 127.
[16] N. Sauer, On the density of families of sets, J. Combin. Theory Ser. A 13 (1972), 145-147.
[17] S. Shelah, A combinatorial problem; stability and order for models and theories in infinitary
languages, Pacific or. Math. 41 (1972), 271- 276.
[18] V. N. Vapnik and A. Ya. Chervonenkis, On the uniform convergence of relative frequencies of
events to their probabilities, Theory Probab. Appl. 16 (1971), 264-280.

A

Proof of Auxiliary Lemmas

For the proof of Theorem 2.7 we use the following bound.
Claim A.1. Let x, y > 0 and k, i, âˆ† âˆˆ N with âˆ† â‰¤ i â‰¤ k. If
Proof. First, note that
z
a
z
b

=

b
Y

j=a+1

y
k



j
â‰¤ bbâˆ’a
xâˆ’j +1

for all a â‰¤ b â‰¤ z with a, b âˆˆ N. Second, observe that

j
xâˆ’j+1

â‰¤

x
kâˆ’âˆ†



then

x
(yi)
âˆ’âˆ† (iâˆ’âˆ†) .
y â‰¥ i
x
(k)
(kâˆ’âˆ†
)

(27)

is:

1. monotone decreasing in x,
2. monotone increasing in j.
( y )
( x )
(yi)
â‰¥ iâˆ’âˆ†
â‰¥ iâˆ’âˆ†
using (27) together with items 1 and 2, respectively,
y
y
x
(k )
(kâˆ’âˆ†)
(kâˆ’âˆ†
)
whereas if y â‰¥ x then



x 
x 
x
x
y
1
iâˆ’âˆ†
iâˆ’âˆ†
i
i
i
y â‰¥
x  =
x  Â·
x  â‰¥ âˆ† Â·
x ,
i
k
kâˆ’âˆ†
iâˆ’âˆ†
kâˆ’âˆ†
kâˆ’âˆ†

Now, if y â‰¤ x then

where the first inequality follows from the statementâ€™s assumption, and the last inequality uses (27).
For the proof of Lemma 2.4 we use the following claim, which follows easily from Newtonâ€™s
generalized binomial theorem.
PâŒŠxâŒ‹ 
Claim A.2. For every real x > 0 we have 2xâˆ’1 < i=0 xi â‰¤ 2x .

19

Proof. We bound the summation in the statement from above and from below as follows;
xâˆ’1

2

âŒŠxâŒ‹

<2

â‰¤


âŒŠxâŒ‹ 
X
âŒŠxâŒ‹
i

i=0

â‰¤

âŒŠxâŒ‹  
X
x

i

i=0

â‰¤

âˆ  
X
x
i=0

i

= (1 + 1)x = 2x ,

where the last inequality follows from
âˆ  
X
x
i=0

i

âˆ’

âŒŠxâŒ‹  
X
x
i=0

i

=

X x
j

j

=



x
+
j+1



=

X x + 1 

X  (x + 1)x Â· Â· Â· (x âˆ’ âŒŠxâŒ‹)
(j + 1)!

j

j+1

j

jâˆ’1
Y


(x âˆ’ k) â‰¥ 0

k=âŒŠxâŒ‹+1

with j running over the values âŒŠxâŒ‹+1, âŒŠxâŒ‹+3, . . ., and where the first equality follows from Newtonâ€™s
generalized binomial formula.
 PâŒŠzâŒ‹ x
x
Proof of Lemma 2.4. For real z â‰¥ 0 we henceforth abbreviate â‰¤z
= i=0 i . If k â‰¥ âŒˆ x2 âŒ‰ we
are done since
2

k  
X
x
i=0

i

i

Î³ â‰¥2

x

âŒŠX
2âŒ‹
âŒŠxâŒ‹

i=0

âŒŠxâŒ‹

â‰¥

X
i=0

i

i

Î³ =

x
âŒŠX

2 âŒ‹ 
âŒŠxâŒ‹

i=0

i

x



âŒŠX


2 âŒ‹ 
âŒŠxâŒ‹ i
âŒŠxâŒ‹
âŒŠxâŒ‹
i
+
Î³ +
Î³ â‰¥
Î³ âŒŠxâŒ‹âˆ’i
i
âŒŠxâŒ‹ âˆ’ i
âŒŠxâŒ‹ âˆ’ i



i=0






1 x log(1+Î³)
1 x log(1+Î³)
âŒŠxâŒ‹ i
1
â‰¥
,
Î³ = (1 + Î³)âŒŠxâŒ‹ â‰¥ (1 + Î³)x â‰¥
2
2 â‰¤x
2 â‰¤k
i

where the penultimate inequality follows from Claim A.2, and dividing over by 2 gives the desired
result.
 
We thus assume k â‰¤ x2 âˆ’ 1 for the remainder of the proof. Put


x
y = log
and K = âŒŠyâŒ‹ + 1.
â‰¤k

 
x 
as
We have 0 â‰¤ y â‰¤ x âˆ’ 1, which follows using the fact that for i â‰¤ x2 we have xi â‰¤ âŒŠxâŒ‹âˆ’i
follows;
x
âˆ’1  
 âŒˆX




 

2âŒ‰
x
x
x
x
x
 
â‰¤
1â‰¤2
â‰¤2
+
â‰¤
â‰¤ 2x ,
â‰¤k
â‰¤ x2 âˆ’ 1
i
âŒŠxâŒ‹ âˆ’ i
â‰¤x

i=0

 
where the first inequality follows since 1 â‰¤ x, the second inequality uses our assumption k â‰¤ x2 âˆ’1,
and the last inequality uses Claim A.2. Furthermore, we have K â‰¥ k, since otherwise k â‰¥ K + 1
and thus

 
 
 
 

x
x
y+1
y+1
y+1
â‰¥
â‰¥
=
â‰¥
> 2y ,
â‰¤k
â‰¤K +1
â‰¤K +1
â‰¤ âŒŠyâŒ‹ + 2
â‰¤ âŒŠyâŒ‹ + 1
a contradiction,
where the second and third inequalities used the fact that for a positive number t,
t 
is
non-negative
(and K = âŒŠyâŒ‹ + 1), and the last inequality uses Claim A.2.
âŒŠtâŒ‹+1
20

Let a0 , . . . , ak and b0 , . . . , bK be given by
 
Kâˆ’1
k
X
X
y
bi .
ai âˆ’
bi =
for 0 â‰¤ i â‰¤ K âˆ’ 1, and bK =
i

 
x
ai =
for 0 â‰¤ i â‰¤ k,
i

i=0

i=0

We have that bK â‰¥ 0 since
Kâˆ’1
X

bi =

i=0



y
â‰¤y



y

â‰¤2 =



x
â‰¤k



=

k
X

ai ,

i=0

where the inequality follows from Claim A.2. Summarizing the properties of the sequences (ai )ki=0
Pk
PK
and (bi )K
i=0 , we have
i=0 ai =
i=0 bi , and for every 0 â‰¤ i â‰¤ k âˆ’ 1 we have ai â‰¥ bi (recall
x > y â‰¥ 0). Denote âˆ†i = ai âˆ’ bi (â‰¥ 0) for every 0 â‰¤ i â‰¤ k âˆ’ 1. We have
âŒŠyâŒ‹  
X
y
i=0

i

i

Î³ â‰¤
â‰¤
â‰¤

K
X

i

bi Î³ =

i=0

i=0

kâˆ’1
X
i=0

i

(ai âˆ’ âˆ†i )Î³ +

K
X

bi Î³ i

i=k

K
kâˆ’1
kâˆ’1
X
X


X
(ai âˆ’ âˆ†i )Î³ i +
(ai âˆ’ âˆ†i )Î³ i +
âˆ† i + ak Î³ k
bi Î³ k =

kâˆ’1
X
i=0

kâˆ’1
X

i=0

i=k

ai Î³ i âˆ’

kâˆ’1
X

âˆ†i Î³ k +

kâˆ’1
X
i=0

i=0

i=0

k  
k

X
X
x i
i
k
ai Î³ =
Î³.
âˆ†i + ak Î³ =
i
i=0

i=0

We thus showed that
k  
X
x
i=0

i

i

Î³ â‰¥

âŒŠyâŒ‹  
X
y
i=0

i

i

Î³ â‰¥


âŒŠyâŒ‹ 
X
âŒŠyâŒ‹
i=0

i

i

âŒŠyâŒ‹

Î³ = (1 + Î³)

which completes the proof.

21



1
1 x log(1+Î³)
y
â‰¥ (1 + Î³) =
,
2
2 â‰¤k

