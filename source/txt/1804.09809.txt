arXiv:1804.09809v3 [math.LO] 29 May 2018

THE REVERSE MATHEMATICS OF HINDMAN’S THEOREM
FOR SUMS OF EXACTLY TWO ELEMENTS
BARBARA F. CSIMA, DAMIR D. DZHAFAROV, DENIS R. HIRSCHFELDT,
CARL G. JOCKUSCH, JR., REED SOLOMON, AND LINDA BROWN WESTRICK
Abstract. Hindman’s Theorem (HT) states that for every coloring of N with
ﬁnitely many colors, there is an inﬁnite set H ⊆ N such that all nonempty sums
of distinct elements of H have the same color. The investigation of restricted
versions of HT from the computability-theoretic and reverse-mathematical perspectives has been a productive line of research recently. In particular, HT6n
k
is the restriction of HT to sums of at most n many elements, with at most k
is the restriction of HT to sums of exactly n many
colors allowed, and HT=n
k
elements and k colors. Even HT62
2 appears to be a strong principle, and may
even imply HT itself over RCA0 . In contrast, HT=2
is known to be strictly
2
weaker than HT over RCA0 , since HT=2
follows immediately from Ramsey’s
2
Theorem for 2-colorings of pairs. In fact, it was open for several years whether
HT=2
2 is computably true.
We show that HT=2
2 and similar results with addition replaced by subtraction and other operations are not provable in RCA0 , or even WKL0 . In fact,
we show that there is a computable instance of HT=2
such that all solutions
2
can compute a function that is diagonally noncomputable relative to ∅′ . It fol0
lows that there is a computable instance of HT=2
2 with no Σ2 solution, which
is the best possible result with respect to the arithmetical hierarchy. Furthermore, a careful analysis of the proof of the result above about solutions DNC
2
relative to ∅′ shows that HT=2
2 implies RRT2 , the Rainbow Ramsey Theorem
for colorings of pairs for which there are are most two pairs with each color,
over RCA0 . The most interesting aspect of our construction of computable
colorings as above is the use of an eﬀective version of the Lovász Local Lemma
due to Rumyantsev and Shen.

1. Introduction
This paper is concerned with the computability-theoretic and reverse-mathematical analysis of combinatorial principles, in particular that of versions of Hindman’s
Theorem, a line of research that began with the work of Blass, Hirst, and Simpson [1] and has more recently seen substantial further development. Our main
contribution is to bring to the area the use of probabilistic methods, in particular the Lovász Local Lemma, in an eﬀective version due to Rumyantsev and Shen
[16, 17].
Date: May 30, 2018.
Csima was partially supported by Canadian NSERC Discovery Grant 312501. Dzhafarov was
partially supported by grant DMS-1400267 from the National Science Foundation of the United
States and a Collaboration Grant for Mathematicians from the Simons Foundation. Hirschfeldt
was partially supported by grant DMS-1101458 from the National Science Foundation of the
United States and a Collaboration Grant for Mathematicians from the Simons Foundation. We
thank Jason Bell and Jeﬀ Shallit for very helpful suggestions that led us to the idea of using the
Lovász Local Lemma. We also thank Ludovic Patey for information on RRT22 .
1

2

CSIMA, DZHAFAROV, HIRSCHFELDT, JOCKUSCH, SOLOMON, AND WESTRICK

We assume familiarity with the basic concepts of computability theory and
reverse mathematics. For a principle P of second-order arithmetic of the form
∀X [Θ(X) → ∃Y Ψ(X, Y )], an instance of P is an X such that Θ(X) holds, and a
solution to this instance is a Y such that Ψ(X, Y ) holds.
Hindman’s Theorem (HT) [7] states that for every coloring c of N with ﬁnitely
many colors, there is an inﬁnite set H ⊆ N such that all nonempty sums of distinct
elements of H have the same color. Blass, Hirst, and Simpson [1] showed that
such an H can always be computed in the (ω + 1)st jump of c, and that there is
a computable instance of HT such that every solution computes ∅′ . By analyzing
these proofs they showed that HT is provable in ACA+
0 (the system consisting of
RCA0 together with the statement that ωth jumps exist) and implies ACA0 over
RCA0 . The exact reverse-mathematical strength of HT remains open, however.
Recently, there has been interest in investigating restricted versions of Hindman’s Theorem. For instance, HT6n is HT restricted to sums of at most n many
elements, and HT=n is HT restricted to sums of exactly n many elements. We
can also consider HT6n
and HT=n
k , the corresponding restrictions to k-colorings.
k
6n
=n
(Notice that HTk+1 clearly implies HT6n
.) An interesting
k , and similarly for HT
phenomenon is that quite weak versions of HT are still rather diﬃcult to prove.
Indeed, there is no known way to prove even HT62 other than to give a proof of
the full HT, which has led Hindman, Leader, and Strauss [8] to ask whether every
proof of HT62 is also a proof of HT.
Dzhafarov, Jockusch, Solomon, and Westrick [4] showed that HT63
implies
3
62
ACA0 over RCA0 and that HT2 is not provable in RCA0 . Carlucci, Kolodzieczyk,
Lepore, and Zdanowski [2] investigated versions of Hindman’s Theorem for sums
of bounded length in which the solutions are required to meet a certain natural
sparseness condition known as apartness, and in particular showed that HT62
2 with
apartness implies ACA0 over RCA0 . (They also have results for HT=n
with
apartk
ness.) They then deduced that HT62
(with
no
extra
conditions)
implies
ACA
0 over
4
RCA0 . It remains open whether either of HT62
and
ACA
implies
the
other
over
0
2
RCA0 .
The principle HT=2 is quite diﬀerent, as it follows immediately from Ramsey’s
Theorem for pairs. For a set S, let [S]n be the set of n-element subsets of S. Recall
that RTnk is the statement that every k-coloring of [N]n has an inﬁnite homogeneous
set, that is, an inﬁnite set H such that all elements of [H]n have the same color.
follows at once from RTnk , as HT=n
is essentially the restriction of
Then HT=n
k
k
n
RT=n
to
colorings
of
[N]
where
the
color
of
a
set
depends
only on the sum of its
k
elements. For n > 3 (and k > 2), RTnk is equivalent to ACA0 over RCA0 , but RT2k
is a weaker principle, incomparable with WKL0 (see e.g. Hirschfeldt [9] for further
details).
The possibility was left open in late drafts of [4] that HT=2
2 is so weak as to be
computably true, although a brief note at the end of the published version mentions
the solution of this problem and more in the current paper. We will show that HT=2
2
is not computably true, and indeed, there is a computable instance of HT=2
2 such
that the degree of any solution is DNC relative to ∅′ (see Section 3 for a deﬁnition).
It follows that this instance does not have any computable or even Σ02 solutions.
does not
is not provable in RCA0 , or even in WKL0 . (That HT=2
Thus HT=2
2
2
imply WKL0 follows from the analogous fact for RT22 , proved by Liu [12].) Our

THE REVERSE MATHEMATICS OF HT FOR SUMS OF EXACTLY TWO ELEMENTS

3

method will also apply to a wider class of principles generalizing HT=2
2 , including
one studied by Murakami, Yamazaki, and Yokoyama [15].
The basic idea for showing that HT=2
2 is not computably true is straightforward.
We build a computable instance c : N → 2 of HT=2
2 with no computable solution.
Let W0 , W1 , . . . be an eﬀective listing of the c.e. sets. For S ⊆ N and s ∈ N, let
S + s = {k + s : k ∈ S}. For each i we choose an appropriately large number ki ,
wait until at least ki many numbers enter Wi , and let Ei consist of the ﬁrst ki many
numbers to enter Wi , if |Wi | > ki . We would then like to ensure, for all suﬃciently
large s, that Ei + s is not homogeneous for c, meaning that there are x, y ∈ Ei + s
such that c(x) 6= c(y). Then Ei cannot be contained in a solution to c, hence in
particular Wi cannot be such a solution.
If we consider only a single ﬁxed i, it is easy to deﬁne (uniformly in i) a computable coloring ci that satisﬁes the above, i.e., such that for all suﬃciently large
s, we have that Ei + s is not homogeneous for ci . To do so, let ki = 2, and let
d = b − a, where Ei = {a, b} and a < b. Then deﬁne ci recursively as follows. If Ei
has not been deﬁned by stage s or s < d, let c(s) = 0. Otherwise (so d is known
at stage s), let c(s) = 1 − c(s − d). Then for all suﬃciently large s, we have that
c(b + s) 6= c(b + s − d) = c(a + s), so Ei + s is not homogeneous for c because it
contains b + s and a + s.
However, the simple method above can break down even for two values of i, say
i0 and i1 , at least if we take ki = 2 for i = i0 , i1 . In such a case, it could happen
that Ei0 = {0, 1} and Ei1 = {0, 2}. Then for every 2-coloring c of N and every
suﬃciently large s, at least one of the three sets Ei0 + s, Ei1 + s, and Ei1 + (s + 1)
is homogeneous for c, since otherwise the colors c(s), c(s + 1), and c(s + 2) are
pairwise distinct, contradicting the assumption that c is a 2-coloring. Hence, for
some j 6 1, there are inﬁnitely many s such that Eij + s is homogeneous. Even if
we increase the ki ’s, overlaps between sets Ei + s for diﬀerent values of i and s can
cause problems in deﬁning c. The only way we know to deal with more than one
value of i is to use some version of the Lovász Local Lemma as described below.
To implement this idea, we think of the bits c(k) as mutually independent random
variables with the values 0 and 1 each having probability 21 . If Ei is large, then
the event that Ei + s is homogeneous for c has low probability, namely 2−|Ei |+1 .
Furthermore, the events that Ei + s is homogeneous and that Ej + t is homogeneous
are independent whenever s and t are far apart enough that Ei + s and Ej + t are
disjoint. So what we need is a theorem saying that when we have events with
suﬃciently small probability that are somehow suﬃciently independent, then it is
possible to avoid all of them at once. That is exactly what the Lovász Local Lemma
does.
However, this is not enough, because we need c to be computable. Thus we
need an eﬀective version of the Lovász Local Lemma. Fortunately, such a result
has been obtained by Rumyantsev and Shen [16, 17], as we describe in the next
section. As we will see in Section 3, this result allows us to show easily that our
desired computable c exists. Indeed, by computably approximating ﬁnite subsets
Ei of Σ02 sets, we will be able not only to avoid computable solutions to c, but also
to ensure that all solutions to c have DNC degree relative to ∅′ .
Murakami, Yamazaki, and Yokoyama [15] deﬁned a class of principles that includes the principles HT=n
as special cases. For a function f : [N]n → N, let RTfk
k
be the following statement: For any c : N → k, there is an inﬁnite set H ⊆ N such

4

CSIMA, DZHAFAROV, HIRSCHFELDT, JOCKUSCH, SOLOMON, AND WESTRICK

that if s, t ∈ [H]n then c(f (s)) = c(f (t)). Let RTf be the principle ∀k RTfk . Notice
that if f ({x0 , . . . , xn−1 }) = x0 + · · · + xn−1 then RTfk is just HT=n
k . As shown
f
n
in [15], if f : [N] → N is a bijection then RTk is equivalent over RCA0 to RTnk ,
and RTnk is also equivalent to the statement that RTfk holds for all f : [N]n → N
(and hence implies RTfk for any particular such f ).
The reason this deﬁnition appears in [15] is that the authors were considering versions of a principle known as the Ramseyan Factorization Theorem, and
they showed that one of these versions is equivalent to RTSubt for the function
Subt({x0 , x1 }) = |x0 − x1 |. They proved that RTSubt implies BΣ02 over RCA0 , with
a proof that also applies to HT=2 , and indeed to any HTf such that the image of
an inﬁnite set under f remains inﬁnite. They left open whether RTSubt
is provable
k
in RCA0 , implies RT2k , or is somewhere in between these extremes.
As we will see, our results hold for RTSubt
as well, and indeed for RTf2 for any
2
function satisfying the following deﬁnition.
Definition 1.1. A function f : [N]2 → N is addition-like if
(1) f is computable,
(2) there is a computable function g such that if y > g(x, n) then f ({x, y}) > n,
and
(3) there is a b such that for all x 6= y, there are at most b many z’s for which
f ({x, z}) = f ({x, y}).
We will ﬁnish the paper with some open questions, but would like to highlight
the following open-ended one here.
Question 1.2. What further uses do the Lovász Local Lemma and other probabilistic results have in the reverse-mathematical and computability-theoretic analysis
of combinatorial principles?
One example has already been given by Liu, Monin, and Patey [13]. Another
appears in Cholak, Dzhafarov, Hirschfeldt, and Patey [3].
2. The Lovász Local Lemma and its computable version
The Lovász Local Lemma was introduced in Erdős and Lovász [5]. It is a major
tool in obtaining lower bounds for ﬁnite Ramsey numbers. See [6, Section 4.2] for a
proof and some applications of the Lovász Local Lemma. The version that we need,
known as the Asymmetric Lovász Local Lemma, ﬁrst appeared in Spencer [18]. It
is usually stated in a ﬁnite version, but the inﬁnite version below follows easily from
the ﬁnite one by a compactness argument, as pointed out in Proposition 3 of [17].
Let x0 , x1 , . . . be a sequence of mutually independent random variables, such
that each xj has a ﬁnite range, say {0, . . . , f (j)}. Let A0 , A1 , . . . be events such
that each Aj depends only on the variables xn for n in some ﬁnite set vbl(Aj ).
Thus each event Aj is a Boolean combination of statements of the form xn = k
for n ∈ vbl(Aj ) and k 6 f (n). We can think of Aj as a ﬁnite set Sj of functions
with domain vbl(Aj ) such that if g ∈ Sj then g(n) 6 f (n) for all n ∈ vbl(Aj ). An
assignment of the xn is just a function h : N → N such that h(n) 6 f (n) for all
n. This assignment avoids Aj if the restriction of h to vbl(Aj ) is not in Sj . Let
N (Aj ) = {At : vbl(At ) ∩ vbl(Aj ) 6= ∅}, and assume that each N (Aj ) is ﬁnite. Then
we have the following.

THE REVERSE MATHEMATICS OF HT FOR SUMS OF EXACTLY TWO ELEMENTS

5

Asymmetric Lovász Local Lemma, Infinite Version. Suppose the above hypotheses hold and there exist r0 , r1 , . . . ∈ (0, 1) such that
Y
(1 − rt )
Pr[Aj ] 6 rj ·
At ∈N (Aj )
t6=j

for all j. Then there is an assignment of x0 , x1 , . . . that avoids every Aj .
Moser and Tardos [14] gave an eﬃcient algorithm for ﬁnding such an assignment
for x0 , x1 , . . . , xn−1 in the ﬁnite version of this theorem. As noted in [17], Fortnow
then conjectured that an eﬀective version of the theorem should also hold. This
conjecture was conﬁrmed as follows.
Let x0 , x1 , . . . and A0 , A1 , . . . be as above. Assume that the function f bounding
the ranges of the xn is computable, and that the xn have uniformly computable
rational-valued probability distributions. Assume also that the Aj are uniformly
computable (i.e., that there is a computable procedure that, given j, returns vbl(Aj )
and the set Sj as above). The assumption that each N (Aj ) is ﬁnite means that
each n is in vbl(Aj ) for only ﬁnitely many j. Assume that we have a procedure
for computing a canonical index of this ﬁnite set given j. The following result
is the eﬀective version of the Lovász Local Lemma, whose proof ﬁrst appeared in
Rumyantsev [16] and was subsequently published in Rumyantsev and Shen [17].
Note that the hypothesis of the eﬀective version is a bit stronger than that of the
original version, as the upper bound on Pr[Aj ] in the original version is multiplied
by the factor q < 1 to obtain the upper bound in the eﬀective version.
Theorem 2.1 (Rumyantsev and Shen [16, 17]). Suppose the above hypotheses hold
and there are q ∈ Q ∩ (0, 1) and a computable sequence r0 , r1 , . . . ∈ Q ∩ (0, 1) such
that
Y
(1 − rt )
Pr[Aj ] 6 qrj ·
At ∈N (Aj )
t6=j

for all j. Then there is a computable assignment of x0 , x1 , . . . that avoids every Aj .
The following consequence of this result is a slightly restated version of one given
in [17, Corollary 7.2]. For a ﬁnite partial function σ, the size of σ is | dom(σ)|. When
we say that a sequence σ0 , σ1 , . . . of ﬁnite partial functions is computable, we mean
that there is a computable procedure that, given i, returns dom(σi ) and the values
of σi on this domain.
Corollary 2.2 (Rumyantsev and Shen [17]). For each q ∈ (0, 1) there is an M
such that the following holds. Let σ0 , σ1 , . . . be a computable sequence of finite
partial functions N → 2, each of size at least M . Suppose that for each m > M
and n, there are at most 2qm many j such that σj has size m and n ∈ dom(σj ),
and that we can computably determine the set of all such j given m and n. Then
there is a computable c : N → 2 such that for each j there is an n ∈ dom(σj ) with
c(n) = σj (n).
From this result it is easy to conclude the following fact, which is the one
we will use in the the next section. To obtain it, apply Corollary 2.2 to the sequence σ0 , σ1 , . . . , where σ2j and σ2j+1 each have domain Fj , and σ2j (x) = 0 and
σ2j+1 (x) = 1 for all x ∈ Fj , choosing q in Corollary 2.2 to be greater than the given
q for Corollary 2.3 below.

6

CSIMA, DZHAFAROV, HIRSCHFELDT, JOCKUSCH, SOLOMON, AND WESTRICK

Corollary 2.3. For each q ∈ (0, 1) there is an M such that the following holds. Let
F0 , F1 , . . . be a computable sequence of finite sets, each of size at least M . Suppose
that for each m > M and n, there are at most 2qm many j such that |Fj | = m and
n ∈ Fj , and that we can computably determine a canonical index for the set of all
such j given m and n. Then there is a computable c : N → 2 such that for each j
the set Fj is not homogeneous for c.
3. The effective content of HT=2
2 and some generalizations
The next result will be considerably generalized in Theorem 3.3. Nonetheless, we
include it here to illustrate an application of Corollary 2.3 in a simple context. The
proof of Theorem 3.3 will have the same basic idea but will also involve computable
approximations to Σ02 sets and addition-like functions replacing addition.
Theorem 3.1. The principle HT=2
is not computably true. That is, it has a
2
computable instance with no computable solution.
Proof. We follow the outline of the proof given in the introduction. Let M be as in
m
Corollary 2.3 for q = 12 , where we assume without loss of generality that m 6 2 2
for all m > M . For each i, let ki = M + i. For each i with |Wi | > ki , let Ei
consist of the ﬁrst ki many elements enumerated into Wi , and let Ei be undeﬁned
if |Wi | < ki . Let F0 , F1 , . . . be a computable enumeration without repetitions of all
ﬁnite sets of the form Ei + s (over all i, s ∈ N) such that Wi contains at least ki
many elements by stage s (so that Ei is known by stage s). Clearly, if Ei is deﬁned,
then for all suﬃciently large s the set Ei + s occurs in the sequence F0 , F1 , . . ., and
conversely, every set in the sequence F0 , F1 , . . . of cardinality ki has the form Ei + s
for some s.
As explained in the introduction, it suﬃces to show that Corollary 2.3 applies to
the sequence F0 , F1 , . . ., since this corollary then gives the existence of a computable
coloring c : N → 2 such that no Fj is homogeneous for c. It follows that for all i
with Ei deﬁned, if s is suﬃciently large then Ei + s is not homogeneous for c, so
no solution to c can contain Ei , and in particular Wi is not a solution to c.
We now verify that the hypotheses of Corollary 2.3 are satisﬁed. Let m > M
and n be given. We claim that there are at most m many values of j such that
|Fj | = m and n ∈ Fj . Let i = m − M , so that |Ei | = ki = m. The claim asserts
that there are most m many values of s such that Ei + s occurs in the sequence
F0 , F1 , . . . and n ∈ Ei + s. If n ∈ Ei + s, then n = x + s for some x ∈ Ei . There
are m many choices for x and for each x there is a unique s with n = x + s, so the
m
m
claim is proved. Since m 6 2 2 by the choice of M , there are at most 2 2 many
values of j such that |Fj | = m and n ∈ Fj . It remains to check that the set of such
j can be eﬀectively computed from m and n. Again, let i = m − M . We must
eﬀectively compute the canonical index of the set S of s such that Wi contains at
least m many elements by stage s and n ∈ Ei + s. If n ∈ Ei + s, then s 6 n. So for
each s 6 n we can check eﬀectively whether Wi contains at least m many elements
by the end of stage s. If not, s ∈
/ S. If so, we can eﬀectively compute Ei and then
eﬀectively determine whether n ∈ Ei + s, and hence whether s ∈ S. Hence, we can
apply Corollary 2.3 as described in the previous paragraph.

A function f is diagonally noncomputable (DNC ) relative to an oracle X if
X
f (e) 6= ΦX
e (e) for all e such that Φe (e) is deﬁned, where Φe is the eth Turing
functional. A degree is DNC relative to X if it computes a function that is DNC

THE REVERSE MATHEMATICS OF HT FOR SUMS OF EXACTLY TWO ELEMENTS

7

relative to X. An inﬁnite set A is effectively immune relative to X if there is an
X-computable function f such that if WeX ⊆ A then |WeX | < f (e), where We is
the eth enumeration operator.
Theorem 3.2 (Jockusch [10]). A degree is DNC relative to X if and only if it
computes a set that is effectively immune relative to X.
′

′

Let W0∅ , W1∅ , . . . be an eﬀective list of the Σ02 sets, with corresponding com′
′
putable approximations Wi∅ [s] (chosen so that x ∈ Wi∅ iff for all suﬃciently large
′
′
s, we have x ∈ Wi∅ [s]). We adopt the standard convention that if x ∈ Wi∅ [s] then
x < s. For a function f : [N]2 → N and x 6= y, we write f (x, y) for f ({x, y}). For a
set S 6∋ y, we write f (S, y) for {f (x, y) : x ∈ S}.
It follows from the proof of Theorem 3.1 that there is a computable instance of
HT=2
2 such that all solutions are eﬀectively immune relative to ∅, and hence have
degrees that are DNC relative to ∅. In the following theorem, which is our main
result, we replace ∅ by ∅′ as an oracle and simultaneously replace addition by an
arbitrary addition-like operation as deﬁned in Deﬁnition 1.1.
Theorem 3.3. Let f be addition-like. There is a computable instance of RTf2 such
that the degree of any solution is DNC relative to ∅′ .
Proof. Let b be a constant witnessing that f is addition-like, as in part (3) of
Deﬁnition 1.1. Note that the fact that f is addition-like implies that if F is a ﬁnite
set and x ∈
/ F , then for all but ﬁnitely many y, we have min f (F, y) > max f (F, x).
Let M be as in Corollary 2.3 for q = 21 . We may assume that M > 0 and M is
m
suﬃciently large so that bm2 6 2 2 for all m > M .
′
′
Given i and s, for each x ∈ Wi∅ [s], let tx be the least t such that x ∈ Wi∅ [u] for
′
all u ∈ [t, s]. (I.e., tx measures how long x has been in Wi∅ .) Order the elements of
′
Wi∅ [s] by letting x ≺ y if either tx < ty or both tx = ty and x < y. Let Ei [s] be the
′
set consisting of the least b(M + i) many elements of Wi∅ [s] under this ordering,
′
or Ei [s] = ∅ if Wi∅ [s] has fewer than b(M + i) many elements.∗
The following properties of this deﬁnition are the ones that matter to us:
(1) The function taking i and s to Ei [s] is computable.
(2) Every element of Ei [s] is less than s, so f (Ei [s], s) is deﬁned.
(3) If Ei [s] 6= ∅ then |f (Ei [s], s)| > M + i.
′
(4) If |Wi∅ | > b(M + i) then there is a t such that Ei [t] 6= ∅ and Ei [s] = Ei [t] ⊆
′
Wi∅ for all s > t.
We build a computable sequence of ﬁnite sets F0 , F1 , . . . as follows. Order the
pairs i, s via a standard pairing function, and go through each such pair in order.
If Ei [s] = ∅ then proceed to the next pair. Otherwise, let s0 be least such that
Ei [t] = Ei [s] for all t ∈ [s0 , s]. Suppose that the following hold.
(1) min f (Ei [s], s) > s0 .
∗This deﬁnition could be simpliﬁed by noting that there is a partial ∅′ -computable function
′
′
ψ such that if |Wi∅ | > b(M + i) then ψ(i) is the canonical index of a set Ei ⊆ Wi∅ such that
|Ei | = b(M + i). The limit lemma then gives us a computable binary function g such that
ψ(i) = lims g(i, s) for all i such that ψ(i) is deﬁned, and we can deﬁne Ei [s] to be the set with
canonical index g(i, s) if this set has size b(M + i), and Ei [s] = ∅ otherwise. However, the current
deﬁnition will make it easier to describe the adaptation of this proof to one over RCA0 in the next
section.

8

CSIMA, DZHAFAROV, HIRSCHFELDT, JOCKUSCH, SOLOMON, AND WESTRICK

(2) If u < s0 and Ei [u] 6= ∅ then min f (Ei [s], s) > max f (Ei [u], u).
Then add f (Ei [s], s) to our sequence. We say that f (Ei [s], s) was enumerated into
our sequence by i. Otherwise do nothing. In any case, proceed to the next pair.
Notice that if there is an s0 such that Ei [s] = Ei [s0 ] 6= ∅ for all s > s0 , then we
add f (Ei [s], s) to our sequence for all suﬃciently large s, because for each u < s0
and n 6 max f (Ei [u], u), there are only ﬁnitely many s such that n ∈ f (Ei [s0 ], s),
and similarly for each n 6 s0 .
Now F0 , F1 , . . . is a computable sequence of ﬁnite sets, each of size at least M .
Suppose that n ∈ Fj and |Fj | = m. Then Fj was enumerated by some i < m.
(Actually i 6 m − M .) If n is also in Fl and Fl was also enumerated by i, then
we must have Fj = f (Ei [s], s) and Fl = f (Ei [t], t) for some s and t such that
Ei [t] = Ei [s]. For each x ∈ Ei [s], there are at most b many t such that f (x, t) = n,
so there are at most bm many such l. Thus the total number of elements of size m
m
in our sequence that contain n is at most bm2 6 2 2 .
By part (2) of Deﬁnition 1.1, given n and m, we can computably determine a
stage s > n such that for each i < m and t > s, we have min f (Ei [n], t) > n. It
follows from the deﬁnition of our sequence that if F is enumerated into it a stage
at which we are working with a pair i, t with i < m and t > s, then min F > n. So
we can compute the set of all j such that |Fj | = m and n ∈ Fj .
Thus the hypotheses of Corollary 2.3 are satisﬁed, and hence there is a com′
putable c as in that corollary. Suppose that |Wi∅ | > b(M + i). Then there is
′
an F ⊆ Wi∅ such that f (F, s) is in our sequence for all suﬃciently large s. For
each such s, there are x, y ∈ F such that c(f (x, s)) 6= c(f (y, s)), so F cannot be
contained in a solution to c as an instance of RTf2 . Thus, if H is a solution to c
′
′
and Wi∅ ⊆ H, then |Wi∅ | < b(M + i), which means that H is eﬀectively immune
′
relative to ∅ , and so has DNC degree relative to ∅′ .

The computable instance c constructed above cannot have any Σ02 solutions,
since no Σ02 set is eﬀectively immune relative to ∅′ . Thus we have the following
fact, whose analogs for RT22 and HT were proved by Jockusch [11] and Blass, Hirst,
and Simpson [1], respectively.
Corollary 3.4. Let f be addition-like. There is a computable instance of RTf2 with
no Σ02 solution.
In particular, both HT=2
and RTSubt
have computable instances with no Σ02
2
2
0
solutions. On the other hand, every computable instance of HT=2
2 does have a Π2
2
solution since the corresponding result holds for RT2 by [11].
Every principle RTf2 has the form ∀X [Θ(X) → ∃Y (Y is inﬁnite and Ψ(X, Y ))]
where Ψ is Π01 . Thus we can obtain a further result from the following general fact.
Lemma 3.5. Let P be a principle of the form
∀X [Θ(X) → ∃Y (Y is infinite and Ψ(X, Y ))]
Π01 .

where Ψ is
Suppose that P has a computable instance X with no low solution.
Then every solution to X is hyperimmune.
Proof. Assume for a contradiction that X has a solution Y that is not hyperimmune.
Let F0 , F1 , . . . be a computable sequence of pairwise disjoint ﬁnite sets such that
Y ∩ Fi 6= ∅ for all i. Let C be the collection of all Z such that Ψ(X, Z) holds and
Z ∩ Fi 6= ∅ for all i. Then C is a Π01 class, and is nonempty as it contains Y . By

THE REVERSE MATHEMATICS OF HT FOR SUMS OF EXACTLY TWO ELEMENTS

9

the Low Basis Theorem, C has a low element. This element is a solution to X,
contradicting the choice of X.

Corollary 3.6. Let f be addition-like. There is a computable instance of RTf2 such
that all solutions are hyperimmune.
4. The logical strength of HT=2
2 and generalizations
As mentioned above, RT2k implies RTfk for every f : [N]2 → k, but does not
imply WKL0 . Since WKL0 has an ω-model consisting entirely of ∆02 sets, we have
the following.
Corollary 4.1. Let f be addition-like. Then RTfk is incomparable with WKL0 over
RCA0 .
Subt
In particular, both HT=2
are incomparable with WKL0 over RCA0 .
k and RTk
Theorem 3.3 also has a reverse-mathematical version. For the purposes of reverse
mathematics, we should alter the deﬁnition of addition-like function to remove the
computability requirements. In other words, f : [N]2 → N is addition-like in the
sense of reverse mathematics if there is a function g such that if y > g(x, n) then
f (x, y) > n, and there is a b such that for all x 6= y, there are at most b many z’s
for which f (x, z) = f (x, y).
We also need to be careful in deﬁning the reverse-mathematical analog of the
notion of being DNC over the jump, since the existence of the jump cannot be
proved in RCA0 . Given a set X, we can of course approximate X ′ , so we can deﬁne
′
X′
ΦX
e (x)[s] as usual. We adopt the convention that if Φe (x)[s]↓ with use u and
′
X′
X ′ [s + 1] ↾ u 6= X ′ [s] ↾ u, then ΦX
e (x)[s + 1]↑. We now deﬁne Φe (x) = y to mean
′
′
X
X′
that ∃t ∀s > t [ΦX
e (x)[s] = y]. We write Φe (x) 6= y to mean that either Φe (x)↑
′
′
′
X
or ΦX
to mean that ∃t ∀s > t [n ∈ WeX [s]],
e (x) = z for z 6= y. We write n ∈ We
′
′
where WiX [s] = {n < s : ΦX
e (n)[s]↓}.
Now 2-DNC is the statement that for every X, there is a function h such that
′
h(e) 6= ΦX
e (e) for all e.
Inspecting the proofs of Theorem 2.1 and Corollary 2.2 in [17], we see that
they can be carried out in RCA0 . Thus we can obtain the following analog of
Corollary 2.3.

Corollary 4.2. The following is provable in RCA0 : For each q ∈ (0, 1) there is an
M such that the following holds. Let F0 , F1 , . . . be a sequence of finite sets, each of
size at least M . Suppose that for each m > M and n, there are at most 2qm many
i such that |Fi | = m and n ∈ Fi , and that there is a function taking m and n to the
set of all such i. Then there is a c : N → 2 such that for each i the set Fi is not
homogeneous for c.
The proof of Theorem 3.3, relativized to a given oracle X, can now be carried
out in RCA0 , except for one issue: In the absence of Σ02 -bounding, it is possible
′
to have b(M + i) many n such that n ∈ WiX without having a single s such that
′
|WiX [s]| > b(M + i). In this case, we would have Ei [s] = ∅ for all s.
To get around this issue, we do not attempt to establish eﬀective immunity
′
relative to X ′ , but work instead with a modiﬁed notion. Write kWeX k > m to
′
mean that there are a ﬁnite set F with |F | > m and a t such that n ∈ WeX [s]
for all n ∈ F and s > t. Now 2-EI is the statement that for each X, there are

10

CSIMA, DZHAFAROV, HIRSCHFELDT, JOCKUSCH, SOLOMON, AND WESTRICK
′

an inﬁnite set A and a function f such that if kWeX k > f (e), then there is an
′
n ∈ WeX with n ∈
/ A.
The proof of Theorem 3.3, relativized to an arbitrary X, shows that if f is
addition-like then RTf2 implies 2-EI over RCA0 . The main point to notice in that
′
proof is the following: Suppose that kWiX k > b(M + i). By deﬁnition, there are
′
F and t such that |F | > b(M + i) and n ∈ WiX [s] for all n ∈ F and s > t. By
bounded Π01 -comprehension, which holds in RCA0 , we can form the set Fb of all
′
n 6 max F such that n ∈ WiX [s] for all s > t, and then let G be the set consisting
of the b(M + i) many least elements of Fb in the ≺-ordering deﬁned at stage t. If
′
′
k ∈ WiX [t] \ G then there is an sk > t such that k ∈
/ WiX [sk ]. By Σ01 -bounding,
which holds in RCA0 , there is a u such that we can take sk 6 u for all such k. If
′
s > u, then for any k ∈ WiX [s] \ G and any n ∈ G, we have that n ≺ k for the
ordering ≺ deﬁned at stage s. It follows that Ei [s] = G for s > u.
To obtain 2-DNC, we use the following proposition, whose proof is based on that
of Theorem 3.2 given in [10]. (We need only one direction of the proposition, but
the equivalence it establishes is of independent interest.)
Proposition 4.3. 2-EI is equivalent to 2-DNC over RCA0 .
Proof. We argue in RCA0 . First suppose that 2-EI holds. Given X, let A and
′
′
′
′
f be as in the statement of 2-EI. Write WeX ≈ WiX if WeX [s] = WiX [s] for
′
all suﬃciently large s. Notice that in this case, for each n we have n ∈ WeX iff
′
′
′
n ∈ WiX , and kWeX k > m iff kWiX k > m.
Let n0 < n1 < · · · be the elements of A in order. There is a function g such that
′
X′
X′
6≈ WeX for all e, as otherwise
[s] = {ni < s : i < f (e)} for all s. Then Wg(e)
Wg(e)
′

′

we would have kWeX k > f (e) but n ∈ A for all n ∈ WeX .
′
′
X′
X′
[s] = WyX [s] if ΦX
There is a function p such that Wp(e)
e (e)[s] = y, and Wp(e) [s] =
′

′

′

′

′

′

X
X
X
X
X
∅ if ΦX
e (e)[s]↑. Let h = g ◦p. If Φe (e) = y then Wp(e) ≈ Wy . But Wh(e) 6≈ Wp(e) ,
′

′

X
6≈ WyX , and hence h(e) 6= y. Thus h is as in the
since h(e) = g(p(e)), so Wh(e)
deﬁnition of 2-DNC.
Now suppose that 2-DNC holds. Given X, let h be as in the statement of 2-DNC.
′
We ﬁrst deﬁne a function g such that for each e, we have g(e) 6= ΦX
i (i) for all i 6 e.
Let τ0 , τ1 , . . . list the elements of ω <ω . Let (τ )i be the ith element of τ if |τ | > i,
′
and let (τ )i = 0 otherwise. There is a function r such that ΦX
r(i) (r(i)) = (τk )i if
′

′

′

X
X
ΦX
i (i) = k and Φr(i) (r(i))↑ if Φi (i)↑. Let g(e) be such that |τg(e) | = e + 1 and
′

(τg(e) )i = h(r(i)) for all i 6 e. If i 6 e and ΦX
i (i) = k then (τg(e) )i 6= (τk )i , so
g(e) 6= k.
′
Let D0 , D1 , . . . list the ﬁnite sets. Order the elements of WeX [s] as in the proof
′
′
of Theorem 3.3. That is, for x ∈ WeX [s], let tx be the least t such that x ∈ WeX [u]
for all u ∈ [t, s], then let x ≺ y if either tx < ty or both tx = ty and x < y. There
′
′
is a function q such that if WeX [s] * Di , then ΦX
q(e,i) (q(e, i))[s] = n for the ≺-least
′

n ∈ WeX [s] \ Di .
We now deﬁne sequences a0 < a1 < · · · and k0 , k1 , . . . as follows. Suppose that
we have deﬁned aj and kj for all j < e. Let ie be such that Die = {a0 , . . . , ae−1 }.
X′
(mj ) = j. Let m =
Let ke = q(e, ie ). For j 6 ae−1 , let mj be such that Φm
j
max{k0 , . . . , ke , m0 , . . . , mae−1 } and let ae = g(m). Notice that ae > ae−1 .

THE REVERSE MATHEMATICS OF HT FOR SUMS OF EXACTLY TWO ELEMENTS

11

Let A = {a0 , a1 , . . .}. This set exists because the ae are deﬁned in order. Now
′
suppose that kWeX k > e + 1. Then there are a ﬁnite set F with |F | = e + 1 and a
′
t such that for all s > t, every element of F is in WeX [s]. Let
′

S = {n 6 max F : ∃s > t [n ∈
/ WeX [s]]}.
′

By Σ01 -bounding, there is a u > t such that ∃s ∈ [t, u] [n ∈
/ WeX [s]] for all n ∈ S.
X′
Let G consist of the e + 1 least elements of We [u] under the ≺-ordering. If s > u
′
then the elements of G are also the least e + 1 many elements of WeX [s] under the
′
≺-ordering. Since |Die | = e, there is an n ∈ G such that ΦX
q(e,ie ) (q(e, ie ))[s] = n
′

for all s > u, and hence ΦX
q(e,ie ) (q(e, ie )) = n. By the deﬁnition of q, we have that
′

n 6= aj for j < e, and by construction, n 6= aj for j > e. Thus n ∈ WeX but n ∈
/ A.
So A and the function e 7→ e + 1 are as required by 2-EI.

We thus have the following result.
Theorem 4.4. RCA0 proves that if f is addition-like then RTf2 implies 2-DNC.
This theorem can be understood as an implication between Ramsey-theoretic
principles, because Miller [unpublished] has shown that 2-DNC is equivalent over
RCA0 to RRT22 , a version of the Rainbow Ramsey Theorem that states that if
c : [N]2 → N is such that |c−1 (i)| 6 2 for all i, then there is an inﬁnite set R such
that c is injective on [R]2 .
Corollary 4.5. RCA0 proves that if f is addition-like then RTf2 implies RRT22 .
For those familiar with Weihrauch reducibility, we will also say that the proofs
in [17] are uniform, so the c in Corollary 2.3 can be obtained uniformly from the
sequence F0 , F1 , . . . (for a ﬁxed q). The proof of Theorem 3.3 is also uniform, as
is the proof that computing an eﬀectively immune set implies computing a DNC
function. Thus if f is addition-like (in the original sense of Deﬁnition 1.1), then
2-DNC 6W RTf2 . Miller’s aforementioned argument shows that RRT22 6W 2-DNC,
so we also have that RRT22 6W RTf2 .
5. Open Questions
We ﬁnish with some open questions. Implications here could be over RCA0
or in the sense of notions of computability-theoretic reduction such as Weihrauch
reducibility.
2
Question 5.1. Does HT=2
2 imply RT2 ?

Question 5.2. Does RRT22 imply HT=2
2 ?
=2
Question 5.3. What is the exact relationship between HT=2
j and HTk for j 6= k?
Subt
Question 5.4. Does either of HT=2
imply the other?
2 and RT2

Jockusch [11] showed that for each n > 2, there is a computable instance of RTn2
with no Σ0n solution.
Question 5.5. For n > 3, is there a computable instance of HT=n
with no Σ0n
2
solution?

12

CSIMA, DZHAFAROV, HIRSCHFELDT, JOCKUSCH, SOLOMON, AND WESTRICK

A positive answer to this question would imply that HT is not provable in ACA0 ,
for the same reason that Jockusch’s aforementioned result implies that RT (the
principle ∀n ∀k RTnk ) is not provable in ACA0 (see e.g. Section 6.3 of [9]). The
question is also open for HT6n
2 , and even for full HT.
Question 5.6. Is it true that for every degree a that is DNC relative to ∅′ and
every computable instance c of HT=2
2 , there is an a-computable solution to c?
A positive answer to the above question would show that Theorem 3.3 is best
possible in a strong sense.
=2
Question 5.7. What is the ﬁrst-order strength of HT=2
?
2 ? What about HT

Of course, analogs of the above questions can also be asked for RTSubt
or RTf2
2
for other addition-like (but not bijective) functions f .
References
[1] Andreas R. Blass, Jeﬀry L. Hirst, and Stephen G. Simpson, Logical analysis of some theorems
of combinatorics and topological dynamics, in Stephen G. Simpson, ed., Logic and Combinatorics, Contemporary Mathematics 65, American Mathematical Society, Providence, RI,
1987, 125–156.
[2] Lorenzo Carlucci, Leszek A. Kolodzieczyk, Francesco Lepore, and Konrad Zdanowski,
New bounds on the strength of some restrictions of Hindman’s Theorem, to appear,
arXiv:1701.06095.
[3] Peter A. Cholak, Damir D. Dzhafarov, Denis R. Hirschfeldt, and Ludovic Patey, Some results
on the COH vs. SRT22 problem, to appear.
[4] Damir D. Dzhafarov, Carl G. Jockusch, Jr., Reed Solomon, and Linda Brown Westrick, Effectiveness of Hindman’s Theorem for bounded sums, in Adam Day, Michael Fellows, Noam
Greenberg, Bakhadyr Khoussainov, Alexander Melnikov, and Frances Rosamond, eds., Computability and Complexity: Essays Dedicated to Rodney G. Downey on the Occasion of His
60th Birthday, Lecture Notes in Computer Science 10010, Springer, Cham, 2017, 134–142.
[5] Paul Erdős and László Lovász, Problems and results on 3-chromatic hypergraphs and some
related questions, in András Hajnal, Richard Rado, and Vera T. Sós, eds., Inﬁnite and Finite
Sets, Vol. II, Colloquia Mathematica Societatis János Bolyai 10, North-Holland, Amsterdam,
1975, 609–627.
[6] Ronald L. Graham, Bruce L. Rothschild, and Joel H. Spencer, Ramsey Theory, second edition,
Wiley-Interscience Series in Discrete Mathematics and Optimization, John Wiley & Sons,
Inc., New York, 1990.
[7] Neil Hindman, Finite sums from sequences within cells of a partition of N , Journal of Combinatorial Theory Series A 17 (1974), no. 1, 1–11.
[8] Neil Hindman, Imre Leader, and Dona Strauss, Open problems in partition regularity, Combinatorics, Probability and Computing 12 (2003), no. 5-6, 571–583.
[9] Denis R. Hirschfeldt, Slicing the Truth, Lecture Notes Series, Institute for Mathematical
Sciences, National University of Singapore 28, World Scientiﬁc Publishing Co. Pte. Ltd.,
Hackensack, NJ, 2015.
[10] Carl G. Jockusch, Jr., Degrees of functions with no ﬁxed points, in Jens Erik Fenstad, Ivan
T. Frolov and Risto Hilpinen, eds., Logic, Methodology, and Philosophy of Science VIII
(Moscow, 1987), Studies in Logic and the Foundations of Mathematics 126, North-Holland,
Amsterdam, 1989, 191–201.
[11] Carl G. Jockusch, Jr., Ramsey’s theorem and recursion theory, The Journal of Symbolic Logic
37 (1972), no. 2, 268–280.
[12] Jiayi Liu, RT22 does not imply WKL0 , The Journal of Symbolic Logic 77 (2012), no. 2,
609–620.
[13] Lu Liu, Benoit Monin, and Ludovic Patey, A computable analysis of variable words theorems,
to appear, arXiv:1710.11219.
[14] Robin A. Moser and Gábor Tardos, A constructive proof of the general Lovász Local Lemma,
Journal of the ACM 57 (2010), no. 2, Art. 11, 15pp.

THE REVERSE MATHEMATICS OF HT FOR SUMS OF EXACTLY TWO ELEMENTS

13

[15] Shota Murakami, Takeshi Yamazaki, and Keita Yokoyama, On the Ramseyan factorization
theorem, in Arnold Beckmann, Ersébet Csuhaj-Varjú, and Klaus Meer, eds., Language, Life,
Limits: CiE 2014, Springer, Cham, Germany, 2014, 324–332.
[16] Andrei Rumyantsev, Inﬁnite computable version of Lovász Local Lemma, arXiv:1012.0557.
[17] Andrei Rumyantsev and Alexander Shen, Probabilistic constructions of computable objects
and a computable version of Lovász Local Lemma, Fundamenta Informaticae 132 (2014), no.
1, 1–14.
[18] Joel Spencer, Asymptotic lower bounds for Ramsey functions, Discrete Mathematics 20
(1977/78), no. 1, 69–76.
Department of Pure Mathematics, University of Waterloo
E-mail address: csima@uwaterloo.ca
Department of Mathematics, University of Connecticut
E-mail address: damir@math.uconn.edu
Department of Mathematics, University of Chicago
E-mail address: drh@math.uchicago.edu
Department of Mathematics, University of Illinois
E-mail address: jockusch@math.uiuc.edu
Department of Mathematics, University of Connecticut
E-mail address: david.solomon@uconn.edu
Department of Mathematics, University of Connecticut
E-mail address: linda.westrick@uconn.edu

