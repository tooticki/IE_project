SEPARATING PATH AND IDENTITY TYPES IN PRESHEAF
MODELS OF UNIVALENT TYPE THEORY

arXiv:1808.00920v2 [math.LO] 1 Oct 2018

ANDREW W SWAN

Abstract. We give a collection of results regarding path types, identity types
and univalent universes in certain models of type theory based on presheaves.
The main result is that path types cannot be used directly as identity types
in any Orton-Pitts style model of univalent type theory with propositional
truncation in presheaf assemblies over the first and second Kleene algebras.
We also give a Brouwerian counterexample showing that there is no constructive proof that there is an Orton-Pitts model of type theory in presheaves
when the universe is based on a standard construction due to Hofmann and
Streicher, and path types are identity types. A similar proof shows that path
types are not identity types in internal presheaves in realizability toposes as
long as a certain universe can be extended to a univalent one.
We show that one of our key lemmas has a purely syntactic variant in
intensional type theory and use it to make some minor but curious observations
on the behaviour of cofibrations in syntactic categories.

1. Introduction
In the cubical set model of homotopy type theory, and more generally in members
of the classes of models considered by Gambino and Sattler, by Van den Berg and
Frumin, and by Orton and Pitts, the most basic notion of identity is that of path
type. In that construction one uses exponentiation with an interval object I. Given
an object X, we call X I the path type on X and think of it as the collection of
paths between two elements of X. This can then be used to produce path objects
for any fibration X → Y via the mapping path factorisation.
In order to interpret identity types in type theory as path types it is necessary
to show that the reflexivity (or “constant paths”) map rX : X → X I is a trivial
cofibration. In many natural examples however, it is difficult to show that this map
is a trivial cofibration, or even just a cofibration. For example, in [3], Bezem, Coquand and Huber gave a definition of path type, but did not show how to interpret
identity types that strictly satisfy the J-computation rule. In [21] the author gave
both an explanation for why this was difficult constructively as well as a solution.
The explanation was that the definition of fibration used in the BCH model leads
to an awfs where the trivial cofibrations always have pointwise decidable image.
However, when X is the nerve of a complete metric space, the map rX is essentially
the inclusion of constant paths into the set of all paths in the usual topological
sense. One then gives a Brouwerian counterexample to show that there is no constructive proof that such inclusions are pointwise decidable. The solution was to
use a second, more elaborate construction to obtain identity types that do satisfy
the J-computation rule.
Of course, one way to prevent this Brouwerian counterexample from causing
problems is to use a different definition of fibration for interpreting types. From
an abstract point of view this can be achieved by taking any monomorphism to
be a cofibration, by definition. The reflexivity map rX : X → X I is in general a
(split) monomorphism and so a cofibration. From here one can show that it is in
1

2

ANDREW W SWAN

fact a trivial cofibration and thereby use it to implement identity types. From a
syntactic point of view it can be achieved by adding so called regularity or normality
conditions to the definition of Kan operations, which state that composition along
a degenerate open box is the identity. Indeed, at one point in the development of
cubical type theory, Coquand and collaborators did use such a regularity condition.
Although this was never published, it was in many ways very successful and did
lead to a version of type theory where path types are identity types, with some
higher inductive types and is believed to be consistent and have good computational
properties. The only problem with this approach, as discovered by Dan Licata, is
that it is completely unclear how to construct a universe satisfying univalence. See
[8] for some informal discussion of this issue online.
The aim of this paper is to give a wide class of counterexamples that apply not
just to one model, but to a range of different categories with varying definitions
of cofibration and thereby also varying definitions of fibration. We will look at a
class of structures based on models of type theory in presheaves and in particular
presheaf assemblies (for instance cubical assemblies as defined by Uemura in [24]).
We develop two basic techniques.
(1) Using the assumption that path types are already identity types to show
that certain maps have to be cofibrations.
(2) Using a univalent universe to show that certain cofibrations are pointwise
stable under double negation.
We will then combine these to derive statements that are non constructive and
in realizability models outright false.
Acknowledgements. I’m grateful for useful discussions and suggestions relating
to this topic from Benno van den Berg, Martijn den Besten, Thierry Coquand,
Nicola Gambino, Simon Huber, Peter Lumsdaine, Ian Orton, Andy Pitts, Christian
Sattler and Taichi Uemura.
2. General Set Up
We work over a setting based on a definition due to Van den Berg and Frumin
in [26], in turn based on a definition due to Gambino and Sattler in [6]. We assume
that the reader is already familiar with the notions used there such as left/right
lifting problems, wfs’s and pushout products. The Van den Berg-Frumin definition
can also be seen as a purely homotopical reformulation of the Orton-Pitts axioms
in [16]. See e.g. [22, Section 7.5.2] for a discussion of the precise relation between
these two approaches. We weaken the Van den Berg-Frumin definition in a few
ways. Most importantly, we weaken the requirement that the underlying category
is a topos to locally cartesian closed category with finite colimits. This is necessary
to even include presheaf assemblies as an example. We drop the requirement that
cofibrations are classified by a single universal cofibration, which is the object Cof
in the Orton-Pitts formulation, and Σ in the the Van den Berg-Frumin formulation.
We also have no strictness condition (Orton and Pitts’ axiom ax9 ), although there
is an important point here. We will derive some statements very much related to
strictness from the assumption that a univalent universe exists.
Essentially we consider locally cartesian closed categories with a good notion of
cofibration and interval object, where cofibrations are closed under pullback and
finite union, and generating trivial cofibrations are given by the pushout product
of a cofibration with an endpoint inclusion. Formally, we state this as follows.
Let C be a locally cartesian closed category with all finite colimits. We assume
we are also given a class of maps whose elements we call cofibrations and an interval
object δ0 , δ1 : 1 → I. We use these to define the following classes of maps.

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

3

Definition 2.1.
(1) We say a map is a trivial fibration if it has the right lifting
property against every cofibration.
ˆ
(2) We say a map is a fibration, if it has the right lifting property against δ0 ×m
ˆ for every cofibration m.
and δ1 ×m
(3) We say an object X is fibrant if the unique map X → 1 is a fibration.
(4) We say an object X is cofibrant if the unique map 0 → X is a cofibration.
(5) We say a map is a trivial cofibration if it has the left lifting property against
every fibration.
We assume throughout that all of the following conditions are satisfied.
(1)
(2)
(3)
(4)
(5)
(6)

We assume that cofibrations are closed under pullback.
We assume that cofibrations are closed under binary unions.
We are given connections on I as defined in [26].
We assume δ0 and δ1 are disjoint as subobjects of I.
We assume that δ0 and δ1 are cofibrations.
We assume that cofibrations and trivial fibrations together form a weak
factorisation system.
(7) We assume that for every map X, the map 0 → X is a cofibration. That
is, every object is cofibrant.
There are two main ways to satisfy the requirement that every map factors as a
cofibration followed by a trivial fibration. One way is to assume that cofibrations
form a dominance on C, which is the case if the remaining Orton-Pitts axioms are
assumed (this is the approach taken by Van den Berg and Frumin). The other way
is to assume cofibrations are the left class in a cofibrantly generated wfs, generated
using a version of the small object argument. This could be an approach using
external transfinite colimits, such as Garner’s small object argument [7], but could
also be an internal version such as the one developed by the author in [23].
We require that path objects are, by definition, constructed using exponentiation
with the interval, as defined below.
Definition 2.2. Given any object X, we define the path object on X, to be the
X
object X I (which we will also denote P X) together with the maps rX , pX
0 and p1 ,
X
I
1 ∼
X
are
given
by
where rX : X → X I is the constant map, and pX
,
p
:
X
→
X
=
0
1
composition with δ0 and δ1 respectively.
The link between identity types in type theory and trivial cofibrations is one of
the key ideas in homotopy type theory. See for example the well known results of
Gambino and Garner in [5] or Awodey and Warren in [2]. In order for path objects
to be used as identity types along these lines it is necessary for rX to be a trivial
cofibration. We focus on the condition that rX is just a cofibration, which of course
follows from the assumption that rX is a trivial cofibration1.
Definition 2.3. We say path types are identity types if for every fibrant object X,
the map rX is a cofibration.
Recall that P can be extended to a fibred functor over cod as follows.
Given a map f : X → Y , we define P (f ) to be given by the pullback below,
where the bottom map Y → P (Y ) corresponds to the projection Y × I → Y under

1In fact with a little work one can show the converse also holds, but we don’t need that here,

since we are not constructing identity types but giving conditions that imply path objects are not
identity types.

4

ANDREW W SWAN

the adjunction.
P (f )✤
❴

/ P (X)


Y


/ P (Y )

When f is clear from the context, we will also write P (f ) as PY (X). One can
further define maps rf : X → Y , pf0 : PY (X) → X and pf1 : PY (X) → X to produce
a factorisation of the diagonal map ∆ : X → X ×Y X in the slice category C/Y .
Note that for Y = 1, PY (X) is just P X.
For some of our results, including the main theorem, we will need a notion of
propositional truncation. For this, we use the definitions below.
Definition 2.4. We say f : X → Y is an hproposition if it is a fibration and the
map PY (X) → X ×Y X is a trivial fibration.
We state below what it means for C to have propositional truncation, although
technically we will never require this to hold for C itself. Instead we will assume
that small maps are closed under propositional truncation, in a sense that we will
define later (definition 4.3).
Definition 2.5. We say C has propositional truncation if every fibration f : X → Y
factors as follows, where g is an hproposition and i has the left lifting property
against every hproposition.
f
/Y
X❈
❈❈
④=
④
❈❈
④④
❈
④④g
i ❈❈
④
④
!
kXk

We note that the axioms suffice to check a few basic propositions.
Proposition 2.6. Every trivial cofibration is a cofibration.
Proof. It suffices to show that every generating trivial cofibration is a cofibration.
ˆ is a cofibration.
That is, for every cofibration m : A → B, and for i = 0, 1, δi ×m
ˆ can be viewed as a union of cofibrations into
However, the pushout product δi ×m
B × I, and we assumed that cofibrations are closed under finite union.

Proposition 2.7. Every trivial fibration has a section.
Proof. This easily follows from the assumption that every object is cofibrant.



Recall from [26, Section 3.1] that I can be used to define a notion of homotopy
and so also homotopy equivalence, as well as the stronger notion of strong homotopy
equivalence.
Proposition 2.8. A fibration f : X → Y between fibrant objects X and Y is a
trivial fibration if and only if it is a strong homotopy equivalence.
Proof. See [26, Proposition 4.1]



Proposition 2.9. Every map between fibrant objects factors as a homotopy equivalence followed by a fibration.
Proof. See [26, Proposition 4.3].



Proposition 2.10. Dependent products preserve fibrations.
Proof. See [26, Proposition 4.5].



SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

5

Proposition 2.11. Every object is a subobject of a fibrant object.
Proof. Given an object X, we factorise the map X → 1 as a cofibration followed
by a trivial fibration, to get X → X ′ → 1, where the map X → X ′ is a cofibration
and in particular a monomorphism and the map X ′ → 1 is a trivial fibration, and
so in particular a fibration.

Proposition 2.12. Hpropositions are closed under arbitrary pullbacks.
Proof. This follows from the fact that path types, fibrations and trivial fibrations
are closed under pullbacks.

Proposition 2.13. If f : X → Y is an hproposition and has a section then it is a
trivial fibration.
Proof. Let s : Y → X be a section of f and let t : X ×Y X → PY X be a section
of the map PY X → X ×Y X. We exhibit f as a retract of the trivial fibration
pf1 : PY (X) → X, which shows it is also a trivial fibration.
X

h1X ,s◦f i

/ X ×Y X

/ PY X

pf0

/X

pf1

f


Y

t

s


/X

f

f


/Y


Lemma 2.14. Suppose we are given two monomorphisms m0 : A0 → B and m1 : A1 →
B, with at least one of m0 and m1 a cofibration, and an hproposition f : X → B
together with two maps t0 and t1 in the following commutative diagram.
X
⑥> `❆❆❆
❆❆t1
⑥⑥
⑥
f
❆❆
⑥⑥
❆
⑥⑥

A0 m0 / B o m1 A1
t0

Write the union of m0 and m1 as m : A0 ∪ A1 → B.
Then there is a map t : A0 ∪ A1 → X making the following diagram commute.
X
✈;
✈
✈
t ✈
✈
f
✈✈

✈✈
/B
A0 ∪ A1 m
Proof. Without loss of generality say that m0 is a cofibration.
First, observe that the result would be trivial if we knew that t0 and t1 agreed
on A0 ∩ A1 . We therefore aim to produce a new map t′1 ensuring that t0 and t′1
agree on A0 ∩ A1 .
If we pullback f along m1 , then the resulting map m∗1 (f ) : m∗1 (X) → A1 is
also an hproposition, and using t1 we can show it has a section. We deduce by
proposition 2.13 that it is a trivial fibration. Furthermore, observe that the inclusion
ι1 : A0 ∩ A1 → A1 is a pullback of m0 , and so a cofibration. We will define a lifting
problem of ι1 against m∗1 (f ). Let t¯0 : A0 ∩ A1 → m∗1 (X) be the pullback of t0
along m1 , so that if π0 : m∗1 (X) → X is one of the projections in the pullback then

6

ANDREW W SWAN

π0 ◦ t¯0 = t0 ◦ ι0 . Then let j be a diagonal filler in the following diagram.
A0 ∩ A1
ι1


A1

t¯0

j

/ m∗1 (X)
9
m∗
1 (f )


A1

We then define t′1 to be π0 ◦j. One can then verify that f ◦t′1 = m1 and t′1 ◦ι1 = t0 ◦ι0 ,
and we can now easily define the required t using the universal property of the
union.

Proposition 2.15. Let X be an object of C. The following are equivalent.
(1) The map rX : X → X I is an isomorphism.
(2) The map rX : X → X I is a regular epimorphism.
(3) The statement “every function I → X is constant” holds in the internal
language of C.
Proof. Note that rX is a split monomorphism in any case (with retraction X δ0 ). It
follows that 1 and 2 are equivalent.
Showing 2 and 3 are equivalent is straightforward.

Definition 2.16. We say an object X is discrete if one of the equivalent conditions
in proposition 2.15 holds.
Proposition 2.17. Let X be an inhabited object of C. The following are equivalent.
(1) The constant function map 2 → 2X is an isomorphism.
(2) The constant function map 2 → 2X is an epimorphism.
(3) The statement “all functions from X to 2 are constant” holds in the internal
language.
(4) (When C has a subobject classifier) the following statement holds in the
internal language “if U and V are disjoint subobjects of X such that X =
U ∪ V , then either X = U or X = V .”
Definition 2.18. We say an inhabited object X is connected if one of the equivalent
conditions in proposition 2.17 holds.
Proposition 2.19.
(1) If X has decidable equality and the interval is connected, then X is discrete.
(2) If X is discrete and Y is any object, then X Y is discrete.
(3) If X is discrete and m : Z ֌ X is a subobject then Z is discrete.
(4) If C is a category of presheaves over a category C, the interval is representable and C has finite products then every constant presheaf is discrete.
(5) Every map between discrete objects is a fibration.
Proof. 4 was already observed by Uemura in [24, Proposition 4.7]. The rest are
straightforward.

Finally we recall the following notions of ¬¬-stability, density and separation.
Definition 2.20. Let m : X → Y be a monomorphism in a category C. We say m
is ¬¬-stable if the following statement holds in the internal language of C.
∀y ∈ Y, ¬¬(∃x ∈ X, m(x) = y) → (∃x ∈ X, m(x) = y)
We say m is ¬¬-dense if the following statement holds in the internal language.
∀y ∈ Y, ¬¬(∃x ∈ X, m(x) = y)

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

7

We say an object X is ¬¬-separated if the diagonal map X → X ×X is ¬¬-stable,
or equivalently, if the following statement holds in the internal language.
∀x, y ∈ X, ¬¬(x = y) → x = y
Suppose C is a category of internal presheaves over an internal category C in a
locally cartesian closed category E. We say a monomorphism m in C is pointwise
¬¬-stable if the underlying map in E/ Ob(C) is ¬¬-stable, or equivalently if the
following statement holds in the internal language of E: for every object c of C, mc
is ¬¬-stable. We similarly define pointwise ¬¬-dense and pointwise ¬¬-separated.
3. Cofibrations when Path Types are Identity Types
In this section we will use the assumption that path types are identity types to
show that certain maps are cofibrations.
Lemma 3.1. Suppose that I is connected. Suppose that C possesses a natural
number object N. Suppose that path types are identity types. Then the map 1 → 2N
given by λx.λn.0 is a cofibration.
Proof. First, note that I is not necessarily fibrant, but we can embed it in a fibrant
object Ĩ using proposition 2.11. Write ι for the inclusion I → Ĩ.
Since I is connected, N is fibrant. Since dependent products preserve fibrations,
N
N
Ĩ is also fibrant. Hence by the assumption that path types are identity types, rĨ
is a cofibration. We will show that the map 1 → 2N is a cofibration by exhibiting
N
it as a pullback of rĨ .
We define the map e : 2N → (ĨN )I as below.
(
ι(0) α(n) = 0
e(α)(i)(n) =
ι(i) α(n) = 1
N

To check that λx.λn.0 is a pullback of rĨ along e, it suffices to show, in the
internal logic of C, that for all α ∈ 2N , α = λn.0 if and only if e(α) lies in the image
N
of rĨ , which is the case if and only if e(α) is constant as a function I → ĨN .
It is easy to check that e(λn.0) is constant. Hence we just show the converse,
that if e(α) is constant then for all n ∈ N, α(n) = 0.
So suppose that α ∈ 2N and e(α) is constant. Let n be an element of N. We
know that α(n) = 0, or α(n) = 1, so to show that α(n) = 0 it suffices to show
that α(n) 6= 1. Suppose that α(n) = 1. Since e(α) is constant, for all i, i′ ∈ I we
have e(α)(i)(n) = e(α)(i′ )(n), and so ι(i) = ι(i′ ). In particular, applying this to
the endpoints 0 and 1, we have ι(0) = ι(1) and so 0 = 1 since ι is monic. But then
we get a contradiction by the disjointness of the endpoints. We have now shown
α(n) 6= 1, and so α(n) = 0. This applies for arbitrary n, and so α = λn.0.

We next show that if we have exact quotients then we can in fact show that all
monomorphisms are cofibrations. This doesn’t apply in presheaf assemblies, but
does work for the usual definition of presheaves and in fact for any Π-pretopos.
Theorem 3.2. Suppose that C is a Π-pretopos (i.e. C has exact quotients) and
path types are identity types. Then any monomorphism is a cofibration.
Proof. Let m : A → B be any monomorphism. We need to show it is a cofibration.
Working in the internal logic of C, we define an equivalence relation on I × B.
Given (i, b) and (i′ , b′ ) in I × B, we set (i, b) ∼ (i′ , b′ ) if b = b′ and either i = i′
or m−1 ({b}) is inhabited. It is straightforward to verify that this is an equivalence
relation.
By proposition 2.11 there exists a fibrant object X such that I × B/∼ is a
subobject of X. Say ι : I × B/∼ → X is the subobject inclusion.

8

ANDREW W SWAN

We define e : B → X I to be the map that sends each b ∈ B to λi.ι([(i, b)]).
Now, still reasoning internally in C, we show that for each b ∈ B, m−1 ({b}) is
inhabited if and only if e(b) lies in the image of rX .
Suppose first that m−1 ({b}) is inhabited. Then for any i, i′ ∈ I, we have [(i, b)] =
′
[(i , b)]. Hence e(b) = λi.ι([(i, b)]) is a constant function, and so lies in the image of
rX .
Conversely, suppose that e(b) = λi.ι([(i, b)]) lies in the image of rX . Then it is a
constant function, and in particular we have ι([(0, b)]) = ι([(1, b)]), where 0 and 1 are
the images of δ0 and δ1 respectively. Since ι is monic, we deduce [(0, b)] = [(1, b)].
Since quotients are exact, we now have (0, b) ∼ (1, b), and so either 0 = 1, or
m−1 ({b}) is inhabited. But we assumed the endpoints are disjoint and so we do
have that m−1 ({b}) is inhabited as required.
Since rX is monic, we can now deduce that e fits into a pullback diagram as
below.
/X
A ✤
❴
m


B

rX

e


/ XI

This witnesses m as a pullback of the cofibration rX , and so is itself a cofibration,
as required.

4. Cofibrations and Univalent Universes
We specialise to the case where C is a category of internal presheaves. That is,
we fix a locally cartesian closed category E with all finite colimits and an internal
category C in E. We then take C to be the category of internal presheaves over C.
We will follow the convention that C is non trivial, in the sense that C has at least
one object.
Definition 4.1. Suppose we are given a map El: Ũ → U . We say a map f : X → Y
is U -small if it is a pullback of El along a map g : Y → U . We will refer to such a
g as a classifying map for f .
Definition 4.2. We say El : Ũ → U is a universe if the following hold.
(1) Every isomorphism is U -small.
(2) U -Small maps are closed under composition.
(3) U -Small maps are closed under dependent product.
(4) U -Small maps are closed under pairwise coproduct.
(5) U -Small maps are closed under mapping path spaces.
We say a universe El : Ũ → U is a homotopical universe if in addition to the
above, we have the following.
(1) El is a fibration (or equivalently every U -small map is a fibration).
(2) U is fibrant.
Definition 4.3. We say a homotopical universe U is closed under propositional
truncation if every U -small fibration f factors as a map with the left lifting property
against all hpropositions followed by a U -small hproposition.
We will often view El : Ũ → U as a family of types El(x) indexed by the elements
x of U .
Note that using path objects and dependent products, we can translate one
of the definitions of equivalence from type theory (as appear for instance in [25,
Chapter 4]) into the formulation we are using here. We write Equiv(X, Y ) for the
object of equivalences from X to Y . Observe that for any of the usual definitions

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

9

it is straightforward to show that every isomorphism is an equivalence. We use
Equiv(X, Y ) to define univalence as follows.
Definition 4.4. We say a homotopical universe El: Ũ → U is univalent if the first
projection ΣX:U ΣY :U Equiv(X, Y ) → U is a trivial fibration.
Remark 4.5. In any case ΣX:U ΣY :U Equiv(X, Y ) → U is a fibration by our other
conditions. Hence by proposition 2.8 it is a trivial fibration if and only if the statement that it is contractible holds in the model. This is equivalent to the univalence
axiom holding in the model.
Definition 4.6. We fix a map u : 1 → U such that the following is a pullback, and
refer to it as the unit type.
/ Ũ
1 ✤
❴

1

u


/U

When C is a category of (possibly internal) presheaves over a category C we use
the following notation. Since u is a global section of the presheaf U , we can think
of it as a choice of elements u(c) for each object c in the category C.
We clearly have the following proposition.
Proposition 4.7. Suppose that f : X → Y is a pullback of El : Ũ → U along a map
of the form u◦!Y , where !Y is the unique map Y → 1. Then f is an isomorphism.
Lemma 4.8. Let C be a category of internal presheaves in a locally cartesian
closed category with finite colimits and disjoint coproducts. Suppose we are given
a univalent universe El : Ũ → U and two maps m0 : A0 → B and m1 : A1 → B
satisfying the following conditions.
(1) U is pointwise ¬¬-separated.
(2) U is closed under propositional truncation.
(3) Both m0 and m1 are cofibrations.
(4) B is discrete.
(5) A0 , A1 and B are U -small (but note that A0 ∪ A1 does not need to be
U -small).
Write m for the union A0 ∪ A1 → B.
Then m is pointwise ¬¬-stable.
Proof. We first note that since B is discrete, the subobjects A0 and A1 must be
too. Since m0 and m1 are both maps between discrete objects they are fibrations
themselves. However, we still need to show that they are small fibrations. We first
replace each Ai with the mapping path space, which we view as a small fibration
A′i → B. Explicitly, we can define A′i as types internally in type theory with the
following definition (where the equality is implemented using path types).
A′i (b) := Σa:Ai mi (a) = b
This gives well defined small fibrations since B and Ai are small types, and universes
are closed under path types. We now note that since B is discrete, we in fact have
A′i ∼
= Ai for i = 0, 1, and so each mi is a small fibration.
We avoided assuming that A0 ∪ A1 is small. We note however, that the “homotopy union” of A0 and A1 is necessarily small, since U is closed under coproducts and propositional truncation. Explicitly, we define another small fibration
f : C → B using the definition below.
C(b) := kA0 (b) + A1 (b)k

10

ANDREW W SWAN

Let γ : B → U be a classifying map for f .
Since cofibrations are closed under unions, m is a cofibration. Since U is univalent
the map πX : ΣX:U ΣY :U Equiv(X, Y ) → U is a trivial fibration. We will aim to
define a lifting problem of m against πX , as illustrated below.
A0 ∪ A1
(1)

α

/ ΣX:U ΣY :U Equiv(X, Y )
5

m

πX

j


B


/U

γ

We take the bottom map B → U to be γ, which we recall was a classifying map
for the small fibration f : C → B.
The next step is to construct the top map α of the lifting problem, which needs
to map from A0 ∪ A1 to ΣX:U ΣY :U Equiv(X, Y ). Note that this amounts to constructing maps ξ, ζ : A0 ∪ A1 → U together with an equivalence e over A0 ∪ A1
between ξ ∗ (Ũ ) and ζ ∗ (Ũ ). First note that in order for the lifting problem to be a
commutative square, we are forced to take ξ to be γ ◦ m.
The key to the proof is that we define ζ to be u◦!A0 ∪A1 . Informally, the Y
component of the map from A0 ∪ A1 to ΣX:U ΣY :U Equiv(X, Y ) is constantly equal
to the unit type.
It still remains to construct the equivalence e. Since the definition of equivalence
does not require defining small types we no longer need to work “inside U .” Therefore, as we stated above, it suffices to construct an equivalence in C over A0 ∪ A1
between m∗ (f ) and the identity on A0 ∪ A1 . Note that it suffices to show that the
map m∗ (f ) : m∗ (C) → A0 ∪ A1 is a strong homotopy equivalence. Hence by proposition 2.8 it suffices to show it is a trivial fibration. Recall that we constructed
f : C → B by interpreting the type kA0 (b) + A1 (b)k, which is an hproposition.
Hence the pullback m∗ (f ) is also an hproposition. Therefore to show it is a trivial
fibration, it suffices by proposition 2.13 to show it has a section.
We clearly have maps ti for i = 0, 1 in the following commutative diagram.
kA0 + A1 k
:
tt
t
t
t
t
tt

tt
/B
Ai
mi
ti

Hence by lemma 2.14 there exists a map t making the following diagram commute.
kA0 + A1 k
qq8

t qqq

qq
qqq

A0 ∪ A1

m


/B

However, we now have the required section, and so we do have a well defined map
α : A0 ∪ A1 → ΣX:U ΣY :U Equiv(X, Y ) such that πX ◦ α = γ and πY ◦ α = u◦!A0 ∪A1 .
Let j be a diagonal filler as in (1).
We now use all of this to show m is locally ¬¬-stable. We recall that we are
working in a category of presheaves over a category E and switch to the internal
logic of E. Let c be an object of C and let b ∈ B(c). Suppose that m−1
c (b) is not
empty. We need to show that it is inhabited.
Note that if m−1
c (b) was inhabited, then the upper triangle in the lifting diagram
would imply that πY (jc (b)) = u(c). We can therefore deduce that πY (jc (b)) is not
not equal to u(c). However, we can now apply the fact that U is pointwise ¬¬separated to show that in fact πY (jc (b)) is equal to u(c). Furthermore, for all

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

11

σ : c′ → c in C, we have that m−1
c′ (B(σ)(b)) is not empty, and so we similarly can
show that πY (jc′ (B(σ)(b))) is equal to uc′ (B(σ)(b)). Therefore, if b̄ : yc → B is
the map corresponding to b under Yoneda, then the composition πY ◦ j ◦ b̄ factors
through the unit type u : 1 → U . Hence the pullback of Y along b̄ is an isomorphism.
Furthermore, we can pullback the equivalence to obtain an equivalence between
b̄∗ (Y ) and b̄∗ kA0 + A1 k. We deduce that b̄∗ kA0 + A1 k has a section. This gives us
an element of kA0 + A1 k(c) in the fibre of b.
It only remains to show how to derive from this an element of A0 ∪ A1 (c) in
the fibre of b. It suffices to construct a map from kA0 + A1 k to A0 ∪ A1 over B.
Since m : A0 ∪A1 → B is a map between discrete objects, it is a fibration, albeit not
necessarily small. Since it is a monomorphism and a fibration, it is an hproposition.
Hence we can obtain the required map as a filler in the following lifting problem.
A0 + A1
|−|


kA0 + A1 k

/ A0 ∪ A1
8
m


/B


We now give another, similar result, which allows us to replace the assumption
that U is ¬¬-separated with the much weaker requirement that it possesses a weakly
¬¬-stable unit, which we define below. However, for the second result we will
require some other conditions, including the existence of exact quotients and that
small maps are closed under quotients. We will further assume that the universe is
“Hofmann-Streicher” in a sense that we will also define below.
Definition 4.9. Let V be a universe in E. A weakly ¬¬-stable unit is a map
z : 1 → V such that the following holds in the internal logic of E.
(1) El(z) has exactly one element.
(2) For all x ∈ V , if ¬¬(x = z), then El(x) has at most one element.
A key idea is that although the definition of weakly ¬¬-stable unit still sounds
a little strong when working in intuitionistic logic, it does hold in constructive
set theory, using the axiom of extensionality. An earlier version of this idea is
mentioned by Orton and Pitts in [16, Remark 8.7].
Lemma 4.10. Work over CZF + Inacc, take E to be the category of sets, and V
to be an inaccessible set. Then V has a weakly ¬¬-stable unit.
Proof. We take z to be the small set {∅} (which is the usual implementation of
the terminal object in Set anyway). Suppose that x is a (small) set and that the
double negation of x = z holds. Now let y be any element of x. Suppose that y
contains an element w. Then y 6= ∅, and so y ∈
/ z. Hence x 6= z by extensionality,
contradicting the double negation of x = z. But we have now shown that every
element y of x is empty, and so x is a subset of {∅}. We can now deduce that x has
at most one element, as required.

We note furthermore that there is another example of a weakly ¬¬-stable unit
in the effective topos, or more generally any realizability topos. In [20, Section 3],
Streicher observed that one can construct universes in realizability toposes using
ideas developed by Awodey, Butz, Simpson and Streicher in [1], as follows.
Assuming the existence of an inaccessible ordinal κ one can obtain a set sized
version of McCarty’s model of IZF from [15] by truncating the definition of V (A)
at level κ. Streicher then makes this into an object Mc(A) of the realizability topos
using the same definition of equality as used in set theory to obtain a universe.

12

ANDREW W SWAN

Lemma 4.11. For any pca A, the universe Mc(A) defined above possesses a weakly
¬¬-stable unit.
Proof. Since Vκ (A) is a model of set theory, we can carry out exactly the same
argument as in lemma 4.10 internally in the model. Since the definition of equality
in the topos is the same as in the set theoretic model, this shows that this does give
a weakly ¬¬-stable unit in the topos.

As before, we will exploit the fact that we are working in a category of presheaves.
Definition 4.12. Let U be a universe in C. We say a pointwise weakly ¬¬-stable
unit is a map u : 1 → U with the following property. In the internal logic of E we
have that for every c ∈ C and every x ∈ U (c), if ¬¬x = u(c) then El(c, x) has at
most one element.
Definition 4.13. If E has a universe V , recall that we can define the HofmannStreicher universe VC in C as follows. Given an object c of C,R we think of (VC )c
as being the collection of “small presheaves” on the category c yc, as defined by
Hofmann and Streicher in [9]. The action of morphisms is defined via composition.
Defining this internally in E takes a little care, but this has been done by Uemura
in [24, Section 4.1].
Definition 4.14. Let V be a universe in E. A homotopical Hofmann-Streicher
universe on V is a homotopical universe U together with a map i : U → VC with
the following property. Let χ : Y → VC be any map. Then χ factors through i if
and only if the pullback of El along χ is a fibration.
Remark 4.15. In [24], Uemura used techniques developed by Licata, Orton, Pitts
and Spitters in [13] to extend a Hofmann-Streicher universe in cubical assemblies
to a homotopical Hofmann-Streicher universe.
Lemma 4.16. Suppose that V has a weakly ¬¬-stable unit and U is a homotopical
Hofmann-Streicher universe on V . Then U has a pointwise weakly ¬¬-stable unit.
Proof. Suppose that u : 1 → V is a weakly ¬¬-stable unit in V . First note that VC
has a pointwise weakly ¬¬-stable unit u′ : 1 → VC defined as follows. In the internal
logic of E we need to define a map 1 → VC (c) for each object c of C. An element
of VC (c) consists first of a map Σd∈C hom(d, c) → V . We define each such map
to be constantly equal to u. We take the action on morphisms to be the identity
everywhere.
Next, note that the identity on 1 is an isomorphism and so a fibration, and so
u′ does factor through i : U → VC to give a map u′′ : 1 → U .
We finally need to check that u′′ is pointwise weakly ¬¬-stable. That is, we need
to show, in the internal logic of E, that for all c ∈ C and every x ∈ U (c), if ¬¬x =
u′′ (c) then El(x) has at most one element. First, note that if ¬¬x = u′′ (c), then
also ¬¬i(x) = u′ (c). It follows that for every d ∈ C, and every f : d → c, we have
¬¬i(x)(d, f ) = u. In particular we have ¬¬i(x)(c, 1c ) = u. Hence El(i(x)(c, 1c ))
has at most one element. But this is precisely the definition of El(i(x))(c).

Lemma 4.17. Suppose that C is a category of presheaves over an internal category
C in E and that all of the following hold.
(1) E (and so also C) has exact quotients.
(2) Every monomorphism in E is V -small.
(3) V -Small maps in E are closed under quotients.
(4) C has finite products.
(5) The interval object is representable.
(6) V has a weakly ¬¬-stable unit.

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

13

(7) C has a univalent universe on V .
If m : A → B is a monomorphism in E, B and m are small and ∆(m) is a
cofibration then m is ¬¬-stable.
Proof. For each b ∈ B, we define an equivalence relation on 2, by taking i ∼ j if
either i = j or m−1 ({b}) is inhabited. Since V is closed under quotients and m is
small, the corresponding map f : B ×2/∼ → B is small. Note that ∆ sends V -small
maps to VC -small maps. We write C for ∆(B × 2/∼). Then ∆(f ) : C → ∆(B) is
VC -small.
By proposition 2.19, we see that maps in the image of ∆ are fibrations, and we
have in particular that ∆(f ) is a fibration. It is also small, and so we have a map
β : ∆(B) → U that fits in a pullback of the following form.
/ Ũ

∆(C)✤
❴
∆(f )

El


∆(B)

β


/U

As before, we next define a map α : ∆A → ΣX:U ΣY :U Equiv(X, Y ) that we will
use along with β to define a lifting problem.
Given a ∈ A, we need to define small types X(a) and Y (a), together with an
equivalence e between them. As before, we are forced to take X(a) to be β(m(a))
in order for the square to commute. We take Y (a) to be the pointwise weakly
¬¬-stable unit given by lemma 4.16. Note that since m−1 ({m(a)}) is (trivially)
inhabited, we must have quotiented together both of the elements in 2, and so
X(a) has exactly one element. Hence we have an isomorphism between X(a) and
the unit, and so in particular an equivalence. We take e to be that equivalence.
Now since ∆(m) is a cofibration by assumption, we have a diagonal filler j in
the diagram below.
∆(A)
(2)

∆(m)


∆(B)

/ ΣX:U ΣY :U Equiv(X, Y )
6
j

β


/U

We take y : ∆(B) → VC to be the composition of j with the projection to the Y
component followed by i : U → VC . We will write Y for the pullback of El along y.
Now let b ∈ B. We will deduce that m−1 ({b}) is inhabited from its double
negation. As before, note that if m−1 ({b}) is inhabited, then the upper triangle
of (2) implies that yc (b) is equal to 1 for all c ∈ C. Hence, if m−1 ({b}) is not not
inhabited, then yc (b) is not not equal to 1. Since 1 is weakly ¬¬-stable, we deduce
that if m−1 ({b}) is not not inhabited then Y (c, b) has at most one element for every
c ∈ C. Hence the pullback of Y along the map b̄ : yc → B is an hproposition. Since
the pullback of ∆(C) along b̄ is equivalent to the pullback of Y over yc, it is also
an hproposition, and so there must be a path between the points (b, [0]) and (b, [1])
in ∆(B × 2/∼). But since I is representable and C has finite products, ∆(B × 2/∼)
is discrete and so 0 and 1 are (strictly) identified in the quotient, and we deduce
by exactness of quotients that m−1 ({b}) is inhabited.

5. The Counterexamples
We now give the counterexamples. We first show that it is impossible to take
identity types to be path types in certain models of univalent type theory in presheaf
assemblies. We assume that the reader is familiar with standard definitions and

14

ANDREW W SWAN

results in realizability. See e.g. [27] for a good introduction. Recall that the lesser
limited principle of omniscience is defined as follows.
Definition 5.1. The lesser limited principle of omniscience (LLPO) states that
if α : N → 2 is a binary sequence such that α(n) = 1 for at most one n, then either
α(2n) = 0 for all n, or α(2n + 1) = 0 for all n.
Lemma 5.2. Suppose the following.
(1) E is a locally cartesian closed category with finite colimits and disjoint coproducts.
(2) C is a category of internal presheaves in E.
(3) C possesses a class of cofibrations and an interval satisfying our general
conditions.
(4) The interval object I in C is connected.
(5) C has a univalent universe U , satisfying the following
(a) N is U -small
(b) U is closed under propositional truncation.
(c) U is pointwise ¬¬-separated.
(6) Path types are identity types.
Then LLPO holds in the internal logic of E.
Proof. We aim to apply lemmas 3.1 and 4.8.
We define B to consist of those α(n) in 2N such that α(n) = 1 at most once.
Note that ∆ preserves exponentials, limits, colimits and the natural number object.
Hence ∆B is also a subobject of 2N in C and so discrete.
We define two subobjects A0 and A1 of B as below.
A0 := {α ∈ B | ∀n ∈ N, α(2n) = 0}
A1 := {α ∈ B | ∀n ∈ N, α(2n + 1) = 0}
Observe that ∆(A0 ) and ∆(A1 ) can both be written as pullbacks of the constant
map 1 → 2N , which is a cofibration by lemma 3.1, and so the inclusions are both
cofibrations.
We need to check that ∆(B), ∆(A0 ) and ∆(A1 ) are small. Since small maps are
closed under dependent products, composition and path types, we can implement
the types below as small fibrant objects, where equality is interpreted using path
types.
B ′ := Σα:2N Πn,m:N α(n) = 1 × α(m) = 1 → n = m
A′0 := Σα:2N Πn:N α(2n) = 0
A′1 := Σα:2N Πn:N α(2n + 1) = 0
Since all objects involved are discrete, the same definition applies whether we interpret these types “extensionally” (i.e. using the internal language of C in the usual
way) or “intensionally” (i.e. using the homotopical structure). Furthermore, as we
observed earlier ∆ preserves limits, exponentials and the natural number object,
and so we see that ∆(B), ∆(A0 ) and ∆(A1 ) are respectively isomorphic to B ′ , A′0
and A′1 , and therefore small.
We define A to be the union of A0 and A1 , with m the inclusion A ֒→ B. Since
∆ preserves unions and cofibrations are closed under unions, ∆(m) is a cofibration.
We can therefore apply lemma 4.8 to show that m is ¬¬-stable. However one
can check that LLPO precisely states that every element of B belongs to A, and
that A is ¬¬-dense in B. It follows that LLPO holds in E.


SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

15

Theorem 5.3. Let C be a category of presheaf assemblies over either of the pca’s
K1 or K2 . Assume the axiom of excluded middle in the meta theory. Then it is
impossible to satisfy all of the following conditions.
(1) C possesses a class of cofibrations and an interval satisfying our general
conditions.
(2) There is a univalent universe containing N and closed under propositional
truncation.
(3) The interval object I in C is connected.
(4) Path types are identity types.
Proof. It is well known that in categories of assemblies every object is ¬¬-separated,
as long as we assume excluded middle in the meta theory (see e.g. [27, Section
3.1]). Hence any object in a category of internal presheaves over assemblies is
pointwise ¬¬-separated. In particular this applies to any universe. It is also well
known that LLPO fails in assemblies over K1 and over K2 . For example, Richman
proved in [18, Theorem 5] that in the presence of countable choice a weak form of
LLPO is not consistent with Church’s thesis. However, both Church’s thesis and
countable choice hold in the effective topos. A similar argument applies in function
realizability (i.e. realizability over K2 ); see e.g. the proof of [17, Corollary 7.23].
We apply lemma 5.2.

We now turn to examples based on exact categories, specifically ordinary presheaves
and internal presheaves in realizability toposes.
Theorem 5.4. Let Inacc be the axiom that every set is an element of an inaccessible set (where we define inaccessible to include closure under subsets). We work
over IZF + Inacc.
Suppose that the following hold.
(1) We are given a small category C with finite products.
op
(2) The category of presheaves SetC has a class of cofibrations and an interval
satisfying our general conditions.
(3) The interval is representable.
(4) C possesses a univalent Hofmann-Streicher universe on an inaccessible set.
(5) Path types are identity types.
Then we deduce the law of excluded middle.
Proof. By lemma 4.10, any inaccessible set V has a weakly ¬¬-stable unit. Hence
by lemma 4.17 we see that if m is a monomorphism in Set and ∆(m) is a cofibration
then m is ¬¬-stable. However, by the assumption that path types are identity types
and theorem 3.2, all monomorphisms are cofibrations. Applying this to ∆(m) where
m is any monomorphism in Set, we deduce that every monomorphism in Set is
¬¬-stable. Excluded middle follows.

We now consider internal categories in realizability toposes. We first note that
realizability toposes are never boolean (except for the trivial case).
Lemma 5.5. Suppose that A contains two distinct elements x 6= y (we say A is
non trivial). Then RT(A) is not a boolean topos.
Proof. We need to show that ⊤ : 1 → 2 is not a subobject classifier, so it suffices to
find a monomorphism that is not a pullback of 1 → 2. Moreover, it suffices to show
this for the category Asm(A) of assemblies, since the inclusion from Asm(A) to
RT(A) is full, faithful and preserves finite limits. We consider the assembly X with
underlying set 2, and existence predicate given by E(0) = {x} and E(1) = {y}.
Then X is a subobject of ∇2. However, since A is non trivial we have 0 6= 1, by
a similar proof to [27, Proposition 1.3.1, part iii]). Therefore all maps from ∇2

16

ANDREW W SWAN

to 2 are constant, and clearly X is not the pullback along either of the constant
maps.

Theorem 5.6. There is no category C satisfying all of the following conditions.
(1) C is a category of internal presheaves over an internal category C in a
realizability topos RT(A) where A is non trivial.
(2) C has finite products.
(3) C has a class of cofibrations and interval object satisfying our general conditions.
(4) The interval object is a representable presheaf.
(5) C has a univalent homotopical Hofmann-Streicher universe on a McCarty
universe Mc(A).
(6) Path types are identity types.
Proof. By lemma 4.11, any McCarty universe Mc(A) has a weakly ¬¬-stable unit.
We deduce by lemma 4.17 that for every monomorphism m in RT(A), if ∆(m) is
a cofibration then m is ¬¬-stable. However, by the assumption that path types
are identity types and theorem 3.2 all monomorphisms are cofibrations. Hence all
monomorphisms in RT(A) are ¬¬-stable, including the subobject classifier 1 → Ω,
and so we deduce the law of excluded middle, contradicting lemma 5.5.

Remark 5.7. All of the results for internal presheaves apply in particular to the
degenerate case where the internal category is trivial. In this case, for instance,
pointwise ¬¬-separated is the same as ¬¬-separated, whereas in general it is usually
weaker. Also note that in this case the Hofmann-Streicher universe on V is V itself.
Hence we see that in the Van den Berg-Frumin model of function extensionality in
the effective topos there is no way to extend a McCarty universe to a univalent one.
This of course leaves open the possibility of constructing univalent universes that
are not based on a McCarty universe. One such possibility is to find a constructive
version of the definition by Shulman in [19, Section 3].
6. Cofibrations in Homotopy Type Theory
Although technically the results so far are specific to Orton-Pitts models of type
theory, they illustrate ideas that might turn out to be more widely applicable. In
particular the use of ¬¬-separation in presheaf assemblies matches up well with
definitional equality in type theory. In assemblies the ¬¬-stable propositions are
those that are “free of computational information.” That is, we don’t need to be
told a particular realizer to show they are realized; we can guess a realizer uniformly
and if they are true then the realizer works. Meanwhile equality in the underlying
category is used to implement definitional equality in type theory. This is something
that should be “free of computational information,” in the sense that we don’t need
a proof term to exist to show two terms are definitionally equal. We are (or perhaps
should be) able to work out whether two terms are are equal or not just by looking
at the terms themselves without being given any extra computational information.
We will use this idea to show that there is a purely type theoretic version of the
construction used in lemma 4.8. We will use this to give interesting proofs of some
minor results regarding the syntactic category of homotopy type theory. This also
suggests that in future work it may be possible to obtain a syntactic version of the
main theorem (as will be discussed further in the conclusion).
We work over homotopy type theory as defined in [25]. Recall that we can use
the syntax of type theory to define a category that is referred to as the syntactic
category or classifying category. As shown by Lumsdaine in [14], building on the
results of Gambino and Garner [5], one can define a notion of cofibration in the
syntactic category of type theory, and in the presence of suitable higher inductive

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

17

types one in fact gets a model structure. We define display maps to be maps of the
form Γ.X → Γ. We then define trivial cofibrations to be maps with the left lifting
property against display maps and cofibrations to be maps with the left lifting
property against those display maps Γ.X → Γ where there is a term witnessing
that X is contractible.
Following the notation in [25] we write U for the universe of small types and ∗
for the unique element of the unit type 1 : U . We will follow the convention of using
the half adjoint definition of equivalence. Hence a term witnessing the equivalence
is a tuple containing maps in both directions as components (in addition to the
terms witnessing that the maps are mutually inverse and the half adjoint coherence
term).
In order to state the results that follow, we define the notion of canonical map
in the syntactic category type theory.
Definition 6.1. We say a map σ : ∆ → Γ in the syntactic category is canonical
if for every map τ : Ξ → Γ we can effectively decide whether or not there exists a
map µ in the diagram below.
Ξ❄
❄❄
❄❄τ
µ
❄❄
❄

∆ σ /Γ
Moreover, if µ exists then it is unique and we can find it effectively.
Proposition 6.2. If σ : ∆ → Γ is canonical then it is a monomorphism.
Proof. This follows from the uniqueness condition in the definition of canonical. 
We now give our syntactic version of lemma 4.8.
Lemma 6.3. Let m : Γ.A → Γ.B be a cofibration over Γ. Then there is a raw term
r whose only free variables either belong to Γ or are equal to a fresh variable y such
that for any context ∆, any σ : ∆ → Γ and any terms a and b with ∆ ⊢ a : A[σ],
∆ ⊢ b : B[σ] and ∆ ⊢ m[σ][x/a] ≡ b, we have the following.
(3)

∆ ⊢ r[σ][y/b] : kΣx:A[σ] m = bk

(4)

∆ ⊢ r[σ][y/b] ≡ |(a, reflm[x/a] )|

Proof. Write C for the type kΣx:A m = yk. Then we have the valid judgement y :
B ⊢ C(y) : U . Note that if we reindex along m, we get the type x : A ⊢ C[y/m] : U .
In any case C is an hproposition, and in context x : A we can clearly construct
an inhabitant |(x, reflm(x) )| of C[y/m(x)]. Hence in context x : A, C[y/m] is
contractible and so we can construct a term witnessing that C[y/m] is equivalent
to the unit type 1 : U . We take the component witnessing the map 1 → C[y/m] to
be λz.(x, reflm(x) ). We omit writing out the other components of the equivalence.
Since m is a cofibration by assumption, we can deduce by univalence that there
is a type D with Γ, y : B ⊢ D : U together with a term witnessing that D is
equivalent to C in context Γ, y : B. Explicitly, we use a diagonal filler in the lifting
problem below.
Γ.A

Γ.B

(C,λx.1,λz.|(x,reflm(x) )|)

C

/ ΣC:U ΣD:U Equiv(D, C)
3

/U

We write e for the component of the equivalence that witnesses the map D → C
and omit writing the other components of the equivalence. We will take r to be e∗.

18

ANDREW W SWAN

The upper triangle law for the diagonal filler tells us that when we reindex along
m we get the following definitional equalities.
Γ, x : A ⊢ D[y/m] ≡ 1 : U
Γ, x : A ⊢ e[y/m] ≡ λz.|(x, reflm(x) )| : 1 → C[y/m]
Substituting in σ and a we deduce the following.
(5)

∆ ⊢ D[σ][y/m[σ][x/a]] ≡ 1

(6)

∆ ⊢ e[σ][y/m[σ][x/a]] ≡ λz.|(a, reflm[x/a] )|

Using ∆ ⊢ m[σ][x/a] ≡ b we deduce the following.
(7)

∆ ⊢ D[σ][y/m[σ][x/a]] ≡ D[σ][y/b]

(8)

∆ ⊢ e[σ][y/m[σ][x/a]] ≡ e[σ][y/b]

We then combine (5) with (7) and (6) with (8) to get the following.
(9)

∆ ⊢ D[σ][y/b] ≡ 1

(10)

∆ ⊢ e[σ][y/b] ≡ λz.|(a, reflm[x/a] )|

From (9) we derive ∆ ⊢ ∗ : D[σ][y/b], and so we can derive the following judgement.
∆ ⊢ e[σ][y/b]∗ : C[σ][y/b]
But this is the same as (3).
From (10) we can derive the following.
∆ ⊢ e[σ][y/b]∗ ≡ |(a, reflm[x/a] )| : C[y/b]
But this is the same as (4).



Lemma 6.4. Suppose that we are given types A and B in a context Γ and a term
Γ, x : A ⊢ m : B. Suppose that the truncation map (Γ, y : B, Σx:A m = y) → (Γ, y :
B, kΣx:A m = yk) is canonical and that we have decidable type checking. Then the
map (1Γ , m) : Γ.A → Γ.B is canonical.
Proof. Suppose we are given a map τ : Ξ → Γ.B. Note that we can split up τ as
(σ, b) where σ : Ξ → Γ and Ξ ⊢ b : B[σ].
Let r be a raw term as in the statement of lemma 6.3. We first use decidable
type checking to decide whether the following judgement is valid.
Ξ ⊢ r[σ][y/b] : kΣx:A m[σ] = bk
If it is not valid we say there is no such term a satisfying the condition. If it is
valid, we continue.
Now using the assumption that the truncation map is canonical, we can effectively decide whether or not there exists a term c satisfying the following.
Ξ ⊢ c : Σx:A m[σ] = b
Ξ ⊢ r[σ][y/b] ≡ |c|
If the check returns false we say there is no such term a satisfying the condition. If
it is valid, then we can effectively find such a term c, and we continue.
We next use type checking to decide if the following judgement is valid.
Ξ ⊢ c ≡ (π0 c, reflm[σ][x/π0 c] )
If so, then we have found a suitable term taking a := π0 c, otherwise we say there
is no such term.
We now need to show that the term a is unique and that if any of the three
checks above returns false then there really is no such term a. It suffices for both to
show that if a is any such term then all the checks above return true, and that for

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

19

the resulting term c we have Ξ ⊢ a ≡ π0 c. So, let a be any term such that Ξ ⊢ a : A
and Ξ ⊢ m[σ][x/a] ≡ b.
Lemma 6.3 tells us that we have the judgements below.
Ξ ⊢ r[σ][y/b] : kΣx:A m[σ] = bk
Ξ ⊢ r[σ][y/b] ≡ |(a, reflm[σ][x/a] )|
Then the first judgement tells us that the first type check must have returned true.
Next, the two judgements together with canonicity for truncation tell us that the
second test must have returned true, and that for the resulting term c we have
Ξ ⊢ c ≡ (a, reflm[σ][x/a] ).
We can now deduce that Ξ ⊢ π0 c ≡ a, and that the final type check must have
also returned true, as required.

We will now use the lemma to prove a couple of minor results about canonical
maps. In each case, the result itself isn’t so interesting so much as that we can
prove them without using strong normalisation, or something similar.
The first result is analogous to the kind of construction that was very useful when
we were working semantically. Unfortunately, it is currently unclear if there are any
new non trivial examples of applications when working syntactically. However, we
do have the minor observation that coproduct inclusions are monic, in the sense
that if Γ ⊢ a, a′ : A and Γ ⊢ inl(a) ≡ inl(a′ ) : A + B then Γ ⊢ a ≡ a′ : A.
Theorem 6.5. Suppose that we have decidable type checking. Suppose that A and
B are types in context Γ, m is a term Γ, x : A ⊢ m : B, that we are given a term
witnessing that m is an embedding and that (1Γ , m) : Γ.A → Γ.B is a cofibration.
Then (1Γ , m) is canonical.
Proof. Since m is an embedding, by definition the type Σx:A m = y is an hproposition in context Γ, y : B. It easily follows that the truncation map Γ.B.Σx:A m =
y → Γ.B.kΣx:A m = yk has a retraction, and hence is canonical. We can now apply
lemma 6.4.

Theorem 6.6. Suppose that for all closed types A and B and maps between singleton contexts m : (A) → (B), the truncation map (y : B, Σx:A m = y) → (y :
B, kΣx:A m = yk) is canonical, and that we have decidable type checking.
Then for any closed types A and B, any cofibration m : (A) → (B) is canonical.
Proof. This is a special case of lemma 6.4 where we take Γ to be empty.



Similar results can be obtained from a well known theorem by Nicolai Kraus [12,
Section 8.4]. By a similar (but easier) argument to theorem 6.4 one can use Kraus’
result to show that if A is an inhabited transitive type and decidable type checking
holds, then the truncation map Γ.A → Γ.kAk is canonical. It is straightforward to
check that truncation maps are cofibrations, but it is also an instance of a general
principle by Lumsdaine [14], stating that point constructors of higher inductive
types are always cofibrations.
In fact the proof Kraus used applies not just to truncation maps, but to any cofibration, as long as the domain satisfies the requirement of having terms witnessing
it is transitive and inhabited. Hence a cofibration m : Γ.A → Γ.B is canonical
whenever A is transitive and inhabited, and in fact it follows that a cofibration is
monic whenever A is transitive (but not necessarily inhabited). For example, when
A is transitive and R is a binary relation on A, the set quotient map A → A/R is
always monic (but obviously not always “homotopy monic”).

20

ANDREW W SWAN

7. Conclusion
7.1. Towards a Proof that Path Types are not Identity Types. The results
here and in particular section 6, suggest that similar results might hold in general
in type theory with univalence. Roughly speaking I expect that in any type theory
with a notion of path type that behaves similar to an exponential, it is impossible
to simultaneously satisfy all three of the following requirements.
(1) Path types are definitionally isomorphic to identity types.
(2) Univalence and all the higher inductive types defined in [25] are derivable.
(3) The type theory has good computational properties such as strong normalisation, decidable type checking and canonicity.
Unfortunately, even formulating this statement precisely is a difficult task. For
example, to even give a good definition of what a type theory is in general remains
an area of active research. For this reason this doesn’t deserve to be called a
“conjecture;” sometimes the term “hypothesis” is used for such statements.
To be clear, even if the hypothesis is correct, it allows for consistent type theories
where any two of the three conditions are satisfied.
For example, cubical type theory as appears in [4] would be an example of a
type theory satisfying 2 and 3. In [10], Huber showed that cubical type theory does
satisfy canonicity and suggests that the technique could be extended to also show
the other good computational properties hold.
Earlier versions of cubical type theory that feature the regularity condition are
likely examples of theories satisfying 1 and 3.
One approach to obtaining a theory satisfying conditions 1 and 2 is to build
on work by Isaev in [11]. This contained a definition of a type theory coe1 + σ +
Path + wUA, with a built in notion of path type and coercion where coercion satisfies a computation rule denoted σ, akin to regularity, that allows one to implement
identity types as path types. It also satisfies a weak (but computationally meaningful) version of univalence, denoted wUA. However, no claim is made regarding
decidability of type checking, canonicity or strong normalisation.
7.2. Towards a Proof that Path Types are Identity Types. Although the
aim of this paper was towards finding counterexamples, we note that the hypothesis
in the previous section remains just a hypothesis and so could easily be false.
In particular, for each of the three examples satisfying only two of the conditions,
there is the possibility that the hypothesis can be falsified by showing that in fact the
third remaining condition does hold. Namely, one could show that the hypothesis
is false through any of the following.
(1) Showing that cubical type theory can be extended with extra computational
rules that allow us to use path types as identity types, while retaining its
good computational properties.
(2) Showing that in fact it is possible to construct a univalent universe in
cubical type theory with a regularity axiom.
(3) Showing that Isaev’s coe1 + σ + Path + wUA does have decidable type
checking, strong normalisation and canonicity, and moreover this remains
true if it is extended with a universe satisfying full univalence and with
higher inductive types.
References
[1] S. Awodey, C. Butz, A. Simpson, and T. Streicher. Relating first-order set theories, toposes
and categories of classes. Annals of Pure and Applied Logic, 165(2):428 – 502, 2014.
[2] S. Awodey and M. A. Warren. Homotopy theoretic models of identity types. Mathematical
Proceedings of the Cambridge Philosophical Society, 146:45–55, 1 2009.

SEPARATING PATH AND IDENTITY TYPES IN PRESHEAVES

21

[3] M. Bezem, T. Coquand, and S. Huber. A Model of Type Theory in Cubical Sets. In R. Matthes
and A. Schubert, editors, 19th International Conference on Types for Proofs and Programs
(TYPES 2013), volume 26 of Leibniz International Proceedings in Informatics (LIPIcs),
pages 107–128, Dagstuhl, Germany, 2014. Schloss Dagstuhl–Leibniz-Zentrum fuer Informatik.
[4] C. Cohen, T. Coquand, S. Huber, and A. Mörtberg. Cubical Type Theory: A Constructive Interpretation of the Univalence Axiom. In T. Uustalu, editor, 21st International Conference on
Types for Proofs and Programs (TYPES 2015), volume 69 of Leibniz International Proceedings in Informatics (LIPIcs), pages 5:1–5:34, Dagstuhl, Germany, 2018. Schloss Dagstuhl–
Leibniz-Zentrum fuer Informatik.
[5] N. Gambino and R. Garner. The identity type weak factorisation system. Theoretical Computer Science, 409(1):94 – 109, 2008.
[6] N. Gambino and C. Sattler. The frobenius condition, right properness, and uniform fibrations.
Journal of Pure and Applied Algebra, 221(12):3027 – 3068, 2017.
[7] R. Garner. Understanding the small object argument. Applied Categorical Structures,
17(3):247–285, 2009.
[8] Online
discussion
of
regularity
axiom
and
univalence.
Available
at
https://groups.google.com/d/msg/homotopytypetheory/oXQe5u_Mmtk/3HEDk5g5uq4J
(obtained 19/6/17).
[9] M. Hofmann and T. Streicher. Lifting Grothendieck universes. Available at
https://www2.mathematik.tu-darmstadt.de/~ streicher/NOTES/lift.pdf
(obtained
4/7/18), 1997.
[10] S. Huber. Canonicity for cubical type theory. Journal of Automated Reasoning, Jun 2018.
[11] V. Isaev. Model structures on categories of models of type theories. Mathematical Structures
in Computer Science, page 128, 2017.
[12] N. Kraus, M. Escardó, T. Coquand, and T. Altenkirch. Notions of Anonymous Existence in
Martin-Löf Type Theory. Logical Methods in Computer Science, Volume 13, Issue 1, Mar.
2017.
[13] D. R. Licata, I. Orton, A. M. Pitts, and B. Spitters. Internal Universes in Models of Homotopy Type Theory. In H. Kirchner, editor, 3rd International Conference on Formal Structures for Computation and Deduction (FSCD 2018), volume 108 of Leibniz International
Proceedings in Informatics (LIPIcs), pages 22:1–22:17, Dagstuhl, Germany, 2018. Schloss
Dagstuhl–Leibniz-Zentrum fuer Informatik.
[14] P. L. Lumsdaine. Model structures from higher inductive types. Available at
http://peterlefanulumsdaine.com/research/Lumsdaine-Model-strux-from-HITs.pdf.
[15] D. C. McCarty. Realizability and Recursive Mathematics. PhD thesis, Ohio State University,
1984.
[16] I. Orton and A. M. Pitts. Axioms for modelling cubical type theory in a topos. In J.-M.
Talbot and L. Regnier, editors, 25th EACSL Annual Conference on Computer Science Logic
(CSL 2016), volume 62 of Leibniz International Proceedings in Informatics (LIPIcs), pages
24:1–24:19, Dagstuhl, Germany, 2016. Schloss Dagstuhl–Leibniz-Zentrum für Informatik.
[17] M. Rathjen and A. W. Swan. Lifschitz realizability as a topological construction.
arXiv:1806.10047, June 2018.
[18] F. Richman. Polynomials and linear transformations. Linear Algebra and its Applications,
131:131–137, 1990.
[19] M. Shulman. The univalence axiom for elegant reedy presheaves. Homology, Homotopy and
Applications, 17(2):81–106, 2015.
[20] T. Streicher. Universes in toposes. Available at https://www2.mathematik.tu-darmstadt.de/~ streicher/NOTES/UniTop.pdf
(obtained 1/7/18), 2004.
[21] A. W. Swan. An algebraic weak factorisation system on 01-substitution sets: a constructive
proof. Journal of Logic and Analysis, 8, December 2016.
[22] A. W. Swan. Lifting problems in Grothendieck fibrations. arXiv:1802.06718, February 2018.
[23] A. W. Swan. W-types with reductions and the small object argument. arXiv:1802.07588,
February 2018.
[24] T. Uemura. Cubical assemblies and the independence of the propositional resizing axiom.
arXiv:1803.06649v2, April 2018.
[25] Univalent Foundations Program. Homotopy Type Theory: Univalent Foundations of Mathematics. http://homotopytypetheory.org/book, Institute for Advanced Study, 2013.
[26] B. van den Berg and D. Frumin. A homotopy-theoretic model of function extensionality in
the effective topos. arXiv:1701.08369, January 2017.
[27] J. van Oosten. Realizability: An Introduction to its Categorical Side, volume 152 of Studies
in Logic and the Foundations of Mathematics. Elsevier, 2008.

