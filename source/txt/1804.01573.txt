arXiv:1804.01573v3 [math.LO] 29 Sep 2018

A transfer principle for second-order arithmetic,
and applications
MERLIN CARL
ASGAR JAMNESHAN
In the theory of conditional sets, many classical theorems from areas such as
functional analysis, probability theory or measure theory are lifted to a conditional framework, often to be applied in areas such as mathematical economics or
optimization. The frequent experience that such theorems can be proved by ‘conditionalizations’ of the classical proofs suggests that a general transfer principle
is in the background, and that formulating and proving such a transfer principle
would yield a wealth of useful further conditional versions of classical results, in
addition to providing a uniform approach to the results already known. In this
paper, we formulate and prove such a transfer principle based on second-order
arithmetic, which, by the results of reverse mathematics, suffices for the bulk of
classical mathematics, including real analysis, measure theory and countable algebra, and excluding only more remote realms like category theory, set-theoretical
topology or uncountable set theory, see e.g. the introduction of [47]. This transfer
principle is then employed to give short and easy proofs of conditional versions
of central results in various areas of mathematics, including theorems which have
not been proven by hand previously such as Peano existence theorem, Urysohn’s
lemma and the Markov-Kakutani fixed point theorem. Moreover, we compare the
interpretation of certain structures in a conditional model with their meaning in a
standard model.
03C90,03F35; 28B20,54C65

1 Introduction
Fixing a probability space (Ω, F, P), one can distinguish between probabilistic and
deterministic objects such as a deterministic real number which is an element of R
and a random real number which is a measurable function x : Ω → R. Extending
such reasoning, one might speak of a ‘random’, ‘stochastic’, ’measurable’ or ‘conditional’ version of a ‘deterministic’, ‘classical’ or ‘standard’ theorem which expresses
a randomization of its statement. To illustrate, a conditional version of the BolzanoWeierstraß theorem states that for every sequence (xk ) of random real numbers such

2

M Carl and A Jamneshan

that x = lim sup xk < ∞ almost surely, there exists a strictly increasing sequence
n1 < n2 < . . . of integer-valued random variables such that xnk converges almost
surely to x. Experience has shown that many classical theorems have such conditional
analogues such as the Heine-Borel theorem, the Hahn-Banach extension and separation
theorems and the Brouwer fixed point theorem, see e.g. [10, 15, 18, 19, 36, 38] for an
account. It is thus tempting to aim for a general transfer principle that allows one to
‘import’ classical theorems into a conditional setting.
In section 3, we prove such a transfer principle based on second-order logic. Strong
arguments have been put forward in favor of the claim that second-order logic is
a satisfying formal framework for the bulk of classical mathematics, see e.g. the
introduction to [47]; and this was impressively confirmed by the results of reverse
mathematics. More precisely, we prove that any consequence of the second-order
axiomatic system of arithmetical comprehension ACA 0 , which has a second-order
comprehension axiom for formulas in which all quantifiers range over natural numbers
(see [47]), also holds conditionally. To this end, we show (i) that the axioms of ACA 0
hold in the structure with first order part L0 (N) and second-order part its conditional
power set P with truth value Ω, and (ii) that truth value Ω is preserved by the usual
deduction rules of second-order predicate calculus. To this end, a conditional element
relation between L0 (N) and P is introduced. We expect that, with a certain amount of
extra technical effort, this can be extended to a considerably stronger transfer principle
for full second-order logic.
In section 4, we then discuss consequences of the transfer principle. We verify that the
transfer principle yields a conditional version of a whole class of classical theorems
many of which were proved by hand previously1 . As new consequences, we obtain a
conditional version of the Peano existence theorem, Urysohn’s lemma, the existence
of an orthonormal basis and the Markov-Kakutani theorem.
A conditional version of a classical theorem is oftentimes also a theorem about a more
involved situation in a classical setting. For instance, the above conditional version
of the Bolzano-Weierstraß-theorem is also a classical theorem securing existence of
measurably parametrized almost surely converging subsequences of an almost surely
upper bounded sequence of real-valued measurable functions2 . We will systematically
investigate a standard interpretation of a conditional version of a classical structure or
1

The latter practice provides some useful insight into the transfer process.
In this classical form under the name of a ‘randomized’, ‘stochastic’ or ‘measurable’
version of the Bolzano-Weierstraß-theorem this statement is proved in [21, 39], motivated by
applications in mathematical economics.
2

Transfer principle

3

theorem in section 4. As a result, bridges to the analysis in L0 (R)-modules (e.g. [10, 19])
and set-valued analysis (e.g. [45]) are built.
We will be also interested in the reverse direction. Namely, it can be verified that certain
classical structures have a useful interpretation in a conditional model. For example,
the standard space L0 (R) of real-valued Borel measurable functions on a σ -finite
measure space (Ω, F, µ) modulo almost everywhere equality are the real numbers in a
conditional model. More generally, if E is a complete separable metric space and L0 (E)
is the space of E -valued Borel measurable functions on Ω modulo almost everywhere
equality, we show that L0 (E) can be identified with a complete separable metric space in
a conditional model of ACA 0 . The space L0 (E) reflects a measurable parametrization of
the elements of E relative to a base space (Ω, F, µ). Such a measurable parametrization
is a constituent part of a conditional model3 . From an external perspective, one may
view the transfer principle as a device which parametrizes classical theorems in a
measurable way relative to a fixed measure space. In particular, the application of a
conditional version of classical theorems preserves measurability, and thus provides an
alternative to uniformization theorems in descriptive set theory (see e.g. [40, 44, 45]),
whenever one restricts attention to almost everywhere Borel selections. For example,
we show that a maximum theorem in a conditional model is equivalent to a maximum
theorem for normal integrands. In particular, compact subsets of a Euclidean space in
a conditional model are uniquely related to compact-valued maps.
There is a practical interest in such model-theoretic results since the transfer principle is
a highly efficient tool which replaces the tedious work of proving by hand conditional
versions of classical results which are relevant in applications. Existing areas of
application include probability ([36]), mathematical economics ([3, 5, 8, 14, 20, 23,
24, 31, 39]), stochastic optimization ([9, 11, 37]), set-valued analysis and measurable
selection theory ([37, 38]), Lebesgue-Bochner spaces and vector duality ([17, 26]), and
probabilistic analysis ([27, 28, 29, 30, 38]).
Conditional set theory [15], which is used to build a ‘conditional’ model of ACA 0 ,
is conceptually closely related to Boolean-valued models and topoi of sheaves, see
[35]. In fact, a conditional model of ACA 0 is a Boolean-valued model of ACA 0 by
changing to the measure algebra associated to an underlying base space (Ω, F, µ). The
constructive approach of second-order arithmetic permits us to explore the semantics
in a Boolean-valued model, and through this understanding build a relationship to
structures and theorems in a standard model, and thus facilitate applications.
3

Therefore conditional models might equally be called ‘stochastic’ or ‘measurable’ models
of an axiomatic system.

4

M Carl and A Jamneshan

In [2], a categorical equivalence between conditional sets and a certain class of Booleanvalued sets is discussed. The correspondence is based on ZFC set theory rather than
second-order arithmetic. We believe that our transfer principle is of independent
interest, as (1) it is an explicitly formulated theorem; (2) second-order arithmetic
allows a more direct and convenient modeling of relevant mathematical notions than
set theory; for example, natural numbers and real numbers are treated as primitive
objects and not as complicated sets; (3) it is not argued in [2] how one can deduce
a transfer principle from a categorical equivalence and (4) the correspondence in [2,
Theorem 3.1] excludes local subsets which are necessary to prove a transfer principle
as shown in the proof of theorem 3.4 below.
The remainder of this paper is organized as follows. In section 2, we set up the stage and
collect relevant notions from conditional set theory. In section 3, we prove a transfer
principle for ACA 0 . In section 4, we discuss consequences and the applicability of the
transfer principle. We conclude by a discussion of potential extensions of the transfer
principle in section 5.

2 Preliminaries
In the language L2 of second-order arithmetic (see [47] for an introduction), we
distinguish between number variables, traditionally written in lower-case Latin letters
x, y, z, ... and set variables, usually written as upper-case Latin letters X, Y, Z, ....
Moreover, we have two constant symbols 0 and 1, two binary function symbols + and
· and a binary relation symbol <. Between numbers and sets exists an element relation
∈. The first-order terms are number variables, constant symbols and expressions of
the form t1 + t2 and t1 · t2 for first-oder terms t1 and t2 . The atomic formulas are
t1 = t2 , t1 < t2 and t1 ∈ X where t1 and t2 are first-order terms and X is a set variable.
The remaining formulas are obtained from atomic formulas by the use of propositional
connectives and number and set quantifiers.
The axiomatic system of arithmetical comprehension (ACA 0 ) consists of the axioms
for discretely ordered semirings, together with the second-order induction principle
and an axiomatic scheme saying that for any second-order formula φ containing only
first-order quantifiers there is a set of all natural numbers of which φ holds, see [47].
By the cumulative results of reverse mathematics, ACA 0 is a sufficient axiomatic basis
for a great number of theorems from classical mathematics; many examples can be
found in [47].

5

Transfer principle

Throughout fix a σ -finite measure space (Ω, F, µ), and let N denote its σ -ideal of
null sets. We always identify A, B ∈ F whenever A∆B ∈ N where ∆ denotes symmetric difference. The resulting quotient Boolean algebra has the following relevant
properties:
• Completeness: Any family in F has a union and an intersection in F ;
• Countable chain condition: Any pairwise disjoint family in F is at most count-

able;
see e.g. [25, Chapter 31] for a reference. We will always identify two functions x and
y on Ω with the same codomain if {ω : x(ω) 6= y(ω)} ∈ N . For a function x on
Ω and A ∈ F , we write x|A for the restriction of x to A. For a Polish space E , let
L0 (E) denote the space of Borel functions x : Ω → E . In particular, L0 (R) denotes
the space of real-valued measurable functions, and L0 (N), L0 (Z) and L0 (Q) denote
its subsets of functions with values in N = {0, 1, . . .}, the integers Z and the rational
numbers Q respectively. Recall that L0 (R) is a Dedekind complete Riesz lattice where
addition, multiplication and order are defined pointwise, see e.g. [22] for a reference.
All inequalities between real-valued measurable functions shall be understood in the
almost everywhere sense. By an abuse of language, we also denote by 0 and 1 the
functions with constant values 0 and 1 respectively. For a measurable partition (Ak )
P
and a countable family (xk ) in L0 (E) for some Polish space E , we write k xk |Ak for
the unique element x ∈ L0 (E) such that x|Ak = xk |Ak for all k.
We introduce the conditional power set of L0 (N), see [15] for an introduction to
conditional set theory.

Definition 2.1 A set N ⊂ L0 (N) is said to be stable under countable concatenations,
P
or stable for short, if it is not empty and k nk |Ak ∈ N for all measurable partitions
(Ak ) and every countable family (nk ) in N . The conditional power set of L0 (N) is the
collection
P := {N|A : N ⊂ L0 (N) is stable, and A ∈ F}

where N|A := {n|A : n ∈ N} . We write N|∅ = {∗} .
We define a concatenation of a countable family (Nk |Bk ) in P and a measurable
partition (Ak ) by
X

X
Nk |Ak | ∪k (Ak ∩ Bk )
(Nk |Bk )|Ak :=
k

k

where
X
k

Nk |Ak :=

X
k

nk |Ak : nk ∈ Nk for each k



6

M Carl and A Jamneshan

Let us define conditional intersection and conditional complement. We follow the
presentation in [36, Section 2]. Let N|A, M|B ∈ P . The conditional intersection of
N|A and M|B is defined as
N|A ⊓ M|B := V|C

(2–1)
where

C := ∪{C′ ∈ F : C′ ⊂ A ∩ B, N|C′ ∩ M|C′ 6= ∅}
V := {n ∈ L0 (N) : n|C ∈ N|C ∩ M|C}
The conditional complement of N|A is the conditional subset
(N|A)⊏ := W|D

(2–2)
where

D := ∪{D′ ∈ F : ∃ n ∈ L0 (N) such that n|E 6∈ N|E for all E ⊂ D′ ∩ A with µ(E) > 0}
W := {n ∈ L0 (N) : n|E 6∈ N|E for all E ⊂ D ∩ A with µ(E) > 0}
By applying an exhaustion argument, it can be derived from stability that C and D are
attained, and it can be checked that V and W are stable sets as well. We conclude that
the conditional intersection and conditional complement are well defined, see e.g. [36]
for a complete argument.
We introduce a conditional element relation between L0 (N) and its conditional power
set P which is a new ingredient in conditional set theory.

Definition 2.2 The conditional element relation is the function
i : L0 (N) × P → F
i(n, N|A) := ∪{A′ ∈ F : A′ ⊂ A, n|A′ ∈ N|A′ }
The union of G := {A′ ∈ F : A′ ⊂ A, n|A′ ∈ N|A′ } is attained. Indeed, from [25,
Section 30, Lemma 1] we know that there exists a countable family (Bk ) in G such
that A∗ = ∪k Bk = ∪G . Let A1 = B1 and Ak = Bk ∩ (A1 ∪ A2 ∪ . . . ∪ Ak−1 )c for k > 2
which defines a measurable partition of A∗ . Since Ak ∈ G for all k, the claim follows
from stability of N . Further, it can be directly checked that

X
nk |Ak , N|A = ∪k (i(nk , N|A) ∩ Ak )
(2–3)
i
k

7

Transfer principle

3 A Transfer Principle for ACA 0
Our aim is to prove that every consequence of ACA 0 holds in the structure S :=
(L0 (N), P, +, ·, 0, 1, <, i) with truth value Ω, i.e. that S is a ‘conditional model’ of
ACA 0 . We start by explaining the evaluation of terms and formulas in S .
Let V1 denote the collection of all number variables and let V2 denote the collection of
all set variables. Let β be a function with domain V1 ∪ V2 such that β : V 1 → L0 (N)
and β : V 2 → P , and let t be a first-order term. Such a β is called a ‘conditional
assignment’. Then [t]β , the β -evaluation of t, is defined recursively as
• [a]β = a for a ∈ {0, 1},
• [x]β = β(x) for x ∈ V1 ,
• [X]β = β(X) for X ∈ V2 ,
• [t0 ◦ t1 ]β = [t0 ]β ◦ [t1 ]β for ◦ ∈ {+, ·}.

For first-order terms t0 and t1 and a second-order variable X , the conditional β evaluation of atomic formulas is defined by
• [t0 = t1 ]β = {ω : [t0 ]β (ω) = [t1 ]β (ω)},
• [t0 < t1 ]β = {ω : [t0 ]β (ω) < [t1 ]β (ω)},
• [t1 ∈ X]β = i([t1 ]β , β(X)).

The conditional β -evaluation of composite and quantified formulas is defined by
• [φ ∧ ψ]β = [φ]β ∩ [ψ]β ,
• [¬φ]β = ([φ]β )c ,
n

• [∃xφ(x)]β = ∪n∈L0 (N) [φ(x)]β[ x ] ,
• [∃Xφ(X)]β = ∪N|A∈P [φ(X)]β[

N|A
]
X

.

The remaining composite and quantification formulas are defined in the obvious way.
We have the following maximum principle, also known from Boolean-valued models,
see e.g. [4, Chapter 1].
Proposition 3.1 Let β be a conditional assignment and let φ and ψ be formulas in
L2 . Then there exist n ∈ L0 (N) and N|A ∈ P such that
n

[∃xφ(x)]β = [φ(x)]β[ x ]
[∃Xψ(X)]β = [ψ(X)]β[

N|A
]
X

8

M Carl and A Jamneshan

Proof We
may assume that [∃xφ(x)]β = Ω. We find a countable family (Ak =
nk
[φ(x)]β[ x ] ) such that ∪k Ak = [∃xφ(x)]β . Form a measurable partition from (Ak ), still
P
denoted by (Ak ). Put n = k nk |Ak . Then it holds that
n

nk

[φ(x)]β[ x ] ⊃ [φ(x)]β[ x ] ∩ [nk = n]β
n

for all k which implies [φ(x)]β[ x ] = [∃xφ(x)]β . The second claim can be shown
analogously by using concatenations in P .
We will now adapt the usual notion of the correctness of a sequent to the conditional
context.
Definition 3.2 If Γ and ∆ are sets of second-order formulas, then Γ → ∆ is called
a sequent. The conditional validity of a sequent Γ → ∆ with respect to a conditional
assignment β is defined by
(∪ψ∈Γ [¬ψ]β ) ∪ (∪ψ∈∆ [ψ]β )

and Γ → ∆ is said to be correct if and only if
(∪ψ∈Γ [¬ψ]β ) ∪ (∪ψ∈∆ [ψ]β ) = Ω

for all assignments β . An inference rule R is a pair consisting of a finite sequence
(Γ1 , Γ2 , . . . , Γn ) of sequents and a single sequent Γ written as Γ1 ,Γ2Γ,...,Γn , and it is
said to be correct if and only if the correctness of Γ follows from the correctness of
Γ1 , Γ2 , . . . , Γn .
We want to apply the inference rules for second-order logic given by Takeuti in [50, p. 910 and p. 135-136]. By Boolean arithmetic, one can directly check that all structural
and logical rules are correct. We illustrate this for the first weakening rule
Γ→∆
φ, Γ → ∆

(3–1)
For each assignment β , one has

(∪ψ∈Γ [¬φ]β ) ∪ (∪ψ∈∆ [ψ]β ) ⊂ (∪ψ∈Γ∪{φ} [¬φ]β ) ∪ (∪ψ∈∆ [ψ]β )
which leads to the correctness of (3–1). By Proposition 3.1, the left universal quantification rule
φ(t), Γ → ∆
∀xφ(x), Γ → ∆
where t is a term, is correct. As for the correctness of the right universal quantification

9

Transfer principle

rule

Γ → ∆, φ(y)
Γ → ∆, ∀xφ(x)

where y does not occur freely in Γ → ∆, ∀xφ(x), assume
(3–2)

∪ψ∈Γ [¬ψ]β ∪ ∪ψ∈∆ [ψ]β ∪ [φ(y)]β = Ω

for all conditional assignments and let β be an arbitrary conditional assignment. We
want to show that
(3–3)

n

∪ψ∈Γ [¬φ]β ∪ ∪ψ∈∆ [ψ]β ∪ ∩n∈L0 (N) [φ]β[ x ] = Ω
n

n∗

By Proposition 3.1, there exists n∗ ∈ L0 (N) such that ∩n∈L0 (N) [φ(x)]β[ x ] = [φ(x)]β[ x ] .
Choose a y-variant β ′ of β that maps y to n∗ . Then (3–3) follows from (3–2) since
y does not occur freely in Γ → ∆, ∀xφ(x), so that the first two sets of the union (3–3)
remain unchanged. Analogously, one shows the first-order existential quantification
inference rules. The second-order quantifier inference rules are only relevant for
second-order variables, as predicate constants do not appear in our language. The
inference rules for second-order quantification can hence be proved analogously to the
corresponding first-order rules. Thus, we obtain:
n
is any deduction rule of second-order sequent calculus and
Lemma 3.3 If Γ1 ,...,Γ
Γ
Γ1 , ..., Γn are correct, then Γ is correct. In particular, if all elements of Γ hold in S
with truth value Ω and Γ → φ is derivable with the rules of sequent calculus, then φ
holds in S with truth value Ω .

Theorem 3.4 All the axioms of ACA 0 attain the value Ω in the structure S for all
conditional assignments.
Proof Let β be an arbitrary conditional assignment. The verification of the basic
axioms (see [47, p. 4]) is immediate from the definitions. For the sake of completeness,
we provide the elementary arguments below.
• [¬(x + 1 = 0)]β = ([x + 1 = 0]β )c = {ω : β(x)(ω) + 1 = 0}c = ∅c = Ω.
• Since {ω : β(x)(ω) + 1 = β(y)(ω) + 1} = {ω : β(x)(ω) = β(y)(ω)}, it follows

from [x + 1 = y + 1]β = Ω that [x = y]β = Ω.
• Similarly, one can verify that [x+0 = x]β = Ω, [x+(y+1) = (x+y)+1]β = Ω,

[x · 0 = 0]β = Ω, [x · (y + 1) = (x · y) + x]β = Ω, and [¬(x < 0)]β = Ω.
• [x < y + 1]β = Ω is equivalent to {ω : β(x)(ω) = β(y)(ω)} ∪ {ω : β(x)(ω) <

β(y)(ω)} = Ω, which means that [(x < y) ∨ (x = y)]β = Ω.

10

M Carl and A Jamneshan

As for the second-order induction scheme, we have to verify that
[(0 ∈ X ∧ ∀x(x ∈ X → x + 1 ∈ X)) → ∀x(x ∈ X)]β = Ω
By conditionally evaluating the previous formula and rewriting it by using Boolean
arithmetic, we must verify that A ⊂ B, where
n

n

A := i(0, β(X)) ∩ ∩n∈L0 (N) (([i(x, X)]β[ x ] )c ∪ [i(x + 1, X)]β[ x ] )
n

B := ∩n∈L0 (N) [i(x, X)]β[ x ]
But this is immediate from the stability of β(X).
Finally, we verify the arithmetical comprehension scheme, that is, we want to show
that
[∃X∀x(x ∈ X ↔ φ(x))]β = Ω
for any arithmetical4 formula φ(x) in which X does not occur freely. By Proposition
n
3.1, Aφ := ∪n∈L0 (N) [φ(x)]β[ x ] is attained. Suppose for a moment that
n

Nφ := {n ∈ L0 (N) : [φ(x)]β[ x ] = Aφ }
satisfies stability. Then
n

[φ(x)]β[ x ] = i(n, Nφ |Aφ )

(3–4)

for all n ∈ L0 (N). Indeed, for n0 ∈ L0 (N), let n1 ∈ Nφ be such that n0 |B = n1 |B
where B = i(n0 , Nφ |Aφ ), and put n2 = n0 |B + n1 |Bc . By stability of Nφ , we have
[φ(x)]β[

n0
x

]

n2

= [φ(x)]β[ x ] ∩ [n2 = n0 ]β = Aφ ∩ B = B

By Boolean arithmetic, it follows from (3–4) that
[∀x(x ∈ X ↔ φ(x))]β[

Yφ |Aφ
X

]

=Ω

which proves comprehension. Thus it remains to verify that Nφ is stable under
concatenations for all formulas φ, which we will prove by an induction on arithmetical
formulas. First, since addition and multiplication commute with concatenations5 , for
any first-order term t = t(x), by an induction on terms, one has
P
X
nk
k nk |Ak
[t(x)]β[ x ] |Ak
[t(x)]β[ x ] =
k

4

Recall that a formula of L2 is said to be arithmetical if it contains no set quantifiers, see
e.g. [47]. P
P
P
5
That is, k nk |Ak ◦ k mk |Bk = k,h (nk ◦ mh )|Ak ∩ Bh for ◦ ∈ {+, ·}.

11

Transfer principle

for all measurable partitions (Ak ) and every countable family (nk ) in L0 (N). Since
also order and concatenations commute and due to (2–3), Nφ is stable for all atomic
formulas φ.
Let φ and ψ be two arithmetical formulas such that Nφ |Aφ , Nψ |Aψ ∈ P . Then we
have
n

n

n

[(φ ∧ ψ)(x)]β[ x ] = [φ(x)]β[ x ] ∩ [ψ(x)]β[ x ]
= i(n, Nφ |Aφ ) ∩ i(n, Nψ |Aψ )
= i(n, Nφ |Aφ ⊓ Nψ |Aψ )
Moreover, for a negation one obtains
n

[¬φ(x)]β[ x ] = i(n, Nφ |Aφ )c = i(n, (Nφ |Aφ )⊏ )
Finally, let θ(x, y) be arithmetical and φ(y) = ∃xθ(x, y). Clearly, Aφ = Aθ . By the
established, we can already define a pairing function, product of stable sets and their
projections, see e.g. [47, p. 66-69]. The pairing function (i, j) 7→ (i + j)2 + i underlying
the definition of a product commutes with concatenations since this is the case for
addition and multiplication. Whence if
β[ nx , my ]

Nθ = {(n, m) ∈ L0 (N)2 : [θ(x, y)]

= Aθ }

is stable, then its projection to the first coordinate is stable, and by definition equal to
Nφ .
We now state the main theorem of this section.
Theorem 3.5 If φ is a consequence of ACA 0 , then φ holds in S with truth value Ω .
Proof By theorem 3.4, all axioms of ACA 0 have truth value Ω in S . By Lemma 3.3,
truth value Ω is preserved under the rules of second-order sequent calculus. Thus, the
theorem follows.

4 Harvesting the fruits
A first step towards applications of the model-theoretic results in this article is to
investigate connections between a conditional and a standard model. An aim of this
section is to understand consequences of the transfer principle and interpret them
properly in a standard setting. For example, the structure L0 (N) are the natural

12

M Carl and A Jamneshan

numbers in the ’conditional model’, while interpreted in a standard model, it is the
space of N-valued measurable functions on a σ -finite measure space. We shall discover
connections to different parts of analysis such as set-valued analysis and measurable
selection theory, vector-valued analysis and probabilistic analysis with applications to
areas such as stochastic control, vector optimization and mathematical economics. An
important observation is that application of theorems in a ’conditional model’ preserves
measurability systematically by construction. Moreover, we will demonstrate that a
transfer principle unifies a conditional version of classical theorems which were proved
by hand previously. Finally, new examples of theorems and applications shall underline
the usefulness of a transfer principle.

4.1 Set theory
We begin by collecting basic set-theoretical vocabulary in a conditional setting. The inclusion relation [47, Definition II.3.1] on the conditional power set P can be interpreted
by the relation
(4–1)

N|A ⊑ M|B

if and only if

A ⊆ B and N|A ⊆ M|A.

This relation coincides with the conditional inclusion relation in conditional set theory,
see [15, Definition 2.8] for the abstract formulation in the context of an arbitrary
complete Boolean algebra, and see [36, Definition 2.5] for a formulation in the context
of an associated measure algebra.
The product of two sets N|A, M|B ∈ P is the set
(4–2)

N × M|A ∩ B

by interpreting [47, Definition II.3.1] in S . This definition extends the definition
of a conditional product in conditional set theory [15, Definition 2.14]. Indeed, a
conditional product was introduced in [15] only for sets of the form N = N|Ω (if we
consider the setting of the present paper). It was realized in [36] that the definition
given in [15] does not suffice for proving a conditional version of Fubini’s theorem.
The extended definition then used in [36, Section 5.1] coincides with (4–2).
Following [47, Definition II.3.1], a function f : N|A → M|B can be interpreted as a
subset W|C ⊑ N ×M|A∩B such that for each n|C ∈ N|C there is a unique m|C ∈ M|C
such that (n, m)|C ∈ W|C . This definition extends the one of a conditional function
in [15, Definition 2.17] (similarly as the definition of a product (4–2) extends the
definition of a conditional product in [15]). The concept of a conditional function is a
significant abstraction of earlier concepts named a regular function in [12, Definition

13

Transfer principle

4, Proposition 1], a stable function in [10, Definition 4.2], and a local function in [19,
Definition 3.1]. The characteristic property of a conditional function is that evaluation
of its values commutes with concatenations.
From [47, Lemma II.2.1] we know that (L0 (N), +, ·, 0, 1, <) is a commutative ordered
semiring with cancellation. For instance, the totality property m < n ∨ m = n ∨
n < m reads as the statement that for each pair n, m ∈ L0 (N) there is a partition
({m < n}, {m = n}, {n < m}). This interpretation coincides with the definition of
conditionally total in [15, Definition 2.15].
A set N|A is said to be finite whenever there exists k ∈ L0 (N) such that n|A < k|A
for all n|A ∈ N|A, see [47, p. 67], which coincides with the notion of conditionally
finite, see [15, Definition 2.23]. In general, a finite set in the model S is not finite in a
standard sense, it might even be uncountable from the latter perspective. However, for
every finite set N|A there exist a partition (Ak ) and a countable family (Nk ) of finite
P
subsets of N such that N|A = ( k Nk |Ak )|A, where we identified Nk with the set of all
measurable n : Ω → Nk , cf. [15, Lemma 2.22]. The collection of all finite sequences
of length n ∈ L0 (N) is the set of functions {1 6 m 6 n} → L0 (N), see [47, Definition
II.3.3], which is precisely the construction given in the paragraph after [15, Definition
2.20].
A sequence in a set N is a function f : L0 (N) → N , compare with the definition of a
conditional sequence in [15, Example 2.2.1]. From a standard point of view such a
sequence is a net which is parametrized by L0 (N) and commutes with concatenations,
cf. [17, Section 2].
Let (Nk |Ak ) be a sequence in the power set P . Using the element relation (see Definition
2.2), we see that the intersection of (Nk |Ak ) can be identified with
⊓k Nk |Ak := V|B

(4–3)
where

B := ∪{B′ ∈ F : B′ ⊂ ∩k Ak , ∩k (Nk |B′ ) 6= ∅}
V := {n ∈ L0 (N) : n|B ∈ ∩k (Nk |B)}
and that the union of (Nk |Ak ) can be identified with
⊔k Nk |Ak := W|C

(4–4)
where
C := ∪k Ak

W := {n ∈ L0 (N) : ∪k (i(n, Nk ) ∩ Ak ) = C}

14

M Carl and A Jamneshan

The complement of a set was defined in (2–2). We have seen that the set operations in S
recover the conditional set operations [15, p. 567]. In [15, Corollary 2.10], it was proved
that the conditional power set has the structure of a complete Boolean algebra, which is
a fundamental result for basic constructions in conditional topology [15, Section 3] and
conditional measure theory [36]. The transfer principle for ACA 0 implies a weaker
statement, namely that the power set P has the structure of a σ -complete Boolean
algebra, see [47].

4.2 Real analysis and linear algebra
A detailed construction of the conditional real numbers and their conditional algebraic,
order and topological properties are developed in [34, Chapter 5] where all properties
are proved from conditional set theory. We will argue that most of these properties and
related results are consequences of the transfer principle.
In the ’conditional model’ S , the integers [47, p. 73] are the space L0 (Z) of measurable integer-valued functions. From [47, Theorem II.4.1] we know that L0 (Z) is an
Euclidean ordered integral domain. Similarly, the space L0 (Q) of measurable rationalvalued functions are the rational numbers in S . By [47, Theorem II.4.2], L0 (Q) is an
ordered field; compare this with the conditionally ordered field of conditional rational
numbers in [15, Example 4.2.1]. The topological completion of L0 (Q) inside S are the
real numbers which by a standard approximation argument can be identified with the
space L0 (R) of real-valued measurable functions, see [47, Definition II.4.4]. Now [47,
Theorem II.4.5] implies that L0 (R) is an Archimedean ordered field, cf. [34, Lemma
5.2.12 and Theorem 5.2.7].
Notice that the absolute value of real numbers maps to L0+ (R) := {x ∈ L0 (R) : x > 0}.
Let L0++ (Q) := {x ∈ L0 (Q) : x > 0}. An open ball in L0 (R) is a set
B(q, r) := {x ∈ L0 (R) : |x − q| < r}
where q ∈ L0 (Q) and r ∈ L0++ (Q), see [47, p. 81]. An open set O is the union
of a sequence of open balls ⊔k B(qk , rk ), see [47, Definition II.5.6]. A closed set is
the complement of an open set, see [47, Definition II.5.12]. For example, for any
r ∈ L0++ (Q), the set {x ∈ L0 (R) : |x| 6 r} is closed, but the standard complement
of B(0, r) is in general not. However, it can be easily verified that every S -closed set
is sequentially closed, i.e. it contains the limit of any almost everywhere converging
standard sequences.

15

Transfer principle

Remark 4.3 The Euclidean topology of the real numbers L0 (R) in S is the order
topology in a standard model which renders pointwise addition and multiplication
continuous. Thus, L0 (R) becomes a topological algebra, in particular a topological
module of rank 1 over itself. This fact is exploited in [19, 10, 15, 38] to build a functional
analytic discourse in L0 (R) -modules. We shall observe later that a functional analytic
discourse in L0 (R) -modules is the reflection of classical functional analysis, albeit in
a ’conditional model’. So far, we know that L0 (R) is 1 -dimensional Euclidean space
in the ’conditional model’ S .
Let L0 (R)n denote the set of finite sequences {1 6 m 6 n} → L0 (R). Write n as
P
n |A for (nk ) in N and (Ak ) a measurable partition. Then one can view L0 (R)n as
Pk k0 k n
0
nk
k
value extends
k L (R) |Ak where each L (R) is a standard product. The absolute
P
0
0
n
from L (R) to an Euclidean norm on L (R) which for x = k (x1 , . . . , xnk )|Ak is
defined by

Xq

2
2
(4–5)
kxk :=
x1 + . . . + xnk Ak
k

Convergence in the conditional Euclidean space L0 (R)n can be characterized by almost
P
everywhere convergence. Suppose that n ∈ N (the general case n = k nk |Ak follows
by localizing the subsequent construction to each Ak and gluing). Let (xk ) be a standard
sequence in L0 (R)n converging almost everywhere to x. Given r ∈ L0++ (Q), let
kr (ω) = inf{k′ ∈ N : kxm − xk(ω) < r(ω) for all m > k′ }

Notice that kr is measurable. Obtain from (xk ) the conditional sequence xk :=
P
P
n xkn |An , k =
n kn |An . By construction, kxk − xk < r for all k > kr . Conversely, it is easy to see that if (xk )k∈L0 (N) is a conditional sequence conditionally
converging to x, then the standard subnet (xk )k∈N resulting by embedding N into
L0 (N) via n 7→ n1Ω converges to x almost everywhere.
Remark 4.4 The S -Euclidean norm (4–5) is an example of L0 (R) -valued vector
norms which appear in different parts of analysis such as the analysis of LebesgueBochner spaces and vector integration (see e.g. [13, 32, 33]), financial modeling (see
e.g. [31, 20, 8]), or probabilistic analysis (see e.g. [27, 32]). In section 4.20, we will
continue to discuss the connection of L0 (R) -valued vector normed spaces and Banach
spaces in the ’conditional model’ S .
By the transfer principle, we obtain from [47, Lemma III.2.1] a Bolzano-Weierstraß theorem in S . Recall that a sequence (xk ) in L0 (R)n , n ∈ L0 (N), is said to be bounded if
there exists r ∈ L0++ (Q) such that kxk k < r for all k ∈ L0 (N).

16

M Carl and A Jamneshan

Theorem 4.5 Let (xk ) be a bounded sequence in L0 (R)n . Then x = lim supk xk exists.
Moreover, there exists a subsequence (xkp ) converging to x .
The previous statement is reminiscent of a ‘measurable’ or ‘conditional’ version of the
Bolzano-Weierstraß theorem as proved in [39, Lemma 2], in [21, Lemma 1.64] and in
[10, Theorem 3.8] respectively. Indeed, any standard sequence (xk ) in L0 (R) can be
extended to a conditional sequence (see above). If (xk ) is bounded (supk |xk | < ∞),
then there is a conditional subsequence (xkp ) which converges to x = lim supk xk by
theorem 4.5. Choosing the standard subsequence (xkp )p∈N in the net (xkp )p∈L0 (N) , we
conclude xkp → x almost everywhere.
Compactness within ACA 0 is introduced in [47, Definition III.2.3] as a form of sequential compactness. We have the following characterization.
Proposition 4.6 Let W be a stable subset of L0 (R)n , n =
the following are equivalent.

P

k nk |Ak

∈ L0 (N) . Then

(i) W is conditionally compact.
(ii) Heine-Borel property: For every conditional sequence (Oi ) of open sets such
that W ⊑ ⊔i Oi there exists a conditionally finite subsequence (Oij ) such that
W ⊑ ⊔j Oij .
P
(iii) W can be represented as k Wk |Ak where each Wk is the set of almost everywhere selections of an Effros measurable6 compact-valued map in Rnk .
Proof The equivalence of (i) and (ii) follows from [47, Theorem IV.1.5] and the
transfer principle 3.5. The equivalence of (ii) and (iii) is proved in [38, Section 5].
Remark 4.7 The notion of conditional compactness was introduced in [15, Definition
3.24]. A conditional version of the Heine-Borel theorem for general conditional metric
spaces was established in [15, Theorem 4.6]. A simple example of a conditionally
compact set in L0 (R) are finite unions of intervals
[a, b] := {x ∈ L0 (R) : a 6 x 6 b}

where a < b in L0 (R) .
The following minimum theorem was proved in [10, Theorem 4.4] in finite dimensions,
and in full generality in [38, Theorem 5.13], and applied in e.g. [8, 37] successfully to
stochastic control.
n

A set-valued function X : Ω → 2R is said to be Effros measurable, if {ω : X(ω) ∩ O 6=
∅} ∈ F for all open sets O in Rn .
6

17

Transfer principle

Theorem 4.8 Let W be a conditionally compact subset of L0 (R)n , n ∈ L0 (N) , and
let f : W → L0 (R) be a conditionally lower semi-continuous function. Then f has a
minimum.
Proof The proof can be done in WKL 0 which is a subsystem of ACA 0 using the
Heine-Borel covering property [47]. The claim then follows from theorem 3.5.
We can derive the following variant of the previous theorem in set-valued analysis an
important aspect of which is the avoidance of measurable selection arguments.
n

Corollary 4.9 Let f : Ω × Rn → R be a normal integrand7 , and let X : Ω → 2R be
an Effros measurable compact-valued map. Then there exists a measurable function
x : Ω → Rn such that f (ω, x(ω)) = minx∈X(ω) f (ω, x) almost everywhere.
Proof By proposition 4.6, one can identify X with a conditionally compact set in
L0 (R)n . From a result in [37, Section 5], one can identify f with a sequentially lower
semi-continuous8 function L0 (R)n → L0 (R). Theorem 4.8 proves the claim.
A notion of an L0 (R)-derivative for functions f : L0 (R)n → L0 (R) is introduced in [10,
Section 7]. An interpretation of the definition of a derivative in second-order arithmetic
yields the same concept which is defined below for n = 1.
Definition 4.10 Let f : L0 (R) → L0 (R) be a stable function such that f (xk ) → f (x)
almost everywhere whenever xk → x almost everywhere. The value
f (x − h) − f (x)
h→0
h
is called the conditional derivative of f at x if it exists.
f ′ (x) = lim

The following conditional version of the Peano existence theorem, derived from [47,
Theorem IV.8.1], has not been proved previously. It can be applied to solve random
ordinary differential equations.
7
A function f : Ω× Rn → R is said to be a normal integrand if its graph is Effros measurable
and closed-valued.
8
Lower semi-continuity in S can be interpreted as sequential lower semi-continuity in a
standard model, i.e. f (x) 6 lim inf f (xk ) almost everywhere whenever (xk ) converges almost
everywhere to x, see the discussion above relating convergence in the S -Euclidean topology
with almost everywhere convergence.

18

M Carl and A Jamneshan

Theorem 4.11 Let a, b ∈ L0 (R) with a, b > 0 . Let f : [−a, a] × [−b, b] → L0 (R)
be stable sequentially continuous. Then the random ordinary differential equation
dy
= f (x, y), y(0) = 0,
dx
has a sequentially continuous differentiable solution y = φ(x) on the interval −α 6
x 6 α where α = min(a, b/M) and
M = max{|f (x, y)| : − a 6 x 6 a, −b 6 y 6 b}
In [10, Section 2], some basic results in linear algebra are extended to the space L0 (R)n
which culminates in a conditional version of the orthogonal decomposition theorem
[10, Corollary 2.12], whereby L0 (R)n is viewed as an module of rank n over the
commutative ring L0 (R). By basic linear algebra in second-order arithmetic [47],
L0 (R)n is a vector space of dimension n in S , and all results in [10, Section 2] are
consequences of the transfer principle. Actually, they directly extend to the case where
n(ω) is a measurable dimension.

4.12 Metric spaces
In the axiomatic system of second-order arithmetic, the only definable metric spaces
are separable and complete ones which are coded as a completion of a countable set
with a prescribed rate of convergence, see [47, Definition II.5.1]. We characterize a
complete and separable metric space in the conditional model S as a vector metric
space in a standard model as follows.
Definition 4.13 A non-empty set H is said to be a conditional set9 , if there exists a
restriction operation | such that for every sequence (xk ) in H and every measurable
partition (Ak ) there exists a unique element x ∈ H such xk |Ak = x|Ak for all k . We
P
name this unique element a concatenation and denote it by x = k xk |Ak .

Let H be a conditional set. A function d : H × H → L0+ (R) is a conditional metric, if
P
P
• d( k (xk , yk )|Ak ) =
k d(xk , yk )|Ak for all sequences (xk , yk ) in H × H and
measurable partitions (Ak ) ,
• d(x, y) = 0 if and only if x = y ,
• d(x, y) = d(y, x) for all x, y ∈ H ,
• d(x, z) 6 d(x, y) + d(y, z) for all x, y, z ∈ H .
9

See [15, Definition 2.1] for a formal definition.

Transfer principle

19

A conditional metric space H is said to be
• conditionally separable, if there exists a countable set G ⊂ H such that for all

x ∈ H there is a sequence (xk ) in G and n1 < n2 < . . . in L0 (N) such that
P
d(xnm , x) → 0 almost everywhere where xn := k xk |{n = k} for n ∈ L0 (N) ;

• conditionally complete, if for every conditional Cauchy sequence10 (xk ) there

exists x such that d(xk , x) → 0 almost everywhere.

A conditional metric space is said to be conditionally Polish, if it is conditionally
separable and conditionally complete.
Examples 4.14
a) Let (E, d) be a separable metric space with countable dense
subset S . The metric d extends to a vector metric on L0 (E) with values in
L0+ (R) via d(x, y)(ω) := d(x(ω), y(ω)) almost everywhere. Let G be the set of
all constant functions with values in S . See [16, Sections 2 and 4] for a proof
that L0 (E) is conditionally complete.

b) Suppose that (Ω, F, P) is a standard Borel probability space, and let G ⊂ F
be a sub- σ -algebra. For a non-negative random variable x : Ω → R , define
the extended conditional expectation E[x|G] := limn→∞ E[x ∧ n|G] . For a real
number p ∈ [1, ∞) , let Lp (F|G) denote the space of F -measurable random
variables such that E[|x|p |G] < ∞ almost everywhere. The space Lp (F|G)
can be represented in ‘tensorial’ form as L0 (G, R) · Lp (F, R) within the space
L0 (F, R) , see [6, Proposition 1]. The mapping x 7→ (E[|x|p |G])1/p defines a
G -conditional norm on Lp (F|G) , i.e. a vector norm with values in L0+ (G, R)
which equips Lp (F|G) with the structure of a topological L0 (G, R) -module, see
the discussion in [19, Example 2.5] and [6, Section 8]. The induced G -stable
vector metric is given by d(x, y) := E[|x − y|p |G] . Let S be a countable dense
in Lp (F, R) , and let G be the space of all products xy where x is a constant
rational-valued random variable and y ∈ S . Conditional completeness follows
from [51, Theorem 3.2.3]. Notice that here the underlying measure space is
(Ω, G, P) .
c) Let E be a standard Polish space, and let F : Ω ⇒ E be an Effros measurable
and closed-valued map. Then the set of almost everywhere selections of F have
the structure of a conditional Polish space.
Remark 4.15 A conditional metric induces a standard topology on the set H given by
a base {B(x, r) : x ∈ H, r ∈ L0+ (Q)} . This standard topology on H is in general not R metrizable. For several basic topological notions such as continuity and convergence,
That is, a sequence (xk ) such that for all r ∈ L0++ (Q) there exists n ∈ L0 (N) with
d(xm , xp ) < r for all m, p ∈ L0 (N) with m, p > n.
10

20

M Carl and A Jamneshan

we have equivalences between their conditional and standard variants, see [15, Section
3] for a systematic study.
We have the following classification result.
Proposition 4.16 Every conditional Polish space corresponds uniquely to a Polish
space in the conditional model S .
Proof By definition, every Polish space in S is a conditional Polish space in the
standard sense of Definition 4.13 (one can change from a conditionally countable
family to a standard countable family by considering only the constant-valued indices).
Conversely, let H be a conditional Polish space, and let G ⊂ H be countable and
conditionally dense. Then each x ∈ H can be identified with a conditional sequence
(xn )n∈L0 (N) in the concatenation hull
)
(
X
xk |Ak : (xk ) in G, (Ak ) measurable partition
st(G) =
k

such that m < n implies d(xm , xn ) < 2−m for all n, m ∈ L0 (N). Indeed, by a conditional
version of the axiom of choice [15, Theorem 2.26], one finds a conditional sequence
(xn )n∈L0 (N) such that xn ∈ On for all n ∈ L0 (N) where
On = {y ∈ st(G) : d(x, y) < 1/2n+1 }

As st(G) is countable from the perspective of S , one concludes that H is a Polish space
in the model S .
We prove a characterization of closed sets in S which establishes a link to set-valued
analysis.
Proposition 4.17 Let E be a standard Polish space, and let W ⊂ L0 (E) be stable11 .
Then the following are equivalent.

(i) W is closed in S .
(ii) W is sequentially closed.
(iii) There exists an Effros measurable and closed-valued map X : Ω → 2E such that
W coincides with the set of almost everywhere selections of X .
11

Stability here and else where always refers to stability respectively closedness with respect
to countable concatenations.

21

Transfer principle

Proof We prove (i) ⇒ (ii).
Let (xk ) be a sequence in W such that d(xk , x) → 0 almost everywhere for some
x ∈ L0 (E), and let G be a countable dense set in E . By contradiction, if µ(i(x, W ⊏ )) >
0, then one finds a conditional ball B(y, r) with center y ∈ L0 (G) and radius r ∈
L0++ (Q) such that µ(i(x, B(y, r) ⊓ W ⊏ )) > 0. But then there is also some k such that
µ(i(xk , W ⊏ )) > 0 which is the desired contradiction. Hence µ(i(x, W ⊏ )) = 0, and
therefore x ∈ W .
We prove (ii) ⇒ (i).
Let
I := {(y, r) ∈ L0 (G) × L0++ (Q) : B(y, r) ∩ W 6= ∅}
Notice that I is conditionally countable. By a conditional version of the axiom of choice
[15, Theorem 2.26], one finds a conditional sequence (xi ) such that xi ∈ B(y, r)∩ W for
each i = (y, r) ∈ I . Now W coincides with the Polish space defined by the countable
set {xi } in the model S .
The equivalence of (ii) and (iii) is proved in [38, Section 5].
As a direct consequence of the transfer principle, one obtains a conditional version
of the Baire category theorem [47, Theorem II.5.8], Urysohn’s lemma [47, Lemma
II.7.3], Tietze’s extension theorem [47, Theorem II.7.5], the Ascoli lemma [47, Theorem III.2.8], the Heine-Borel theorem [47, Theorem IV.1.5], a choice principle for
compact sets [47, Theorem IV.1.8], and Tychonoff’s theorem [47, Theorem III.2.5]. A
conditional version of these theorems except Urysohn’s lemma and Tietze’s extension
theorem were proved by hand previously, see [38] for references. We state a conditional
version of Urysohn’s lemma in standard language. Recall that [0, 1] denotes the set of
all real-valued measurable functions 0 6 x 6 1.
Theorem 4.18 Let H be a conditional Polish space, and let W0 and W1 be stable and
sequentially closed subsets of H such that W0 ⊓ W1 = {∗} . Then there exists a stable
function f : H → [0, 1] such that f (xk ) → f (x) almost everywhere whenever xk → x
almost everywhere and {ω : f (x)(ω) = j} = i(x, Wj ) for all j = 0, 1 and x ∈ H .
Heuristically, the previous theorem states that two random sets with values in a Polish
space which only intersect on a negligible set can be separated by a random {0, 1}valued function f in the sense that the largest measurable set on which a random
element x falls into the first/second set coincides almost surely with the measurable
set {ω : f (x)(ω) = 0/1}. A notable aspect about this ’randomized’ Urysohn’s lemma

22

M Carl and A Jamneshan

is that we do not leave the Borel measurable world without invoking a measurable
selection argument, or in other words, measurability is a result of the construction.
Remark 4.19 Conditional metric spaces were introduced in full generality in [15].
Conditional metric spaces were applied in [37] to stochastic control. It was argued
there that they are a viable alternative to the established measurable selection techniques. Moreover, examples of problems were presented which can be solved with
conditional analysis techniques which, however, are beyond the scope of applicability
of measurable selection techniques due to topological restrictions.

4.20 Banach space theory
In this section, we develop basics of Banach spaces in S , and connect it with functional
analysis in L0 (R)-modules. An L0 (R)-module H is a module over the commutative
algebra L0 (R). This yields a function from the underlying measure space (Ω, F, µ)
to H by scalar multiplication with indicator functions 1A · x, A ∈ F and x ∈ H 12 .
This enables to formalize concatenations in H : An element x ∈ H is said to be a
concatenation of a sequence (xk ) in H and a measurable partition (Ak ), if 1Ak · x =
1Ak · xk for all k. We say that H satisfies the countable concatenation property,
if for every sequence (xk ) in H and each measurable partition (Ak ) there exists a
unique concatenation in H . Throughout all L0 (R)-modules are assumed to satisfy the
countable concatenation property.
Definition 4.21 Let H be an L0 (R) -module. A function k · k : H → L0+ (R) is said to
be a conditional norm, if
• kxk = 0 if and only if x = 0 ,
• krxk = |r|kxk for all r ∈ L0 (R) and x ∈ H ,
• kx + yk 6 kxk + kyk for all x, y ∈ H .

Since H satisfies the countable concatenation property, a conditional norm is a stable
function. Then d(x, y) := kx − yk gives H the structure of a conditional metric space.
A conditional norm induces a standard topology given by the base B(x, r) := {y ∈
H : kx − yk < r}, r ∈ L0++ (Q) and x ∈ H . The generated topology renders addition
and L0 (R)-scalar multiplication continuous where we consider on L0 (R) its order
topology, see remark 4.4. From proposition 4.16 we have
12

Actually, it is the measure algebra associated to (Ω, F , µ) which acts on H .

Transfer principle

23

Proposition 4.22 There is a one-to-one correspondence from the class of conditionally
separable and conditionally complete L0 (R) -normed modules in a standard model and
the class of separable Banach spaces13 in the model S .
One obtains the following examples of Banach spaces in the model S (see examples
4.14 for details).
Examples 4.23
a) For p ∈ [1, ∞) , the conditional Lp -space Lp (F|G) with respect
to a standard Borel probability space.

b) The Bochner space L0 (E) of equivalence classes of strongly measurable functions with values in a separable normed vector space E .
As a consequence of the transfer principle, we obtain a conditional version of the
Hahn-Banach extension and separation theorems [47, Theorems IV.9.3, X.2.1], the
Banach-Steinhaus theorem [47, Theorem II.10.8], the Banach-Alouglu theorem [47,
Remark X.2.4], and the Krein-Šmulian theorem [47, Theorem X.2.7] for conditionally
separable Banach spaces. We spell out a conditional version of the Banach-Steinhaus
theorem below. The following definition is a standard interpretation of [47, Definition
II.10.5] in S .
Definition 4.24 Let H and K be conditionally separable and conditionally complete
L0 (R) -normed modules. A function f : H → K is said to be
• conditionally linear, if f (x + ry) = f (x) + rf (y) for all x, y ∈ H and r ∈ L0 (R) ,
• conditionally bounded, if there exists r ∈ L0++ (Q) such that kf (x)kK 6 rkxkH

for all x ∈ H .
Notice that any conditionally linear function is stable. One can deduce from [47,
Theorem II.10.7] that a conditionally linear and conditionally bounded operator is
sequentially continuous, i.e. kf (xk ) − f (x)kK → 0 almost everywhere whenever kxk −
xkH → 0 almost everywhere. A conditional version of the Banach-Steinhaus theorem is
obtained by an application of the transfer principle to [47, Theorem II.10.8]. One could
think of its application in random operator theory and random differential equations,
see e.g. [48, 49].
13

A separable Banach space in second-order arithmetic is introduced in [47, Definition
II.10.1].

24

M Carl and A Jamneshan

Theorem 4.25 Let H and K be conditionally separable and complete L0 (R) -normed
modules, and let (fn ) be a standard sequence of L0 (R) -linear and sequentially continuous functions fn : H → K . If for every x ∈ H there exists r ∈ L0++ (Q) such that
kfn (x)kK 6 r for all n , then there exists q ∈ L0++ (Q) such that kfn (x)kK 6 qkxkH for
all x and every n .

Remark 4.26 Conditional extension and separation arguments are applied in [20, 24]
in risk measure theory. A conditional Fenchel-Moreau theorem is applied in [17] in
vector duality. A conditional Riesz representation theorem is used in [14] in decision
theory.

Remark 4.27 Separation and duality results in topological L0 (R) -modules are established in [29, 19] with respect to two types of module topologies respectively, their
connection is discussed in [27], see also the discussion in [38]. The standard topologies
employed in [29], and with a different motivation in [32], are extensions of the topology of convergence in probability to L0 (R) -vector norms on general L0 (R) -modules.
The class of such probabilistic topologies does not yield a comprehensive functional
analytic discourse in L0 (R) -modules [38].

The second type of topologies introduced in [19] proved to be more susceptible to a
comprehensive functional analytic discourse for which strong evidence was provided
in [15] by embedding L0 (R) -module theory in conditional set theory and conditional
topology. Conditional topological vector spaces are introduced in [15, Section 5].
In [16] conditional completions of standard metric spaces are constructed and their
connection to Lebesgue-Bochner spaces is established. The above listed consequences
of the transfer principle have been proved by hand previously, see [38] for an overview
and references.
A school of Russian mathematicians, starting with Kantorovic, studied to which extent
results in functional analysis remain true if the real numbers are replaced by a Dedekind
complete vector lattice of which L0 (R) is one example. These investigations were
naturally connected to Boolean-valued models. We refer to [42, 43] for an extensive
overview of this tradition.

25

Transfer principle

4.28 Hilbert spaces
In this subsection, we will elaborate on basic results in separable Hilbert spaces14
where our focus lies on the conditional L2 -space
L2 (F|G) = {x ∈ L0 (F, R) : E[x2 |G] < ∞}
where (Ω, F, P) is a standard Borel probability space and G ⊂ F is a sub-σ -algebra,
see examples 4.14. The inner product in L2 (F|G) is defined by hx, yi := E[xy|G].
Recall that for L2 (F|G) the base space is (Ω, G, P).
Definition 4.29 A sequence (xn )n∈L0 (N) in L2 (F|G) is said to be orthonormal, if
• hxn , xm i = 0 whenever P({n = m}) = 0 ,
• kxn k = 1 for all n .

An orthonormal sequence (xn )n∈L0 (N) is generating if for every x ∈ H there exists a
P
sequence (rn )n∈L0 (N) in L0 (G, R) such that x = n rn xn 15 . A generating orthonormal
sequence is called an orthonormal basis.
The transfer principle applied to [1, Theorem 10.9] yields the following new result.
Theorem 4.30 L2 (F|G) has an orthonormal basis in S .
Remark 4.31 The significance of theorem 4.30 lies in the fact that generally an L0 (R) module with the countable concatenation property has an algebraic basis if and only
if it is finitely ranked [38, Proposition 3.5]. This means that an infinite dimensional
space such as L2 (F|G) does not have any module linear basis in a standard sense in
general16 . The difference in S is that one allows the family which forms the basis to
be a conditional family, cf. [38, Section 3].
We have the following projection theorem thanks to the transfer principle and [1,
Theorem 12.5].
Theorem 4.32 Let W be a sequentially closed sub-module of L2 (F|G) . Then every
point x ∈ L2 (F|G) has a smallest distance d(x, W) := inf y∈W d(x, y) .
14

See [1, Definition 9.3] for a definition in second-order arithmetic.
Notice that this sum does not have a well-defined value in a standard setting a priori as it
is uncountable, as a limit in S it is though meaningful, and this value can then be interpreted
in a standard setting.
16
For instance, if (Ω, F , P) is purely non-atomic.
15

26

M Carl and A Jamneshan

A consequence of the projection theorem is the orthogonal decomposition theorem:
Theorem 4.33 Let W be a sequentially closed sub-module of L2 (F|G) . Then there
exists a sequentially closed sub-module W ⊥ such that each element x ∈ L2 (F|G) has
a unique decomposition x = z + y where z ∈ W and y ∈ W ⊥ .
We have also a Riesz representation theorem due to [1, Theorem 13.4] which interpreted
in a standard setting reads as follows.
Theorem 4.34 Let f : L2 (F|G) → L0 (R) be an L0 (R) -linear and sequentially continuous function. Then there exists y ∈ L2 (F|G) such that f (x) = E[xy|G] .
We obtain the following extension of von Neumann’s mean ergodic theorem, see [1]
for the result in ACA 0 .
Theorem 4.35 Let T : L2 (F|G) → L2 (F|G) be L0 (R) -linear such that kTxk 6 kxk
for all x ∈ L2 (F|G) . Then 1/n(x + Tx + . . . + T n−1 x) converges in the vector norm of
L2 (F|G) almost everywhere to the projection of x to the sequentially closed sub-module
of all T -invariant vectors.
Remark 4.36 The conditional Hilbert space L2 (F|G) was introduced in [31] for purposes of financial modeling. Some applications in stochastic analysis of an orthogonal
decomposition result are described in [7]. A Riesz representation theorem, a projection
theorem and an orthogonal decomposition theorem in complete random inner product
spaces are proved in [28, Section 4]. A mean ergodic theorem for complete random
inner product spaces is established in [30].

4.37 Fixed point theorems
We close this section with fixed point theorems in the ’conditional model’ S . One
could think of applications in equilibrium theory and random differential equations.
A conditional version of the Brouwer fixed point theorem was proved in [18]. The
precise statement in the standard model is the following.
Theorem 4.38 Let x1 , . . . , xk be finitely many points in L0 (R)n , n ∈ N . Let

X
k
λi xi : 0 6 λi 6 1, i = 1, . . . , k
S=
i=1

Let f : S → S be a stable sequentially continuous function. Then there is x ∈ S such
that f (x) = x .

27

Transfer principle

The proof in [18] is based on an adaptation of Sperner’s lemma to a conditional setting.
One obtains Sperner’s lemma and the Brouwer fixed point theorem in the following
slightly more general form as a consequence of the transfer principle applied to [47,
Theorem IV.7.6].
Theorem 4.39 Let k, n ∈ L0 (N) and (xi )i6k be a conditionally finite sequence of points
P
P
in L0 (R)n . Without loss of generality suppose that k = m km |Am and n = m nm |Am ,
0
nm which comprise the conditional
and let (xm
i )i6km be finitely many elements in L (R)
sequence (xi )i6k on Am for each m . Build the conditional simplex

km
XX

m
λi xi : 0 6 λi 6 1, i = 1, . . . , km Am
S :=
m

i=1

Then every stable sequentially continuous function f : S → S has a fixed point.

As a novel result, we deduce a conditional version of the Markov-Kakutani fixed point
theorem by applying the transfer principle to [47, Lemma IV.9.1].
Theorem 4.40 Let
[−1, 1]L

0 (N)

:= {(xk )k∈L0 (N) : xk ∈ L0 (R), −1 6 xk 6 1 for all k}

endowed with the conditional metric17
d((xk ), (yk )) :=

X
k

2−k

|xk − yk |
|xk − yk | + 1
0

Let S be a stable, sequentially closed and L0 (R) -convex18 subset of [−1, 1]L (N) . Let
(fk ) be a conditional sequence19 of L0 (R) -affine and sequentially continuous functions
fk : S → S such that fk ◦ fm = fm ◦ fk for all m, k ∈ L0 (N) . Then there exists x ∈ S such
that fk (x) = x for all k .

5 Further connections and outlook
We have left out measure theory. For the development of measure theory in secondorder arithmetic, we refer to [46, 47, 52]. In conditional set theory, basic results in
17

Recall that the sum is uncountable in a standard world, but makes sense in a ’conditional
model’ as the limit of conditionally finite sums.
18
0
This means λx + (1 − λ)y ∈ S whenever
x, y ∈ S and
P λ ∈ L (R) with 0 6 λ 6 1.
P
19
This means for functions that
n fkn (x)|An for all x, every sequence
n fkn |An (x) =
(kn ) in L0 (N) and measurable partition (An ).

28

M Carl and A Jamneshan

measure theory are established in [36]. As measure theory in second-order arithmetic
is based on Daniell’s functional approach to integration, the conditional version of
the Daniell-Stone theorem and Riesz representation theorem in [36, Section 5] can
be connected to respective theorems in S . In [36, Section 4], a connection between
kernels in a standard model and measures in conditional set theory are proved. This
connection fully carries over to the model S , for Borel probability measures on H
where H is a conditionally compact metric space. Perspectively, understanding the
standard meaning of the existence of a Haar measure ([47, Section X.1]), and of the
maximal ergodic and pointwise ergodic theorems ([46, Chapter 5]) in S may be of
interest.

For some mathematical theorems relevant for applications in mathematical economics,
stronger second-order axioms than ACA 0 are required. For example, weak ∗ -closures
play an important role in a recent duality result in vector optimization in [26] which
is useful for applications such as minimization of conditional risk measures. Now,
by [47, Theorem X.2.9], Π11 -CA 0 is required to prove that weak ∗ -closures in the
normal dual of a separable Banach space even exist. Moreover, it has been argued
e.g. by Kohlenbach in [41] that the second-order setting, comprehensive as it is, is not
sufficient for important areas like functional analysis or topology, and should therefore
be extended to higher-order frameworks that also allow for quantification over sets of
real numbers, sets of sets of real numbers, sets thereof etc.

It would thus be worthwhile (1) to consider the validity of stronger comprehension
axioms like Π11 -CA 0 (see [47]) or, more generally, Πn1 -CA 0 in our conditional model,
and (2) to come up with conditional interpretations of higher-order systems and a
corresponding transfer principle. The question whether Π11 -CA 0 holds in our model
is not immediately answered by the method used above for ACA 0 . For this purpose,
it would be necessary to consider projections of sets of real numbers, which would
require working in a conditional power set of the conditional real numbers.

Nevertheless, we are optimistic that such extensions can be constructed. Indeed,
following the general construction of a conditional power set in [15], more precisely
its variant defined in [36], the conditional power set of the conditional power set of the
conditional natural numbers can be formed, which indicates the necessary construction
needed to prove the validity of stronger comprehension schemes and a transfer principle
for higher-order systems. We plan to develop this in detail in future work.

Transfer principle

29

References
[1] J Avigad, K Simic, Fundamental notions of analysis in subsystems of second-order arithmetic,
Ann. Pure Appl. Logic 139 (2006) 138-184
[2] A Aviles, J M Zapata, Boolean-valued Models as a Foundation for Locally L0 -Convex
Analysis and Conditional Set Theory, IFCoLog Journal of Logic and its Applications
5 (2018) 389-420
[3] J Backhoff, U Horst, Conditional analysis and a Principal-Agent problem, SIAM J.
Financial Math. 7 (2016) 477-507
[4] J L Bell, Set Theory: Boolean-Valued Models and Independence Proofs, Oxford Logic
Guides, Clarendon Press (2005)
[5] T Bielecki, I Cialenco, S Drapeau, M Karliczek, Dynamic Assessement Indices,
Stochastics 88 (2016) 1-44
[6] S Cerreia-Vioglio, M Kupper, F Maccheroni, M Marinacci, N Vogelpoth,
Conditional Lp -spaces and the duality of modules over f -algebras, J. Math. Anal.
Appl. 444 (2016) 1045-1070
[7] S Cerreia-Vioglio, F Maccheroni, M Marinacci, Orthogonal Decompositions in
Hilbert A-Modules, Preprint (2017)
[8] P
Cheridito,
U
Horst,
M
Kupper,
T
Pirvu,
Equilibrium pricing in incomplete markets under translation invariant preferences,
Math. Oper. Res. 41 (2016) 174-195
[9] P Cheridito, Y Hu, Optimal consumption and investment in incomplete markets with general constraints,
Stoch. Dyn. 11 (2011) 283-299
[10] P Cheridito, M Kupper, N Vogelpoth, Conditional analysis on Rd , Set Optimization
and Applications, Proceedings in Mathematics & Statistics 151 (2015) 179-211
[11] P Cheridito, M Stadje, BS∆Es and BSDEs with non-Lipschitz drivers: comparison, convergence and robustness,
Bernoulli 19 (2013) 1047-1085
[12] K Detlefsen, G Scandolo, Conditional and Dynamic Convex Risk Measure, Finance
Stoch. 9 (2005) 539-561
[13] J Diestel, J J Uhl, Vector Measures, Mathematical surveys and monographs, American
Mathematical Society (1977)
[14] S Drapeau, A Jamneshan, Conditional preferences and their numerical representations,
J. Math. Econom. 63 (2016) 106-118
[15] S
Drapeau,
A
Jamneshan,
M
Karliczek,
M
Kupper,
The algebra of conditional sets and the concepts of conditional topology and compactness,
J. Math. Anal. Appl. 437 (2016) 561-589
[16] S Drapeau, A Jamneshan, M Kupper, Vector duality via conditional extension of
dual pairs, Preprint available at arXiv:1608.08709 (2016)

30

M Carl and A Jamneshan

[17] S Drapeau, A Jamneshan, M Kupper, A Fenchel-Moreau theorem for L̄0 -valued
functions, J. Convex Anal. (to appear)
[18] S
Drapeau,
M
Karliczek,
M
Kupper,
M
Streckfuss,
Brouwer fixed point theorem in (L0 )d , J. Fixed Point Theory Appl. 301 (2013)
[19] D
Filipović,
M
Kupper,
N
Vogelpoth,
0
Separation and duality in locally L -convex modules, J. Funct. Anal. 256 (2009)
3996-4029
[20] D Filipović, M Kupper, N Vogelpoth, Approaches to conditional risk, SIAM J. Financial Math. 3(1) (2012) 402-432
[21] H Föllmer, A Schied, Stochastic Finance. An Introduction in Discrete Time, 3 edition,
de Gruyter Studies in Mathematics, Walter de Gruyter, Berlin, New York (2011)
[22] D Fremlin, Topological Riesz Spaces and Measure Theory, Cambridge University
Press (1974)
[23] M Frittelli, M Maggis, Conditional Certainty Equivalent, Int. J. Theor. Appl. Finance
14 (2011) 41-59
[24] M Frittelli, M Maggis, Complete duality for quasiconvex dynamic risk measures on modules of the Lp -type,
Stat. Risk Model. 31 (2014) 103-128
[25] S R Givant, P R Halmos, Introduction to Boolean Algebras, Undergraduate texts in
mathematics, Springer (2009)
[26] S-M Grad, A Jamneshan, A perturbational duality approach in vector optimization,
Preprint available at arXiv:1807.02666 (2018)

[27] T Guo, Relations between some basic results derived from two kinds of topologies for a random locally convex modul
J. Funct. Anal. 258 (2010) 3024-3047
[28] T Guo, On Some Basic Theorems of Continuous Module Homomorphisms between Random Normed Modules,
J. Funct. Spaces (2013) 1-13
[29] T Guo, H Xiao, X Chen, A basic strict separation theorem in random locally convex modules,
Nonlinear Anal. Real World Appl. 71 (2009) 3794-3804
[30] T Guo, X Zhang, Von Neumann’s mean ergodic theorem on complete random inner product modules,
Front. Math. China 6 (2011) 965-985

[31] L P Hansen, S F Richard, The Role of Conditioning Information in Deducing Testable Restrictions Implied by Dynam
Econometrica 55 (1987) 587-613
[32] R Haydon, M Levy, Y Raynaud, Randomly Normed Spaces, Hermann (1991)
[33] T
Hytönen,
J
van
Neerven,
M
Veraar,
L
Weis,
Analysis in Banach Spaces: Volume I: Martingales and Littlewood-Paley Theory,
Ergebnisse der Mathematik und ihrer Grenzgebiete. 3. Folge / A Series of Modern
Surveys in Mathematics, Springer International Publishing (2016)
[34] A Jamneshan, A theory of conditional sets, PhD thesis, Humboldt-Universität zu
Berlin, Mathematisch-Naturwissenschaftliche Fakultät II (2014)

Transfer principle

31

[35] A Jamneshan, Sheaves and conditional sets, Preprint available at arXiv:1403.5405
(2014)
[36] A
Jamneshan,
M
Kupper,
M
Streckfuß,
Measures and integrals in conditional set theory, Set-Valued Var. Anal. (to appear)
[37] A Jamneshan, M Kupper, J M Zapata, Parameter-dependent stochastic optimal
control in finite discrete time, Preprint available at arXiv: 1705.02374 (2017)
[38] A Jamneshan, J M Zapata, On compactness in L0 -modules, Preprint available at
arXiv:1711.09785 (2017)
[39] Y Kabanov, C Stricker, A teacher’s note on no-arbitrage criteria, Séminaire de Probabilités 35 (2001) 149–152
[40] A Kechris, Classical Descriptive Set Theory, Graduate Texts in Mathematics,
Springer-Verlag (1995)
[41] U Kohlenbach, Higher order reverse mathematics, BRICS Report Series 7 (2000)
[42] A G Kusraev, S S Kutateladze, Boolean Valued Analysis, Mathematics and Its Applications, Springer Netherlands (2012)
[43] S S Kutateladze, Nonstandard Analysis and Vector Lattices, Mathematics and Its Applications, Springer Netherlands (2012)
[44] I Molchanov, Theory of Random Sets, Probability and Its Applications, Springer London (2005)
[45] R T Rockafellar, R J-B Wets, Variational Analysis, Springer, Berlin, New York (1998)
[46] K Simic, Aspects of Ergodic Theory in Subsystems of Second-order Arithmetic, PhD
thesis, Carnegie Mellon University (2004)
[47] S G Simpson, Subsystems of Second Order Arithmetic, Perspectives in Mathematical
Logic, Springer-Verlag Berlin Heidelberg (1999)
[48] A Skorohod, Random Linear Operators, Mathematics and its Applications, Springer
Netherlands (1983)
[49] J Strand, Random ordinary differential equations, J. Differential Equations 7 (1970)
538-553
[50] G Takeuti, Proof Theory, Dover books on mathematics, Dover Publications, Incorporated (2013)
[51] N Vogelpoth, L0 -convex Analysis and Conditional Risk Measures, PhD thesis, University of Vienna (2009)
[52] X Yu, Riesz representation theorem, Borel measures and subsystems of second-order arithmetic,
Ann. Pure Appl. Logic 59 (1993) 65-78

32

M Carl and A Jamneshan

Department of Mathematics and Statistics, University of Konstanz
78457 Konstanz, DE
Department of Mathematics, ETH Zurich
Rämistrasse 101, 8092 Zurich, CH
A.J. gratefully acknowledges financial support from DFG project KU 2740/2-1.
merlin.carl@uni-konstanz.de, asgar.jamneshan@math.ethz.ch

