%%% ====================================================================
%%%  @TeX-style-file{
%%%     author          = "Jim Humphreys",
%%%     version         = "0.91d",
%%%     date            = "23 March 1995",
%%%     time            = "15:50:09 EST",
%%%     filename        = "phd.sty",
%%%     address         = "218 McAllister Building
%%%			   University Park, PA 16802",
%%%     telephone       = "(814) 865-8951",
%%%     FAX             = "",
%%%     email           = "jimbo@math.psu.edu (Internet)",
%%%     codetable       = "ISO/ASCII",
%%%     keywords        = "TeX,thesis",
%%%     supported       = "yes",
%%%     abstract        = "A plain TeX style file for typesetting
%%%     		   Ph.D. theses in mathematics at Penn State",
%%%  }
%%% ====================================================================
%modified by Garth Payne to include hyperrefs in table of contents. Sorry Jim.

\def\phdversion{0.91d, 23 March 1995}
\newlinechar=`\^^J
\immediate\write16{^^J
phd.sty --- version \phdversion^^J
Copyright 1994, 1995  Jim Humphreys^^J
Use at your own risk^^J}

%\input comment.sty

%% Next set global magnification, page dimensions, and fonts
\magnification=\magstep1
\hsize=6truein \hoffset=0.5truein
\vsize=9truein
\nopagenumbers
\font\fourteenbf=cmbx10 scaled\magstep2
\font\twelvebf=cmbx10 scaled\magstep1
\font\eighttt=cmtt8

%% Now set things up so that we can use @ in macro names; this
%% involves saving the current catcode of @, and so on. This uses 
%% Spivak's trick. 
\let\xp\expandafter
\def\csarg#1#2{\xp#1\csname#2\endcsname}
\def\ifUndefined#1{\csarg\ifx{#1}\relax}
\ifUndefined{phd.sty by jimbo}\else
  \immediate\write16{phd.sty already loaded}\endinput\fi
\csarg\edef{phd.sty by jimbo}{\catcode`\noexpand\@=%
\the\catcode`\@\space}
\catcode`\@=11


%% In case we need to switch later, define Eijkhout's \storecat and
%% \restorecat macros. Warning: these
%% macros cannot be nested (see TUGboat 13.4 for details)
\newcount\tempcount
\def\storecat#1{\tempcount=\escapechar
\escapechar=-1\relax
\csarg\edef{restorecat\string#1}%
{\catcode`\string#1=\the\catcode\xp`\string#1}%
\catcode\xp`\string#1=12\relax
\escapechar=\tempcount}
\def\restorecat#1{\tempcount=\escapechar
\escapechar=-1\relax
\csname restorecat\string#1\endcsname
\escapechar=\tempcount}

%% Define macro to greet the user.
\newtoks\usern@me
\def\greeting{\count255=\time \divide\count255 by60
\immediate\write16{^^JGood \ifnum\count255<12 Morning,
\else \ifnum\count255<18 Afternoon,
\else Evening, \fi\fi
\the\usern@me^^J}
\immediate\write16{Thank you for using phd.sty}
\immediate\write16{Here is the result of your run:^^J}}

%% Berry's reworking of Knuth's definition of \futurenonspacelet; for
%% use in commands with optional arguments
\def\futurenonspacelet#1{\def\cs{#1}%
  \afterassignment\@stepone\let\@nexttoken= 
}
\begingroup
\def\\{\global\let\@stoken= }
\\ 
\endgroup
\def\@stepone{\xp\futurelet\cs\@steptwo}
\def\@steptwo{\xp\ifx\cs\@stoken\let\@@next=\@stepthree
  \else\let\@@next=\@nexttoken\fi \@@next}
\def\@stepthree{\afterassignment\@stepone\let\@@next= }

%% Macros for doublespacing and singlespacing
\def\doublespace{\baselineskip=24truebp}
\def\singlespace{\baselineskip=12bp}
\doublespace

%% Define output routines for heading pages and for normal pages
\newcount\he@dcount
\def\he@dp@ge{\global\he@dcount=0}
\output={\ifnum\he@dcount>0
  \headline={\hfil\tenrm\folio}
\else
  \headline={\hfil}
\fi
\plainoutput
\global\advance\he@dcount by1}

%% Next define tests for control of front matter, copyright notice,
%% and draft mode
\newif\ifC@pyright
\newif\ifDr@ft
\newif\ifFrontM@tter

%% Then initialize these tests (copyright:no, front matter:yes,
%% draft:no)
\C@pyrightfalse \Dr@ftfalse \FrontM@ttertrue

%% Define commands for switching these tests
\def\y@s{yes} \def\n@{no}

\def\IncludeCopyright:#1 {\def\next{#1}
\ifx\y@s\next\C@pyrighttrue
\else\C@pyrightfalse\fi}

\def\Draft:#1 {\def\next{#1}
\ifx\y@s\next\Dr@fttrue
\else\Dr@ftfalse\fi}

\def\IncludeFrontMatter:#1 {\def\next{#1}
\ifx\y@s\next\FrontM@ttertrue
\else\FrontM@tterfalse\fi}

%% Now define box registers for title page items
\newbox\TitleB@x \newbox\YearB@x \newbox\MonthB@x \newbox\AuthorB@x

%% Then define title page macros
\def\ThesisTitle#1\par{\def\\{\cr\noalign{\vskip14truebp}}
\setbox\TitleB@x=\vbox{\fourteenbf
\halign{\hfil##\hfil\cr
\uppercase{#1}\unskip\cr}}}

\def\Date#1 #2 {\setbox\MonthB@x=\hbox{#1\unskip}
\setbox\YearB@x=\hbox{#2}}

\def\M@nth{\copy\MonthB@x}
\def\Ye@r{\copy\YearB@x}

%%	\Author turns out to be something of a problem because of
%%	names ending in a period. We need to determine if author's
%%	name ends in a period, in which case we remove it on Signatory
%%	Page. 
\newif\ifEndsInPeri@d
\def\@uthor#1\par{\global\setbox\AuthorB@x=\hbox{#1\unskip}%
\global\usern@me={#1}\endgroup}
\def\Author{\begingroup\obeyspaces\@uthor}
\def\Peri@dCheck#1{\ifx.#1\EndsInPeri@dtrue\else\EndsInPeri@dfalse\fi}
\def\Fif@#1#2{\ifx\@fif#2\Peri@dCheck#1\@fif\fi%
\Fif@#2}
\def\gobblel@st#1{\fif@#1\@fif}
\def\fif@#1#2{\ifx\@fif#2\@fif\fi%
#1\fif@#2}
\def\@fif#1\@fif{\fi}
\def\S@nitizeJody{\xp\Fif@\the\usern@me\@fif
\ifEndsInPeri@d\xp\gobblel@st\xp{\the\usern@me}\else\unhcopy\AuthorB@x\fi}


\def\ThesisAuth@r{\copy\AuthorB@x}

\def\TitleP@ge{\he@dp@ge
\setbox0=\vbox to\vsize{%
\line{}
\vfill
\centerline{The Pennsylvania State University}
\centerline{The Graduate School}
\centerline{Department of Mathematics}
\vfill
\centerline{\copy\TitleB@x}
\vfill
\centerline{A Thesis in}
\centerline{Mathematics}
\centerline{by}
\centerline{\ThesisAuth@r\space}
\ifC@pyright\centerline{\copyright\Ye@r\
\ThesisAuth@r\space}\fi
\vfill
{\singlespace
\centerline{Submitted in Partial Fulfillment}
\centerline{of the Requirements}
\centerline{for the Degree of}}
\vfill
\centerline{Doctor of Philosophy}
\vfill
\centerline{\M@nth\space\Ye@r}
\vfill
\line{}}
\unvbox0
\eject}

%% Now the signatory page
\newbox\Godb@x

\def\Committee{\par\setbox0=\vbox\bgroup}

\def\Member{\par\egroup
\setbox\Godb@x=\vbox\bgroup\singlespace\parindent=0pt
\unvbox\Godb@x
\vfill
\line{}
\hbox{\hbox to 3.75truein{\hrulefill}\hbox to.5truein{\hfill}\hbox to
1.75truein{\hrulefill}} 
\obeylines}

%% Now set things up for table of contents
\newread\c@ntents \newwrite\c@ntents
\newread\figur@s \newwrite\figur@s
\newread\t@bles \newwrite\t@bles
\def\Contents{\immediate\openin\c@ntents=\jobname.toc
\ifeof\c@ntents
  \message{! No file \jobname.toc}
  \immediate\closein\c@ntents
\else
  \t@chead
  \begingroup
  \catcode`\@=11
  \parindent=0pt
  \let\temp@=\cr \let\temp@@=\noalign
  \let\cr=\relax \def\noalign##1{\relax}
  \dimen255=\hsize
  \setbox0=\hbox{\quad000} \advance\dimen255 by-\wd0
  \setbox0=\hbox{Chapter \quad} \advance\dimen255 by-\wd0
  \setbox2=\hbox{Chapter } \setbox4=\hbox{1.1\quad}
  \input \jobname.toc
  \vfill\eject
  \endgroup
  \immediate\closein\c@ntents
\fi
\immediate\openout\c@ntents=\jobname.toc
\ifnum\LastFigure>0
  \immediate\openin\figur@s=\jobname.lof
  \ifeof\figur@s
    \message{! No file \jobname.lof}
    \immediate\closein\figur@s
  \else
    \InC@ntents List of Figures\par
    \begingroup
    \catcode`\@=11
    \parindent=0pt
    \dimen255=\hsize
    \setbox0=\hbox{\quad000} \advance\dimen255 by-\wd0
    \setbox0=\hbox{Figure \number\LastFigure\quad} \advance\dimen255 by-\wd0
    \input \jobname.lof
    \vfill\eject
    \endgroup
    \immediate\closein\figur@s
  \fi
\fi
\ifnum\LastTable>0
  \immediate\openin\t@bles=\jobname.lot
  \ifeof\t@bles
    \message{! No file \jobname.lot}
    \immediate\closein\t@bles
  \else
    \InC@ntents List of Tables\par
    \begingroup
    \catcode`\@=11
    \parindent=0pt
    \dimen255=\hsize
    \setbox0=\hbox{\quad000} \advance\dimen255 by-\wd0
    \setbox0=\hbox{Table \number\LastTable\quad} \advance\dimen255 by-\wd0
    \input \jobname.lot
    \vfill\eject
    \endgroup
    \immediate\closein\t@bles
  \fi
\fi
\doublespace
}

\def\t@chead{\he@dp@ge
\singlespace
\centerline{\fourteenbf Table of Contents}
\vskip36truebp}

\def\InC@ntents#1\par{\vfill\supereject
\he@dp@ge
\centerline{\fourteenbf#1}
\vskip26.4truebp\noindent
%\edef\s@ve{\string\toc@other\space#1\string\page\space\noexpand\folio\string\ajh}%
%garth
\edef\s@ve{\string\toc@other\space#1\string\page\space\string\hyperref\string\chapteR#1\string{\noexpand\folio\string}\string\ajh}%
\write\c@ntents\xp{\s@ve}}

\def\NotInC@ntents#1\par{\vfill\supereject
\he@dp@ge
\centerline{\fourteenbf#1}
\vskip36truebp\noindent}

%% Contents formatting commands
\def\toc@other#1\page#2\ajh{\vskip9.6truebp
\line{#1\hfill#2}}
\def\toc@chap#1 #2\page#3\ajh{\vskip9.6truebp
\line{\vbox{\hsize=\dimen255\relax\hangindent=\wd0
Chapter #1\quad#2}\hfill#3}}
\def\toc@app#1 #2\page#3\ajh{\vskip9.6truebp
\line{\vbox{\hsize=\dimen255\relax\hangindent=\wd0
Appendix \ifnum\LastAppendix>65 #1\fi\quad#2}\hfill#3}}
\def\toc@section#1 #2\page#3\ajh{\line{\hskip\wd2
\vbox{\hsize=\dimen255\relax\hangindent=\wd4
#1\quad\strut#2\strut}\hfill#3}}
\def\lot@table#1 #2\page#3\ajh{\vskip9.6truebp
\line{\vbox{\hsize=\dimen255\relax\hangindent=\wd0
Table #1\quad#2}\hfill#3}}
\def\lof@figure#1 #2\page#3\ajh{\vskip9.6truebp
\line{\vbox{\hsize=\dimen255\relax\hangindent=\wd0
Figure #1\quad#2}\hfill#3}}

%% abstract and acknowledgements commands
\def\Abstract#1{\NotInC@ntents Abstract\par
\input #1
\vfill\eject}

\def\Acknowledgements#1{\InC@ntents Acknowledgements\par
\input#1
\vfill\eject
\pageno=1}

%% Here goes the cross-referencing stuff.
\newread\@uxfile \newwrite\@uxfile
\newcount\run@gain	% counter to determine if we need to run again
\def\xrl@bel#1#2#3{\csarg\gdef{xr-#1}{#2}%
  \csarg\gdef{pageref-#1}{#3}}
\def\ref[#1]{\ifUndefined{xr-#1}\global\advance\run@gain by1%
  \message{! Unknown reference #1^^J}%
  [??]
\else
  \csname xr-#1\endcsname\fi}
\def\pgref[#1]{\ifUndefined{pageref-#1}\global\advance\run@gain by1%
  \message{! Unknown reference #1^^J}%
  [??]
\else
  \csname pageref-#1\endcsname\fi}
\def\writexr{\write\@uxfile}
\def\l@bel#1#2{\edef\l@beltemp{\noexpand\string\noexpand\xrl@bel{#1}{#2}}
\xp\xp\xp\writexr\xp{\l@beltemp{\the\pageno}}}
\def\showl@bel#1{\noindent\llap{\hbox{\eighttt#1\quad}}}

%% Now for the major formatting constructs. First, chapter, section,
%% and appendix commands.
\newcount\chapno \newcount\secno \newcount\thmno

\def\Ch@pterTitle#1\ajh{\let\\\cr
\vbox{\halign{\hfil\fourteenbf##\hfil\cr
#1\unskip\cr}}}

\def\Ch@pter#1\par{\centerline{\fourteenbf Chapter \the\chapno}
$$\Ch@pterTitle#1\ajh$$
\vskip36truebp\noindent
\edef\s@ve{\string\toc@chap\the\chapno\space#1
%\string\page\space\noexpand\folio\string\ajh}%
%garth
\string\page\space\string\hyperref\string\chapteR\romannumeral\chapno\string{\noexpand\folio\string}\string\ajh}%
\write\c@ntents\xp{\s@ve}}

\def\Ch@pterXR[#1] {\l@bel{#1}{\the\chapno}
\Ch@pter}

\outer\def\Chapter{\he@dp@ge
\advance\chapno by1
\secno=0 \thmno=0
\futurenonspacelet\ch@ptoken\ch@pdecide}

\def\ch@pdecide{\ifx[\ch@ptoken\let\next=\Ch@pterXR
\else\let\next=\Ch@pter\fi
\next}

%% The trouble with appendices is that they are lettered, not
%% numbered, and only if there's more than one are they even lettered.
\newcount\appno \newcount\LastAppendix
\advance\appno by64
\outer\def\Appendix{\he@dp@ge
\advance\appno by1
\secno=0 \thmno=0
\futurenonspacelet\@pptoken\@ppdecide}

\def\@ppdecide{\ifx[\@pptoken\let\next=\Appendix@XR
\else\let\next=\Appendix@\fi
\next}

\def\Appendix@XR[#1] {\l@bel{#1}{\the\appno}%
\Appendix@}

\def\Appendix@#1\par{\centerline{\fourteenbf Appendix
\ifnum\LastAppendix>65 \char\the\appno \fi}
$$\Ch@pterTitle#1\ajh$$
\vskip36truebp\noindent
\edef\s@ve{\string\toc@app\char\the\appno\space#1
\string\page\space\noexpand\folio\string\ajh}%
\write\c@ntents\xp{\s@ve}}

\endlinechar=-1
\outer\def\Section{\vskip0pt plus.2\vsize\penalty-250\relax
\vskip0pt plus-.2\vsize\bigskip
\advance\secno by1
\thmno=0
\futurenonspacelet\s@ctoken\s@cdecide}

\def\s@cdecide{\ifx[\s@ctoken\let\next=\S@ctionXR
\else\let\next=\S@ction\fi
\next}

\def\S@ctionXR[#1] {\l@bel{#1}{\ifnum\appno>64\char\the\appno
\else\the\chapno\fi .\the\secno}
\ifDr@ft\showl@bel{#1}\fi
\S@ction}

\def\S@ction#1\par{\setbox0=\hbox{\twelvebf\ifnum\appno>64
\char\the\appno\else\the\chapno\fi.\the\secno\quad}
\begingroup\baselineskip=14.4pt
\hangindent\wd0\noindent{\unhbox0\twelvebf#1\par}\endgroup
\nobreak\noindent
\edef\s@ve{\string\toc@section\ifnum\appno>64\char\the\appno
\else\the\chapno\fi .\the\secno\space#1
%\string\page\space\noexpand\folio\string\ajh}%
%garth
\string\page\space\string\hyperref\string\chapteR\romannumeral\chapno SEC\romannumeral\secno\string{\noexpand\folio\string}\string\ajh}%
\write\c@ntents\xp{\s@ve}}


%% Now define command to generate new theorem-like constructs.
\endlinechar=-1
\def\newthm#1{\xp\outer\xp\def\csname #1\endcsname{\global\advance\thmno by1
  \smallskip
  \xp\xp\xp\futurenonspacelet\xp\xp\csname @thmtoken#1\endcsname \csname
  @thmdecide#1\endcsname} 
\xp\def\csname @thmdecide#1\endcsname{%
\xp\ifx\xp[\csname @thmtoken#1\endcsname
  \xp\let\xp\next\csname @thmXR#1\endcsname
  \else
  \xp\let\xp\next\csname @thm#1\endcsname \fi
  \next}
\xp\def\csname @thmXR#1\endcsname[##1] {%
  \l@bel{##1}{\ifnum\appno>64 \char\the\appno\else\the\chapno\fi
  .\the\secno.\the\thmno}%
  \ifDr@ft\showl@bel{##1}\fi
  \csname @thm#1\endcsname}
\xp\outer\xp\def\csname #1Stop\endcsname{\endgroup\par
  \ifdim\lastskip<\medskipamount \removelastskip\penalty55\fi}
\xp\def\csname @thm#1\endcsname{\begingroup
  \def\>{\csname #1Stop\endcsname}
  \noindent{\bf#1\space\ifnum\appno>64
  \char\the\appno\else\the\chapno\fi .\the\secno .\the\thmno\quad}\sl}
}

\newthm{Theorem}
\newthm{Lemma}
\newthm{Proposition}
\newthm{Corollary}

%% Likewise, define constructs for remarks and examples
\def\newrem#1{\xp\outer\xp\def\csname #1\endcsname{\global\advance\thmno by1
  \smallskip
  \xp\xp\xp\futurenonspacelet\xp\xp\csname @remtoken#1\endcsname \csname
  @remdecide#1\endcsname} 
\xp\def\csname @remdecide#1\endcsname{%
\xp\ifx\xp[\csname @remtoken#1\endcsname
  \xp\let\xp\next\csname @remXR#1\endcsname
  \else
  \xp\let\xp\next\csname @rem#1\endcsname \fi
  \next}
\xp\def\csname @remXR#1\endcsname[##1] {%
  \l@bel{##1}{\ifnum\appno>64 \char\the\appno\else\the\chapno\fi
  .\the\secno.\the\thmno}
  \ifDr@ft\showl@bel{##1}\fi
  \csname @rem#1\endcsname}
\xp\outer\xp\def\csname #1Stop\endcsname{\endgroup\par}
\xp\def\csname @rem#1\endcsname{\begingroup
  \def\>{\csname #1Stop\endcsname}
  \noindent{\bf#1\space\ifnum\appno>64
  \char\the\appno\else\the\chapno\fi  .\the\secno .\the\thmno\quad}\rm}
}

\newrem{Remark}
\newrem{Example}
\newrem{Definition}
\endlinechar=13

%% Here, \defword just puts its argument in italics; in other styles,
%% it will be used for index entries.
\def\defword#1{{\it#1}}

%% Next define \boxit (from Seroul and Levy); this is so we can define
%% \square in case amstex isn't loaded.
\def\boxit#1#2{\hbox{\vrule
\vtop{\vbox{\hrule\kern#1%
  \hbox{\kern#1#2\kern#1}}
\kern#1\hrule}%
\vrule}}

\ifUndefined{newsymbol}\def\square{\boxit{3pt}{}}
\else\newsymbol\square 1003\fi

\outer\def\Proof{\begingroup
{\it Proof.}\quad
\let\>=\ProofStop}

\outer\def\ProofStop{\endgroup\QED}

\def\QED{{\unskip\nobreak\hfil\penalty50\hskip2em\vadjust{}\nobreak\hfill
$\square$\parfillskip=0truept\finalhyphendemerits=0\par\smallskip}}

%% \Quote is for quoted passages longer than 40(?) words; this is
%% required by the Thesis Office guidelines
\outer\def\Quote{\par\vskip9.6truebp
\begingroup\singlespace\advance\leftskip by\parindent
\noindent
\let\>=\QuoteStop}

\outer\def\QuoteStop{\par\endgroup\noindent}

%% Now, the two list macros: \Itemize and \Enumerate
\endlinechar=-1
\outer\def\Itemize{\par\begingroup \everypar{\hangindent=\parindent}
  \def\item{\par\indent\llap{$\bullet$\enspace}}
  \let\>=\ItemizeStop}
\def\ItemizeStop{\par\endgroup}

\newcount\itemno
\outer\def\Enumerate{\par\itemno=0
  \begingroup \everypar{\hangindent=\parindent}
  \def\item{\advance\itemno by1
    \futurenonspacelet\item@token\item@decide}
  \def\item@decide{\ifx[\item@token\let\next=\item@XR
    \else\let\next=\item@ \fi
    \next}
  \def\item@XR[##1] {\l@bel{##1}{\the\itemno}
    \par\ifDr@ft\showl@bel{##1}\fi
    \indent\llap{(\the\itemno)\enspace}}
  \def\item@{\par\indent\llap{(\the\itemno)\enspace}}
  \let\>=\EnumerateStop}
\def\EnumerateStop{\par\endgroup\noindent}
\endlinechar=13

%% Now, the \Figure and \Table commands. First, counters to determine
%% if we need to input .lot and .lof.
\newcount\figureno \newcount\tableno
\newcount\LastFigure \newcount\LastTable

\outer\def\Table{\ifnum\tableno=0
  \immediate\openout\t@bles=\jobname.lot\fi
\global\advance\tableno by1
\futurenonspacelet\t@bletoken\t@bledecide}

\def\t@bledecide{\ifx[\t@bletoken\let\next=\T@bleXR
\else\let\next=\T@ble\fi
\next}

\def\T@bleXR[#1] {\l@bel{#1}{\the\tableno}
\T@ble}

\def\T@ble#1\par{\edef\s@ve{%
\string\lot@table\the\tableno\space#1\string\page\space\noexpand\folio\string\ajh}%
\write\t@bles\xp{\s@ve}
\setbox0=\hbox{{\bf Table \the\tableno. }#1}
\begingroup
\let\>=\TableStop
\global\setbox1=\vbox\bgroup}

\outer\def\TableStop{\vfill\egroup\endgroup
\midinsert\bigskip
\ifdim\wd0<4truein \centerline{\box0}
  \else\centerline{\vbox{\hsize=4truein\noindent\singlespace\unhbox0}}\fi
\bigskip
\box1\smallskip
\endinsert}

\outer\def\Figure{\ifnum\figureno=0
  \immediate\openout\figur@s=\jobname.lof\fi
\global\advance\figureno by1
\futurenonspacelet\figur@token\figur@decide}

\def\figur@decide{\ifx[\figur@token \let\next=\Figur@XR
\else\let\next=\Figur@\fi
\next}

\def\Figur@XR[#1] {\l@bel{#1}{\the\figureno}
\Figur@}

\def\Figur@#1\par{\edef\s@ve{%
\string\lof@figure\the\figureno\space#1\string\page\space\noexpand\folio\string\ajh}%
\write\figur@s\xp{\s@ve}
\setbox0=\hbox{{\bf Figure \the\figureno. }#1}
\begingroup
\let\>=\FigureStop
\global\setbox1=\vbox\bgroup}

\outer\def\FigureStop{\vfill\egroup\endgroup
\midinsert
\box1
\ifdim\wd0<4truein \centerline{\box0} 
  \else\centerline{\vbox{\hsize=4truein\noindent\singlespace\unhbox0}}\fi
\endinsert}


%% bibtex interface
\def\bibref[#1]{\cite{#1}}
\def\mbox#1{\leavevmode\hbox{#1}}
\def\Bibliography#1{\InC@ntents Bibliography\par
\bibliography{#1}
\bibliographystyle{plain}
\vfill\eject}

%% Define commands for bibliography for those who don't want to use
%% bibtex. This is really just an enumerated list with item numbers in
%% square brackets.
\def\BBL#1{\InC@ntents Bibliography\par
\input#1}
\outer\def\BibList{\par\itemno=0
  \begingroup \everypar{\hangindent=\parindent}
  \def\item{\advance\itemno by1
    \futurenonspacelet\bibitem@token\bibitem@decide}
  \def\bibitem@decide{\ifx[\bibitem@token\let\next=\bibitem@XR
    \else\let\next=\bibitem@ \fi
    \next}
  \def\bibitem@XR[##1] {\l@bel{##1}{[\the\itemno]}
    \par\ifDr@ft\showl@bel{##1}\fi
    \indent\llap{[\the\itemno]\enspace}}
  \def\bibitem@{\par\indent\llap{[\the\itemno]\enspace}}
  \let\>=\BibListStop}
\def\BibListStop{\par\endgroup\noindent}

%% Define \InputFile (used in lollipop; maybe can make use of it to
%% take care of leftover insertions)
\def\InputFile:#1 {\vfill\supereject
\input #1}

%% Define \newop command.
\def\newop#1{\expandafter\def\csname #1\endcsname
	{\mathop{\text{\rm #1}}\nolimits}}

%% \Time typesets the time, to be used in draft mode.
\newcount\Hour \newcount\scratchtime \newcount\Minutes
\Hour=\time \Minutes=\time
\divide\Hour by60
\scratchtime=\Hour
\ifnum\Hour<13 \def\noonside{a.m.}\else
  \advance\Hour by-12 \def\noonside{p.m.}\fi
\multiply\scratchtime by60
\advance\Minutes by-\scratchtime
\def\Time{\number\Hour:\ifnum\Minutes<10\relax 0\fi
\number\Minutes\ \noonside}

%% Now define the \Start and \Stop commands
\def\Start{\greeting
\immediate\openin\@uxfile=\jobname.aux
\ifeof\@uxfile
  \message{! No file \jobname.aux}
  \immediate\closein\@uxfile
\else
  \begingroup
  \catcode`\@=11
  \input\jobname.aux
  \immediate\closein\@uxfile
  \endgroup
\fi
\immediate\openout\@uxfile=\jobname.aux
\csname @auxfiledonetrue\endcsname
\let\@auxfile=\@uxfile
\pageno=-1
\ifDr@ft\special{!userdict begin /bop-hook{
/Helvetica findfont 8 scalefont setfont 72 43 moveto
(\Time\ \number\month/\number\day/\number\year) show 
gsave 200 30 translate 65 rotate
/Helvetica findfont 216 scalefont setfont
0 0 moveto 0.99 setgray (DRAFT) show grestore}def }
%\let\doublespace=\singlespace
\fi
\ifFrontM@tter\TitleP@ge
\def\SignatoryPage{\vfill\egroup
\he@dp@ge
\setbox0=\vbox to\vsize{\line{}
\vfill
\noindent We approve the thesis of\S@nitizeJody.
\vskip24truebp
\line{\hskip4.25truein Date of Signature\hfil}
\vfill
\unvbox\Godb@x
\vfill}
\unvbox0
\eject
\doublespace}
\else
\def\SignatoryPage{\egroup\doublespace}
\def\Contents{\relax\openout\c@ntents=\jobname.toc
\openout\figur@s=\jobname.lof
\openout\t@bles=\jobname.lot}
\def\Abstract##1{\relax}
\def\Acknowledgements##1{\relax}
\fi
}



\def\Stop{\vfill\supereject
\immediate\write\@uxfile{\string\global\string\LastTable=\the\tableno}
\immediate\write\@uxfile{\string\global\string\LastFigure=\the\figureno}
\immediate\write\@uxfile{\string\global\string\LastAppendix=\the\appno}
\immediate\closeout\c@ntents
\immediate\closeout\@uxfile
\immediate\closeout\figur@s
\immediate\closeout\t@bles
\ifnum\run@gain>0
  \message{! New or changed cross-references --- run again} \fi
\end}

%% Restore old \catcode for @
\csname phd.sty by jimbo\endcsname

\def\Statement[#1]#2\EndStatement{#2}

\endinput


Version history

0.0--0.9	Done with Victor Eijkhout's lollipop metaformat; sort
		of proof of concept
0.91		March 1995; first version in plain tex
