BEGIN Lemma \protect \let  
BEGIN Proof 
 A routine calculation using $\mathcal {H}^s$-measurable hulls verifies that $\mathcal {H}^s(E) \ = \ \mathcal {H}^s(F) \, - \, \mathcal {H}^s(F \setminus E)$ even if $F$ is not $\mathcal {H}^s$-measurable. Therefore \[ \mathcal {H}^s_\infty (E) \ \leq \ \mathcal {H}^s(E) \ = \ \mathcal {H}^s(F) \, - \, \mathcal {H}^s(F \setminus E) \ \leq \ \mathcal {H}^s_\infty (F) \, - \, \mathcal {H}^s_\infty (F \setminus E) \ \leq \ \mathcal {H}^s_\infty (E) \] which completes the proof.
END Proof
 
BEGIN Theorem \protect \let  
BEGIN Question \protect \let  
BEGIN Corollary \protect \let  
BEGIN Proof 
 Since $F$ is self-similar it is modelled by a full shift and thus for any $i \in \mathcal {I}$ \[ F = \bigcup _{j \in \mathcal {I} : A_{i,j} = 1} F_A^j \] and so the result follows from Theorem \ref {main}.
END Proof
 
BEGIN Corollary \protect \let  
BEGIN Proposition \protect \let  
BEGIN Proof 
 Let the alphabet be indexed by the edge set $\mathcal {E}$. Now, for two edges $e,f \in \mathcal {E}$, let $A_{e,f} = 1$ if and only if $f$ begins from the vertex where $e$ ended, i.e., it is possible to walk along $e$ and then along $f$. If $\Gamma $ is strongly connected, the matrix $A$ is irreducible. It is now straightforward to see that for all $e \in \mathcal {E}_{i,j}$ \[ F_A^e = S_e(F_j) \] and so for all $i \in \mathcal {V}$ we have \[ F_i = \bigcup _{j = 1}^{N} \bigcup _{e \in \mathcal {E}_{i,j}} F_A^e \] and, moreover, for any edge $e$ which finishes at $i$ \[ \bigcup _{j = 1}^{N} \mathcal {E}_{i,j} = \{ f \in \mathcal {E} : A_{e,f} = 1\} \] as required.
END Proof
 
BEGIN Proposition \protect \let  
BEGIN Proof 
 We draw a directed edge $e=e_{i,j}$ from $i$ to $j$ if $A_{i,j}=1$, let $S_{e}=S_{i}$ and let $\mathcal {E}=\{e_{i,j}:i,j \in \mathcal {I}, A_{i,j}=1\}$. If $A$ is irreducible then $\Gamma $ is strongly connected. We have that \[ F_{A}^{i} \ =\bigcup _{j \in \mathcal {I},A_{i,j}=1} S_{i}\big (F_A^{j}\big ) \ = \ \bigcup _{j \in \mathcal {I}} \bigcup _{e \in \mathcal {E}_{i,j}} S_e\big (F_A^j\big ) \] and since there is a unique set of compact attractors associated to this graph-directed system, the proposition follows.
END Proof
 
BEGIN Corollary \protect \let  
BEGIN Proof 
 We will prove the result for $F_A$; the result for cylinders is similar and omitted. Fix $r \in (0, \text {diam}(F_A) ]$ and $x \in F$. The lower bound is straightforward and follows by choosing a first level cylinder with positive measure and then finding a copy of this cylinder inside $F_A \cap B(x,r)$ with diameter comparable to $r$ and then applying the scaling property for Hausdorff measure. For the upper bound, \begin {eqnarray*} \mathcal {H}^s\big ( F_A \cap B(x,r) \big ) & \leq & \sum _{i \in \mathcal {I}} \mathcal {H}^s\big ( F^i_A \cap B(x,r) \big ) \\ \\ & = & \sum _{i \in \mathcal {I}} \mathcal {H}_\infty ^s\big ( F^i_A \cap B(x,r) \big ) \qquad \text {by Theorem \ref {main} and Lemma \ref {haus11}}\\ \\ & \leq & \sum _{i \in \mathcal {I}} \text {diam}\big ( F^i_A \cap B(x,r) \big )^s \\ \\ & \leq & M(2r)^s \end {eqnarray*} completing the proof.
END Proof
 
BEGIN Corollary \protect \let  
BEGIN Proof 
 Zerner \cite [Corollary after Proposition 2]{zerner} proved that (1) $\Rightarrow $ (2), (2) and (3) are equivalent since any self-similar set has finite Hausdorff measure in its Hausdorff dimension, see \cite [Corollary 3.3]{falconer}, our result, Corollary \ref {ahlforscor}, shows that (2) $\Leftrightarrow $ (4), the fact that (4) $\Rightarrow $ (5) is straightforward and folklore (see, for example, \cite [Proposition 2.1 (viii)]{tyson}), and since $\dim _\text {H} F < 1$ the result mentioned above \cite [Theorem 1.4]{assouadoverlaps} shows that (5) $\Rightarrow $ (1).
END Proof
 
BEGIN Proposition \protect \let  
BEGIN Proof 
 Let $r \in (0,1/2]$ be chosen such that \[ \frac {\log 2}{-\log r} \ = \ \frac {s-1}{n-1} \ =: \ t \] and let $F_1 = [0,1]$ be viewed as a self-similar attractor of an iterated function system which fails the weak separation property and all of the maps have contraction ratio $r$. Such an iterated function system can be constructed by modifying \cite [Section 2 (v)]{bandt-graf}. Also, let $E \subseteq [0,1]$ be the self-similar set defined by the maps $x \mapsto rx$ and $x \mapsto rx+(1-r)$, and observe that $\dim _\text {H} E = t$ and $\mathcal {H}^t(E) >0$ since the open set condition is satisfied, see \cite [Corollary 3.3]{falconer}. Now let $F = F_1 \times E^{n-1} \subseteq [0,1]^n$ be the product of $F_1$ with $n-1$ copies of $E$. It is easy to see that $F$ is not contained in any affine hyperplane and that it is a self-similar set defined via the natural product iterated function system. It follows from \cite [Theorem 8.10]{mattila} that $\dim _\text {H} F = 1 + (n-1) t = s$ and that $\mathcal {H}^s (F) >0$. Note that to compute the dimension of $F$ here we used the fact that the Hausdorff and packing dimensions coincide for any self-similar set \cite [Corollary 3.3]{techniques}. Finally it is easy to see that the weak separation property fails by virtue of it failing in the first coordinate.
END Proof
 
BEGIN Question \protect \let  
BEGIN Proposition \protect \let  
BEGIN Proof 
 For any compact set $F \subset \mathbb {R}^n$, if $\mathcal {P}^s_0 (F) < \infty $, then $\mathcal {P}^s (F) \ = \ \mathcal {P}_0^s (F)$, by the main result in \cite {packingmeasure}. In the case when $\mathcal {P}^s_0 (F) = \infty $, the additional assumption implies that $\mathcal {P}^s_0 (B \cap F) = \infty $ for all open balls intersecting $F$, which by \cite [Lemma 4]{haase}, implies that $\mathcal {P}^s(F) = \infty $.
END Proof
 
BEGIN Theorem \protect \let  
BEGIN Question \protect \let  
BEGIN Theorem \protect \let  
BEGIN Theorem \protect \let  
BEGIN Proposition \protect \let  
BEGIN Proof 
 Assume that $A_{1},A_{2},\ldots \in \mathcal {A}$ is a disjoint sequence of sets. Let $M=\max _{1\leq i\leq m}\frac {\mathrm {diam}(B_{i})^{s}}{\mathcal {H}^{s}(B_{i})}$. If $A_{i}$ is similar to $B_{j}$ then \[ \mathrm {diam}(A_{i})^{s} \ = \ \mathcal {H}^{s}(A_{i})\, \frac {\mathrm {diam}(B_{j})^{s}}{\mathcal {H}^{s}(B_{j})} \ \leq \ \mathcal {H}^{s}(A_{i})\, M. \] Hence \[ \sum _{i=1}^{\infty }\mathrm {diam}(A_{i})^{s} \ = \ \sum _{i=1}^{\infty }\mathcal {H}^{s}(A_{i})\, M \ \leq \ \mathcal {H}^{s}(H)\, M \ < \ \infty . \] Thus the proposition follows from a version of Vitali's covering theorem \cite [Theorem 1.10]{vitali}.
END Proof
 
BEGIN Lemma \protect \let  
BEGIN Proof 
 Since $A$ is irreducible, for every $i\in \mathcal {I}\setminus \left \{ j\right \} $ we can find $\textbf {\emph {i}}_{i}\in \mathcal {I}_{A}^{i*}$ such that $(\textbf {\emph {i}}_{i})_{0}=i$ and $(\textbf {\emph {i}}_{i})_{last}=j$. Of course there are infinitely many such choices for $\textbf {\emph {i}}_{i}$, but for definiteness choose one with minimal length. Thus if $\textbf {\emph {i}}\in \mathcal {I}_{A}^{j*}$ and $(\textbf {\emph {i}})_{last}=i$ then $\tau (\textbf {\emph {i}})*\textbf {\emph {i}}_{i}\in \mathcal {I}_{A}^{j*}$ and $(\tau (\textbf {\emph {i}})*\textbf {\emph {i}}_{i})_{last}=j$. \foreignlanguage {english}{Let \begin {equation} r_{\mathrm {\mathrm {min}}}=\min \left \{ \frac {\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}_{i}}\right )}{\mathcal {H}^{s}\left (F_{A}^{i}\right )}:i\in \mathcal {I}\setminus \left \{ j\right \} \right \} \in (0,1).\label {eq:r_min} \end {equation} } \par We define a sequence $\mathcal {I}_{0}^{j},\mathcal {I}_{1}^{j},\ldots $ inductively where $\mathcal {I}_{n}^{j}$ satisfies properties \textit {(i), (iii), (iv)} and \textit {(v)}. The collection of sets $\left \{ F_{A}^{\textbf {\emph {i}}}:\textbf {\emph {i}}\in \mathcal {I}_{A}^{j*},\left |\textbf {\emph {i}}\right |\geq 2\right \} $ is a Vitali cover of $F_{A}^{j}$ and hence by Proposition \ref {lem:VCT} there exists $\mathcal {I}_{0}^{j}\subseteq \left \{ \textbf {\emph {i}}\in \mathcal {I}_{A}^{j*}:\left |\textbf {\emph {i}}\right |\geq 2\right \} $ such that $F_{A}^{\textbf {\emph {i}}}\cap F_{A}^{\textbf {\emph {j}}}=\emptyset $ for $\textbf {\emph {i}},\textbf {\emph {j}}\in \mathcal {I}_{0}^{j}$, $\textbf {\emph {i}}\neq \textbf {\emph {j}}$ and \[ \mathcal {H}^{s}\left (F_{A}^{j}\setminus \left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{0}^{j}}F_{A}^{\textbf {\emph {i}}}\right )\right )=0. \] Once $\mathcal {I}_{n}^{j}$ is defined we define $\mathcal {I}_{n+1}^{j}$ as follows. First, for each $\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}$ we define a set $\mathcal {I}_{n+1,\textbf {\emph {i}}}^{j}$. If $(\textbf {\emph {i}})_{last}=j$ then $\mathcal {I}_{n+1,\textbf {\emph {i}}}^{j}=\left \{ \textbf {\emph {i}}\right \} $. If $(\textbf {\emph {i}})_{last}=i\neq j$ then \[ \left \{ F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}}:\textbf {\emph {j}}\in \mathcal {I}_{A}^{i*},F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}}\cap F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}}=\emptyset \right \} \] is a Vitali cover of $F_{A}^{\textbf {\emph {i}}}\setminus F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}}$ and hence by Proposition \ref {lem:VCT} there exists \[ \mathcal {J}_{n+1,\textbf {\emph {i}}} \ \subseteq \ \left \{ \textbf {\emph {j}}:\textbf {\emph {j}}\in \mathcal {I}_{A}^{i*},F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}}\cap F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}}=\emptyset \right \} \] such that $F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {i}}_{1}}\cap F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {i}}_{2}}=\emptyset $ for all $\textbf {\emph {i}}_{1},\textbf {\emph {i}}_{2}\in \mathcal {J}_{n+1,\textbf {\emph {i}}}^{j}$, with $\textbf {\emph {i}}_{1}\neq \textbf {\emph {i}}_{2}$, and \[ \mathcal {H}^{s}\left (\left (F_{A}^{\textbf {\emph {i}}}\setminus F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}}\right )\setminus \left (\bigcup _{\textbf {\emph {j}}\in \mathcal {J}_{n+1,\textbf {\emph {i}}}^{j}}F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}}\right )\right ) \ = \ 0. \] Now let \[ \mathcal {I}_{n+1,\textbf {\emph {i}}}^{j} \ = \ \left \{ \tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}\right \} \, \cup \, \left \{ \tau (\textbf {\emph {i}})*\textbf {\emph {j}}:\textbf {\emph {j}}\in \mathcal {J}_{n+1,\textbf {\emph {i}}}^{j}\right \} \] and \[ \mathcal {I}_{n+1}^{j} \ = \ \bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n}}\mathcal {I}_{n+1,\textbf {\emph {i}}}^{j}. \] \selectlanguage {english}Finally we define \[ \mathcal {I}_{\infty }^{j} \ = \ \bigcap _{n_{1}=1}^{\infty }\bigcup _{n_{2}=n_{1}}^{\infty }\mathcal {I}_{n_{2}}^{j}. \] Clearly $F_{A}^{\textbf {\emph {i}}}\cap F_{A}^{\textbf {\emph {j}}}=\emptyset $ for $\textbf {\emph {i}},\textbf {\emph {j}}\in \mathcal {I}_{\infty }^{j}$, $\textbf {\emph {i}}\neq \textbf {\emph {j}}$. If $\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}$ and $(\textbf {\emph {i}})_{last}\neq j$ then $\textbf {\emph {i}}\notin \mathcal {I}_{n+l}^{j}$ for every positive integer $l$, hence $\textbf {\emph {i}}\notin \mathcal {I}_{\infty }^{j}$. So $(\textbf {\emph {i}})_{last}=j$ for all $\textbf {\emph {i}}\in \mathcal {I}_{\infty }^{j}$. Clearly \begin {equation} \mathcal {H}^{s}\left (F_{A}^{j}\setminus \left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}}F_{A}^{\textbf {\emph {i}}}\right )\right ) \ = \ 0\label {eq:Egyenlito lem 1} \end {equation} for every positive integer $n$. For $\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}$ such that $(\textbf {\emph {i}})_{last}=i\neq j$ we have that \[ \left \{ \textbf {\emph {j}}:\tau (\textbf {\emph {i}})*\textbf {\emph {j}}\in \mathcal {I}_{n+1},(\tau (\textbf {\emph {i}})*\textbf {\emph {j}})_{last}\neq j\right \} \ \subseteq \ \mathcal {J}_{n+1,\textbf {\emph {i}}}^{j} \] and \begin {eqnarray} \mathcal {H}^{s} \left (F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}}\right ) \ \ = \ \ \mathcal {H}^{s}\left (S_{\tau (\textbf {\emph {i}})*\tau (\textbf {\emph {j}}_{i})}(F_{A}^{j})\right )&=& r_{\tau (\textbf {\emph {i}})}^{s}r_{\tau (\textbf {\emph {j}}_{i})}^{s}\mathcal {H}^{s}\left (F_{A}^{j}\right )\frac {\mathcal {H}^{s}\left (F_{A}^{i}\right )}{\mathcal {H}^{s}\left (F_{A}^{i}\right )} \nonumber \\ \nonumber \\ &=&\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {j}}_{i}}\right )\frac {\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}}\right )}{\mathcal {H}^{s}\left (F_{A}^{i}\right )} \nonumber \\ \nonumber \\ &\geq & r_{\mathrm {\min }}\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}}\right ) \label {lowerestimate1} \end {eqnarray} by (\ref {eq:r_min}). Also $(\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i})_{last}=j$ by definition. Therefore \[ \mathcal {I}_{n+1}^{j}\setminus \mathcal {I}_{\infty }^{j} \ \subseteq \ \bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}\setminus \mathcal {I}_{\infty }^{j}}\left \{ \tau (\textbf {\emph {i}})*\textbf {\emph {j}}:\textbf {\emph {j}}\in \mathcal {J}_{n+1,\textbf {\emph {i}}}^{j}\right \} \] and \begin {eqnarray*} \mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n+1}^{j}\setminus \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right ) &\leq & \sum _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}\setminus \mathcal {I}_{\infty }^{j}}\mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {j}}\in \mathcal {J}_{n+1,\textbf {\emph {i}}}^{j}}F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}}\right )\\ \\ &\leq & \sum _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}\setminus \mathcal {I}_{\infty }^{j}}\mathcal {H}^{s}\left ( F_{A}^{\textbf {\emph {i}}} \setminus F_{A}^{\tau (\textbf {\emph {i}})*\textbf {\emph {j}}_{i}} \right )\\ \\ &\leq & \sum _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}\setminus \mathcal {I}_{\infty }^{j}}\left (\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}}\right )-r_{\mathrm {min}}\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}}\right )\right ) \qquad \text { by (\ref {lowerestimate1})}\\ \\ &=&\sum _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}\setminus \mathcal {I}_{\infty }^{j}}(1-r_{\mathrm {min}})\, \mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}}\right ) \\ \\ &=&(1-r_{\mathrm {min}})\, \mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n}^{j}\setminus \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right ). \end {eqnarray*} Hence \[ \mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n+1}^{j}\setminus \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right ) \ \leq \ (1-r_{\mathrm {min}})^{n}\, \mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{0}^{j}\setminus \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right ) \ = \ (1-r_{\mathrm {min}})^{n}\, \mathcal {H}^{s}\left (F_{A}^{j}\right ) \] for all $n\in \mathbb {N}$ and combined with (\ref {eq:Egyenlito lem 1}) we get that \[ \mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{n+1}^{j}\cap \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right ) \ \geq \ \big (1-(1-r_{\mathrm {min}})^{n}\big )\, \mathcal {H}^{s}\left (F_{A}^{j}\right ). \] Thus \[ \mathcal {H}^{s}\left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right ) \ \geq \ \mathcal {H}^{s}\left (F_{A}^{j}\right ) \] and so \[ \mathcal {H}^{s}\left (F_{A}^{j}\setminus \left (\bigcup _{\textbf {\emph {i}}\in \mathcal {I}_{\infty }^{j}}F_{A}^{\textbf {\emph {i}}}\right )\right ) \ = \ 0. \] \par \selectlanguage {british}Thus the collection $\mathcal {I}_{\infty }^{j}$ satisfies properties \textit {(i)-(v)}. Property \textit {(vi)} follows easily from \textit {(iv)} and \textit {(v)} since \[ \mathcal {H}^{s}\left (F_{A}^{j}\right ) \ = \ \sum _{\textbf {\emph {i}}\in \mathcal {I}_{\infty }^{j}}\mathcal {H}^{s}\left (F_{A}^{\textbf {\emph {i}}}\right ) \ = \ \sum _{\textbf {\emph {i}}\in \mathcal {I}_{\infty }^{j}}\mathcal {H}^{s}\left (S_{\tau (\textbf {\emph {i}})}\left (F_{A}^{j}\right )\right ) \ = \ \sum _{\textbf {\emph {i}}\in \mathcal {I}_{\infty }^{j}}r_{\tau (\textbf {\emph {i}})}^{s}\mathcal {H}^{s}\left (F_{A}^{j}\right ) \] and the fact that we can divide by $\mathcal {H}^{s}\left (F_{A}^{j}\right )$.
END Proof
 
BEGIN Lemma \protect \let  
BEGIN Proof 
 Observe that $A^m$ is also an irreducible matrix with spectral radius $1$. Hence it follows from \cite [Theorem 1.3.28]{matrix} that $A^m x = x$ and therefore $Ax=x$ by the Perron-Frobenius theorem.
END Proof
 
