BEGIN Theorem 1.1  
 \label {t:simplest} For any integers $1\le k<n$ and $s\in [0,1]$ the union of any nonempty $s$-Hausdorff-dimensional family of $k$-dimensional affine subspaces of $\R ^n$ has Hausdorff dimension $s+k$.
END Theorem
 
BEGIN Theorem 1.2  
 \label {t:FalcMatt} Let $1 \leq k <n$ be integers and $s\in [0,1]$. If $E$ is a nonempty $s$-Hausdorff dimensional family of $k$-dimensional affine subspaces and $B$ is a subset of $\bigcup _{P \in E} P$ such that $B\cap P$ has Hausdorff dimension $k$ for every $P\in E$ then \begin {equation}\label {firstone} \dim B= \dim \left ( \bigcup _{P \in E} P \right ) = s+k, \end {equation} where here and in the sequel $\dim $ denotes Hausdorff dimension.
END Theorem
 
BEGIN Notation 1.3  
 For any integers $1 \leq k < n$, let $A(n, k)$ denote the space of all $k$-dimensional affine subspaces of $\rr ^n$. For any $s \geq 0$, $\de \in (0,\infty ]$ and $A \su \rr ^n$, the $s$-dimensional Hausdorff $\de $-premeasure of $A$ will be denoted by $\hau ^s_{\de }(A)$, the $s$-dimensional Hausdorff measure by $\hau ^s(A)$, and the Hausdorff dimension of $A$ by $\dim A$. The open ball of center $x$ and radius $r$ will be denoted by $B(x,r)$ or $B_{\rho }(x,r)$ if we want to indicate the metric $\rho $. For a set $U \su \rr ^n$, $U_{\de }=\cup _{x \in U} B(x,\de )$ denotes the open $\de $-neighborhood of $U$. We will use the notation $a \lesssim _{\alpha } b$ if $a \leq Cb$ where $C$ is a constant depending on $\alpha $. If it is clear from the context what $C$ should depend on, we may write only $a \lesssim b$.
END Notation
 
BEGIN Theorem 2.1  
 \label {thm1} Let $1 \leq k < n$ be integers, let $A(n, k)$ denote the space of all $k$-dimensional affine subspaces of $\rr ^n$ and consider any natural metric on $A(n, k)$. Let $0 < \al \leq k$ be any real number. Suppose that $B \su \rr ^n, \emptyset \neq E \su A(n, k)$ and for every $k$-dimensional affine subspace $P \in E$, $\dim (P \cap B) \geq \al $. Then \begin {equation} \label {geq} \dim B \geq 2\al -k + \min (\dim E, 1). \end {equation}
END Theorem
 
BEGIN Remark 2.2  
 An example for such a metric on $A(n,k)$ is defined in \cite {Ma}, p.~53. Let $\rho $ denote the given metric on $A(n,k)$. We say that $\rho $ is a natural metric if $\rho $ and the metric $d$ defined in \cite {Ma} are strongly equivalent; that is, there exist positive constants $K_1$ and $K_2$ such that, for every $P,P' \in A(n,k)$, $K_1 \cdot d(P,P')\leq \rho (P,P') \leq K_2 \cdot d(P,P').$
END Remark
 
BEGIN Remark 2.3  
 \label {rem} For $\al =k$ and $\dim E\le k+1$ the estimate \eqref {geq} is sharp in the sense that for any $s\in [0,k+1]$ there exist sets $E$ and $B$ with the above property and $\dim E=s$ such that we have equality in \eqref {geq}: it is easy to see using Theorem~\ref {t:FalcMatt} that we obtain such an example by letting $E$ to be any $s$-Hausdorff dimensional collection of $k$-dimensional affine subspaces of a fixed $k+1$-dimensional subspace of $\R ^n$ and $B=\cup _{P\in E} P$. \par Clearly, \eqref {geq} can be a good estimate only when $\al $ is close to $k$: for $\al <k-1$ the right-hand side of \eqref {geq} is less than $\al $ but trivially, $\dim B\ge \al $. Since finding the best estimate for the $n=2, k=1, \dim E=1, \al <1$ case is essentially equivalent to finding the minimal Hausdorff dimension of a Furstenberg set, this cannot be easy and it is unlikely that our estimate is sharp for any $\al <k$.
END Remark
 
BEGIN Lemma 2.4  
 \label {l:easy} \label {leq} For any $1 \leq k < n$ integers and $\emptyset \neq E\su A(n,k)$ we have $$ \dim \left (\bigcup _{P \in E} P \right )\leq k + \dim E. $$
END Lemma
 
BEGIN Proof 
 By taking a finite decomposition of $E$ if necessary, we can assume that there exists a $P_0\in A(n,k)$ such that the orthogonal projection of $P_0$ onto any $P\in E$ is $P$. Fix such a $P_0$. For any $P\in E$ and $t\in P_0$ let $h(P,t)$ be the orthogonal projection of $t$ onto $P$. Then $h(\{P\}\times P_0)=P$ for any $P\in E$, so $h(E\times P_0)=\bigcup _{P \in E} P$. It is not hard to check that $h:E\times P_0\to \R ^n$ is locally Lipschitz, therefore we obtain $$ \dim \left (\bigcup _{P \in E} P\right ) = \dim (h(E\times P_0)) \le \dim (E\times P_0) = \dim E + k. $$
END Proof
 
BEGIN Corollary 2.5  
 \label {fact1} Let $0 \leq k < n$ be integers, $0 \leq \al \leq k$, $\emptyset \neq C \su \rr ^n$, and $B \su \rr ^n$ such that for every $x \in C$ there exists a $k$-dimensional affine subspace $P$ containing $x$ such that $P$ intersects $B$ in a nonempty set of Hausdorff dimension at least $\al $. Then $\dim B \geq 2\al -k + \min (\dim C - k, 1)$. \par Specially, if $1 \leq k$ and a set $A \su \rr ^n$ contains a $k$-dimensional punctured affine subspace through every point of a set $C$ with $\dim C \geq k+1$, then $\dim A \geq k+1$.
END Corollary
 
BEGIN Proof 
 If $k=0$, or $k \geq 1$ and $\al =0$, then the statement clearly holds. Suppose now $k \geq 1, \al >0$. Let $E \su A(n,k)$ be the set of those $k$-dimensional affine subspaces that intersect $B$ in a nonempty set of Hausdorff dimension at least $\al $. Then $C \su \bigcup _{P \in E} P$, thus $\dim C \leq \dim E + k$ by Lemma \ref {leq}, which means, $\dim E \geq \dim C-k$. Applying Theorem \ref {thm1} for $B$ and $E$, we obtain $\dim B \geq 2\al -k + \min (\dim C - k, 1)$.
END Proof
 
BEGIN Theorem 2.6  
 \label {fact2} Let $0 \leq k < n$ be integers, $0 \leq \al \leq k$ and $0 \leq r$ be real numbers, $\emptyset \neq C \su \rr ^n$, and $B \su \rr ^n$ be such that for every $x \in C$ there exists a $k$-dimensional affine subspace $P$ at distance $r$ from $x$ such that $P$ intersects $B$ in a nonempty set of Hausdorff dimension at least $\al $. Then $\dim B \geq 2\al -k + \dim C - (n-1)$. \par Specially, if $B$ contains a $k$-dimensional affine subspace at a fixed positive distance from every point of $\R ^n$, or if $B$ contains the $k$-skeleton of a rotated unit cube around every point of $\rr ^n$, then $\dim B\ge k+1$.
END Theorem
 
BEGIN Proof 
 \par If $r=0$, then we can apply Corollary \ref {fact1} and thus we get $\dim B \geq 2\al -k +\min (\dim C - k, 1) \geq 2\al -k +\dim C - (n-1)$. \par Suppose now that $r>0$. If $k=0$, then the condition of Theorem \ref {fact2} means that for every $x \in C$ there exists a point contained in $B$ at distance $r$ from $x$. Then $\bigcup _{p \in B} (p + rS^{n-1}) \sp C$, where $S^{n-1}$ denotes the unit sphere of center $0$ in $\rr ^n$. Let $g: \rr ^n \times S^{n-1} \to \rr ^n$, $(p,e) \mapsto p+r e$. Clearly, $g$ is Lipschitz and $g(B \times S^{n-1})=\bigcup _{p \in B} (p + rS^{n-1})$. Thus we have $$\dim C \leq \dim \bigcup _{p \in B} (p + rS^{n-1}) \leq \dim (B \times rS^{n-1}) =\dim B + n-1,$$ thus $\dim B \geq \dim C - (n-1)$. \par If $k \geq 1$ and $\al =0$, then the statement is trivially true, so suppose now that $k \geq 1$, $\al >0$. We will use a similar argument as in the case $k=0$, but we use Theorem \ref {thm1}. Let $E \su A(n,k)$ be the set of those $k$-dimensional affine subspaces that intersect $B$ in a set of Hausdorff dimension at least $\al $. By Theorem \ref {thm1} it is enough to prove that $\dim E \geq \dim C - (n-1)$. For each $P \in E$ let $D(P) \su \rr ^n$ be the union of those $k$-dimensional affine subspaces that are parallel to $P$ and are at distance $r$ from $P$ (in the Euclidean distance of $\rr ^n$). Clearly, $D(P)$ is exactly the set of those points of $\rr ^n$ that are at distance $r$ from $P$, thus by assumption, $\bigcup _{P \in E} D(P) \sp C$. It is easy to see that $\dim D(P)=n-1$ for any $P \in E$. \par For any $P \in A(n,k)$, let $V_P$ denote the translate of $P$ containing $0$ and let $V_P^{\perp }$ denote the orthogonal complement of $V_P$. It is easy to see that there is a finite decomposition $E=\bigcup _{i=1}^{N} E_i$ such that for all $i$ there exists a $P_i \in A(n,k)$ with the following properties: the orthogonal projection of $P_i$ onto any $P\in E_i$ is $P$, and the orthogonal projection of the $(n-k-1)$-sphere $V_{P_i}^{\perp } \cap S^{n-1}$ onto $V_P^{\perp }$ is contained in the $\frac {1}{2}$-neighborhood of the $(n-k-1)$-sphere $V_P^{\perp } \cap S^{n-1}$, for any $P \in E_i$. \par Using the above properties, one can easily define for all $i$ a locally Lipschitz map $h_i: E_i \times D(P_i) \to \rr ^n$ such that $h_i(\{P\} \times D(P_i))=D(P)$ for all $P \in E_i$. We obtain $$\dim C \leq \dim \bigcup _{P \in E} D(P) =\max _i \dim \bigcup _{P \in E_i} D(P) = \max _i \dim h_i(E_i \times D(P_i)) \leq $$ $$ \leq \max _i \dim (E_i \times D(P_i)) = \max _i \dim E_i + n-1= \dim E + n-1,$$ and thus $\dim E \geq \dim C - (n-1)$ and we are done.
END Proof
 
BEGIN Remark 2.7  
 In the special cases mentioned in Theorem~\ref {fact2}, the estimate is sharp. It is easy to see that $B=\R ^{k+1}\times \Q ^{n-k-1}$ contains a $k$-dimensional affine subspace at every positive distance from every point of $\R ^n$ and clearly $\dim B=k+1$. The construction given in \cite {CCHK} for a set $B$ with $\dim B =k+1$ containing the $k$-skeleton of a rotated unit cube centered at every point of $\R ^n$ is also based on this example.
END Remark
 
BEGIN Corollary 2.8  
 \label {ffact2} Let $0 \leq k < n$ be integers, $S \su \R ^n$ with $\dim S=k$ that can be covered by a countable union of $k$-dimensional affine subspaces. Let $\emptyset \neq C \su \R ^n$, $A \su \R ^n$ such that for all $x \in C$ there exists a rotation $T \in SO(n)$ such that $A$ contains $x + T(S)$. Then $\dim A \geq \max (k, k+ \dim C - (n-1))$.
END Corollary
 
BEGIN Proof 
 Clearly, $\dim A \geq k$. Let $S_i \su \rr ^n$, $i \geq 1$, be $k$-dimensional affine subspaces such that $S \su \bigcup _{i \geq 1} S_i$. Let $r_i=d(0,S_i)$, and $\al _i=\dim (S_i \cap S)$. Then $\sup _{i \geq 1} \al _i =k$ by $\dim S=k$. The set $A$ has the property that for all $x \in \rr ^n$, there exists an affine subspace $P=x+T(S_i)$ at distance $r_i$ from $x$ such that $\dim (A \cap P) \geq \al _i$, thus we can apply Theorem \ref {fact2} for each $i$. We obtain that $\dim A \geq 2\al _i-k + \dim C - (n-1)$ for all $i\geq 1$, and thus $\dim A \geq k + \dim C - (n-1)$.
END Proof
 
BEGIN Remark 2.9  
 The authors in \cite {CCHK} show that the estimate in Corollary \ref {ffact2} is sharp if $\dim C=n$ and $S$ can be covered by a countable union of $k$-dimensional affine subspaces that do not contain the origin. \par On the other hand, if the covering subspaces contain the origin, then the estimate is not always sharp. Indeed, if $S$ is a punctured line through the origin and $C=\rr ^n$, then $A$ is a Nikodym set, thus the conjecture is $\dim A = n$. The lower bounds obtained for the dimension of Besicovitch sets give lower bounds for the dimension of Nikodym sets, thus for $\dim A$ as well. A survey of the currently best lower bounds can be found in \cite {Ma15}. As an example, by \cite {Wo}, $\dim A \geq \frac {n+2}{2}$ which is better than the bound $2$ given by Corollary \ref {ffact2} provided $n >2$.
END Remark
 
BEGIN Lemma 3.1  
 \label {use} For $X\subset \R ^n$, $\al >0$ and $c \geq 0$ let \begin {align*} E_{{\alpha },c,X} & =\{P \in A(n,k) \colon \hau ^\alpha _{\infty }(P\cap X) > c \}. \end {align*} If $X\subset \R ^n$ is bounded $G_\delta $, then $E_{\alpha ,c,X}$ is analytic.
END Lemma
 
BEGIN Remark 3.2  
 It is easy to see that if $X\subset \R ^n$ is compact, then $E_{\alpha ,c,X}$ is $F_{\sigma }$, thus also analytic. Therefore, to prove Theorem \ref {thm1} (or any of the above mentioned results) with the extra assumption that $B \su \rr ^n$ is compact, the following argument could be skipped.
END Remark
 
BEGIN Definition 3  
 Let $Y$ be a Hausdorff topological space. A capacity on $Y$ is a map $\ga : \mathcal {P}(Y) \to [0,\infty ]$ such that \begin {enumerate}[(i)] \item \label {one} $A \su B \ \Longrightarrow \ \ga (A) \leq \ga (B)$, \par \item \label {two} $A_0 \su A_1 \su \cdots \ \Longrightarrow \ \ga (A_n) \to \ga (\cup _n A_n)$, \par \item \label {thr} for any compact $K \su Y$ we have $\ga (K) < \infty $, and if $\ga (K) < r$, then for some open $U \sp K$, $\ga (U) < r$. \end {enumerate}
END Definition
 
BEGIN Proof 
 Let $$T=\{(P, x) \in A(n,k) \times \R ^n \,:\, x\in P\},$$ this is the natural vector bundle of rank $k$ over $A(n,k)$. Let $\phi :T\to \R ^n$ be defined by $\phi ((P,x))=x$, and let $\pi :T\to A(n,k)$ be defined by $\pi ((P,x))=P$. On $T$ we can consider the metric inherited from a product metric on $A(n,k)\times \R ^n$ so that $\phi $ is isometry on all fibres. \par Let $\iK $ be the space of those non-empty compact subsets of $T$ which lie in one fibre, that is, $$\iK =\{K\subset T \,:\,K \text { is non-empty compact, and }\pi (K)\text { is a singleton}\}.$$ This is a complete metric space in the Hausdorff metric. Not to mix up singletons and their unique elements, let $\pi ':\iK \to A(n,k)$ be defined by $\{\pi '(K)\}=\pi (K)$. \par Since $X$ is $G_\delta $, $\phi ^{-1}(X)$ is $G_\delta $ in $T$. It is easy to check that $$\iK (\phi ^{-1}(X)) \stackrel {\text {def}}{=} \{ K\in \iK \,:\,K\subset \phi ^{-1}(X)\}$$ is also $G_\delta $ in $\iK $. \par For $\al >0$ and $d > 0$, let $$\iK ^\alpha _d = \{ K \in \iK \,:\,\hau ^\alpha _\infty (\phi (K))\ge d\}.$$ It is easy to see that these are closed sets in $\iK $. \par Let $$\iK _{\alpha , c, X} = \iK (\phi ^{-1}(X)) \cap \bigcup _n \iK ^\alpha _{c+1/n}.$$ Clearly, this is a Borel set in $\iK $. We claim that \par \begin {equation} E_{\alpha , c, X}= \pi '(\iK _{\alpha , c, X}). \label {eqmm1} \end {equation} Clearly, the right hand side consists of those $P\in A(n,k)$ for which $P\cap X$ contains a compact subset $K$ with $\hau ^\alpha _\infty (K) > c$. We will show that for any $P \in A(n,k)$, \begin {equation} \label {eqeq1} \exists K \su P\cap X \ \text {compact with} \ \hau ^\alpha _\infty (K) > c \ \Longleftrightarrow \ \hau ^\alpha _\infty (P\cap X)>c, \end {equation} which implies \eqref {eqmm1}. \par To prove \eqref {eqeq1}, we use the concept of capacities (see e.g.~\cite {Kec}, Section 30). \begin {defin*} Let $Y$ be a Hausdorff topological space. A capacity on $Y$ is a map $\ga : \mathcal {P}(Y) \to [0,\infty ]$ such that \begin {enumerate}[(i)] \item \label {one} $A \su B \ \Longrightarrow \ \ga (A) \leq \ga (B)$, \par \item \label {two} $A_0 \su A_1 \su \cdots \ \Longrightarrow \ \ga (A_n) \to \ga (\cup _n A_n)$, \par \item \label {thr} for any compact $K \su Y$ we have $\ga (K) < \infty $, and if $\ga (K) < r$, then for some open $U \sp K$, $\ga (U) < r$. \end {enumerate} \end {defin*} We claim that $\ga =\hau ^\alpha _\infty $ is a capacity on $\ol {B(0,R)}$ for any $R>0$. Indeed, it is clear that $\hau ^\alpha _\infty $ satisfies properties \eqref {one} and \eqref {thr} in any metric space, and it follows from the results in \cite {Da} that \eqref {two} holds for $\hau ^\alpha _\infty $ in any compact metric space. \par Since $X$ is bounded $G_\delta $ (thus also analytic), and $\hau ^\alpha _\infty $ is a capacity on the compact metric space $\ol {B(0,R)}$ with $X \su \ol {B(0,R)}$, the Choquet Capacitability Theorem (\cite {Kec}, (30.13)) can be applied, and it gives precisely \eqref {eqeq1}. \par Finally, \eqref {eqmm1} implies that $E_{\alpha , c, X}$ is a continuous image of a Borel set, thus analytic, and we are done.
END Proof
 
BEGIN Lemma 3.3  
 \label {assump} Let $s=\min (\dim E,1) >0$. \label {ass} We can make the following assumptions in the proof of Theorem \ref {thm1}: \begin {enumerate}[(i)] \par \item \label {gdelta} $B$ is a $G_\delta $ set, that is, a countable intersection of open sets; \par \item \label {poz} $\hau ^\alpha (P\cap B)>0$ for every $P\in E$; \par \item \label {bounded} $B$ is bounded; \par \item \label {comp}\label {p2} $E \su A(n,k)$ is compact, and $\hau ^s(E)>0$. Moreover, there is $\ep >0$ such that for every $P\in E$, $$\hau ^{\al }_{\infty }(P \cap B) \ge \ep .$$ \par \par \end {enumerate}
END Lemma
 
BEGIN Proof 
 \par First we remark that if $E$ is replaced by any subset $\ti {E} \su E$, or $B$ is replaced by any superset $\ti {B} \supset B$, then the condition $\dim (P \cap \ti {B} ) \geq \dim (P \cap B ) \geq \al $ in Theorem \ref {thm1} is trivially satisfied for all $P \in \ti {E} \su E$. \par \begin {enumerate}[(i)] \par \item Let $\ti {B} \sp B$ be a $G_{\de }$ set with $\dim B= \dim \ti {B}$; the existence of such set is proved for example in \cite {Fr}. Clearly, it is enough to prove Theorem~\ref {thm1} for $\ti {B}$ replacing $B$. \par \item Clearly, replacing $\alpha $ with a slightly smaller value, we may assume, without loss of generality, that $\hau ^{\alpha }(P\cap B)>0$ for every $P\in E$. \par \item If $B$ is not bounded then consider $B = \cup _n B_n$ where $B_n$ is bounded $G_{\de }$ and define $E_n=\{P \in E \colon \hau ^{\alpha }(P\cap B_n)>0 \}$. Clearly, $E=\cup _n E_n$ thus $ \dim E=\sup \{ \dim E_n \colon n \in \mathbb {N}\}$. If Theorem~\ref {thm1} holds for the bounded set $B_n$ and $E_n \su A(n,k)$ for every $n$ then it holds for $B$ and $E$ as well. Thus we can assume that $B$ is bounded. \par \item By \eqref {gdelta}, we may assume that $B$ is $G_\delta $. By \eqref {poz}, for every $P\in E$, $\hau ^\alpha (P\cap B)>0$, and thus $\hau ^\alpha _\infty (P\cap B)>0$. Thus $E\su \cup _{i=1}^\infty E_{\al ,1/i,B}$, where the sets $E_{\al ,1/i,B}$ are the analytic sets given by Lemma~\ref {use}. For every $\delta >0$, $\hau ^{s-\delta }(E)=\infty $ and therefore there is $i=i(\delta )$ with $\hau ^{s-\delta }(E_{\al ,1/i,B})>0$. By Howroyd's theorem \cite {Ho}, there is a compact set $E^\delta \subset E_{\al ,1/i,B}$ with $\hau ^{s-\delta } (E^\delta )>0$. If Theorem~\ref {thm1} holds for these compact sets $E^\delta $, then $\dim B \geq 2 \al - k+s-\delta $ for every $\delta >0$, which finishes the proof. \end {enumerate}
END Proof
 
BEGIN Lemma 3.4  
 \label {ci} We can make the following further assumptions in Theorem \ref {thm1}. \begin {enumerate}[(I)] \item \label {p1} For every $P\in E$, $P \cap H_i$ is a singleton and contained in $S$ for all $i=0,1,\dots ,k$; \item \label {p3} $B\subset S'$. \end {enumerate}
END Lemma
 
BEGIN Proof 
 \^^M\begin {enumerate}[(I)] \item We can cover $E$ by finitely many compact subsets for which \eqref {p1} holds after applying a suitable similarity transformation. \item Since we may assume that $B$ is bounded, this can be obtained after applying a homothety. \end {enumerate}
END Proof
 
BEGIN Remark 3.5  
 \label {meas} In the subsequent proofs, applications of Lemma~\ref {use} imply that the sets we take $\mu $-measure of are $\mu $-measurable, since they are in the $\sigma $-algebra generated by analytic sets.
END Remark
 
BEGIN Lemma 3.6  
 \label {prob2} There exists an integer $\rc \geq M$ such that \begin {equation} \label {B_l} \mu \left (P \in E \colon \hau ^{\al }_{\infty }(P \cap B_{\rc }) \geq \frac {1}{\rc ^2 }\right ) \geq \frac {1}{\rc ^2 }. \end {equation}
END Lemma
 
BEGIN Proof 
 Let $$A_l=\left \{P \in E \colon \hau ^{\al }_{\infty }(P \cap B_{l}) \geq \frac {1}{\rc ^2}\right \},$$ and assume that $\mu (A_{\rc }) < 1/{\rc }^2$ for all ${\rc } \geq M$. Since $\sum _{l=M}^\infty 1/l^2 < 1$ (we may assume $\ep \le 1$), these sets $A_{\rc }$ cannot cover $E$. Therefore, there exists $P\in E$ such that $\hau ^{\al }_{\infty }(P \cap B_{\rc })< 1/l^2$, and thus $\hau ^{\al }_{\infty }(P \cap B)< \sum _{l=M}^\infty 1/l^2<\eps $, which contradicts \eqref {a1}.
END Proof
 
BEGIN Lemma 3.7  
 There is a constant $c>0$ depending on $E$, $n$, and $k$ but independent of $\rc $, $\ep $, $\gamma $ and the covering of $B$ such that, for every $0<\delta \le \de _0$, \label {Ade} $$\leb ^n(F_{\de }) \ge c \frac {\de ^{n-(2\al -k+s)}}{\rc ^8 \log \frac {1}{\de }}. $$
END Lemma
 
BEGIN Remark 3.8  
 Note that the integer $\rc $, the sets $\ti {E}$, $\ti {P}$ for every $P \in \ti {E}$, and $F$ depend on the cover $B \su \bigcup _{i=1}^{\infty } B(x_i,r_i)$.
END Remark
 
BEGIN Remark 3.9  
 As it happens often, it would be easier to prove the lower bound for the box dimension of $B$. For that purpose, we would not need the previous steps, it would be enough to estimate $\leb ^n(B_{\de })$ from below. To prove the lower bound for the Hausdorff dimension, we sorted out a big enough part of $B$ that can be covered by balls of approximately the same radius.
END Remark
 
BEGIN Lemma 4.1  
 \label {gengeo} For any $P, P' \in \ti {E}$, \begin {equation} \label {zz1} \leb ^n(P_{\de } \cap P'_{\de } \cap S) \lkb \frac {\de ^{n-k+1}}{\rho (P,P')+\de } \end {equation} for all $0 < \de \leq \de _0$, where $\rho $ denotes the metric on $A(n,k)$, and $\de _0$ is from \eqref {sub}. \par 
END Lemma
 
BEGIN Remark 4.2  
 \label {metric} Put $d(P,P')=\|x(P)-x(P') \|$, then $d$ is a natural metric on $\ti {E}$. Thus the metrics $d$ and $\rho $ are strongly equivalent, this means, there exist positive constants $K_1$ and $K_2$ such that, for every $P,P' \in \ti {E}$, $K_1 \cdot d(P,P')\leq \rho (P,P') \leq K_2 \cdot d(P,P').$
END Remark
 
BEGIN Lemma 4.3  
 \label {code} \begin {enumerate}[(a)] \par \item \label {empty} There is a constant $D>0$ (depending only on $n$ and $k$) such that if $$\| a-a' \| > \| b - b' \| + D \de $$ then $P_{\de } \cap P'_{\de } \cap S = \emptyset $ for all $0 < \de \leq \de _0$. \par \item \label {small} If $\|b-b'\| >0$, then $\leb ^n(P_{\de } \cap P'_{\de } \cap S) \lkb \frac {\de ^{n-k+1}}{\|b-b'\|}$ for all $0 < \de \leq \de _0$. \par \end {enumerate}
END Lemma
 
BEGIN Proof 
 Fix $P, P' \in \ti {E}$, and put $f,g: \rr ^k \to \rr ^{n-k}$, $$ t=(t_1,\dots ,t_k) \mapsto a^0+t_1b^1+\dots +t_kb^k=f(t), $$ $$t=(t_1,\dots ,t_k) \mapsto a^{0'}+t_1b^{1'}+\dots +t_kb^{k'}=g(t),$$ where $a^0,b^1,\dots b^k$, and $a^{0'},b^{1'},\dots b^{k'}$ are the code coordinates of $P$ and $P'$, respectively. Then $$P \cap S = \{(t,f(t)) \in \rr ^n \colon t \in C \}, \ P' \cap S = \{(t,g(t)) \in \rr ^n \colon t \in C \}.$$ \par One can easily prove using \eqref {p1} of Lemma \ref {ci} and the compactness of $S$, that there is a constant $c>0$ independent of $\de $ such that for all $Q \in \ti {E}$, \begin {equation} \label {tc} Q_\de \su Q+ \left (\{0\} \times (-c\de ,c\de )^{n-k} \right ), \end {equation} where for $A,B \su \rr ^n$, $A+B=\{a+b \colon a \in A, b \in B \}$. Fix such a constant $c$. \par \par Applying \eqref {tc} for $P$ and $P'$, we have $$P_{\de } \su \{(t,u) \in \R ^n \colon |f(t)-u| < c\de \}, P'_{\de } \su \{(t,u) \in \R ^n \colon |g(t)-u| < c\de \},$$ and \begin {equation} \label {ball} P_{\de } \cap P'_{\de } \cap S \su \{(t,u) \in \R ^n \colon u \in (B(f(t),c\de ) \cap B(g(t),c\de )), t \in C \}. \end {equation} Clearly, $|f(t)-g(t)|>2 c \de $ implies $B(f(t),c\de ) \cap B(g(t),c\de )=\emptyset $, thus $P_{\de } \cap P'_{\de } \cap S =\emptyset $. Put $D=2 c$, then $\| a-a' \| > \| b - b' \| + D \de $ implies $|f(t)-g(t)|>2 c \de $, thus we are done with the proof of \eqref {empty} of Lemma \ref {code}. \par By \eqref {ball} and Fubini's theorem we also have $$\leb ^n(P_{\de } \cap P'_{\de } \cap S) \leq \int _C \leb ^{n-k}(B(f(t),c\de ) \cap B(g(t),c\de )) d\leb ^k(t).$$ If $B(f(t),c\de ) \cap B(g(t),c\de ) \neq \emptyset $, we will use the trivial estimate $$\leb ^{n-k}(B(f(t),c\de ) \cap B(g(t),c\de )) \lkb _{n,k} (c\de )^{n-k} \lkb \de ^{n-k}.$$ Put $N=\{t \in C \colon |f(t)-g(t)| \leq 2 c \de \}$, then $$\leb ^n(P_{\de } \cap P'_{\de } \cap S) \lkb \int \limits _{N} \de ^{n-k} d\leb ^k(t).$$ Clearly, we have \begin {equation} \label {ph} N \su \bigcap _{j=1}^{n-k} \left \{t \in C \colon \left |\left (a_j^0-a_j^{0'} \right ) + \sum _{i=1}^k t_i \left (b_j^i-b_j^{i'} \right ) \right | \leq 2c\de \right \}. \end {equation} \par By the definition of $\| \cdot \|$, there are indices $i,j$ such that $0 <\|b-b'\| =|b_j^i-b_j^{i'}|$. Fix such an $i$ and $j$, we can assume that $i=k$ without loss of generality. Then we get using \eqref {ph} that $$N \su \left \{t \in C \colon p_-(t) \leq t_k \leq p_+(t) \right \},$$ where $$p_-(t)=p_-(t_1,\dots ,t_{k-1})=\frac {-2c\de -(a^0-a^{0'})-\sum \limits _{i=1}^{k-1} t_i (b_j^i-b_j^{i'})}{b_j^k-b_j^{k'}},$$ $$p_+(t)=p_+(t_1,\dots ,t_{k-1})=\frac {2c\de -(a^0-a^{0'})-\sum \limits _{i=1}^{k-1} t_i (b_j^i-b_j^{i'})}{b_j^k-b_j^{k'}}.$$ \par The set $\left \{t \in C \colon p_-(t) \leq t_k \leq p_+(t) \right \}$ is obtained as the intersection of the simplex $C$ and the strip between the parallel hyperplanes $\{t_k=p_+(t)\}, \{t_k=p_-(t)\}$. One can easily calculate the distance of these hyperplanes, using the normal vector $n=(b_j^1-b_j^{1'},\dots ,b_j^k-b_j^{k'})$. One gets $$d=d(\{t_k=p_+(t)\}, \{t_k=p_-(t)\})=\frac {2c\de }{\sqrt {\sum \limits _{i=1}^{k} (b_j^i-b_j^{i'})^2}}.$$ Thus the set $N$ is contained in a rectangular box, where the shortest side length is $d$ and the others are $\diam (C)=\sqrt {2}$. Then $$\leb ^k(N) \lkb \frac {\de }{\sqrt {\sum \limits _{i=1}^{k} (b_j^i-b_j^{i'})^2}} \lkb \frac {\de }{|b_j^k-b_j^{k'}|} = \frac {\de }{\|b-b'\|},$$ thus $$\leb ^n(P_{\de } \cap P'_{\de } \cap S) \lkb \frac {\de ^{n-k+1}}{\|b-b'\|}$$ and we are done with the proof of Lemma \ref {code}.
END Proof
 
BEGIN Proof 
 Using \eqref {empty} of Lemma \ref {code} we obtain that $P_{\de } \cap P'_{\de } \cap S= \emptyset $ for all $0 < \de \leq \de _0$ if $\| a-a' \| > \| b - b' \| + D \de $, so \eqref {zz1} is clearly satisfied. \par Assume now that $\| a-a' \| \leq \| b - b' \| + D \de $, and $\| b - b' \| \leq \de $. By Remark \ref {metric}, $$\rho (P,P') \leq K_2 \|x-x' \| \leq K_2 (D+1) \de \lkb \de ,$$ and then since $S$ is bounded, we have $$\leb ^n(P_{\de } \cap P'_{\de } \cap S) \leq \leb ^n(P_{\de } \cap S) \lkb \de ^{n-k}=\frac {\de ^{n-k+1} }{\de } \lkb \frac {\de ^{n-k+1} }{\rho (P,P') + \de }.$$ Thus we are done in this case. \par If $\| a-a' \| \leq \| b - b' \| + D \de $ and $\|b-b'\| \geq \de $, we have that $$\rho (P,P') + \de \leq K_2 \|x-x' \| + \de \leq K_2 (\| b - b' \| + D \de ) + \de \lkb \|b-b'\|$$ using Remark \ref {metric} again. Applying \eqref {small} of Lemma \ref {code}, we obtain that $$\leb ^n(P_{\de } \cap P'_{\de } \cap S) \lkb \frac {\de ^{n-k+1} }{\|b-b'\|} \lkb \frac {\de ^{n-k+1} }{\rho (P,P') + \de },$$ which is \eqref {zz1}. \par 
END Proof
 
