
***
Definition 1.1. Given a prime power q and integers n ≥ 1 let V (q, n) be the poset of all
subspaces
of Fnq ordered by inclusion. For an integer 0 ≤ i ≤ n, the q-binomial coefficient
n
n
i q is the number of subspaces of Fq of dimension i.

***
Theorem 1.2. Let q be a prime power and k be a fixed positive integer. There exists a
constant n0 (k) such that if n ≥ n0 (k) and S ⊆ V (q, n) has cardinality at least
k−1 
X
r=0

then

n
 n−k+1+2r 
2




+ t,
q

d(n + k)/2e
comp(S) ≥ t
k


.
q

***
Definition 1.3. Given n ≥ 1, we define a poset on {0, 1, 2}n where x ≤ y if and only if
xj ≤ yj for 1 ≤ j ≤ n, where xj and yj are the jth coordinates of x and y, respectively. For
0 ≤ i ≤ 2n, let `i (n) denote the number of vectors in {0, 1, 2}n whose coordinates sum to i.

***
Theorem 1.4. Let k be a fixed positive integer. Then there exists a constant n0 (k) such that
if n ≥ n0 (k) and S ⊆ {0, 1, 2}n has cardinality at least
n+d k−1
2 e

X

`r (n) + t,

r=n−b k−1
2 c

then


comp(S) ≥


`3k−1 (n)
− 1 t.
`2k−1 (n)

***
Theorem 1.6.h Let iq be a fixed prime power.
√
n
(1+O( nq−n/4 )) bn/2c
q.
2

The number of antichains in V(q, n) is

***


Theorem 1.7. The number of antichains in

{0, 1, 2}n

is 2

1+O

√

log n/n `n (n)

.

***
Theorem 1.8. Let q be a fixed prime power and ε > 0. There exists a positive constant
c(ε, q) such that if p ≥ c(ε, q)/q n/2 , then with highh probability
every antichain in a p-random
i
n
subset of V (q, n) has cardinality at most (1 + ε)p bn/2c .
q

***
Theorem 1.9. Let ε > 0 be fixed. There exists a positive constant c(ε) such that if p ≥ c(ε)/n,
then with high probability every antichain in a p-random subset of {0, 1, 2}n has cardinality
at most (1 + ε)p`n (n).

***
Definition 2.1. Let P be a poset. A comparability digraph for P is a digraph D with
V (D) = P such that
• for every directed arc (x, y) of D, we have that x is comparable to y in P , and
• for every comparable pair x, y ∈ P , exactly one of the arcs (x, y) or (y, x) is in E(D).

***
Lemma 2.2. Let P be a poset, let D be a comparability digraph for P , let µ be a distribution
on the chains of P and let Cµ be a random chain chosen according to µ. Suppose further that
P (x ∈ Cµ ) > 0 for every x ∈ P . Then, for every set S ⊆ P , we have



 !
−1

comp(S) ≥

max
(x,y)∈E(D)

P (y ∈ Cµ | x ∈ Cµ )

−1

|S| − min P (x ∈ Cµ )
x∈P

.

***
Remark 2.4. We remark that the proof of this lemma generalises to give a lower bound
on the number of edges induced by a set of m vertices in a general graph G in terms of m.
That is, one could orient the edges of the graph and select a random clique according to a
probability distribution µ.

***
Theorem 3.1. [Kleitman [23]] Let k be a fixed positive integer. Then there exists a constant
n0 (k) such that if n ≥ n0 (k) and S ⊆ P(n) is a set of cardinality at least

k−1 
X
n
 n−k+1+2r  + t,
r=0

then

2



d(n + k)/2e
comp(S) ≥ t
.
k

***
Definition 4.1. A poset P is said to be ranked if it can be partitioned into non-empty sets
L0 , . . . , LN called levels such that
S
• if x ∈ Li and x < y, then y ∈ j>i Lj ,
• if x < y such that x ∈ Li and y ∈ Lj for j > i + 1, then there exists z ∈ Li+1 such that
x < z < y.
If x ∈ Li , then we say that the rank of x is i.

***
Definition 4.2. Let P be a ranked poset with non-empty levels L0 , . . . , LN . A non-empty
finite multiset C of maximal chains in P is called a regular covering by chains if for 0 ≤ i ≤ N
every element of Li is contained in exactly |C |/|Li | chains of C .

***
Definition 4.3. Let P be a ranked poset with levels L0 , . . . , LN . Then P is said to have the
LYM property if, for every antichain A ⊆ P ,
N
X
|A ∩ Li |
i=0

|Li |

≤ 1.

***
Definition 4.4. Let P be a ranked poset with levels L0 , . . . , LN . Then P is said to have the
normalised matching property if for 0 ≤ i ≤ N − 1 and T ⊆ Li we have
|T |
|{y ∈ Li+1 : y > x for some x ∈ T }|
≥
.
|Li+1 |
|Li |

***
Theorem 4.5. [Kleitman [25]] Let P be a ranked poset. The following are equivalent: (1) P
has a regular covering by chains, (2) P has the LYM property and (3) P has the normalised
matching property.

***
Definition 4.7. For integers i and s, let Lsi be the elements of Li with exactly s coordinates
equal to 2. Note that Lsi is non-empty if and only if max{0, i − n} ≤ s ≤ bi/2c.

***
Definition 4.8. For integers i and s, define
bi/2c

L≥s
i :=

[

Lri and

r=s

L≤s
i :=

s
[
r=max{0,i−n}

Lri .

***
Lemma 4.13. Let k ≥ 1 be a fixed integer, let n be large with respect to k and let Cµ be a
chain chosen randomly according to µ. Let 0 ≤ i, j ≤ 2n be integers such that
• |i − j| ≥ k,
• either min{i, j} ≥ 2k or max{i, j} ≤ 2n − 2k, and
• |j − n| ≤ |i − n|.
If x ∈ Li and y ∈ Lj are such that x is comparable to y, then

P (y ∈ Cµ | x ∈ Cµ ) ≤

−1
`3k−1 (n)
−1
.
`2k−1 (n)

***
0 <w .
Proposition 4.16. For 1 ≤ i ≤ n − 1 and 0 ≤ s < i/2 we have wi,s
i,s

***
Proposition 4.19. Suppose that n ≥ 5. Then for 1 ≤ i ≤ n − 1 and 0 ≤ s <
2
wi,s ≤ (i+1)|L
.
i+1 |

i
2

we have

***
Case 1: s = 0.

***
Case 2: 1 ≤ s ≤ s0 .

***
Case 3: s0 + 1 ≤ s < 2i .

***
Corollary 4.23. For n ≥ 5 and 0 ≤ i ≤ 2n − 1, if x ∈ Li and y ∈ Li+1 such that x < y, then
(
2|Li |/(i + 1)|Li+1 | if i ≤ n − 1
P (y ∈ Cµ | x ∈ Cµ ) ≤
2/(2n − i)
otherwise.

***
Case 1: k ≤ j − i ≤ 11n/10.

***
Case 2: i + j = 2n and i < 9n/20.

***
Claim 4.25. If there exist a coordinate α ∈ [n] such that xα = 0 and yα = 2, then for every
coordinate β ∈ [n] with xβ = 1 we have yβ = 2.

***
Case 3: j − i > 11n/10 and i + j < 2n.

***

X
Definition 5.1. Given a set X and an integer j, we let ≤j
denote the set of all subsets of


Pj
n
m of cardinality at most j. Also, for n ≥ j, define ≤j := r=0 nr .

***
Lemma 5.2. Let d and m be positive integers and let P be a poset such that |P | > m and
every subset S of P of cardinality greater than m contains at least |S|d comparable pairs.
Then there exists a function




P
P
f:
→
≤ |P |/(2d + 1)
≤m
such that for every antichain I ⊆ P there exists a subset T of I of cardinality at most
|P |/(2d + 1) with T ∩ f (T ) = ∅ and I ⊆ T ∪ f (T ).

***
Lemma 5.3. For k ≥ 1 let d1 > · · · > dk and m0 > · · · > mk be positive integers and let P
be a poset such that |P | = m0 and, for 1 ≤ j ≤ k, every subset S of P of cardinality greater
than mj contains at least |S|dj comparable pairs. Then there exists functions f1 , . . . , fk where




P
P
P
→
fj :
≤ mj
≤ jr=1 (mr−1 /(2dr + 1))
such that for every antichain I ⊆ P there exists disjoint subsets T1 , . . . , Tk of I with
(i) |Tj | ≤ mj−1 /(2dj + 1) for 1 ≤ j ≤ k,
S

j−1
(ii) Tj ⊆ fj−1
T
r=1 r for 2 ≤ j ≤ k − 1,
(iii)

S

j
r=1 Tr

(iv) I ⊆

S



∩ fj

S



∪ fk

k
r=1 Tr

j
r=1 Tr

S



= ∅ for 1 ≤ j ≤ k and

k
r=1 Tr



.

***
Case 1: dPi−1 (ui−1 ) ≥ 2dk .

***
Case 2: dPi−1 (ui−1 ) < 2dk .

***

Lemma 5.4. For k ≥ 1 let d1 > · · · > dk and m0 > · · · > mk be positive integers and let P
be a poset such that |P | = m0 and, for 1 ≤ j ≤ k, every subset S of P of cardinality greater
than mj contains at least |S|dj comparable pairs. Then there is a collection F of subsets of
P such that

Q
mr−1
(a) |F| ≤ kr=1 ≤mr−1
,
/(2dr +1)
(b) |A| ≤ mk +

mr−1
r=1 2dr +1

Pk

for every A ∈ F and

(c) for every antichain I of P , there exists A ∈ F such that I ⊆ A.

***
Theorem 6.1. [See, e.g., [22]] The number of antichains in P(n) is at most
2



√
n
log(n)/n (dn/2e
1+O
)

.

***
Remark 6.2. Balogh, Treglown and Wagner [8] have also used the container method to prove
an upper bound on the number of antichains in P(n). Their proof only applies a single-stage
container lemma (similar to Lemma 5.2 ), however, and so the bound that they obtain is
weaker than that of Theorem 6.1 .
In the proofs of Theorems 6.1 and 1.7 we used Lemma 5.3 with k = 2 and in the proof of
Theorem 1.6 we used Lemma 5.3 with k = 1. We remark that it is not possible to obtain
better bounds by following the same proof with a larger fixed value of k.
We should also mention that much stronger bounds than that of Theorem 6.1 are known. In
particular, Korshunov [27] obtained precise asymptotics of the number of antichains in P(n).

***
Theorem 6.3. [The Chernoff Bound; see, e.g., [17]] Suppose
Pn that X1 , . . . , Xn are independent
random variables taking values in {0, 1} and let X := i=1 Xi . Then

 − δ2 E(X)
3
e
if 0 < δ < 1,
P(X > (1 + δ)E(X)) ≤
δE(X)
e− 3
if δ > 1.

***
Conjecture 7.1. Let r, n be positive integers such that n is large with respect to r. Then, for
1 ≤ m ≤ (r + 1)n , the number of comparable pairs in a subset of {0, . . . , r}n of cardinality m
is minimised by a set whose elements have coordinate sum as close to rn/2 as possible.

***
Conjecture 7.2. [Weak form of Conjecture 7.1 ] Let r, k be positive integers. There exist a
positive constant c(r, k) such that for every S ⊆ {0, . . . , r}n we have

comp(S) ≥ |S| − k`drn/2e (n, r) c(r, k)nk

***
Note added in the proof. Following the submission of this paper, Balogh, Petřı́čová and
Wagner [7] disproved Conjecture 7.1 for all r ≥ 2 and Samotij [32] proved the conjecture of
Kleitman [23] that, for any k ≥ 2 and 1 ≤ m ≤ 2n , the number of chains of length k in a
subset of P(n) of size m is minimised by a collection of subsets of [n] of size as close to n/2
as possible.

***
Theorem A.1. [Wilf [38]] For a fixed prime power q and n → ∞, we have
 2 
|V (q, n) | = Θ q n /2 , and


n
bn/2c
h
i 
n
In particular, |V (q, n) | = Θ bn/2c
.
q



 2 
= Θ q n /2 .
q

***
Theorem A.2. [Anderson [2]] `n (n) = Θ



3n
√
n



.

***
Theorem A.3. [Anderson [1]] The sequence `0 (n), . . . , `2n (n) is log-concave.

***
Lemma A.4. For n ≥ 4 and 1 ≤ i ≤ n − 3,
`i+1 (n)
di/2e − bi/2c
n − di/2e
n+1
≤
≤
+
.
i+1
`i (n)
di/2e
d(i + 2)/2e

***
Lemma A.5. For n ≥ 5 we have
`n−1 (n)
4n + 7
n+2
≤
≤
n
`n−2 (n)
4n − 2

***
Lemma A.6. For n ≥ 5 we have
`n (n)
n+1
d(n − 1)/2e − b(n − 1)/2c b(n + 1)/2c
+
≤
≤
d(n − 1)/2e
d(n + 1)/2e
`n−1 (n)
n

