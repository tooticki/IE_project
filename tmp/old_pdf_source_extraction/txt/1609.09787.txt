***
Definition 1.1. Let R be a ring. We say that A ⊆ Rm is diophantine over R if there exists
a polynomial g(x1 , . . . , xm , y1 , . . . , yn ) ∈ R[x1 , . . . , xm , y1 , . . . , yn ] such that
(a1 , . . . , am ) ∈ A ⇐⇒ ∃r1 , . . . , rn ∈ R s.t. g(a1 , . . . , am , r1 , . . . , rn ) = 0.

***
Theorem 1.2. Let K be a global function field of odd characteristic and let S be a
finite, nonempty set of primes of K. Then OS is first-order universally definable in K.
Equivalently, K \ OS is diophantine over K.

***
Theorem 1.3. Let K be a global field with char(K) 6= 2. Then
√
{(x, y) ∈ K × × K × |x 6∈ Ny (K( y))}
is diophantine over K.

***
Theorem 1.4. Let K be a global field with char(K) 6= 2. Then K × \ K ×2 is diophantine
over K.

***
Theorem 2.1. (Artin Reciprocity) The Artin map is surjective and there exists a modulus
m containing all the primes of K which ramify in L such that the kernel is Pm NL/K (IL (m0 ));
here NL/K is the norm map on fractional ideals and m0 is the modulus of L consisting of
primes of L lying above those of K contained in m.

***
Remark 2.2. We call any m as in Theorem 2.1 an admissible modulus for the extension L
over K.

***
Theorem 2.3. [Existence Theorem] Let K be any global field. Fix an algebraic closure K
of K. Given a finite index open subgroup H ⊂ CK , there is a unique finite abelian extension
L of K in K such that H = N (CL ).

***
Definition 2.4. Let Im (A) be the group of fractional ideals of A which are coprime to m.
We have a natural injection j : Km,1 → Im (A) whose image we denote by Pm (A). This image
consists of principal fractional ideals αA with vp (α − 1) ≥ m(p). Define
Clm (A) := Im (A)/Pm (A).

***
Lemma 2.5. [Kernel-Cokernel sequence] Given a pair of maps between abelian groups
f

g

A→
− B→
− C
there is an exact sequence
0 → ker f → ker g ◦ f → ker g → coker f → coker g ◦ f → coker g → 0.

***
Proposition 2.6. Let m be a modulus of K coprime to ∞.
(1) The ideal map id : Im → Im (A) induces an isomorphism Im /(Km,1 Wm ) ∼
= Clm (A).
∼
(2) The inclusion map Im → I induces an isomorphism Im /Km,1 = CK .

***
Proposition 2.7. The group Clm (A) is finite.

***
Corollary 2.8. There is a finite abelian extension KmA of K whose Galois group is isomorphic
to Clm (A) via the Artin map.

***
Theorem 2.9. Let A and m be as above. Any ideal class in Clm (A) contains infinitely many
prime ideals of A.

***
Lemma 3.1.
(1) If p 6∈ ∆a,b , then Sa,b (Kp ) = Kp .
(2) If p ∈ ∆a,b then red−1
p (Up ) ⊆ Sa,b (Kp ) ⊆ Op .
(3) For any p with |Fp | > 11, we have Fp = Up + Up .
(4) For each a, b ∈ K × ,
\
Sa,b = K ∩
Sa,b (Kp ).
p∈∆a,b

***
Proposition 3.2. For any a, b ∈ K × , we have
\
Ta,b =
Op .
p∈∆a,b

***
Lemma 3.3. Take a, b ∈ K × whose images in√K × /K ×2 are distinct and let m be an
√
admissible modulus for the extension L := K( a, b)/K and let
ψL/K : Im → {±1} × {±1}
be the Artin map. Suppose that m is divisible also by all primes dividing (ab). For a prime
p ∈ SK such that p - m, p ∈ ∆a,p ∩ ∆b,p if and only if vp (p) is odd and ψL/K (p) = (−1, −1).

***
Lemma 3.4. Suppose p ∈ K × and let m be a modulus as in Lemma 3.3 . Additionally,
suppose (p) and m are coprime. Then we have the following identification of sets of primes,
where the two sets differ at most by primes dividing the modulus.
P(−1,−1) (p) ↔ ∆a,p ∩ ∆b,p ,
P(−1,1) (p) ↔ ∆a,p ∩ ∆ab,p ,
P(1,−1) (p) ↔ ∆b,p ∩ ∆ab,p .

***
Lemma 3.5. Let p ∈ SK with p - m and suppose that ψL/K (p) = (i, j) with (i, j) 6= (1, 1).
Then p ∈ P(i,j) (p) for some p ∈ K × . Hence there exist u, v ∈ K × such that p ∈ ∆u,p ∩ ∆v,p .
If ψL/K (p) = (1, 1) then there exist p, q ∈ K × so that p ∈ ∆ap,q ∩ ∆bp,q .

***
Definition 3.6. Let a, b ∈ K × . Let
Ja,b :=

\
p∈∆a,b ∩(P(a)∪P(b))

pOp .

***
Proposition 3.7. Ja,b is diophantine over K.

***
Lemma 3.8. Let S be a finite set of primes in SK . We can choose a, b ∈ K × so that the
following hold:
(1) The images of a and b in K × /K ×2 are distinct.
√ √
(2) Any admissible modulus m for L := K( a, b)/K is divisible by the primes of S.
(3) Given a finite set of primes S 0 ⊆ SK disjoint from S, an ideal class I in Cl(OS 0 ),
and an element σ ∈ Gal(L/K), there exists a prime q of K such that q ∩ OS 0 is in
the ideal class I, q ∈ Im , and ψL/K (q) = σ.
(4) As fractional ideals, (a) and (b) are coprime, meaning their supports are disjoint.

***
Theorem 3.9. [Par13, Theorem 3.7] Let K be a global field, char(K) 6= 2. Let Σ denote
the set of primes of K, and let Λ be a finite set of indices. Let (ai )i∈Λ be a finite sequence
of elements of K ∗ and suppose that (εi,p )i∈Λ,p∈Σ is a family of elements of {1, −1}. There
exists x ∈ K ∗ satisfying (ai , x)p = εi,p for all i ∈ Λ and p ∈ Σ if and only if the following
conditions hold:
(1) All but finitely many ofQthe εi,p are equal to 1.
(2) For all i ∈ Λ, we have p∈Σ εi,p = 1.
(3) For every p ∈ Σ, there exists xp ∈ K ∗ such that (ai , xp )p = εi,p .

***
Lemma 3.10. There exist c, d ∈ K × such that ∆a,c = P(a) or ∆a,c = P(a) ∪ {pa } where pa
is coprime to (a) and (b), and ∆b,d = P(b) or ∆b,d ∪ {pb } where pb is coprime to (a), (b), and
pa .

***
Corollary 3.11. Let p ∈ K × such that (p) and m are coprime. We have
P(−1,−1) (p) = ∆a,p ∩ ∆b,p ,
P(−1,1) (p) = ∆a,p ∩ ∆ab,p ∩ ∆a,cp ,
P(1,−1) (p) = ∆b,p ∩ ∆ab,p ∩ ∆b,dp .

***
Definition 3.12. For p, q ∈ K × , let
Rp(−1,−1) =

\

Op ,

p∈∆a,p ∩∆b,p

Rp(1,−1) =

\

Op ,

p∈∆ab,p ∩∆b,p ∩∆a,cp

Rp(−1,1) =

\

Op ,

p∈∆a,p ∩∆ab,p ∩∆b,dp
(1,1)
Rp,q
=

\
p∈∆ap,q ∩∆bp,q

Op .

***
Definition 3.13. For each σ ∈ Gal(L/K), let
Φσ = {p ∈ K × : (p) ∈ Im , ψL/K ((p)) = σ, and P(p) ⊆ P(1,1) ∪ Pσ }.

***
Lemma 3.14.
(1) For each σ ∈ Gal(L/K), Φσ is diophantine over K.
(2) For any p ∈ Φσ and σ ∈ Gal(L/K) with σ 6= (1, 1), we have that P(σ) (p) is nonempty.
Furthermore, the Jacobson radical of Rpσ , denoted J(Rpσ ), is diophantine over K.
(3) Let σ ∈ Gal(L/K) with σ 6= (1, 1), and let p0 - m be a prime of K satisfying
ψL/K (p0 ) = σ. Then there is an element p ∈ Φσ such that p0 ∈ Pσ (p). In fact,
p can be chosen so that Pσ (p) = {p0 }.

***
Lemma 3.15. Let p0 , q0 be primes of K not dividing m with ψL/K (q0 ) = (1, 1). Let A :=
O{q0 } . Then there exists infinitely many q ∈ K × satisfying
(1) 
ψL/K
 ((q)) = (−1, −1);
(2) pq0 = −1;
(3) qA is a prime ideal of A, so there exists a prime q of K such that q ∩ A = qA.

***

√ √
Definition 3.16. For σ ∈ Gal(K( a, b)/K), and S ⊆ SK the fixed set of primes from
above, define
fσ := K ×2 · Φσ ;
Φ
(
Y
]
^
ΨK := (p, q) ∈ Φ
×
Φ
|
(ap, q)p = −1
(1,1)
(−1,−1)
p|m

)
and p ∈ a · K ×2 · (1 + J(Rq(−1,−1) )) .

***
Lemma 3.17.
(1) The set ΨK is diophantine over K.
(1,1)
(2) For (p, q) ∈ ψL/K , we have ∅ =
6 ∆ap,q ∩ ∆bp,q ⊆ Im , and J(Rp,q ) is diophantine over
K.
(3) For each prime ideal p0 satisfying p0 - m and ψL/K (p0 ) = (1, 1), there exists (p, q) ∈
ΨK such that ∆ap,q ∩ ∆bp,q = {p0 }.

***
Definition 3.18.
Given some finite set of primes ∆ ⊆ S of K, consider the semi-local
T
subring R = p∈∆ Op of K. Set
e = {x ∈ K :6 ∃y ∈ J(R) with xy = 1}.
R

***
Lemma 3.19.
e is defined by a universal formula in K.
(1) If J(R) is diophantine over K, then R
S
e=
f
(2) R
p∈∆ Op , provided that ∆ 6= ∅. In particular, Op = Op .

***
Theorem 3.20. For any global function field K and finite set of primes S ⊂ SK , with m
chosen as before,


\
\ \
\ ]
(1,1)
fpσ  ∩
fp ∩ 
R
OS =
O
Rp,q ,
p∈S(m)\S

σ6=(1,1) p∈Φσ

(p,q)∈ΨK

where Φσ and ΨK are the diophantine sets in the previous section.

***
Lemma 4.1. Suppose K is a number field and that ∞ is a real archimedean prime of K
corresponding to an embedding ω : K ,→ Kp = R. Then the set
Kω× := {x ∈ K × : ω(x) > 0}
is diophantine over K. Moreover, the set
{x ∈ K × : x is not totally positive }
is diophantine over K.

***
Lemma 4.2. Let K be a global field with char(K) 6= 2. Then


x is not totally positive, or
×2
x 6∈ K
⇐⇒ vp (x) is odd for some p|m0 , or

(−1,1)
∃p ∈ Φ
×2
· (1 + J(Rp
)).
(−1,1) such that x ∈ a · K

***
(−1,1)

Lemma 4.3. Let Φ(−1,1) , Rp
, a, b, and m be defined as in Section ??. Let p ∈ Φ(−1,1) .
(−1,1)
×2
)) if and only if there exists an element t ∈ K × such that
Then x ∈ a · K · (1 + J(Rp
∀q ∈ P(−1,1) (p), vq (xt2 ) = 0 and the image of xt2 in the residue field of q is not a square.

***
Lemma 4.4. Let p be a finite prime of K with |Fp | odd. Fix p, s ∈ K × so that vp (p) = 1
and vp (s) = 0 so that redp (s) is not a square in the residue field of p. Then for x, y ∈ K × ,
(x, y)p = −1 if and only if

(x ∈ p · K ×2 · Op× ) ∧ (y or − xy ∈ s · K ×2 · (1 + pOp ))

∨ (y ∈ p · K ×2 · Op× ) ∧ (x or − xy ∈ s · K ×2 · (1 + pOp )) .

***
Theorem 4.5. Let p be a finite or real infinite prime of K. The set {(x, y) ∈ K × × K × :
(x, y)p = −1} is diophantine over K.

