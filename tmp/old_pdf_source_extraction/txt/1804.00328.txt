***
Problem 1.1. Given a hypergraph H ⊆

family in [n]
k .

V
k



, determine the value ex (n, H) of the largest H-free

***
Definition 1.2. A hypergraph is said to be (h, d)-expanded if it has at most h edges and the
intersection of each two of its edges is of size at most d.

***
Definition 1.3. Let H be a hypergraph. The k-expansion of H is the k-uniform hypergraph H+
obtained from H by enlarging each of its edges with distinct new vertices. We denote by exk (n, H+ )

the problem of determining the largest size of a family F ⊆ [n]
free of the k-expansion of H.
k

***

Definition 1.4. A family F ⊆ [n]
is said to depend on the set of coordinates J if for each sets
k

[n]
A, B ∈ k that satisfy A ∩ J = B ∩ J we have A ∈ F ⇐⇒ B ∈ F. A family F is said to be a
j-junta if it depends on a set J of size at most j. We say that a family F1 is -essentially contained
in F2 if
 
n
|F1 \F2 | ≤ 
.
k

***
Theorem 1.5. [Dinur–Friedgut [15]] For each r ∈ N, there exist C > 0, j ∈ N, such that any
r

intersecting family F ⊆ [n]
is C nk -essentially contained in an intersecting j-junta.
k

***
Theorem 1.6. [[43]] For each  > 0, h, d ∈ N, there exist C > 0, j ∈ N, such that the following
n
holds. Let C < k < C
, and let H be a k-uniform (h, d)-expanded hypergraph. Then any H-free family

[n]
F ⊆ k is -essentially contained in an H-free j-junta.

***
Theorem 1.7. For
 each  > 0, d, h ∈ N, there exists j > 0, such that the following holds. Let
n ≤ k ≤ h1 −  n, and let H be an (h, d)-expanded hypergraph. Then any H-free F ⊆ [n]
is
k
-essentially contained in an H-free j-junta.

***
Definition 1.8. Let H be a hypergraph and let v be a vertex of H. The resolution of H at v, denoted
by res (H, v), is the hypergraph obtained from H by taking v out of each edge of H that contains v,
and by replacing it with a new vertex that belongs only to this edge. The resolution of H at a set of
vertices S, denoted by res (H, S), is the hypergraph obtained by resolving H at the vertices of S one
after the other. Any hypergraph of the form res (H, S) will be called a resolution of H.

***
Example 1.9. Any hypergraph H is a resolution of itself since res (H, ∅) = H. Defining the center
of a hypergraph H to be the set of its vertices that belong to at least two of its edges, the k-uniform
h-matching Mh := Mh+ is the resolution of any k-uniform hypergraph with h edges at its center.
Another simple example is the hypergraph I2,d : its resolutions are the hypergraphs of the form I2,d0
for d0 ≤ d.

***
Definition 1.10. Let δ > 0 and let H be a k-uniform hypergraph. We say that a family F ⊆

is δ-almost H-free if a random copy of H in [n]
lies within F with probability at most δ.
k

[n]
k



***
Theorem 1.11.
 For each h, d ∈ N,  > 0 there exists C, δ > 0 such that the following holds. Let
C ≤ k ≤ h1 −  n, and let H be a k-uniform (h, d)-expanded hypergraph, then we have the following.
(1) If the family F is δ-almost H-free, then F is -essentially contained in an Mh -free family.
(2) Conversely, if the family F is δ-essentially contained in an Mh -free family, then F is -almost
H-free.

***
Example 1.12. The star

n
A∈

[n]
n/3



: 1∈A

o

is o (1)-almost free of the hypergraph I2,1 , which

consists of two edges that intersect in a singleton {i}. Indeed, the probability that a random copy of
this hypergraph lies in the star is n1 , as it is the probability that a random injection from the vertices
of I2,1 to [n] sends the vertex i to 1. As Theorem 1.11 guarantees, the star is o (1)-essentially
contained in an M2 -free family as it is in itself M2 -free. However, the star is not o (1)-essentially
contained in any family free of the hypergraph I2,1 .
More generally, suppose that G is a j-junta depending on a set J and that H is an (h, d)-expanded
hypergraph. Then the center of a random copy of H most likely does not intersect J. So from the
‘point of view’ of the junta G, a random copy of H and a random copy of Mh look the same. It is
therefore easy to see that
Pr [a random copy of H lies in G] = Pr [a random copy of Mh lies in G] + o (1) .

***
Theorem 1.13. For each h, d, s ∈ N,  > 0 there exist δ > 0,j ∈ N, such that the following holds.
Let H be an (h, d)-expanded hypergraph. Let 1δ ≤ k ≤ h1 −  n, and let F be a nδs -almost H-free
family. Then F is -essentially contained in an (H, s)-free j-junta.

***
Proposition 1.14. For each h, c, j, s ∈ N, there exists a constant C > 0, such that the
 following
holds. Let H be a hypergraph with h edges whose center is of size c. Let C ≤ k ≤ h1 −  n, and let
C
J be an (H, s)-free j-junta. Then J is ns+1
-almost H-free.

***
n

Problem 2.1. Which monotone Boolean functions f : {0, 1} → {0, 1} exhibit a coarse threshold?

***
Theorem 2.2. [Friedgut–Kalai] For each  > 0 there exists n0 = n0 () such that the following
n
holds. Let n > n0 and let f : {0, 1} → {0, 1} be a monotone transitive symmetric function satisfying
 < pc (f ) < 1 − . Then f exhibits an -sharp threshold.

***
Theorem 2.3. [Corollary of Friedgut’s Junta Theorem] For each  > 0, there exists j ∈ N, such
n
that the following holds. Let f : {0, 1} → {0, 1} be a Boolean function, and let q, p be numbers in
the interval (0, 1) that satisfy p > q + . Then there exists some r in the interval [q, p] , such that f
is (µr , )-close to a j-junta.

***
Definition 2.4. Let q < p. The (q, p)-biased distribution, denoted by D (q, p), is the unique
n
n
probability distribution on elements (x, y) ∈ {0, 1} × {0, 1} that satisfies the following.
(1) The pairs (xi , yi ) are independent random variables.
(2) We have xi ≤ yi with probability 1.
(3) We have Pr [xi = 1] = q and Pr [yi = 1] = p.
We write x, y ∼ D (q, p) to denote that they are chosen according to this distribution. We say that
n
f : {0, 1} → {0, 1} is (q, p, δ)-almost monotone if
Pr
x,y∼D(q,p)

[f (x) > f (y)] < δ.

***
Theorem 2.5. For each  > 0, there exists j ∈ N, δ > 0, such that the following holds. Let p, q be
n
numbers in the interval (, 1 − ) that satisfy p−q >  and let f : {0, 1} → {0, 1} be a (q, p, δ)-almost
monotone function. Then there exists a monotone j-junta g, such that
Pr [f (x) > g (x)] <  and Pr [f (x) < g (x)] < .

x∼µq

x∼µp

***
Example 2.6. Fix some numbers q, p in
{0, 1} be the function defined by


1
f (x) = 1


0

n

the interval (0, 1) that satisfy q < p. Let fn : {0, 1} →
Pn
xi > qn
x1 = 1, and
Pni=2
x1 = 0, and
i=2 xi > pn .
Otherwise

The Central Limit Theorem implies that
q
(1 + p)
µq (f ) = + o (1) and µp (f ) =
+ o (1) .
2
2
Since both µq (f ) and µp (f ) are bounded away from 0 and 1, we obtain that f has an -coarse
threshold
for some constant  independent of n. On the other hand, it is easy to see that f is not


µp , (1−p)
-close to an O (1)-junta and is not (µq , q (1 − q))-close to an O (1)-junta, provided that n
4
is sufficiently large. However, if we take g to be the dictator function defined by g (x) = x1 , then we
have
Pr [f (x) > g (x)] = o (1) and Pr [f (x) < g (x)] = o (1) ,
x∼µq

as Theorem 2.5 guarantees.

x∼µp

***
n

Definition 2.7. A function f : {0, 1} → [0, 1] is said to be (r, , µp )-regular if
|µp (fJ→y ) − µp (f )| < 
J

for each set J ⊆ [n] of size at most r and each y ∈ {0, 1} .

***
Theorem 2.8. For each  > 0, there exists δ > 0, such that the following holds. Let q, p ∈ (, 1 − )
n
and suppose that p > q + . Let f, g : {0, 1} → [0, 1]. Suppose that
and that the function f is

1
δ

E(x,y)∼D(q,p) [(1 − g (y)) f (x)] < δ,

, δ, µq -regular. Then either µq (f ) < , or µp (g) > 1 − .

***
Remark 2.9. While Theorem 2.8 is more general than the Friedgut–Kalai Theorem, we remark that
the Friedgut–Kalai Theorem is better in the quantitative aspects that we have not addressed. We
would also like to remark that the proof of Theorem 2.5 is very different than the standard proofs
of Theorems 2.2 and 2.3 . While the traditional proofs are based on the hypercontractivity theorem
of Bonami, Gross, and Beckner [8, 38, 5] and on Russo’s Lemma [55], our proof of Theorem 2.8 is
based instead on the invariance principle of O’Donnell, Mossel, and Oleszkiewicz [50].

***
Definition 3.1. Let i ∈ [n]. The Fourier character corresponding to the singleton {i} is the function
n
χpi ∈ L2 ({0, 1} , µp ) defined by the formula
 q
− 1−p xi = 1
p
χpi (x) := q p
.

xi = 0
1−p
More generally, let Q
S be a subset of [n]. The Fourier character corresponding to the set S ⊆ [n] is
the function χpS := i∈S χpi .

***
n

Fact 3.2. Let f ∈ L2 ({0, 1} , µp ) be a function that has the Fourier expansion
X
f=
fˆ (S) χpS .
S⊆[n]

Then
AT [f ] =

X
S⊆[n]\T

fˆ (S) χpS

***
n

Definition 3.3. The p-biased ith influence of a function f : {0, 1} → R whose Fourier expansion
P
is S⊆[n] fˆ (S) χpS is defined by setting
h
2 i X
2
(3.1)
Inf pi [f ] = E f − A{i} [f ]
=
fˆ (S) .
S3i

***
n

Definition 3.4. Given x ∈ {0, 1} the (ρ, p)-noisy distribution of x denoted by Nρ,p (x) is a
n
probability distribution on elements y ∈ {0, 1} , where we set each coordinate yi independently
to be xi with probability ρ, and to a new p-biased element of {0, 1} with probability 1 − ρ.
n
The noise operator Tρ,p on the space L2 ({0, 1} , µp ) is the operator that associates to each f ∈
n
2
L ({0, 1} , µp ) the function
Tρ,p [f ] :=
E
[f (y)] .
y∼Nρ,p (x)

***
Fact 3.5. Let ρ, p ∈ (0, 1), and let
X

f=

fˆ (S) χpS

S⊆[n]
n

be a function in L2 ({0, 1} , µp ). Then
Tρ,p [f ] =

X
S⊆[n]

ρ|S| fˆ (S) χpS .

***
Lemma 3.6. Let p > q, and set ρ =

q

q(1−p)
p(1−q) .

Let f =

P

S⊆[n]

fˆ (S) χqS be a function in

n

L2 ({0, 1} , µq ). Then Tq→p (f ) has the p-biased Fourier expansion:
X
Tq→p (f ) =
ρ|S| fˆ (S) χpS .
S⊆[n]
p
S⊆[n] ĝ (S) χS

P

Similarly, if g =
q-biased Fourier expansion

n

is a function in L2 ({0, 1} , µp ), then the function Tp→q (g) has the
Tp→q (g) =

X
S⊆[n]

ρ|S| ĝ (S) χqS .

***
n

Claim 3.7. Let x, y be elements of {0, 1} , let p > q ∈ (0, 1) , and let ρ =
(3.4)

Ex,y∼D(q,p)| y=y [χqi (xi )] = ρχpi (yi ) ,

and
(3.5)

Ex,y∼D(q,p)| x=x [χpi (yi )] = ρχqi (xi ) .

q

q(1−p)
p(1−q) .

Then

***

p
n
Example 3.8. Let f : {0, 1} → [0, 1] be a transitive symmetric function. Then f is r, nr , µp 
Fourier regular for any r and p. Indeed, let S ∈ [n]
r , then the fact that f is transitive symmetric
implies that there exist distinct r-subsets of [n], S1 , . . . , Sd n e , such that fˆ (Si ) = fˆ (S) for each i.
r
By Parseval’s identity, we have
n
dX
re

lnm
2
2
fˆ (Si ) =
fˆ (S) .
r
i=1

pr
r
After rearranging, we obtain that f is r, 2
n , µp -Fourier regular, so it is in fact (r, δ, µp )-Fourier
r
regular, provided that n > 4δ2 .
1≥

kf k2µp

≥

***
n

Definition 3.9. Let δ > 0, ρ, p ∈ [0, 1] . A function f : {0, 1} → R is said to have (ρ, δ, µp )-small
(ρ,p)
noisy influences if Inf i
[f ] < δ for every i ∈ [n] .

***
Theorem 3.10. For each  > 0 there exists j ∈ N such that the following holds. Let p ∈ (, 1 − )
and let f ∈ L2 
({0, 1} , µp ) 
be a function. Then there exists a set J of size at most j, such that if
J

we choose x ∼ {0, 1} , µp , then the functions fJ→x has (1 − , , µp )-small noisy influences with
probability at least 1 − .

***
Remark 3.11. Jones [40] proved Theorem 3.10 only for the case where p = 12 . However, as in most
of the results in the area, their proof can be extended verbatim to the p-biased distribution, for any
p bounded away from 0 and 1.

***
Theorem 3.12. [ [17, Theorem 1.7]] For each δ,  > 0, there exists j ∈ N, such that the following

holds. Let δ < nk < 1 − δ, and let F ⊆ [n]
be a family. Then there exists a set J of size at most j
k
and a family G ⊆ P (J), such that:
(1) We have µ (F \ hGi) < .
  

(2) For each B ∈ G the family FJB is 1δ , δ -regular and µ FJB > 2 .

***
Definition 3.13. Let ρ ∈ (0, 1), and let x ∈ Rn , the ρ-noisy distribution of x ispthe distribution
Nρ,γ (x), where we choose y by setting each coordinate yi independently to be ρxi + 1 − ρ2 zi , where
z is a new independent γ-distributed element of R. The noise operator Tρ on the space L2 (Rn , γ) is
the operator that associates to each f ∈ L2 (Rn , γ) the function
Tρ [f ] (x) :=

E

y∼Nρ,γ (x)

[f (y)] .

***
Remark 3.14. The analogy between the distribution Nρ,p , and Nρ,γ stems from the fact if we choose
x ∼ γ, and y ∼ Nρ,γ (x) , then we have the following properties.
• x, y ∼ γ.
• ∀i : E [xi yi ] = ρ.
• The R2 -valued random variables(xi , yi ) are independent of each other.
These properties are similarly satisfied when we choose x ∼µp and then choose y ∼ Nρ,p (x) .

***
Theorem 3.15. [Borell 1985] Let f, g ∈ L2 (Rn , γ) be two [0, 1]-valued functions. Then

 


hTρ [f ] , gi ≤ Tρ FE[f ] , FE[g] .

***
Lemma 3.16. For each  > 0, there exists δ > 0, such that the following holds. Let µ ∈ (, 1) and
let ρ, ν ∈ (0, 1 − ). Then
Λρ (µ, ν) ≤ µ − δ.

***
Lemma 3.17. [[49, Lemma 2.5]] Let ρ1 < ρ2 . Then
|Λρ1 (µ, ν) − Λρ2 (µ, ν)| ≤

10 (ρ2 − ρ1 )
.
1 − ρ2

***
Fact 3.18. Let f =

P

S⊆[n]

ai

Q

i∈S

zi be a multilinear polynomial. Then
X
Y
Tρ [f ] =
ai ρ|S|
zi .
S⊆[n]

i∈S

***
n

Definition 3.19. Let f ∈ L2 ({0, 1} , µp ) be some function with Fourier expansion
X
f=
fˆ (S) χpS .
S⊆[n]

We let the Gaussian analogue of it be the multilinear polynomial f˜ ∈ L2 (Rn , γ) defined by
X
Y
f˜ (z) =
fˆ (S)
zi .
S⊆[n]

i∈S

***
Corollary 3.20. [Corollary of the invariance principle] For each , η > 0, there exists δ > 0, such
n
that the following holds. Let p ∈ (, 1 − ), let f : {0, 1} → [0, 1] be a function, and suppose that f
is (δ, 1 − η, µp )-smooth. Then
 
kf˜ − Chop f˜ k < .

***
Proposition 4.1. For each  > 0, there exists δ > 0, such that the following holds. Let ρ ∈ (0, 1 − ) ,
n
and suppose that p − q > . Let f, g : {0, 1} → [0, 1] be some functions, and suppose that
n
o
(1−δ,q)
(1−δ,q)
max min Inf i
[f ] , Inf i
[g] < δ.
i∈[n]

Then
(4.1)

X
S⊆[n]

ρ|S| fˆ (S) ĝ (S) < Λρ (µq (f ) , µp (g)) + .

***
Lemma 4.2. For each  > 0, there exists δ > 0 such that the following holds. Let q, p ∈ (, 1 − ),
P
Pˆ
f (S) χqS be a (δ, 1 − , µq )-smooth function, and let g =
ĝ (S) χpS be a
let ρ ∈ (0, 1) , let f =
(δ, 1 − , µp )-smooth function. Then
X
ρ|S| fˆ (S) ĝ (S) < Λρ (µq (f ) , µp (g)) + .
S⊆[n]

***
Claim 4.3. Provided that δ is sufficiently small we have 1 < /2.

***
Claim 4.4. Provided that δ is sufficiently small,
 h iwe have 2 < /2.
Choose X ∼ (R, γ) , Y ∼ Nρ (X) . Then Λρ E f˜ , E [g̃] is the probability of the event X < t1 , Y <
 h
 i

t2 for the proper values of t1 , t2 . Similarly, Λρ E Chop f˜ , E [Chop (g̃)] is the probability of the
event X < t3 , Y < t4 for the proper values of t3 , t4 . These events differ either if X is in the interval
whose endpoints
3 or
 are
h t1 , t
iif Y ish inithe interval whose endpoints are t2 , t4 . The Probability of the


˜
former event is E Chop f − E f˜ , and the probability of the latter event is |E [Chop (g̃)]−E [g̃] |.
Therefore, a union bound implies that:
  h i

 h
 i



2 = Λρ E f˜ , E [g̃] − Λρ E Chop f˜ , E [Chop (g̃)] 
 h
 i
h i


≤ E Chop f˜ − E f˜  + |E [Chop (g̃)] − E [g̃] |
 

(By Cauchy-Schwarz and (??)) ≤ kChop f˜ − f˜k + kChop (g̃) − g̃k < .
2

***
Lemma 4.5. For each  > 0, there exists δ > 0 such that the following holds. Let q, p ∈ (, 1 − ),
Pˆ
let ρ ∈ (0, 1), let f =
f (S) χqS be a function and suppose that
n
o
(1−δ,q)
(1−δ,p)
max max Inf i
[f ] , Inf i
[g] < δ.
i∈[n]

Then
X
S⊆[n]

ρ|S| fˆ (S) ĝ (S) < Λρ (µq (f ) , µp (g)) + .

***
Theorem. For each  > 0, there exists j ∈ N, δ > 0, such that the following holds. Let p, q be
n
numbers in the interval (, 1 − ) that satisfy p − q >  and let f : {0, 1} → {0, 1} be a (q, p, δ)almost monotone function. Then there exists a monotone j-junta g, such that
Pr [f (x) > g (x)] <  and Pr [f (x) < g (x)] < .

x∼µq

x∼µp

***
Lemma 5.1. For each  > 0, j ∈ N there exists δ > 0, such that the following holds. Let
n
f, g : {0, 1} → [0, 1] be functions, let J be a set of size at most j, and let p, q ∈ (, 1 − ), be
J
with p − q > . Suppose that hTq→p f, 1 − gi < δ, and let x, y ∈ {0, 1} be with ∀i : xi ≤ yi . Suppose
additionally that fJ→x has (1 − , , µq )-small noisy influences. Then we either have µq (fJ→x ) < 
or we have µp (gJ→y ) > 1 − .

***
Theorem. For each  > 0, there exists δ > 0, such that the following holds. Let q, p ∈ (, 1 − ) and
n
suppose that p > q + . Let f, g : {0, 1} → [0, 1], and suppose that
and that the function f is

1
δ

Ex,y∼D(q,p) [(1 − g (y)) f (x)] < δ,

, δ, µq -regular. Then either µq (f ) < , or µp (g) > 1 − .

***
Theorem 6.1. For each h ∈ N,  > 0, there exists δ > 0, such that the following holds. Let
[n]
measure is at least
k1 , . . . , kh ≤ 1s −  n, and let F1 ⊆ [n]
k1 , . . . , Fh ⊆ kh be families whose
 
1
. Suppose that for each i ∈ [n], such that ki ≥ δn the family Fi is δ , δ -regular, and choose
uniformly at random a matching {A1 , . . . , Ah } , such that
 
 
[n]
[n]
A1 ∈
, . . . , Ah ∈
.
k1
kh
Then
Pr [A1 ∈ F1 , . . . , Ah ∈ Fh ] > δ.

***
Definition 6.2. Let F ⊆

[n]
k



, we associate to F the function fF defined by
(
0
|x| < k
fF (x) =
.
PrA∼(x) [A ∈ F] |x| ≥ k
k

***
n

Definition 6.3. Given a function f : {0, 1} → R, and a δ ∈ R, we define the function Cutδ (f ) by
setting:
(
1 if f (x) ≥ δ
Cutδ (f ) (x) =
.
0 if f (x) < δ

***
Definition 6.4. Let p ∈ (0, 1) , and let k ∈ [n] .
n
• We write µ≥k
for the conditional probability distribution on x ∼ ({0, 1} , µp ) given that
p
<k
≤k
|x| ≥ k. (The distributions µ>k
p , µp , µp are defined accordingly.)

≥k
• We write µp , J → B for the conditional distribution on sets A ∼ µ≥k
p given that A ∩ J =
 

[n]
B. The distributions (µp , J → B) , k , J → B are defined accordingly.

***
Definition 6.5. Choose uniformly and independently [0, 1]-valued random variables X1 , . . ., Xn . For
j
each i ∈ {1, . . . , h} we let Bi be the set of all j ∈ [n] , such that Xj is in the interval j−1
h , h . We call
1
n
the sets (B1 , . . . , Bh ) a random h -biased matching. Let k ≤ h we call the conditional
 distribution on
1
1
a random h -biased
matching (B1 , . . . , Bh ) given that |Bi | ≥ k for each i a h , k -biased matching.

Given a h1 , k -biased matching (B1 , . . . , Bh ), we obtain that B1 is distributed according to some
matching
.
distribution that we denote by µ 1 ,k
h

***
Lemma 6.6. For each  > 0, there exists n0 > 0,
 such that the following holds. Let n > n0 , let
q ∈ (0, 1) , k ≤ n satisfy q ≥ nk + , and let F ⊆ [n]
be some family. Then
k
(6.1)

µq (fF ) ≤ µ (F) ≤ µq (fF ) (1 + ) .

***
Lemma 6.7. For each  > 0 there exists n0 , such that the following holds. Let n > n0 , let k ≤ n
k
and let q be a number in the interval nk + , 1 , and set λ = qn
. Then
µq ((fF )J→x ) (1 − ) ≤

E

C∼(P(x),µλ )

[µ (FJ→C )] ≤ µq ((fF )J→x ) (1 + ) .

***
Lemma 6.8. For each  < 0, there exists n0 , such that the following holds. Let n > n0 , let F ⊆
1


 
be a 2
, 2 -regular family, and let q ≥ nk + . Then the function fF is 1 , , µq -regular.

[n]
k



***
Lemma 6.9. For each  > 0, there exists δ > 0 such that the following holds. Let


 
and let F ⊆ [n]
be some family. Then the function fF is 1 , , µq -regular.
k

k
n

< δ, let q ≥ ,

***
Lemma 6.10. Let δ > 0, let p > q >

k
n.

For any F ⊆

[n]
k



we have

Ex,y∼D(q,p) [fF (x) (1 − Cutδ (fF ) (y))] ≤ δ.

***
Lemma 6.11. For each  > 0, there exists δ > 0, such that the following holds. Let p ≥ nk + , and

let F ⊆ [n]
be some
k 
 family whose measure is at least . Suppose that we either have k ≤ δn or the
1
family F is δ , δ -regular. Then
µp (Cutδ (fF )) > 1 − .

***
Corollary 6.12. For each  > 0, h there exists δ > 0, such that the following holds. Let nk ≤ h1 − ,

and let F ⊆ [n]
k besome
 family whose measure is at least . Suppose that we either have k ≤ δn or
1
the family F is δ , δ -regular. Then
µmathching
(Cutδ (fF )) ≥ 1 − .
1
,k
h

***
Theorem 7.1. For each c, h ∈ N,  > 0 there exists δ > 0, such
that the following holds. Let

[n]
1
1
n
be
some
numbers,
and
let
A
∈
be
sets,
such that the hypergraph
≤
k
,
.
.
.
,
k
≤
−

i
1
h
ki
δ
h


[n]
H = {A1 , . . . , Ah } has center of size at most c. Let F1 ⊆ k1 , . . . , Fh ⊆ [n]
families of
kh be some
  
measure at least . Suppose that for each i, we either have kni ≤ δ or the family Fi is 1δ , δ -regular.


[n]
Choose uniformly at random a copy (A1 , . . . , Ah ) ∈ [n]
k1 × · · · × kh of H. Then
Pr [A1 ∈ F1 , . . . , Ah ∈ Fh ] > δ.

***
Definition 7.2. A set J is -fair for F if

µ FJB ≥ (1 − ) µ (F)
for any B ⊆ J.

***
Proposition 7.3. For each , s > 0, there exists m > 0 such that the following
holds. Let m < k <

[n]
n − m, let F ⊆ [n]
be
some
family
of
measure
at
least
,
and
let
J
∼
.
Then
k
s
Pr [J is -fair for F] ≥ 1 − .

***
Lemma 8.1. For each h, c, s, j ∈ N,  > 0 there exists δ > 0, such that the following holds. Let H be
a hypergraph with h edges whose center is of size c, and let G ⊆ P (J). Let 1δ ≤ k ≤ h1 −  n. Then
the following are equivalent.
(1) The junta hGi is (H, s)-free.
(2) There exists no copy of a trace of H in G, whose center is of size at most s.

***

Lemma 8.2. Let  > 0, s ≤ c, h ∈ N be some constants. Let n ≤ k ≤ h1 −  n, let H be a k-uniform
hypergraph whose center is of size c. Let {A1 , . . . , Ah } be a uniformly random copy of H, let J ⊆ [n]
be some set of size at most 1 , and let {B1 , . . . , Bh } ⊆ P (J) be a trace of H of center of size s. Then
s 
the probability that Ai ∩ J = Bi for each i is Θ n1
.

***
Theorem. For each h, c, , s ∈ N, there exists δ, j > 0, such that the following holds. Let H be a
hypergraph with h edges whose center is of size c. Let


1
1
≤k≤
−  n,
δ
h
and let F be a

δ
ns -almost

H-free family. Then F is -essentially contained in an (H, s)-free j-junta.

***
Proposition. For each constants h, c, j, s ∈ N, there exists a constant C > 0, such that thefollowing
holds. Let H be a hypergraph with h edges whose center is of size c. Let n ≤ k ≤ n h1 −  , and let
C
J be some (H, s)-free j-junta. Then J is ns+1
-almost H-free.

***
Theorem.
For each h, d ∈ N,  > 0 there exists C, δ > 0 such that the following holds. Let C ≤ k ≤

1
−

n,
and
let H be a k-uniform (h, d)-expanded hypergraph, then we have the following.
h
(1) If the family F is δ-almost H-free, then F is -essentially contained in an Mh -free family.
(2) Conversely, if the family F is δ-essentially contained in an Mh -free family, then F is -almost
H-free.

