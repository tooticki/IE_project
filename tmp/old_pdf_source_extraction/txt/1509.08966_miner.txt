***

Theorem 1.1. [Pansu [13]] Finitely generated quasi-isometric nilpotent groups
have isomorphic associated Carnot groups.

***

Theorem 1.2.
diﬀerentiable almost everywhere. Moreover,
isomorphism.

[Pansu [13]] A bi-Lipschitz map between Carnot groups is
the derivative induces a group

***

Theorem 1.3.
nilpotent groups have bi-Lipschitz asymptotic cones.

[Austin [1]] Finitely generated integrable measure equivalent

***

Theorem 1.4. Finitely generated integrable measure equivalent nilpotent groups
have isomorphic associated Carnot groups.

***

Theorem A.
Suppose Γ and Λ are IME f.g. nilpotent groups with associated Carnot groups G∞
and H∞. Let κx,n be the maps as in Question 5.2 [1]. Then there is a bi-Lipschitz
group isomorphism Φ : G∞ → H∞ to which κx,n converge on bounded sets with
high probability as n → ∞

κx,n −→ Φ.

***

Remarks 1.5.

(1) In [15] Shalom keenly observed that amongst f.g. amenable groups, quasi-
isometry implies uniform measure equivalence, which in particular implies
IME. Therefore Theorem A implies Theorem 1.1 . While we do not rely
logically on Theorem 1.2 , we do use the idea of the Pansu derivative.

(2) One might say that the isomorphism Φ is the Pansu derivative of the given
measurable cocycle. Indeed, in the deterministic case Φ is the usual Pansu
derivative.

(3) Theorem A is for any Carnot-Carath´eodory metrics on G∞ and H∞. All
Carnot-Carath´eodory metrics on a given Carnot group are bi-Lipschitz, so
in what follows we may not specify the metric. Moreover Φ being a group
isomorphism implies it is bi-Lipchitz.

***

Theorem B.
Let Γ,Λ be f.g. IME nilpotent groups with associated cocycles α : Γ × X → Λ and
β : Λ × Y → Γ, and let G∞ and H∞ be the associated Carnot groups of Γ and Λ.
Then there exists a bi-Lipschitz group isomorphism Φ : G∞ → H∞ so that for all
g ∈ G∞

(n, γn) −→ g

implies

(n, α(γn, x)) −→ Φ(g)

where the convergence is in the sense of the asymptotic cone, and the second
convergence is in measure. The same is true after exchanging the roles of Γ,Λ,
α,β, and Φ,Φ−1.

***

Remarks 1.6.

(1) Convergence in measure is the best one can hope for given the L1
integrability assumption. To have pointwise convergence even in case Γ =
Λ = Zd one must assume Ld,1 (Lorentz-space) integrability. The correct
integrability assumption for pointwise convergence of ergodic theorems for
nilpotent groups is commonly believed to be related to the growth type of
the group.

(2) All of the theorems stated above are true for f.g.

polynomial growth
groups, which by [6] are those groups with ﬁnite index nilpotent subgroups.
Theorem B is insensitive to ﬁnite index and ﬁnite kernels, so we reduce to
the torsion-free nilpotent case. See §??.

***

Lemma 2.1.
Given sequences ti → ∞, γi, γ(cid:48)
i → gg(cid:48).

• γiγ(cid:48)

1
ti

i ∈ Γ with 1

ti

• γi → g and 1

ti

• γ(cid:48)

i → g(cid:48) then

***

Lemma 2.2.
[Guivarc’h [8]; see also [3] Theorem 3.7] Let K be a compact
neighborhood of the identity in a simply connected nilpotent Lie group G and
dG(g, h) = inf{n ≥ 1 : g−1h ∈ K n}. Then for any homogeneous quasi-norm |·|
on G there is a constant C > 0 so that

|g| ≤ dG(e, g) ≤ C|g| + C.

1
C

***
Lemma 2.3. For each 1 ≤ i ≤ m there exist 0 < c1 < c2 < ∞ so that for all n ∈ Z

c1n1/di ≤ |(0, . . . , n, . . . 0)|Γ ≤ c2n1/di

where the non zero term is in the i-th coordinate.
Moreover, if [Xi1,··· , [Xil−1, Xil ]··· ] = cXt where ir ∈ {1, . . . , m} and c (cid:54)= 0, then

l(cid:88)

r=1

dir ≤ dt.

***
Lemma 2.4. For each 1 ≤ i ≤ m set

fi(n) = |(0, . . . , 0, n, 0, . . . , 0)|Γ
gi(n) = min
aj

|(a1, . . . , ai−1, n, ai+1, . . . , am)|Γ.

where the non-zero coordinate is in the i-th coordinate. Then there exists 1 ≤ C <
∞ so that for all n ∈ N

fi(n) ≤ cgi(n).

***
Lemma 2.5. There is a constant C > 0 so that ∀γ ∈ Γ

|γ|Γ ≥ C|πcomγ|Γ.

***
Lemma 2.6. There exists l > 0 so that for all γ ∈ Γ− Γ2 and for all n |γn|Γ ≥ ln.

***
Lemma 2.7. The functions |·|Γ,|·|G,|·|m,|·|∞ : Γ → R+ are all quasi-isometric.
Moreover,
∀1 ≤ t ≤ m
⇐⇒ |an,t| = o(nd(t))
|γn|Γ = |(an,1, . . . , . . . , an,m)|Γ = o(n)
|γn|Γ = |(an,1, . . . , . . . , an,m)|Γ = O(n) ⇐⇒ |an,t| = O(nd(t))
∀1 ≤ t ≤ m
∀1 ≤ t ≤ m
|gn|G = |(an,1, . . . , . . . , an,m)|G = o(n)
⇐⇒ |an,t| = o(nd(t))
∀1 ≤ t ≤ m
|gn|G = |(an,1, . . . , . . . , an,m)|G = O(n) ⇐⇒ |an,t| = O(nd(t))
|gn|∞ = |(an,1, . . . , . . . , an,m)|∞ = o(n) ⇐⇒ |an,t| = o(nd(t))
∀1 ≤ t ≤ m
∀1 ≤ t ≤ m
|gn|∞ = |(an,1, . . . , . . . , an,m)|∞ = O(n) ⇐⇒ |an,t| = O(nd(t))

where an,j ∈ Z (an,j ∈ R) is the j-th coordinate of γn ∈ Γ (gn ∈ G).

(1) |πcomgn|∞ = o(n)
(2) |πabgn|∞ = O(n)

then

***
Lemma 2.8. If gn ∈ G∞ is a sequence such that

(cid:12)(cid:12)(πabgn)−1 (cid:63) gn

(cid:12)(cid:12)∞ = o(n).

(cid:12)(cid:12)g−1

n gnhn

***
Lemma 2.9. Let gn, hn ∈ G. If |gn|G = o(n) and |hn|G = O(n) then
n h−1
norm on G∞ instead of G.

(cid:12)(cid:12)G = o(n). Moreover the same is true of any Carnot-Carath´eodory

***
Proposition 3.1. For every γ ∈ Γ

• α(γn, x) −→ αab(γ)

1
n

in probability.

Equivalently,

d∞(α(γn, x), δnαab(γ)) = o(n)

in probability.

***
Lemma 3.2. For a.e. x ∈ X and every γ ∈ Γ

where the convergence is of vectors in Rd.

αab(γn, x) → αab(γ)

1
n

***
Proposition 3.3. Suppose c : Γ× X → R is a measurable cocycle over Γ (cid:121) (X, m)
which is pmp ergodic. Then for a.e. x ∈ X and every γ ∈ Γ

(cid:90)

X

c(γn, x) →

1
n

c(γ, x)dm(x).

***
Lemma 3.4. For every γ ∈ Γ

Moreover the same is true replacing the norm |·|Λ with |·|∞.

|πcom ◦ α(γn, x)|Λ = o(n)

in probability.

***
Proposition 3.5. Given a subadditive cocycle c : Γ × X → R+, there is M ≥ 1
such that for any  > 0 there is C = C() such that

|γ|Γ ≥ C

=⇒ m(|c(γ, x)| ≥ M|γ|Γ) < .

***
Lemma 3.6. For every γ ∈ Γ − Γ2 there is M(cid:48) ≥ 1 so that for any  > 0 there is
N so that for all n ≥ N

m(|πcom ◦ α(γn, x)|Λ > M(cid:48)n) < .

***
Lemma 3.7. If γ ∈ Γ2 then

|πcom ◦ α(γn, x)|Λ = o(n)

in probability.

***
Lemma 3.8. Fix 0 < M < ∞ and v ∈ Rd. For each d ≤ t < m for all δ > 0 there
exists K ∈ N and δ(cid:48) > 0 so that for all k ≥ K and η ≥ 1, whenever there exist
λ1, . . . , λk ∈ Λ such that

(8)

(9)

(10)

then

d1(πabλi, v) < ηδ(cid:48)|v|1

|πtλi|Λ < ηδ(cid:48)
|πcomλi|Λ < ηM

|πt+1λ1 ··· λk|Λ < ηkδ.

***
Theorem 4.1. Let γn ∈ Γ be a sequence satisfying
··· san,k

γn = san,1

1

k

where si ∈ S are ﬁxed, in order, independent of n and for each i, N (cid:51) an,i → ∞ as
n → ∞. Then whp

d∞(α(γn, x), δan,1αab(s1) (cid:63) ··· (cid:63) δan,k αab(sk)) = o(max an,i).

***

Deﬁnition 5.1. Let (G∞, δt) be a graded nilpotent lie group with its one-parameter
family of automorphisms. A ﬁnite symmetric subset S ⊂ G∞ generates G∞ with
respect to δt, t ≥ 0, if for every g ∈ G∞ there exist k ∈ N, s1, . . . , sk ∈ S and
a1, . . . , ak ∈ R+ so that

(21)

g = δa1 s1 (cid:63) ··· (cid:63) δak sk.

***
Example 5.2. In the Mal’cev coordinates on G∞, the set of d(cid:48) = dim(G∞/G2∞)
elements

{(1, 0, . . . , 0), (0, 1, 0, . . . 0), . . . , (0, . . . , 1, 0, . . . , 0)}

together with their inverses form a ﬁnite symmetric generating set for G∞ with
respect to the homotheties δt.
More generally any ﬁnite symmetric set with real span containing V1 = g/g2
generates G∞ with respect to δt.
Indeed, the group generated by exp∞(V1) is
a connected subgroup of G∞, so by the Lie correspondence, its Lie algebra is a sub
algebra of g∞ containing V1. Since V1 generates g∞ as a Lie algebra, the group
generated by exp∞(V1) is all of G∞.

***

Deﬁnition 5.3. [First Deﬁnition of Φ]

Φ(g) = δa1 αab(s1) (cid:63) δa2 αab(s2) (cid:63) ··· (cid:63) δak αab(sk)

where

g = δa1s1 (cid:63) ··· (cid:63) δak sk
is a ﬁxed choice of a representation of g as in (21).

***
Proposition 5.4. For each g ∈ G∞ there is a sequence γn ∈ Γ so that

• 1
• 1

n • γn → g
n • α(γn, x) → Φ(g) with high probability as n → ∞.

***
Proposition 5.5. Fix g ∈ G∞. For all 1, 2 > 0 there exist δ > 0 and N ∈ N
so that whenever σ ∈ Γ and n ≥ N are such that dG∞ ( 1
n • σ, g) < δ, then with
probability at least 1 − 1 we have
1
n
In particular, for any sequence 1
probability.

• α(σ, x), Φ(g)) < 2.
n • σn → g we have 1

dH∞(

n • α(σn, x) → Φ(g) in

***
Corollary 5.6. Suppose g ∈ G∞ can be written
1 (cid:63) ··· (cid:63) δa(cid:48)
s(cid:48)

k(cid:48) s(cid:48)
k(cid:48).

where a(cid:48)

i ∈ R+ and s(cid:48)

Then Φ(g) = Φ(cid:48)(g).

1

g = δa(cid:48)
i ∈ S. Deﬁne
Φ(cid:48)(g) = δa(cid:48)

1

αab(s(cid:48)

1) (cid:63) ··· (cid:63) δa(cid:48)

k(cid:48) αab(s(cid:48)

k(cid:48)).

***

Proposition 5.7. Φ is a homomorphism.

***
Lemma 5.8. [Poincar´e recurrence for nilpotent groups] Fix g ∈ G∞ and let A ⊂ X
with m(A) > 0. Then

m{x ∈ A : ∃γnk ∈ Γ ∃nk ∈ N such that

1
nk

• γnk → g and γnk · x ∈ A} = m(A).

***
Lemma 5.9. Fix g ∈ G∞, let A ⊂ X with m(A) > 0 and let δ > 0. Then

m{x ∈ A : ∃γ ∈ Γ ∃n ∈ N such that d∞(

1
n

• γ, g) < δ and γ · x ∈ A} = m(A).

***

Proposition 5.10. Φ and Ψ are inverse maps. Consequently, they are group
isomorphisms.

