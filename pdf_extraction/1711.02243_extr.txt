***
Theorem 1.0.3 and §5.)
***
Theorem 2.1 (Haines). Let E/F be an unramified extension of p-adic local fields of degree r and residue
***
Remark 2.2. Haines has informed us that his proof, which is based on the global simple trace formula and
***
Theorem 2.4. Let E/F be an unramified degree r extension of characteristic p local fields. If δ ∈ GLn (E)
***
Remark 2.5. Let us make some remarks on the hypotheses. The hypothesis |µ| = 0 arises geometrically as
***
Remark 2.6. It seems likely that the theorem can be extended to prove Conjecture 2.1 in full for G = GLn
***
Remark 2.7. As T. Haines pointed out to us, another key aspect of the fundamental lemma is the assertion
***
Theorem 2.1 in the special case where J = K is a hyperspecial maximal compact subgroup, was proved in
***
Definition 4.1. A G-bundle E is a G-torsor for the fppf topology. We define BunG to be the (Artin) stack3
***
Definition 4.2. We define the global affine Grassmannian GrG to be the (Artin) stack representing the
***
Remark 4.4. There is an action of L+ G on GrG by changing the level structure ψ.
***
Definition 4.5. Given a finite-dimensional representation W of L G, we let SatGrG (W ) be the associated perverse sheaf on GrG furnished by Geometric Satake. Note that SatGrG (W ) is automatically L+ G-equivariant.
***
Remark 4.6. The sheaves SatGrG (W ) are L+ G-equivariant for the action of Remark 4.4.
***
Definition 4.7. We define the Hecke stack HeckeG by the functor of points
***
Proposition 4.8. There is an isomorphism
***
Remark 4.9. In practice, we can always translate these statements into ones about finite type Artin stacks,
***
Definition 4.10. We define a functor
***
Definition 4.11. We define the moduli stack of G-shtukas by the following cartesian diagram
***
Definition 4.12. For W ∈ Rep(L G), we define SatShtG (W ) to be ι∗ (SatHeckeG (W )) shifted to be perverse
***
Definition 4.13. We define Hecke(ShtG ) to be the moduli stack parametrizing x, y ∈ X(S) along with a
***
Definition 4.14. Since π ◦ h← = π ◦ h→ and h←∗ (SatShtG (W )) ∼
***
Definition 4.15. We define the moduli stack ShtG,X r by the functor of points:
***
Remark 4.16. The stack of iterated shtukas ShtG,X r can also be defined as a repeated fibered product of
***
Proposition 4.17. The sheaf SatGrG (µ) is universally locally acyclic with respect to the morphism GrG |X ◦ →
***
Proposition 4.18. The (shifted) perverse sheaf SatShtG ,(X−Z)r (µ1 , . . . , µr )|(X ◦ )r is locally acylic with respect
***
Proposition 4.19 ([Ngo06] §1.4 Corollaire 2). The shifted perverse sheaf SatShtG ,(X−Z)r (µ1 , . . . , µr ) restricted to ShtG,(X ◦ )r /aZ is locally acyclic with respect to the map
***
Proposition 4.20 ([Ngo06] §1.6 Proposition 2). Let (µ1 , . . . , µr ) ∈ (X∗ (T )+ )r . Suppose that the locus Z of
***
Proposition 4.21. Let (µ1 , . . . , µr ) ∈ (X∗ (T )+ )r . Suppose that the locus Z of ramification points of D
***
Proposition 4.20 applied to ShtG shows that
***
Definition 5.1. For µ ∈ X∗ (T )+ , we denote by fµ ∈ HG,K the indicator function of Ktµ K.
***
Definition 5.2. We define ψµ to be the trace function associated to SatGrG (µ).
***
Definition 5.3. Since SatGrG (µ) is a G(Ox0 )-equivariant sheaf on GrG,x0 , its stalks are the same on any
***
Lemma 5.4. We have
***
Theorem 5.5 (Bernstein, [Hai09] Theorem 3.1.1.). Convolution with f0 = IK (the identity of HG,K ) induces
***
Definition 5.6. For µ ∈ X∗ (T )+ ,
***
Definition 5.7. Given F ∈ Dcb (Yη , Qℓ ) we define the nearby cycles RΨ(F ) ∈ Dcb (Y ×s s, Qℓ ) by
***
Remark 5.8. When the nearby cycles construction is performed with S = Spec Fq [[t]], the sheaf RΨ(F )
***
Lemma 5.9. If f : Y → S is proper, then the base change homomorphism
***
Corollary 5.10. If f : Y → S is proper, then the natural map
***
Lemma 5.11. If f : Y → S is lisse, then the base change homomorphism
***
Theorem 5.12 (Gaitsgory [Gai01], Zhu [Zhu14]). The sheaf RΨ(SatGrG (µ))) is central.
***
Remark 5.13. In the present formulation and level of generality, this theorem is actually due to X. Zhu in
***
Corollary 5.14. Assume that G := G|Fx0 is split. Then the trace function (in the sense of (5.2)) associated
***
Remark 5.15. Note that we need to use Remark 5.8 to descend RΨ(SatGrG (µ))) to GrG |x0 , so that it
***
Definition 5.16. Since RΨ(SatGrG (µ)) is a J-equivariant perverse sheaf on GrG,x0 ([Gai01] Theorem 1), its
***
Lemma 5.17. We have
***
Definition 5.18. Let X and Y be Artin stacks. We say that Y is an étale local model for X if there exists
***
Theorem 5.19 (Varshavsky, V. Lafforgue). The stack GrG,X1r
***
Remark 5.20. This is a variation on well-known results, which are not quite stated in the literature at
***
Corollary 5.21. Let µ ∈ X∗ (T )r . There is an étale local model diagram
***
Corollary 5.22. For ν ∈ X∗ (T )+ , we have
***
Remark 5.23. We will actually need to work with ShtG /aZ instead. Since this is obtained from ShtG by
***
Definition 6.1. If C is a finite groupoid with finite automorphism groups then we define
***
Definition 6.2 ([NND08] §4). Let T, T ′ ⊂ |X| − I. Let
***
Lemma 6.3. Suppose x ∈ |X| is a point of degree d. Then we have an isomorphism of groupoids
***
Lemma 6.4. Suppose x ∈ |X| is a point of degree d. Then we have an isomorphism of groupoids
***
Definition 6.5 ([NND08] §5). Let T, T ′ ⊂ |X| − I. We define the groupoid C(T, T ′ ; d) as follows: its objects
***
Definition 6.7. We say that (V, τ, τ ′ ) ∈ C(T, T ′ ; d) is semisimple if γ0 is semisimple, and elliptic if γ0 is
***
Proposition 6.8. [NND08] For elliptic (V, τ, τ ′ ) ∈ C(T, T ′ ; d), and (γ0 , (γx ), (δx )) the associated Kottwitz
***
Proposition 6.9. There exists (V, τ, τ ′ ) ∈ C(T, T ′ ; d) having a given elliptic Kottwitz triple (γ0 , (γx ), (δx ))
***
Remark 6.10. As pointed out in [ND13] §3.9, the Hasse principle implies that Jγ0 is determined by its
***
Proposition 6.11. Fix an elliptic (V, τ, τ ′ ) ∈ C(T, T ′ ; d). Suppose (E, t, t′ ) ∈ C(α, β; T, T ′ ; d) lies over
***
Theorem 6.12. We have
***
Remark 6.13. This is the analogue of [ND13] Théorème 5.1. The expressions look almost the same, but
***
Corollary 6.14. Let Sht≤µ
***
Definition 7.1 ([Hai09] §1). Let K ⊂ G(F ) be a hyperspecial maximal compact subgroup. The base change
***
Definition 7.2 ([Hai09] §1). Let J ⊂ K be a parahoric subgroup and IK denote the characteristic function
***
Theorem 7.3 (Satake). The Satake transform gives a ring isomorphism
***
Lemma 7.4. Let F be a sheaf on GrG defined over k, and fF its associated trace function (cf. (5.2)). Then
***
Theorem 7.5 (Mirkovic-Vilonen). There is a natural equivalence of functors
***
Proposition 7.6. We have
***
Remark 7.7. We thank Timo Richarz for informing us that both Theorem 7.5 and Proposition 7.6 are now
***
Definition 7.8. For each µ ∈ X∗ (T ), we let Fµ := SatGrG (µ) be the perverse sheaf on GrG . Consider the
***
Proposition 7.9. The ζr,µ form a basis for HG(Fr ),K .
***
Definition 7.10. Consider rth convolution product
***
Proposition 7.11. We have b(ζr,µ ) = φr,µ .
***
Lemma 7.12. We have ζr,µ = ψr,µ .
***
Lemma 7.13 (Saito-Shintani5). Let V be a finite-dimensional representation over a field k. Let τ be the
***
Lemma 7.14. Let V be a finite-dimensional vector space with basis {ei }. For any T ∈ End(V ), we have
***
Theorem 7.15. We have b(ψr,µ ) = φr,µ .
***
Definition 7.16. Let
***
Theorem 7.17. We have b(ψr,µ
***
Proposition 7.18. Let r.µ := (µ, . . . , µ) ∈ X∗ (T )r+ . Let fν,x0 ∈ HG(Fx0 ),J be the function fν viewed in the
***
Definition 8.1. Let r.µ = (µ, . . . , µ). We define the following “sheaf” Aµr ∈ Dcb ((X ◦ )r ):
***
Proposition 8.2. The complex Aµr ∈ is locally constant on (X ◦ )r , in the sense that each Ri πA∗
***
Definition 8.3. We define the sheaf Brµ on (X ◦ )r :
***
Proposition 8.4. The complex Brµ ∈ Dcb ((X ◦ )r ) is locally constant on (X ◦ )r , in the sense that each
***
Theorem 8.5 ([Ngo06]). Let τ ∈ Sr be an r-cycle, i.e. hτ i ∼
***
Remark 8.6. For a heuristic that underlies the theorem, coming from a conjectural description of the cohomology of shtukas, see [Ngo06] §2.2, 3.3. The punchline is that after admitting this conjectural description,
***
Definition 8.7. Let
***
Corollary 8.8. For g ∈ π1 ((X ◦ )r , xr ) and h ∈ H we have
***
Definition 9.1. For a Kottwitz triple (γ0 , (γx ), (δx )) write
***
Theorem 9.2. Let T ′ ⊂ |X ◦ |. Assume that Kv := G(Ov ) is spherical at all v ∈ T ′ . Let
***
Theorem 9.3. Let T ′ ⊂ |X ◦ |. Assume that Kv := G(Ov ) is spherical at all v ∈ T ′ . Let
***
Corollary 9.4. Let T ′ ⊂ |X ◦ |. Assume that Kv := G(Ov ) is spherical at all v ∈ T ′ . Let
***
Definition 9.5. For µ = (µ1 , . . . , µn ) ∈ X∗ (GLn ) ∼
***
Theorem 9.6. Let Fx0 be a local field of characteristic p, and Fx0 ,r /Fx0 the unramified extension of degree
